# Comparing `tmp/supervisor-win-4.6.0.tar.gz` & `tmp/supervisor-win-4.7.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist\supervisor-win-4.6.0.tar", last modified: Fri Feb 12 19:04:34 2021, max compression
+gzip compressed data, was "supervisor-win-4.7.0.tar", last modified: Thu Aug  3 15:13:22 2023, max compression
```

## Comparing `supervisor-win-4.6.0.tar` & `supervisor-win-4.7.0.tar`

### file list

```diff
@@ -1,148 +1,162 @@
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/
--rw-rw-rw-   0        0        0     1963 2021-02-12 18:58:34.000000 supervisor-win-4.6.0/CHANGES.rst
--rw-rw-rw-   0        0        0     1459 2019-06-22 02:32:18.000000 supervisor-win-4.6.0/COPYRIGHT.txt
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/docs/
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/docs/.static/
--rw-rw-rw-   0        0        0     6474 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/.static/logo_hi.gif
--rw-rw-rw-   0        0        0      542 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/.static/repoze.css
--rw-rw-rw-   0        0        0    13606 2020-04-30 18:23:04.000000 supervisor-win-4.6.0/docs/api.rst
--rw-rw-rw-   0        0        0     6411 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/conf.py
--rw-rw-rw-   0        0        0    50459 2021-02-12 17:35:20.000000 supervisor-win-4.6.0/docs/configuration.rst
--rw-rw-rw-   0        0        0     3432 2019-08-31 17:03:49.000000 supervisor-win-4.6.0/docs/development.rst
--rw-rw-rw-   0        0        0    32103 2020-04-30 18:23:04.000000 supervisor-win-4.6.0/docs/events.rst
--rw-rw-rw-   0        0        0     1387 2020-04-30 18:23:04.000000 supervisor-win-4.6.0/docs/faq.rst
--rw-rw-rw-   0        0        0      866 2019-08-22 17:59:17.000000 supervisor-win-4.6.0/docs/glossary.rst
--rw-rw-rw-   0        0        0     1137 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/index.rst
--rw-rw-rw-   0        0        0     5342 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/docs/installing.rst
--rw-rw-rw-   0        0        0     6934 2020-08-31 16:02:12.000000 supervisor-win-4.6.0/docs/introduction.rst
--rw-rw-rw-   0        0        0    10063 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/docs/logging.rst
--rw-rw-rw-   0        0        0     2342 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/Makefile
--rw-rw-rw-   0        0        0    10999 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/docs/plugins.rst
--rw-rw-rw-   0        0        0    13066 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/docs/running.rst
--rw-rw-rw-   0        0        0    67259 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/subprocess-transitions.png
--rw-rw-rw-   0        0        0    11337 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/docs/subprocess.rst
--rw-rw-rw-   0        0        0     3247 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/upgrading.rst
--rw-rw-rw-   0        0        0     2152 2020-10-14 13:12:09.000000 supervisor-win-4.6.0/docs/windows.rst
--rw-rw-rw-   0        0        0     2451 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/docs/xmlrpc.rst
--rw-rw-rw-   0        0        0     5258 2019-06-22 02:33:02.000000 supervisor-win-4.6.0/LICENSES.txt
--rw-rw-rw-   0        0        0      424 2019-08-31 16:50:49.000000 supervisor-win-4.6.0/MANIFEST.in
--rw-rw-rw-   0        0        0     6337 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/PKG-INFO
--rw-rw-rw-   0        0        0     2282 2020-10-11 01:20:45.000000 supervisor-win-4.6.0/README.rst
--rw-rw-rw-   0        0        0      191 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/setup.cfg
--rw-rw-rw-   0        0        0     3745 2020-08-13 16:57:53.000000 supervisor-win-4.6.0/setup.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/supervisor/
--rw-rw-rw-   0        0        0     2775 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/childutils.py
--rw-rw-rw-   0        0        0     4677 2020-10-01 15:42:33.000000 supervisor-win-4.6.0/supervisor/compat.py
--rw-rw-rw-   0        0        0      218 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/confecho.py
--rw-rw-rw-   0        0        0    11989 2021-02-12 18:08:09.000000 supervisor-win-4.6.0/supervisor/datatypes.py
--rw-rw-rw-   0        0        0    21913 2021-02-12 17:59:45.000000 supervisor-win-4.6.0/supervisor/dispatchers.py
--rw-rw-rw-   0        0        0     7576 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/events.py
--rw-rw-rw-   0        0        0     5986 2020-11-18 01:35:41.000000 supervisor-win-4.6.0/supervisor/helpers.py
--rw-rw-rw-   0        0        0    33093 2020-04-30 18:15:48.000000 supervisor-win-4.6.0/supervisor/http.py
--rw-rw-rw-   0        0        0     7772 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/http_client.py
--rw-rw-rw-   0        0        0    14144 2021-02-12 18:36:19.000000 supervisor-win-4.6.0/supervisor/loggers.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/supervisor/medusa/
--rw-rw-rw-   0        0        0    11108 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/asynchat_25.py
--rw-rw-rw-   0        0        0    17498 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/asyncore_25.py
--rw-rw-rw-   0        0        0     5005 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/auth_handler.py
--rw-rw-rw-   0        0        0     1564 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/counter.py
--rw-rw-rw-   0        0        0     6409 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/default_handler.py
--rw-rw-rw-   0        0        0    11800 2020-04-30 15:27:31.000000 supervisor-win-4.6.0/supervisor/medusa/filesys.py
--rw-rw-rw-   0        0        0     3348 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/medusa/http_date.py
--rw-rw-rw-   0        0        0    29621 2020-11-13 16:59:47.000000 supervisor-win-4.6.0/supervisor/medusa/http_server.py
--rw-rw-rw-   0        0        0     7285 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/medusa/logger.py
--rw-rw-rw-   0        0        0     9400 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/medusa/producers.py
--rw-rw-rw-   0        0        0        0 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/medusa/text_socket.py
--rw-rw-rw-   0        0        0     1405 2019-08-22 18:44:10.000000 supervisor-win-4.6.0/supervisor/medusa/util.py
--rw-rw-rw-   0        0        0     3231 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/medusa/xmlrpc_handler.py
--rw-rw-rw-   0        0        0      127 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/medusa/__init__.py
--rw-rw-rw-   0        0        0    79011 2021-02-12 18:37:33.000000 supervisor-win-4.6.0/supervisor/options.py
--rw-rw-rw-   0        0        0     1971 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/pidproxy.py
--rw-rw-rw-   0        0        0     8378 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/poller.py
--rw-rw-rw-   0        0        0    46168 2020-11-18 01:13:44.000000 supervisor-win-4.6.0/supervisor/process.py
--rw-rw-rw-   0        0        0    40307 2021-02-12 18:07:24.000000 supervisor-win-4.6.0/supervisor/rpcinterface.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/supervisor/scripts/
--rw-rw-rw-   0        0        0      815 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/scripts/loop_eventgen.py
--rw-rw-rw-   0        0        0      741 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/scripts/loop_listener.py
--rw-rw-rw-   0        0        0      587 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/scripts/sample_commevent.py
--rw-rw-rw-   0        0        0     1342 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/scripts/sample_eventlistener.py
--rw-rw-rw-   0        0        0     1489 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/scripts/sample_exiting_eventlistener.py
--rw-rw-rw-   0        0        0    13851 2021-02-12 16:43:05.000000 supervisor-win-4.6.0/supervisor/services.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:33.000000 supervisor-win-4.6.0/supervisor/skel/
--rw-rw-rw-   0        0        0    10228 2020-04-30 18:27:59.000000 supervisor-win-4.6.0/supervisor/skel/sample.conf
--rw-rw-rw-   0        0        0     3255 2020-07-03 20:53:33.000000 supervisor-win-4.6.0/supervisor/socket_manager.py
--rw-rw-rw-   0        0        0     1886 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/supervisor/states.py
--rw-rw-rw-   0        0        0    56718 2020-08-21 01:20:53.000000 supervisor-win-4.6.0/supervisor/supervisorctl.py
--rw-rw-rw-   0        0        0    16866 2020-08-20 14:18:27.000000 supervisor-win-4.6.0/supervisor/supervisord.py
--rw-rw-rw-   0        0        0    48395 2019-10-11 19:42:31.000000 supervisor-win-4.6.0/supervisor/templating.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/tests/
--rw-rw-rw-   0        0        0    38847 2020-08-31 16:02:12.000000 supervisor-win-4.6.0/supervisor/tests/base.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/
--rw-rw-rw-   0        0        0      258 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/donothing.conf
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/example/
--rw-rw-rw-   0        0        0       39 2019-06-21 17:59:23.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/example/included.conf
--rw-rw-rw-   0        0        0       81 2019-06-21 17:59:23.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/include.conf
--rw-rw-rw-   0        0        0      453 2019-06-24 17:48:25.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1054.conf
--rw-rw-rw-   0        0        0      179 2019-08-22 18:25:30.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1224.conf
--rw-rw-rw-   0        0        0      674 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1231a.conf
--rw-rw-rw-   0        0        0      674 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1231b.conf
--rw-rw-rw-   0        0        0      674 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1231c.conf
--rw-rw-rw-   0        0        0      433 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1298.conf
--rw-rw-rw-   0        0        0      848 2019-06-24 17:23:02.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-565.conf
--rw-rw-rw-   0        0        0      431 2019-06-24 17:23:02.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-638.conf
--rw-rw-rw-   0        0        0      219 2019-06-24 17:23:02.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-663.conf
--rw-rw-rw-   0        0        0      477 2019-06-24 17:23:02.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-664.conf
--rw-rw-rw-   0        0        0      375 2019-06-24 17:23:03.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-835.conf
--rw-rw-rw-   0        0        0      477 2019-06-24 17:23:03.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/issue-836.conf
--rw-rw-rw-   0        0        0      973 2019-06-22 14:57:53.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/listener.py
--rw-rw-rw-   0        0        0      197 2020-03-19 14:07:34.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/spew.py
--rw-rw-rw-   0        0        0      508 2019-08-22 18:36:27.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/test_1231.py
--rw-rw-rw-   0        0        0      198 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/fixtures/unkillable_spew.py
--rw-rw-rw-   0        0        0     5648 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_childutils.py
--rw-rw-rw-   0        0        0      576 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_confecho.py
--rw-rw-rw-   0        0        0    20536 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/supervisor/tests/test_datatypes.py
--rw-rw-rw-   0        0        0    55568 2021-02-12 18:39:08.000000 supervisor-win-4.6.0/supervisor/tests/test_dispatchers.py
--rw-rw-rw-   0        0        0    10944 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/tests/test_end_to_end.py
--rw-rw-rw-   0        0        0    21447 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_events.py
--rw-rw-rw-   0        0        0    26146 2020-08-14 15:01:05.000000 supervisor-win-4.6.0/supervisor/tests/test_http.py
--rw-rw-rw-   0        0        0    13812 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_http_client.py
--rw-rw-rw-   0        0        0    21657 2020-08-20 14:36:06.000000 supervisor-win-4.6.0/supervisor/tests/test_loggers.py
--rw-rw-rw-   0        0        0   136019 2021-02-12 17:35:19.000000 supervisor-win-4.6.0/supervisor/tests/test_options.py
--rw-rw-rw-   0        0        0    17178 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_poller.py
--rw-rw-rw-   0        0        0    93909 2020-07-02 17:35:26.000000 supervisor-win-4.6.0/supervisor/tests/test_process.py
--rw-rw-rw-   0        0        0   108190 2021-02-12 18:25:28.000000 supervisor-win-4.6.0/supervisor/tests/test_rpcinterfaces.py
--rw-rw-rw-   0        0        0     8225 2020-08-31 16:03:04.000000 supervisor-win-4.6.0/supervisor/tests/test_socket_manager.py
--rw-rw-rw-   0        0        0     2416 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_states.py
--rw-rw-rw-   0        0        0    84288 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_supervisorctl.py
--rw-rw-rw-   0        0        0    34595 2020-08-14 14:41:29.000000 supervisor-win-4.6.0/supervisor/tests/test_supervisord.py
--rw-rw-rw-   0        0        0    65466 2019-10-11 19:42:31.000000 supervisor-win-4.6.0/supervisor/tests/test_templating.py
--rw-rw-rw-   0        0        0     7381 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_web.py
--rw-rw-rw-   0        0        0    36892 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/tests/test_xmlrpc.py
--rw-rw-rw-   0        0        0       21 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/tests/__init__.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/ui/
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/ui/images/
--rw-rw-rw-   0        0        0     1702 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/icon.png
--rw-rw-rw-   0        0        0       54 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/rule.gif
--rw-rw-rw-   0        0        0     1176 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/state0.gif
--rw-rw-rw-   0        0        0     1123 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/state1.gif
--rw-rw-rw-   0        0        0     1122 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/state2.gif
--rw-rw-rw-   0        0        0     1137 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/state3.gif
--rw-rw-rw-   0        0        0     3148 2017-09-28 15:40:32.000000 supervisor-win-4.6.0/supervisor/ui/images/supervisor.gif
--rw-rw-rw-   0        0        0     2435 2020-03-19 14:01:20.000000 supervisor-win-4.6.0/supervisor/ui/status.html
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor/ui/stylesheets/
--rw-rw-rw-   0        0        0     3645 2020-04-30 18:23:04.000000 supervisor-win-4.6.0/supervisor/ui/stylesheets/supervisor.css
--rw-rw-rw-   0        0        0      657 2019-10-11 19:42:31.000000 supervisor-win-4.6.0/supervisor/ui/tail.html
--rw-rw-rw-   0        0        0      313 2020-04-30 15:27:32.000000 supervisor-win-4.6.0/supervisor/utils.py
--rw-rw-rw-   0        0        0        5 2021-02-12 18:58:54.000000 supervisor-win-4.6.0/supervisor/version.txt
--rw-rw-rw-   0        0        0    24256 2020-04-30 18:23:44.000000 supervisor-win-4.6.0/supervisor/web.py
--rw-rw-rw-   0        0        0    22400 2020-08-12 15:29:17.000000 supervisor-win-4.6.0/supervisor/xmlrpc.py
--rw-rw-rw-   0        0        0       21 2019-06-03 13:25:45.000000 supervisor-win-4.6.0/supervisor/__init__.py
-drwxrwxrwx   0        0        0        0 2021-02-12 19:04:34.000000 supervisor-win-4.6.0/supervisor_win.egg-info/
--rw-rw-rw-   0        0        0        1 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0      238 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/entry_points.txt
--rw-rw-rw-   0        0        0        2 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/not-zip-safe
--rw-rw-rw-   0        0        0     6337 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0       42 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/requires.txt
--rw-rw-rw-   0        0        0     3870 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0       11 2021-02-12 19:04:32.000000 supervisor-win-4.6.0/supervisor_win.egg-info/top_level.txt
--rw-rw-rw-   0        0        0     1122 2020-08-14 15:01:05.000000 supervisor-win-4.6.0/tox.ini
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.625010 supervisor-win-4.7.0/
+-rw-rw-rw-   0        0        0     2232 2023-08-03 15:00:11.000000 supervisor-win-4.7.0/CHANGES.rst
+-rw-rw-rw-   0        0        0      250 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/COPYRIGHT.txt
+-rw-rw-rw-   0        0        0     5258 2019-06-22 02:33:02.000000 supervisor-win-4.7.0/LICENSES.txt
+-rw-rw-rw-   0        0        0      424 2019-08-31 16:50:49.000000 supervisor-win-4.7.0/MANIFEST.in
+-rw-rw-rw-   0        0        0     6282 2023-08-03 15:13:22.625010 supervisor-win-4.7.0/PKG-INFO
+-rw-rw-rw-   0        0        0     2474 2023-08-03 14:04:09.000000 supervisor-win-4.7.0/README.rst
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:21.997338 supervisor-win-4.7.0/docs/
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.014327 supervisor-win-4.7.0/docs/.static/
+-rw-rw-rw-   0        0        0     6474 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/.static/logo_hi.gif
+-rw-rw-rw-   0        0        0      542 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/.static/repoze.css
+-rw-rw-rw-   0        0        0     2342 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/Makefile
+-rw-rw-rw-   0        0        0    13646 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/docs/api.rst
+-rw-rw-rw-   0        0        0     6191 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/docs/conf.py
+-rw-rw-rw-   0        0        0    50712 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/docs/configuration.rst
+-rw-rw-rw-   0        0        0     3432 2019-08-31 17:03:49.000000 supervisor-win-4.7.0/docs/development.rst
+-rw-rw-rw-   0        0        0    32132 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/docs/events.rst
+-rw-rw-rw-   0        0        0     1387 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/docs/faq.rst
+-rw-rw-rw-   0        0        0      866 2019-08-22 17:59:17.000000 supervisor-win-4.7.0/docs/glossary.rst
+-rw-rw-rw-   0        0        0     1137 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/index.rst
+-rw-rw-rw-   0        0        0     5273 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/docs/installing.rst
+-rw-rw-rw-   0        0        0     6935 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/docs/introduction.rst
+-rw-rw-rw-   0        0        0    10063 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/docs/logging.rst
+-rw-rw-rw-   0        0        0    11561 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/docs/plugins.rst
+-rw-rw-rw-   0        0        0    13066 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/docs/running.rst
+-rw-rw-rw-   0        0        0    67259 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/subprocess-transitions.png
+-rw-rw-rw-   0        0        0    11338 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/docs/subprocess.rst
+-rw-rw-rw-   0        0        0     3247 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/upgrading.rst
+-rw-rw-rw-   0        0        0     2152 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/docs/windows.rst
+-rw-rw-rw-   0        0        0     2451 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/docs/xmlrpc.rst
+-rw-rw-rw-   0        0        0      108 2023-08-03 15:13:22.631009 supervisor-win-4.7.0/setup.cfg
+-rw-rw-rw-   0        0        0     4378 2023-08-03 14:14:05.000000 supervisor-win-4.7.0/setup.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.122470 supervisor-win-4.7.0/supervisor/
+-rw-rw-rw-   0        0        0       21 2019-06-03 13:25:45.000000 supervisor-win-4.7.0/supervisor/__init__.py
+-rw-rw-rw-   0        0        0     2775 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/childutils.py
+-rw-rw-rw-   0        0        0     6673 2023-08-03 14:07:41.000000 supervisor-win-4.7.0/supervisor/compat.py
+-rw-rw-rw-   0        0        0      279 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/confecho.py
+-rw-rw-rw-   0        0        0    11809 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/datatypes.py
+-rw-rw-rw-   0        0        0    21802 2023-08-03 14:08:31.000000 supervisor-win-4.7.0/supervisor/dispatchers.py
+-rw-rw-rw-   0        0        0     7576 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/events.py
+-rw-rw-rw-   0        0        0    34382 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/http.py
+-rw-rw-rw-   0        0        0     7772 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/http_client.py
+-rw-rw-rw-   0        0        0    14144 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/loggers.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.164251 supervisor-win-4.7.0/supervisor/medusa/
+-rw-rw-rw-   0        0        0      127 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/medusa/__init__.py
+-rw-rw-rw-   0        0        0    11167 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/asynchat_25.py
+-rw-rw-rw-   0        0        0    17498 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/asyncore_25.py
+-rw-rw-rw-   0        0        0     5005 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/auth_handler.py
+-rw-rw-rw-   0        0        0     1564 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/counter.py
+-rw-rw-rw-   0        0        0     6409 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/default_handler.py
+-rw-rw-rw-   0        0        0    11800 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/filesys.py
+-rw-rw-rw-   0        0        0     3348 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/medusa/http_date.py
+-rw-rw-rw-   0        0        0    29742 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/http_server.py
+-rw-rw-rw-   0        0        0     7285 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/logger.py
+-rw-rw-rw-   0        0        0     9421 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/medusa/producers.py
+-rw-rw-rw-   0        0        0        0 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/text_socket.py
+-rw-rw-rw-   0        0        0     1405 2019-08-22 18:44:10.000000 supervisor-win-4.7.0/supervisor/medusa/util.py
+-rw-rw-rw-   0        0        0     3231 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/medusa/xmlrpc_handler.py
+-rw-rw-rw-   0        0        0    79871 2023-08-03 14:12:48.000000 supervisor-win-4.7.0/supervisor/options.py
+-rw-rw-rw-   0        0        0     2093 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/pidproxy.py
+-rw-rw-rw-   0        0        0     8378 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/poller.py
+-rw-rw-rw-   0        0        0    48073 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/process.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.177017 supervisor-win-4.7.0/supervisor/psutil/
+-rw-rw-rw-   0        0        0     2625 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/psutil/__init__.py
+-rw-rw-rw-   0        0        0     7628 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/psutil/subproc.py
+-rw-rw-rw-   0        0        0    41520 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/rpcinterface.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.211588 supervisor-win-4.7.0/supervisor/scripts/
+-rw-rw-rw-   0        0        0      815 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/scripts/loop_eventgen.py
+-rw-rw-rw-   0        0        0      741 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/scripts/loop_listener.py
+-rw-rw-rw-   0        0        0      587 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/scripts/sample_commevent.py
+-rw-rw-rw-   0        0        0     1342 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/scripts/sample_eventlistener.py
+-rw-rw-rw-   0        0        0     1489 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/scripts/sample_exiting_eventlistener.py
+-rw-rw-rw-   0        0        0    14951 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/services.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.213592 supervisor-win-4.7.0/supervisor/skel/
+-rw-rw-rw-   0        0        0    10230 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/skel/sample.conf
+-rw-rw-rw-   0        0        0     3255 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/socket_manager.py
+-rw-rw-rw-   0        0        0     1886 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/states.py
+-rw-rw-rw-   0        0        0    56923 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/supervisorctl.py
+-rw-rw-rw-   0        0        0    17490 2023-08-03 14:14:31.000000 supervisor-win-4.7.0/supervisor/supervisord.py
+-rw-rw-rw-   0        0        0    48394 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/supervisor/templating.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.263337 supervisor-win-4.7.0/supervisor/tests/
+-rw-rw-rw-   0        0        0       21 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/tests/__init__.py
+-rw-rw-rw-   0        0        0    38775 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/tests/base.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.505188 supervisor-win-4.7.0/supervisor/tests/fixtures/
+-rw-rw-rw-   0        0        0      258 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/donothing.conf
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.506511 supervisor-win-4.7.0/supervisor/tests/fixtures/example/
+-rw-rw-rw-   0        0        0       83 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/example/included.conf
+-rw-rw-rw-   0        0        0       81 2019-06-21 17:59:23.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/include.conf
+-rw-rw-rw-   0        0        0      453 2019-06-24 17:48:25.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1054.conf
+-rw-rw-rw-   0        0        0      482 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1170a.conf
+-rw-rw-rw-   0        0        0      528 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1170b.conf
+-rw-rw-rw-   0        0        0      572 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1170c.conf
+-rw-rw-rw-   0        0        0      179 2019-08-22 18:25:30.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1224.conf
+-rw-rw-rw-   0        0        0      674 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1231a.conf
+-rw-rw-rw-   0        0        0      674 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1231b.conf
+-rw-rw-rw-   0        0        0      674 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1231c.conf
+-rw-rw-rw-   0        0        0      433 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1298.conf
+-rw-rw-rw-   0        0        0      518 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1483a.conf
+-rw-rw-rw-   0        0        0      547 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1483b.conf
+-rw-rw-rw-   0        0        0      547 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1483c.conf
+-rw-rw-rw-   0        0        0      418 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-291a.conf
+-rw-rw-rw-   0        0        0      764 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-550.conf
+-rw-rw-rw-   0        0        0      848 2019-06-24 17:23:02.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-565.conf
+-rw-rw-rw-   0        0        0      431 2019-06-24 17:23:02.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-638.conf
+-rw-rw-rw-   0        0        0      219 2019-06-24 17:23:02.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-663.conf
+-rw-rw-rw-   0        0        0      477 2019-06-24 17:23:02.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-664.conf
+-rw-rw-rw-   0        0        0     1265 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-733.conf
+-rw-rw-rw-   0        0        0      375 2019-06-24 17:23:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-835.conf
+-rw-rw-rw-   0        0        0      477 2019-06-24 17:23:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-836.conf
+-rw-rw-rw-   0        0        0      743 2022-04-06 21:39:03.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/issue-986.conf
+-rw-rw-rw-   0        0        0      973 2019-06-22 14:57:53.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/listener.py
+-rw-rw-rw-   0        0        0       88 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/print_env.py
+-rw-rw-rw-   0        0        0      197 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/spew.py
+-rw-rw-rw-   0        0        0      508 2019-08-22 18:36:27.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/test_1231.py
+-rw-rw-rw-   0        0        0      198 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/tests/fixtures/unkillable_spew.py
+-rw-rw-rw-   0        0        0     5490 2023-08-03 14:14:51.000000 supervisor-win-4.7.0/supervisor/tests/test_childutils.py
+-rw-rw-rw-   0        0        0      406 2023-08-03 14:15:02.000000 supervisor-win-4.7.0/supervisor/tests/test_confecho.py
+-rw-rw-rw-   0        0        0    20947 2023-08-03 14:06:08.000000 supervisor-win-4.7.0/supervisor/tests/test_datatypes.py
+-rw-rw-rw-   0        0        0    55562 2023-08-03 14:15:13.000000 supervisor-win-4.7.0/supervisor/tests/test_dispatchers.py
+-rw-rw-rw-   0        0        0    22377 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/supervisor/tests/test_end_to_end.py
+-rw-rw-rw-   0        0        0    21275 2023-08-03 14:15:21.000000 supervisor-win-4.7.0/supervisor/tests/test_events.py
+-rw-rw-rw-   0        0        0    26016 2023-08-03 14:18:29.000000 supervisor-win-4.7.0/supervisor/tests/test_http.py
+-rw-rw-rw-   0        0        0    13812 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/tests/test_http_client.py
+-rw-rw-rw-   0        0        0    21499 2023-08-03 14:18:40.000000 supervisor-win-4.7.0/supervisor/tests/test_loggers.py
+-rw-rw-rw-   0        0        0   143811 2023-08-03 14:38:53.000000 supervisor-win-4.7.0/supervisor/tests/test_options.py
+-rw-rw-rw-   0        0        0      609 2021-05-31 19:47:39.000000 supervisor-win-4.7.0/supervisor/tests/test_pidproxy.py
+-rw-rw-rw-   0        0        0    17008 2023-08-03 14:21:05.000000 supervisor-win-4.7.0/supervisor/tests/test_poller.py
+-rw-rw-rw-   0        0        0   100903 2023-08-03 14:21:32.000000 supervisor-win-4.7.0/supervisor/tests/test_process.py
+-rw-rw-rw-   0        0        0   109583 2023-08-03 14:22:13.000000 supervisor-win-4.7.0/supervisor/tests/test_rpcinterfaces.py
+-rw-rw-rw-   0        0        0     7777 2023-08-03 14:23:42.000000 supervisor-win-4.7.0/supervisor/tests/test_socket_manager.py
+-rw-rw-rw-   0        0        0     2246 2023-08-03 14:23:53.000000 supervisor-win-4.7.0/supervisor/tests/test_states.py
+-rw-rw-rw-   0        0        0    84517 2023-08-03 14:25:33.000000 supervisor-win-4.7.0/supervisor/tests/test_supervisorctl.py
+-rw-rw-rw-   0        0        0    34652 2023-08-03 14:25:43.000000 supervisor-win-4.7.0/supervisor/tests/test_supervisord.py
+-rw-rw-rw-   0        0        0    65273 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/supervisor/tests/test_templating.py
+-rw-rw-rw-   0        0        0     7211 2023-08-03 14:25:56.000000 supervisor-win-4.7.0/supervisor/tests/test_web.py
+-rw-rw-rw-   0        0        0    36892 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/tests/test_xmlrpc.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.510530 supervisor-win-4.7.0/supervisor/ui/
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.577114 supervisor-win-4.7.0/supervisor/ui/images/
+-rw-rw-rw-   0        0        0     1702 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/icon.png
+-rw-rw-rw-   0        0        0       54 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/rule.gif
+-rw-rw-rw-   0        0        0     1176 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/state0.gif
+-rw-rw-rw-   0        0        0     1123 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/state1.gif
+-rw-rw-rw-   0        0        0     1122 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/state2.gif
+-rw-rw-rw-   0        0        0     1137 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/state3.gif
+-rw-rw-rw-   0        0        0     3148 2017-09-28 15:40:32.000000 supervisor-win-4.7.0/supervisor/ui/images/supervisor.gif
+-rw-rw-rw-   0        0        0     2435 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/supervisor/ui/status.html
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.599505 supervisor-win-4.7.0/supervisor/ui/stylesheets/
+-rw-rw-rw-   0        0        0     3645 2021-05-31 19:21:35.000000 supervisor-win-4.7.0/supervisor/ui/stylesheets/supervisor.css
+-rw-rw-rw-   0        0        0      657 2019-10-11 19:42:31.000000 supervisor-win-4.7.0/supervisor/ui/tail.html
+-rw-rw-rw-   0        0        0      313 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/utils.py
+-rw-rw-rw-   0        0        0        5 2023-08-03 15:02:53.000000 supervisor-win-4.7.0/supervisor/version.txt
+-rw-rw-rw-   0        0        0    24296 2023-08-03 14:04:10.000000 supervisor-win-4.7.0/supervisor/web.py
+-rw-rw-rw-   0        0        0    22405 2023-08-03 14:27:00.000000 supervisor-win-4.7.0/supervisor/xmlrpc.py
+drwxrwxrwx   0        0        0        0 2023-08-03 15:13:22.624021 supervisor-win-4.7.0/supervisor_win.egg-info/
+-rw-rw-rw-   0        0        0     6282 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0     4403 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0      237 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/entry_points.txt
+-rw-rw-rw-   0        0        0        2 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/not-zip-safe
+-rw-rw-rw-   0        0        0       85 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/requires.txt
+-rw-rw-rw-   0        0        0       11 2023-08-03 15:13:21.000000 supervisor-win-4.7.0/supervisor_win.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0     1243 2023-08-03 14:06:07.000000 supervisor-win-4.7.0/tox.ini
```

### filetype from file(1)

```diff
@@ -1 +1 @@
-POSIX tar archive (GNU)
+POSIX tar archive
```

### Comparing `supervisor-win-4.6.0/CHANGES.rst` & `supervisor-win-4.7.0/CHANGES.rst`

 * *Files 8% similar despite different names*

```diff
@@ -1,7 +1,14 @@
+4.7.0
+-----------------------------
+- Merge supervisor unix changes from 4.3.0.dev0 (master).
+- Upgrading from pywin32 to python3 (issues/43).
+- Fix installation of services (issues/42).
+- https://github.com/alexsilva/supervisor/issues?q=is%3Aissue+is%3Aclosed
+
 4.6.0
 -----------------------------
 - Merge supervisor unix changes from 4.2.2.dev0 (master).
 - Improvements in the execution of the supervisor as a windows service.
 - Support for sending signals for windows application.
 - Improvements to service logs.
```

### Comparing `supervisor-win-4.6.0/docs/.static/logo_hi.gif` & `supervisor-win-4.7.0/docs/.static/logo_hi.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/.static/repoze.css` & `supervisor-win-4.7.0/docs/.static/repoze.css`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/api.rst` & `supervisor-win-4.7.0/docs/api.rst`

 * *Files 1% similar despite different names*

```diff
@@ -317,14 +317,16 @@
 
     .. automethod:: getAllProcessInfo
 
         Each element contains a struct, and this struct contains the exact
         same elements as the struct returned by ``getProcessInfo``. If the process
         table is empty, an empty array is returned.
 
+    .. automethod:: getAllConfigInfo
+
     .. automethod:: startProcess
 
     .. automethod:: startAllProcesses
 
     .. automethod:: startProcessGroup
 
     .. automethod:: stopProcess
```

### Comparing `supervisor-win-4.6.0/docs/conf.py` & `supervisor-win-4.7.0/docs/conf.py`

 * *Files 6% similar despite different names*

```diff
@@ -18,22 +18,14 @@
 # If your extensions are in another directory, add it here. If the
 # directory is relative to the documentation root, use os.path.abspath to
 # make it absolute, like shown here.
 #sys.path.append(os.path.abspath('some/directory'))
 
 parent = os.path.dirname(os.path.dirname(__file__))
 sys.path.append(os.path.abspath(parent))
-wd = os.getcwd()
-os.chdir(parent)
-os.system('%s setup.py test -q' % sys.executable)
-os.chdir(wd)
-
-for item in os.listdir(parent):
-    if item.endswith('.egg'):
-        sys.path.append(os.path.join(parent, item))
 
 version_txt = os.path.join(parent, 'supervisor/version.txt')
 supervisor_version = open(version_txt).read().strip()
 
 # General configuration
 # ---------------------
```

### Comparing `supervisor-win-4.6.0/docs/configuration.rst` & `supervisor-win-4.7.0/docs/configuration.rst`

 * *Files 2% similar despite different names*

```diff
@@ -317,15 +317,15 @@
 
 ``loglevel``
 
   The logging level, dictating what is written to the supervisord
   activity log.  One of ``critical``, ``error``, ``warn``, ``info``,
   ``debug``, ``trace``, or ``blather``.  Note that at log level
   ``debug``, the supervisord log file will record the stderr/stdout
-  output of its child processes and extended info info about process
+  output of its child processes and extended info about process
   state changes, which is useful for debugging a process which isn't
   starting properly.  See also: :ref:`activity_log_levels`.
 
   *Default*:  info
 
   *Required*:  No.
 
@@ -471,16 +471,16 @@
   *Required*:  No.
 
   *Introduced*: 3.0
 
 ``environment``
 
   A list of key/value pairs in the form ``KEY="val",KEY2="val2"`` that
-  will be placed in the :program:`supervisord` process' environment
-  (and as a result in all of its child process' environments).  This
+  will be placed in the environment of all child processes.  This does
+  not change the environment of :program:`supervisord` itself.  This
   option can include the value ``%(here)s``, which expands to the
   directory in which the supervisord configuration file was found.
   Values containing non-alphanumeric characters should be quoted
   (e.g. ``KEY="val:123",KEY2="val,456"``).  Otherwise, quoting the
   values is optional but recommended.  To escape percent characters,
   simply use two. (e.g. ``URI="/first%%20name"``) **Note** that
   subprocesses will inherit the environment variables of the shell
@@ -721,15 +721,15 @@
   *Required*:  No.
 
   *Introduced*: 3.0
 
 ``numprocs_start``
 
   An integer offset that is used to compute the number at which
-  ``numprocs`` starts.
+  ``process_num`` starts.
 
   *Default*: 0
 
   *Required*:  No.
 
   *Introduced*: 3.0
 
@@ -843,16 +843,17 @@
   .. note::
 
       In Supervisor versions prior to 4.0, the default was ``0,2``.  In
       Supervisor 4.0, the default was changed to ``0``.
 
 ``stopsignal``
 
-  The signal used to kill the program when a stop is requested.  This
-  can be any of TERM, HUP, INT, QUIT, KILL, USR1, or USR2.
+  The signal used to kill the program when a stop is requested.  This can be
+  specified using the signal's name or its number.  It is normally one of:
+  ``TERM``, ``HUP``, ``INT``, ``QUIT``, ``KILL``, ``USR1``, or ``USR2``.
 
   *Default*: TERM
 
   *Required*:  No.
 
   *Introduced*: 3.0
 
@@ -1209,20 +1210,14 @@
 
 The :file:`supervisord.conf` file may contain a section named
 ``[include]``.  If the configuration file contains an ``[include]``
 section, it must contain a single key named "files".  The values in
 this key specify other configuration files to be included within the
 configuration.
 
-.. note::
-
-    The ``[include]`` section is processed only by ``supervisord``.  It is
-    ignored by ``supervisorctl``.
-
-
 ``[include]`` Section Values
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 ``files``
 
   A space-separated sequence of file globs.  Each file glob may be
   absolute or relative.  If the file glob is relative, it is
@@ -1239,14 +1234,18 @@
 
   *Required*:  Yes.
 
   *Introduced*: 3.0
 
   *Changed*: 3.3.0.  Added support for the ``host_node_name`` expansion.
 
+  *Changed*: 4.3.0.  Added support to :program:`supervisorctl` for reading
+  files specified in the ``[include]`` section.  In previous versions,
+  the ``[include]`` section was only supported by :program:`supervisord`.
+
 ``[include]`` Section Example
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 .. code-block:: ini
 
    [include]
    files = /an/absolute/filename.conf /an/absolute/*.conf foo.conf config??.conf
@@ -1505,17 +1504,17 @@
 
   A comma-separated list of event type names that this listener is
   "interested" in receiving notifications for (see
   :ref:`event_types` for a list of valid event type names).
 
 ``result_handler``
 
-  A `pkg_resources entry point string
-  <http://peak.telecommunity.com/DevCenter/PkgResources>`_ that
-  resolves to a Python callable.  The default value is
+  An `entry point object reference
+  <https://packaging.python.org/en/latest/specifications/entry-points/#data-model>`_
+  string that resolves to a Python callable.  The default value is
   ``supervisor.dispatchers:default_handler``.  Specifying an alternate
   result handler is a very uncommon thing to need to do, and as a
   result, how to create one is not documented.
 
 Consult :ref:`programx_section` for other allowable keys, delta the
 above constraints and additions.
 
@@ -1558,16 +1557,16 @@
 ``[rpcinterface:x]`` Section Settings
 -------------------------------------
 
 Adding ``rpcinterface:x`` settings in the configuration file is only
 useful for people who wish to extend supervisor with additional custom
 behavior.
 
-In the sample config file, there is a section which is named
-``[rpcinterface:supervisor]``.  By default it looks like the
+In the sample config file (see :ref:`create_config`), there is a section
+which is named ``[rpcinterface:supervisor]``.  By default it looks like the
 following.
 
 .. code-block:: ini
 
    [rpcinterface:supervisor]
    supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
 
@@ -1608,15 +1607,15 @@
    retries = 1
 
 ``[rpcinterface:x]`` Section Values
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
 ``supervisor.rpcinterface_factory``
 
-  ``pkg_resources`` "entry point" dotted name to your RPC interface's
+  ``entry point object reference`` dotted name to your RPC interface's
   factory function.
 
   *Default*: N/A
 
   *Required*:  No.
 
   *Introduced*: 3.0
```

### Comparing `supervisor-win-4.6.0/docs/development.rst` & `supervisor-win-4.7.0/docs/development.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/events.rst` & `supervisor-win-4.7.0/docs/events.rst`

 * *Files 0% similar despite different names*

```diff
@@ -89,17 +89,17 @@
    command=my_custom_listener.py
    events=PROCESS_STATE,TICK_60
 
 .. note::
 
    An advanced feature, specifying an alternate "result handler" for a
    pool, can be specified via the ``result_handler`` parameter of an
-   ``[eventlistener:x]`` section in the form of a `pkg_resources
-   <http://peak.telecommunity.com/DevCenter/PkgResources>`_ "entry
-   point" string.  The default result handler is
+   ``[eventlistener:x]`` section in the form of an `entry point object reference
+   <https://packaging.python.org/en/latest/specifications/entry-points/#data-model>`_
+   string.  The default result handler is
    ``supervisord.dispatchers:default_handler``.  Creating an alternate
    result handler is not currently documented.
 
 When an event notification is sent by supervisor, all event listener
 pools which are subscribed to receive events for the event's type
 (filtered by the ``events`` value in the eventlistener
 section) will be found.  One of the listeners in each listener pool
@@ -173,15 +173,15 @@
             for functional testing and detecting event
             ordering anomalies.
 pool        The name of the event listener pool which       myeventpool
             generated this event.
 poolserial  An integer assigned to each event by the        30
             eventlistener pool which it is being sent
             from.  No two events generated by the same
-            eventlister pool during the lifetime of a
+            eventlistener pool during the lifetime of a
             :program:`supervisord` process will have the
             same ``poolserial`` number.  This value can
             be used to detect event ordering anomalies.
 eventname   The specific event type name (see               TICK_5
             :ref:`event_types`)
 len         An integer indicating the number of bytes in    22
             the event payload, aka the ``PAYLOAD_LENGTH``
@@ -371,15 +371,15 @@
 Event types that may be subscribed to by event listeners are
 predefined by supervisor and fall into several major categories,
 including "process state change", "process communication", and
 "supervisor state change" events. Below are tables describing
 these event types.
 
 In the below list, we indicate that some event types have a "body"
-which is a a *token set*.  A token set consists of a set of charaters
+which is a a *token set*.  A token set consists of a set of characters
 with space-separated tokens.  Each token represents a key-value pair.
 The key and value are separated by a colon.  For example:
 
 .. code-block:: text
 
    processname:cat groupname:cat from_state:STOPPED
 
@@ -893,8 +893,7 @@
 *Subtype Of*: ``PROCESS_GROUP``
 
 *Body Description*: This body is a token set with just a groupname key/value.
 
 .. code-block:: text
 
    groupname:cat
-
```

### Comparing `supervisor-win-4.6.0/docs/faq.rst` & `supervisor-win-4.7.0/docs/faq.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/glossary.rst` & `supervisor-win-4.7.0/docs/glossary.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/index.rst` & `supervisor-win-4.7.0/docs/index.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/installing.rst` & `supervisor-win-4.7.0/docs/installing.rst`

 * *Files 3% similar despite different names*

```diff
@@ -44,19 +44,16 @@
 
 If the system that you want to install Supervisor to does not have
 Internet access, you'll need to perform installation slightly
 differently.  Since both ``pip`` and ``python setup.py
 install`` depend on internet access to perform downloads of dependent
 software, neither will work on machines without internet access until
 dependencies are installed.  To install to a machine which is not
-internet-connected, obtain the following dependencies on a machine
-which is internet-connected:
-
-- setuptools (latest) from `https://pypi.org/pypi/setuptools/
-  <https://pypi.org/pypi/setuptools/>`_.
+internet-connected, obtain the dependencies listed in ``setup.py``
+using a machine which is internet-connected.
 
 Copy these files to removable media and put them on the target
 machine.  Install each onto the target machine as per its
 instructions.  This typically just means unpacking each file and
 invoking ``python setup.py install`` in the unpacked directory.
 Finally, run supervisor's ``python setup.py install``.
 
@@ -97,14 +94,16 @@
     had different behavior than previous versions.  On Ubuntu 10.04, 12.04, and
     14.04, installing the package will configure the system to start
     ``supervisord`` when the system boots.  On Ubuntu 16.04, this was not done
     by the initial release of the package.  The package was fixed later.  See
     `Ubuntu Bug #1594740 <https://bugs.launchpad.net/ubuntu/+source/supervisor/+bug/1594740>`_
     for more information.
 
+.. _create_config:
+
 Creating a Configuration File
 -----------------------------
 
 Once the Supervisor installation has completed, run
 ``echo_supervisord_conf``.  This will print a "sample" Supervisor
 configuration file to your terminal's stdout.
```

### Comparing `supervisor-win-4.6.0/docs/introduction.rst` & `supervisor-win-4.7.0/docs/introduction.rst`

 * *Files 0% similar despite different names*

```diff
@@ -130,15 +130,15 @@
   :program:`supervisord` processes (one at a time), get status on the
   subprocesses controlled by, stop and start subprocesses of, and get lists of
   running processes of a :program:`supervisord`.
 
   The command-line client talks to the server across a UNIX domain
   socket or an internet (TCP) socket.  The server can assert that the
   user of a client should present authentication credentials before it
-  allows him to perform commands.  The client process typically uses
+  allows them to perform commands.  The client process typically uses
   the same configuration file as the server but any configuration file
   with a ``[supervisorctl]`` section in it will work.
 
 Web Server
 
   A (sparse) web user interface with functionality comparable to
   :program:`supervisorctl` may be accessed via a browser if you start
```

### Comparing `supervisor-win-4.6.0/docs/logging.rst` & `supervisor-win-4.7.0/docs/logging.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/Makefile` & `supervisor-win-4.7.0/docs/Makefile`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/plugins.rst` & `supervisor-win-4.7.0/docs/plugins.rst`

 * *Files 5% similar despite different names*

```diff
@@ -45,14 +45,19 @@
     web server. It communicates with each supervisor through a specialized supervisor
     event-listener based on `zerorpc <http://www.zerorpc.io>`_.
 
 `Dart <https://github.com/plockaby/dart>`_
     Web-based dashboard and command line tool written in Python using PostgreSQL
     with a REST API, event monitoring, and configuration management.
 
+`Polyvisor <https://github.com/poly-laboratory/poly-visor>`_
+    Web-based dashboard written in Python using `flask <http://flask.pocoo.org>`_ web server.
+    Frontend based on `Svelte <https://svelte.dev/>`_ result in lightweighted packages. Communicate via supervisor's event-listener.
+    Providing system resource management via visualized charts & easy to config processes configs via web interface.
+
 Third Party Plugins and Libraries for Supervisor
 ------------------------------------------------
 
 These are plugins and libraries that add new functionality to Supervisor.
 These also includes various event listeners.
 
 `superlance <https://pypi.org/pypi/superlance/>`_
@@ -180,7 +185,9 @@
     applications.  It also redirects ``stdout`` and ``stderr`` from processes to log files
     (rather than the Docker default per-container JSON files).
 `superslacker <https://github.com/MTSolutions/superslacker>`_
     Send Supervisor event notifications to `Slack <https://slack.com>`_.
 `supervisor-alert <https://github.com/rahiel/supervisor-alert>`_
     Send event notifications over `Telegram <https://telegram.org>`_ or to an
     arbitrary command.
+`supervisor-discord <https://github.com/chaos-a/supervisor-discord>`_
+    Send event notifications to `Discord <https://discord.com>`_ via webhooks.
```

### Comparing `supervisor-win-4.6.0/docs/running.rst` & `supervisor-win-4.7.0/docs/running.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/subprocess-transitions.png` & `supervisor-win-4.7.0/docs/subprocess-transitions.png`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/subprocess.rst` & `supervisor-win-4.7.0/docs/subprocess.rst`

 * *Files 0% similar despite different names*

```diff
@@ -244,15 +244,15 @@
 
 .. figure:: subprocess-transitions.png
    :alt: Subprocess State Transition Graph
 
    Subprocess State Transition Graph
 
 A process is in the ``STOPPED`` state if it has been stopped
-adminstratively or if it has never been started.
+administratively or if it has never been started.
 
 When an autorestarting process is in the ``BACKOFF`` state, it will be
 automatically restarted by :program:`supervisord`.  It will switch
 between ``STARTING`` and ``BACKOFF`` states until it becomes evident
 that it cannot be started because the number of ``startretries`` has
 exceeded the maximum, at which point it will transition to the
 ``FATAL`` state.
```

### Comparing `supervisor-win-4.6.0/docs/upgrading.rst` & `supervisor-win-4.7.0/docs/upgrading.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/windows.rst` & `supervisor-win-4.7.0/docs/windows.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/docs/xmlrpc.rst` & `supervisor-win-4.7.0/docs/xmlrpc.rst`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/LICENSES.txt` & `supervisor-win-4.7.0/LICENSES.txt`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/README.rst` & `supervisor-win-4.7.0/README.rst`

 * *Files 25% similar despite different names*

```diff
@@ -12,14 +12,26 @@
 
 Supervisor has been tested (Python 2.7/3.7 [32/64 bit]) and is known to run on Windows `10` / `Server 2012`.
 
 * New processes are created by the subprocess standard lib.
 * Some specific features of OS Linux have been disabled and others were adapted to the Windows OS.
 * The process control (supervisorctl) works and management processes correctly, as well as control via web!
 
+How to install ?
+----------------
+Installation can be done via pip
+
+``python -m pip install supervisor-win``
+
+* Note that the package name is different from the unix version.
+ 
+It is also possible to install the development version
+
+``python -m pip install git+https://github.com/alexsilva/supervisor@windows``
+
 Install as Windows service
 --------------------------
 To install supervisor as a windows service run the command
 
 ``python -m supervisor.services install -c {system-path}\\supervisord.conf``
 
 Or install from the utility script (``{PythonHome}\\Scripts`` directory must be in the system path)
@@ -38,23 +50,20 @@
 installation and configuration documentation.
 
 Windows specific documentation can be found `here <https://github.com/alexsilva/supervisor/blob/windows/docs/windows.rst>`_.
 
 Mailing list, Reporting Bugs, and Viewing the Source Repository
 ---------------------------------------------------------------
 
-You may subscribe to the `Supervisor-users mailing list
-<http://lists.supervisord.org/mailman/listinfo/supervisor-users>`_.
-
 Please report bugs in the `Github issue tracker
-<https://github.com/alexsilva/supervisor/issues>`_.  .
+<https://github.com/alexsilva/supervisor/issues>`_.
 
 You can view the source repository for supervisor via
 `https://github.com/alexsilva/supervisor
-<https://github.com/alexsilva/supervisor>`_.
+<https://github.com/alexsilva/supervisor>`_
 
 Contributing
 ------------
 If you want to help with the development send a  `Pull Requests
 <https://github.com/alexsilva/supervisor/pulls>`_
```

### Comparing `supervisor-win-4.6.0/setup.py` & `supervisor-win-4.7.0/setup.py`

 * *Files 15% similar despite different names*

```diff
@@ -18,30 +18,39 @@
 py_version = sys.version_info[:2]
 
 if py_version < (2, 7):
     raise RuntimeError('On Python 2, Supervisor requires Python 2.7 or later')
 elif (3, 0) < py_version < (3, 4):
     raise RuntimeError('On Python 3, Supervisor requires Python 3.4 or later')
 
-requires = ['pywin32==228']
-tests_require = []
-if py_version < (3, 3):
-    tests_require.append('mock<4.0.0.dev0')
+# setuptools is required as a runtime dependency only on
+# Python < 3.8.  See the comments in supervisor/compat.py.
+requires = [
+    "setuptools; python_version < '3.8'",
+]
 
+if (2, 7) <= py_version < (3, 0):
+    requires.append("pywin32==228")
+else:
+    requires.append("pywin32<=306,>228")
+
+tests_require = []
 testing_extras = tests_require + [
     'pytest',
     'pytest-cov',
     ]
 
 from setuptools import setup, find_packages
 here = os.path.abspath(os.path.dirname(__file__))
 try:
-    README = open(os.path.join(here, 'README.rst')).read()
-    CHANGES = open(os.path.join(here, 'CHANGES.rst')).read()
-except:
+    with open(os.path.join(here, 'README.rst'), 'r') as f:
+        README = f.read()
+    with open(os.path.join(here, 'CHANGES.rst'), 'r') as f:
+        CHANGES = f.read()
+except Exception:
     README = """\
 Supervisor is a client/server system that allows its users to
 control a number of processes on WINDOWS operating systems. """
     CHANGES = ''
 
 CLASSIFIERS = [
     'Development Status :: 5 - Production/Stable',
@@ -57,24 +66,33 @@
     "Programming Language :: Python :: 2.7",
     "Programming Language :: Python :: 3",
     "Programming Language :: Python :: 3.4",
     "Programming Language :: Python :: 3.5",
     "Programming Language :: Python :: 3.6",
     "Programming Language :: Python :: 3.7",
     "Programming Language :: Python :: 3.8",
+    "Programming Language :: Python :: 3.9",
+    "Programming Language :: Python :: 3.10",
+    "Programming Language :: Python :: 3.11",
 ]
 
 version_txt = os.path.join(here, 'supervisor/version.txt')
-supervisor_version = open(version_txt).read().strip()
+with open(version_txt, 'r') as f:
+    supervisor_version = f.read().strip()
 
 dist = setup(
     name='supervisor-win',
     version=supervisor_version,
     license='BSD-derived (http://www.repoze.org/LICENSE.txt)',
     url='http://supervisord.org/',
+    project_urls={
+        'Changelog': 'http://supervisord.org/changelog',
+        'Documentation': 'http://supervisord.org',
+        'Issue Tracker': 'https://github.com/Supervisor/supervisor',
+    },
     description="A system for controlling process state under WINDOWS",
     long_description=README + '\n\n' + CHANGES,
     classifiers=CLASSIFIERS,
     # WINDOWS
     author="Alex",
     author_email="alex@fabricadigital.com.br",
     maintainer="Alex",
@@ -84,15 +102,15 @@
     # author_email="chrism@plope.com",
     # maintainer="Chris McDonough",
     # maintainer_email="chrism@plope.com",
     packages=find_packages(),
     install_requires=requires,
     extras_require={
         'testing': testing_extras,
-        },
+    },
     tests_require=tests_require,
     include_package_data=True,
     zip_safe=False,
     test_suite="supervisor.tests",
     entry_points={
         'console_scripts': [
             'supervisord = supervisor.supervisord:main',
```

### Comparing `supervisor-win-4.6.0/supervisor/childutils.py` & `supervisor-win-4.7.0/supervisor/childutils.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/datatypes.py` & `supervisor-win-4.7.0/supervisor/datatypes.py`

 * *Files 2% similar despite different names*

```diff
@@ -153,15 +153,15 @@
 port_number = RangeCheckedConversion(integer, min=1, max=0xffff).__call__
 
 
 def inet_address(s):
     # returns (host, port) tuple
     host = ''
     if ":" in s:
-        host, s = s.split(":", 1)
+        host, s = s.rsplit(":", 1)
         if not s:
             raise ValueError("no port number specified in %r" % s)
         port = port_number(s)
         host = host.lower()
     else:
         try:
             port = port_number(s)
@@ -339,18 +339,15 @@
 
 byte_size = SuffixMultiplier({'kb': 1024,
                               'mb': 1024 * 1024,
                               'gb': 1024 * 1024 * long(1024), })
 
 
 def url(value):
-    # earlier Python 2.6 urlparse (2.6.4 and under) can't parse unix:// URLs,
-    # later ones can but we need to straddle
-    uri = value.replace('unix://', 'http://', 1).strip()
-    scheme, netloc, path, params, query, fragment = urlparse.urlparse(uri)
+    scheme, netloc, path, params, query, fragment = urlparse.urlparse(value)
     if scheme and (netloc or path):
         return value
     raise ValueError("value %r is not a URL" % value)
 
 
 # all valid signal numbers
 sig_pattern = re.compile("CTRL|SIG[^_]")
```

### Comparing `supervisor-win-4.6.0/supervisor/dispatchers.py` & `supervisor-win-4.7.0/supervisor/dispatchers.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,29 +1,21 @@
 import errno
-
-import warnings
+from supervisor.medusa.asynchat_25 import find_prefix_at_end
+from supervisor.medusa.asyncore_25 import compact_traceback
 
 from supervisor import loggers
 from supervisor.compat import as_string, as_bytes
 from supervisor.events import EventRejectedEvent
 from supervisor.events import ProcessLogStderrEvent
 from supervisor.events import ProcessLogStdoutEvent
 from supervisor.events import notify
-from supervisor.medusa.asyncore_25 import compact_traceback
 from supervisor.states import EventListenerStates
 from supervisor.states import getEventListenerStateDescription
 
 
-def find_prefix_at_end(haystack, needle):
-    l = len(needle) - 1
-    while l and not haystack.endswith(needle[:l]):
-        l -= 1
-    return l
-
-
 class PDispatcher(object):
     """ Asyncore dispatcher for mainloop, representing a process channel
     (stdin, stdout, or stderr).  This class is abstract. """
 
     closed = False  # True if close() has been called
 
     def __init__(self, process, channel, fd):
```

### Comparing `supervisor-win-4.6.0/supervisor/events.py` & `supervisor-win-4.7.0/supervisor/events.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/http.py` & `supervisor-win-4.7.0/supervisor/http.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,24 +1,23 @@
 import os
 import stat
 import time
 import sys
-import codecs
-import errno
-import socket
 import socket
 import errno
 import weakref
 import traceback
+import codecs
 
 from supervisor import loggers
 from supervisor.compat import urllib
 from supervisor.compat import sha1
 from supervisor.compat import as_bytes
 from supervisor.compat import as_string
+from supervisor.medusa.asynchat_25 import fifo
 from supervisor.medusa import asyncore_25 as asyncore
 from supervisor.medusa import http_date
 from supervisor.medusa import http_server
 from supervisor.medusa import producers
 from supervisor.medusa import filesys
 from supervisor.medusa import default_handler
 
@@ -353,14 +352,41 @@
                 self.last_writable_check = now
                 return True
             else:
                 return False
 
         return http_server.http_channel.writable(self)
 
+    def handle_write(self):
+        if self.closing:
+            # consumes the entire producer_fifo, after an abrupt closing of the connection.
+            self.refill_buffer()
+            if not len(self.producer_fifo):
+                self.close()
+            return
+        return http_server.http_channel.handle_write(self)
+
+    def handle_read(self):
+        if self.closing:
+            return
+        return http_server.http_channel.handle_read(self)
+
+    def close(self):
+        if len(self.producer_fifo):
+            items = []
+            for p in self.producer_fifo:
+                callback = getattr(p, "callback", None)
+                if callback and getattr(callback, "muticall", False):
+                    items.append(p)
+            self.producer_fifo = fifo(items)
+        if not len(self.producer_fifo):
+            return http_server.http_channel.close(self)
+        elif not self.closing:
+            self.closing = True
+
     def refill_buffer(self):
         """ Implement deferreds """
         while True:
             if len(self.producer_fifo):
                 p = self.producer_fifo.first()
                 # a 'None' in the producer fifo is a sentinel,
                 # telling us to close the channel.
@@ -424,17 +450,17 @@
             header = http_server.join_headers(lines[1:])
 
             # unquote path if necessary (thanks to Skip Montanaro for pointing
             # out that we must unquote in piecemeal fashion).
             rpath, rquery = urllib.splitquery(uri)
             if '%' in rpath:
                 if rquery:
-                    uri = urllib.unquote(rpath) + '?' + rquery
+                    uri = http_server.unquote(rpath) + '?' + rquery
                 else:
-                    uri = urllib.unquote(rpath)
+                    uri = http_server.unquote(rpath)
 
             r = deferring_http_request(self, request, command, uri, version,
                                        header)
             self.request_counter.increment()
             self.server.total_requests.increment()
 
             if command is None:
@@ -675,15 +701,15 @@
             self.close()
             # file descriptor was closed
             return b''
         bytes_added = newsz - self.sz
         try:
             if bytes_added < 0:
                 self.sz = 0
-                return "==> File truncated <==\n"
+                return b"==> File truncated <==\n"
             if bytes_added > 0:
                 self.file.seek(-bytes_added, os.SEEK_END)
                 bytes = self.file.read(bytes_added)
                 self.sz = newsz
                 return as_bytes(bytes, getattr(self.file, 'encoding', 'utf-8'))
         finally:
             self.close()
@@ -769,18 +795,19 @@
         if process is None:
             request.error(404)  # not found
             return
 
         logfile = getattr(process.config, '%s_logfile' % channel, None)
 
         if logfile is None or not os.path.exists(logfile):
-            # XXX problematic: processes that don't start won't have a log
-            # file and we probably don't want to go into fatal state if we try
-            # to read the log of a process that did not start.
-            request.error(410)  # gone
+            # we return 404 because no logfile is a temporary condition.
+            # if the process has never been started, no logfile will exist
+            # on disk.  a logfile of None is also a temporary condition,
+            # since the config file can be reloaded.
+            request.error(404) # not found
             return
 
         mtime = os.stat(logfile)[stat.ST_MTIME]
         request['Last-Modified'] = http_date.build_http_date(mtime)
         request['Content-Type'] = 'text/plain;charset=utf-8'
         # the lack of a Content-Length header makes the outputter
         # send a 'Transfer-Encoding: chunked' response
@@ -807,15 +834,18 @@
         if request.command != 'GET':
             request.error(400)  # bad request
             return
 
         logfile = self.supervisord.options.logfile
 
         if logfile is None or not os.path.exists(logfile):
-            request.error(410)  # gone
+            # we return 404 because no logfile is a temporary condition.
+            # even if a log file of None is configured, the config file
+            # may be reloaded, and the new config may have a logfile.
+            request.error(404) # not found
             return
 
         mtime = os.stat(logfile)[stat.ST_MTIME]
         request['Last-Modified'] = http_date.build_http_date(mtime)
         request['Content-Type'] = 'text/plain;charset=utf-8'
         # the lack of a Content-Length header makes the outputter
         # send a 'Transfer-Encoding: chunked' response
```

### Comparing `supervisor-win-4.6.0/supervisor/http_client.py` & `supervisor-win-4.7.0/supervisor/http_client.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-# this code based on Daniel Krech's RDFLib HTTP client code (see rdflib.net)
+# this code based on Daniel Krech's RDFLib HTTP client code (see rdflib.dev)
 
 import re
 import sys
 import socket
 
 from supervisor.compat import as_bytes
 from supervisor.compat import as_string
```

### Comparing `supervisor-win-4.6.0/supervisor/loggers.py` & `supervisor-win-4.7.0/supervisor/loggers.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/asynchat_25.py` & `supervisor-win-4.7.0/supervisor/medusa/asynchat_25.py`

 * *Files 1% similar despite different names*

```diff
@@ -256,14 +256,17 @@
 class fifo(object):
     def __init__(self, list=None):
         if not list:
             self.list = []
         else:
             self.list = list
 
+    def __iter__(self):
+        return iter(self.list)
+
     def __len__(self):
         return len(self.list)
 
     def is_empty(self):
         return self.list == []
 
     def first(self):
```

### Comparing `supervisor-win-4.6.0/supervisor/medusa/asyncore_25.py` & `supervisor-win-4.7.0/supervisor/medusa/asyncore_25.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/auth_handler.py` & `supervisor-win-4.7.0/supervisor/medusa/auth_handler.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/counter.py` & `supervisor-win-4.7.0/supervisor/medusa/counter.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/default_handler.py` & `supervisor-win-4.7.0/supervisor/medusa/default_handler.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/filesys.py` & `supervisor-win-4.7.0/supervisor/medusa/filesys.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/http_date.py` & `supervisor-win-4.7.0/supervisor/medusa/http_date.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/http_server.py` & `supervisor-win-4.7.0/supervisor/medusa/http_server.py`

 * *Files 0% similar despite different names*

```diff
@@ -19,14 +19,18 @@
 import supervisor.medusa.asynchat_25 as asynchat
 
 # medusa modules
 import supervisor.medusa.http_date as http_date
 import supervisor.medusa.producers as producers
 import supervisor.medusa.logger as logger
 from supervisor.medusa.counter import counter
+try:
+    from urllib import unquote, splitquery
+except ImportError:
+    from urllib.parse import unquote, splitquery
 
 from supervisor.compat import urllib
 
 VERSION_STRING = RCS_ID.split()[2]
 
 # ===========================================================================
 #                                                       Request Object
```

### Comparing `supervisor-win-4.6.0/supervisor/medusa/logger.py` & `supervisor-win-4.7.0/supervisor/medusa/logger.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/producers.py` & `supervisor-win-4.7.0/supervisor/medusa/producers.py`

 * *Files 4% similar despite different names*

```diff
@@ -7,15 +7,15 @@
 Each producer implements a particular feature:  They can be combined
 in various ways to get interesting and useful behaviors.
 
 For example, you can feed dynamically-produced output into the compressing
 producer, then wrap this with the 'chunked' transfer-encoding producer.
 """
 
-from asynchat import find_prefix_at_end
+from supervisor.medusa.asynchat_25 import find_prefix_at_end
 from supervisor.compat import as_bytes
 
 
 class simple_producer(object):
     """producer for a string"""
     def __init__ (self, data, buffer_size=1024):
         self.data = data
```

### Comparing `supervisor-win-4.6.0/supervisor/medusa/util.py` & `supervisor-win-4.7.0/supervisor/medusa/util.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/medusa/xmlrpc_handler.py` & `supervisor-win-4.7.0/supervisor/medusa/xmlrpc_handler.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/options.py` & `supervisor-win-4.7.0/supervisor/options.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,31 +1,30 @@
 import codecs
 import errno
 import getopt
-import glob
 import os
-import platform
 import re
 import signal
 import socket
 import stat
 import sys
 import tempfile
 import threading
+import glob
+import platform
 import warnings
 
-import pkg_resources
-
-from supervisor import helpers
+from supervisor import psutil
 from supervisor.compat import PY2
 from supervisor.compat import ConfigParser
 from supervisor.compat import as_bytes, as_string
 from supervisor.compat import xmlrpclib
 from supervisor.compat import StringIO
 from supervisor.compat import basestring
+from supervisor.compat import import_spec
 
 from supervisor.utils import raise_not_implemented
 from supervisor.medusa import asyncore_25 as asyncore
 
 from supervisor.datatypes import process_or_group_name
 from supervisor.datatypes import boolean
 from supervisor.datatypes import integer
@@ -102,15 +101,19 @@
         self.options_map = {}
         self.default_map = {}
         self.required_map = {}
         self.environ_map = {}
         self.attr_priorities = {}
         self.require_configfile = require_configfile
         self.add(None, None, "h", "help", self.help)
+        self.add(None, None, "?", None, self.help)
         self.add("configfile", None, "c:", "configuration=")
+        self.parse_criticals = []
+        self.parse_warnings = []
+        self.parse_infos = []
 
         here = os.path.dirname(os.path.dirname(sys.argv[0]))
         searchpaths = [os.path.join(here, 'etc', 'supervisord.conf'),
                        os.path.join(here, 'supervisord.conf'),
                        'supervisord.conf',
                        'etc/supervisord.conf',
                        '/etc/supervisord.conf',
@@ -373,47 +376,82 @@
             name = section.split(':', 1)[1]
             factory_spec = parser.saneget(section, factory_key, None)
             if factory_spec is None:
                 raise ValueError('section [%s] does not specify a %s' %
                                  (section, factory_key))
             try:
                 factory = self.import_spec(factory_spec)
-            except ImportError:
+            except (AttributeError, ImportError):
                 raise ValueError('%s cannot be resolved within [%s]' % (
                     factory_spec, section))
 
             extras = {}
             for k in parser.options(section):
                 if k != factory_key:
                     extras[k] = parser.saneget(section, k)
             factories.append((name, factory, extras))
 
         return factories
 
     def import_spec(self, spec):
-        ep = pkg_resources.EntryPoint.parse("x=" + spec)
-        if hasattr(ep, 'resolve'):
-            # this is available on setuptools >= 10.2
-            return ep.resolve()
-        else:
-            # this causes a DeprecationWarning on setuptools >= 11.3
-            return ep.load(False)
+        """On failure, raises either AttributeError or ImportError"""
+        return import_spec(spec)
+
+    def read_include_config(self, fp, parser, expansions):
+        if parser.has_section('include'):
+            parser.expand_here(self.here)
+            if not parser.has_option('include', 'files'):
+                raise ValueError(".ini file has [include] section, but no "
+                "files setting")
+            files = parser.get('include', 'files')
+            files = expand(files, expansions, 'include.files')
+            files = files.split()
+            if hasattr(fp, 'name'):
+                base = os.path.dirname(os.path.abspath(fp.name))
+            else:
+                base = '.'
+            for pattern in files:
+                pattern = os.path.join(base, pattern)
+                filenames = glob.glob(pattern)
+                if not filenames:
+                    self.parse_warnings.append(
+                        'No file matches via include "%s"' % pattern)
+                    continue
+                for filename in sorted(filenames):
+                    self.parse_infos.append(
+                        'Included extra file "%s" during parsing' % filename)
+                    try:
+                        parser.read(filename)
+                    except ConfigParser.ParsingError as why:
+                        raise ValueError(str(why).replace(os.sep * 2, os.sep))
+                    else:
+                        parser.expand_here(
+                            os.path.abspath(os.path.dirname(filename))
+                        )
+
+    def _log_parsing_messages(self, logger):
+        for msg in self.parse_criticals:
+            logger.critical(msg)
+        for msg in self.parse_warnings:
+            logger.warn(msg)
+        for msg in self.parse_infos:
+            logger.info(msg)
 
 
 class ServerOptions(Options):
     user = None
+    pwd = None
     sockchown = None
     sockchmod = None
     logfile = None
     loglevel = None
     pidfile = None
     passwdfile = None
     nodaemon = None
     silent = None
-    environment = None
     serverurl = None
     httpservers = ()
     unlink_pidfile = False
     unlink_socketfiles = False
     mood = states.SupervisorStates.RUNNING
     job_handler = None
 
@@ -423,14 +461,15 @@
         self.configroot.supervisord = Dummy()
         self.add(None, None, "v", "version", self.version)
         self.add("nodaemon", "supervisord.nodaemon", "n", "nodaemon", flag=1,
                  default=0)
         self.add("delaysecs", "supervisord.delaysecs", "p",
                  "delaysecs", default=0.5)
         self.add("user", "supervisord.user", "u:", "user=")
+        self.add("pwd", "supervisord.pwd", "w:", "pwd=")
         self.add("umask", "supervisord.umask", "m:", "umask=",
                  octal_type, default='022')
         self.add("directory", "supervisord.directory", "d:", "directory=",
                  existing_directory)
         self.add("logfile", "supervisord.logfile", "l:", "logfile=",
                  existing_dirpath, default="supervisord.log")
         self.add("logfile_maxbytes", "supervisord.logfile_maxbytes",
@@ -457,17 +496,14 @@
         self.add("profile_options", "supervisord.profile_options",
                  "", "profile_options=", profile_options, default=None)
         self.add("silent", "supervisord.silent",
                  "s", "silent", flag=1, default=0)
         # subprocess history by pid
         self.pidhistory = {}
         self.process_group_configs = []
-        self.parse_criticals = []
-        self.parse_warnings = []
-        self.parse_infos = []
         self.signal_receiver = SignalReceiver()
         self.poller = poller.Poller(self)
 
     def version(self, dummy):
         """Print version to stdout and exit(0).
         """
         self.stdout.write('%s\n' % VERSION)
@@ -524,16 +560,14 @@
                 if not host:
                     host = 'localhost'
                 self.serverurl = 'http://%s:%s' % (host, port)
 
         # self.serverurl may still be None if no servers at all are
         # configured in the config file
 
-        self.identifier = section.identifier
-
     def process_config(self, do_usage=True):
         Options.process_config(self, do_usage=do_usage)
 
         new = self.configroot.supervisord.process_group_configs
         self.process_group_configs = new
 
     def read_config(self, fp):
@@ -568,44 +602,16 @@
             if need_close:
                 fp.close()
 
         host_node_name = platform.node()
         expansions = {'here': self.here,
                       'host_node_name':host_node_name}
         expansions.update(self.environ_expansions)
-        if parser.has_section('include'):
-            parser.expand_here(self.here)
-            if not parser.has_option('include', 'files'):
-                raise ValueError(".ini file has [include] section, but no "
-                                 "files setting")
-            files = parser.get('include', 'files')
-            files = expand(files, expansions, 'include.files')
-            files = files.split()
-            if hasattr(fp, 'name'):
-                base = os.path.dirname(os.path.abspath(fp.name))
-            else:
-                base = '.'
-            for pattern in files:
-                pattern = os.path.join(base, pattern)
-                filenames = glob.glob(pattern)
-                if not filenames:
-                    self.parse_warnings.append(
-                        'No file matches via include "%s"' % pattern)
-                    continue
-                for filename in sorted(filenames):
-                    self.parse_infos.append(
-                        'Included extra file "%s" during parsing' % filename)
-                    try:
-                        parser.read(filename)
-                    except ConfigParser.ParsingError as why:
-                        raise ValueError(str(why))
-                    else:
-                        parser.expand_here(
-                            os.path.abspath(os.path.dirname(filename))
-                        )
+
+        self.read_include_config(fp, parser, expansions)
 
         sections = parser.sections()
         if 'supervisord' not in sections:
             raise ValueError('.ini file does not include supervisord section')
 
         common_expansions = {'here': self.here}
 
@@ -621,14 +627,15 @@
         directory = get('directory', None)
         if directory is None:
             section.directory = None
         else:
             section.directory = existing_directory(directory)
 
         section.user = get('user', None)
+        section.pwd = get('pwd', None)
         section.umask = octal_type(get('umask', '022'))
         section.logfile = existing_dirpath(get('logfile', 'supervisord.log'))
         section.logfile_maxbytes = byte_size(get('logfile_maxbytes', '50MB'))
         section.logfile_backups = integer(get('logfile_backups', 10))
         section.loglevel = logging_level(get('loglevel', 'info'))
         section.pidfile = existing_dirpath(get('pidfile', 'supervisord.pid'))
         section.identifier = get('identifier', 'supervisor')
@@ -640,14 +647,19 @@
         section.childlogdir = existing_directory(get('childlogdir', tempdir))
         section.nocleanup = boolean(get('nocleanup', 'false'))
         section.strip_ansi = boolean(get('strip_ansi', 'false'))
 
         environ_str = get('environment', '')
         environ_str = expand(environ_str, expansions, 'environment')
         section.environment = dict_of_key_value_pairs(environ_str)
+
+        # extend expansions for global from [supervisord] environment definition
+        for k, v in section.environment.items():
+            self.environ_expansions['ENV_%s' % k ] = v
+
         # Process rpcinterface plugins before groups to allow custom events to
         # be registered.
         section.rpcinterface_factories = self.get_plugins(
             parser,
             'supervisor.rpcinterface_factory',
             'rpcinterface:'
         )
@@ -729,15 +741,15 @@
                 raise ValueError('[%s] section sets invalid buffer_size (%d)' %
                     (section, buffer_size))
 
             result_handler = get(section, 'result_handler',
                                  'supervisor.dispatchers:default_handler')
             try:
                 result_handler = self.import_spec(result_handler)
-            except ImportError:
+            except (AttributeError, ImportError):
                 raise ValueError('%s cannot be resolved within [%s]' % (
                     result_handler, section))
 
             pool_event_names = [x.upper() for x in
                                 list_of_strings(get(section, 'events', ''))]
             pool_event_names = set(pool_event_names)
             if not pool_event_names:
@@ -793,18 +805,16 @@
                 FastCGIGroupConfig(self, program_name, priority, processes,
                                    socket_config)
             )
 
         groups.sort()
         return groups
 
-    def parse_fcgi_socket(self, sock,
-                          proc_uid=None,
-                          socket_owner=None,
-                          socket_mode=None):
+    def parse_fcgi_socket(self, sock, proc_uid=None, socket_owner=None, socket_mode=None,
+                          socket_backlog=None):
         if socket_owner is not None or socket_mode is not None:
             raise ValueError("socket_owner and socket_mode params should"
                              + " only be used with a Unix domain socket")
 
         m = re.match(r'tcp://([^\s:]+):(\d+)$', sock)
         if m:
             host = m.group(1)
@@ -875,16 +885,17 @@
         stdout_events = boolean(get(section, 'stdout_events_enabled', 'false'))
         stderr_cmaxbytes = byte_size(get(section, 'stderr_capture_maxbytes', '0'))
         stderr_events = boolean(get(section, 'stderr_events_enabled', 'false'))
         serverurl = get(section, 'serverurl', None)
         if serverurl and serverurl.strip().upper() == 'AUTO':
             serverurl = None
 
-        # find uid from "user" option
-        # user = get(section, 'user', None)
+        # user logon options
+        user = get(section, 'user', None)
+        pwd=get(section, 'pwd', None)
 
         umask = get(section, 'umask', None)
         if umask is not None:
             umask = octal_type(umask)
 
         process_name = process_or_group_name(
             get(section, 'process_name', '%(program_name)s', do_expand=False))
@@ -906,14 +917,18 @@
             expansions = common_expansions
             expansions.update({'process_num': process_num, 'numprocs': numprocs})
             expansions.update(self.environ_expansions)
 
             environment = dict_of_key_value_pairs(
                 expand(environment_str, expansions, 'environment'))
 
+            # extend expansions for process from [program:x] environment definition
+            for k, v in environment.items():
+                expansions['ENV_%s' % k] = v
+
             directory = get(section, 'directory', None)
             if directory is not None:
                 directory = directory.strip("\"'")
 
             logfiles = {}
 
             for k in ('stdout', 'stderr'):
@@ -964,14 +979,16 @@
             command = get(section, 'command', None, expansions=expansions)
             if command is None:
                 raise ValueError('program section %s does not specify a command' % section)
 
             pconfig = klass(
                 self,
                 name=expand(process_name, expansions, 'process_name'),
+                user=user,
+                pwd=pwd,
                 command=command,
                 directory=directory,
                 umask=umask,
                 priority=priority,
                 autostart=autostart,
                 autorestart=autorestart,
                 startsecs=startsecs,
@@ -1168,18 +1185,18 @@
                     self.remove(pathname)
                 except (OSError, IOError):
                     self.logger.warn('Failed to clean up \'%r\'' % pathname)
 
     def get_socket_map(self):
         return asyncore.socket_map
 
-    @raise_not_implemented
     def cleanup_fds(self):
-        """dummy"""
-        pass
+        # try to close any leaked file descriptors (for reload)
+        start = 5
+        os.closerange(start, self.minfds)
 
     def kill(self, pid, sig):
         try:
             subprocess = self.pidhistory[pid]
         except KeyError:
             subprocess = self.pidhistory[abs(pid)]
         proc_name = as_string(subprocess.config.name)
@@ -1189,21 +1206,21 @@
                 self.logger.info(loutput)
 
     def set_uid_or_exit(self):
         if self.uid is None:
             if False and os.getuid() == 0:
                 return 'Supervisor running as root (no user in config file)'
             return None
-        msg = self.dropPrivileges(self.uid)
+        msg = self.drop_privileges(self.uid)
         if msg is None:
             return 'Set uid to user %s' % self.uid
         return msg
 
     @raise_not_implemented
-    def dropPrivileges(self, user):
+    def drop_privileges(self, user):
         """dummy"""
         pass
 
     def register_pid(self, pid, sproc):
         self.pidhistory[pid] = sproc
 
     def get_pid_history(self, pid):
@@ -1238,20 +1255,15 @@
             self.logger,
             self.logfile,
             format,
             rotating=not not self.logfile_maxbytes,
             maxbytes=self.logfile_maxbytes,
             backups=self.logfile_backups,
         )
-        for msg in self.parse_criticals:
-            self.logger.critical(msg)
-        for msg in self.parse_warnings:
-            self.logger.warn(msg)
-        for msg in self.parse_infos:
-            self.logger.info(msg)
+        self._log_parsing_messages(self.logger)
 
     def make_http_servers(self, supervisord):
         from supervisor.http import make_http_servers
 
         return make_http_servers(self, supervisord)
 
     def close_fd(self, fd):
@@ -1269,14 +1281,24 @@
 
     def setpgrp(self):
         return None  # os.setpgrp()
 
     def stat(self, filename):
         return os.stat(filename)
 
+    def write(self, fd, data):
+        try:
+            return os.write(fd if type(fd) is int else fd.fileno(), as_bytes(data))
+        except OSError:
+            if fd == 1 and self.stdout is None or not self.stdout.isatty():
+                self.logger.info(data.rstrip())
+            elif fd == 2 and self.stderr is None or not self.stderr.isatty():
+                self.logger.error(data.rstrip())
+            return 0
+
     @raise_not_implemented
     def execve(self, filename, argv, **kwargs):
         """dummy"""
         pass
 
     def mktempfile(self, suffix, prefix, dir):
         # set os._urandomfd as a hack around bad file descriptor bug
@@ -1325,66 +1347,42 @@
 
     def reopenlogs(self):
         self.logger.info('supervisord logreopen')
         for handler in self.logger.handlers:
             if hasattr(handler, 'reopen'):
                 handler.reopen()
 
-    def read_stream(self, stream):
-        """
-        The work of this method is to read the data stream of a process, but without blocking
-        the work of the supervisor. A buffer of data is being read in a thread and when the total
-        data is reached is given in return for one of the Dispatcher objects responsible.
-        """
-        return stream.read()
-
-    def write_stream(self, stream, buffer):
-        return stream.write(buffer)
-
     def readfd(self, fd):
         try:
             data = os.read(fd, 2 << 16) # 128K
         except OSError as why:
             if why.args[0] not in (errno.EWOULDBLOCK, errno.EBADF, errno.EINTR):
                 raise
             data = b''
         return data
 
-    def write(self, fd, data):
-        try:
-            return os.write(fd if type(fd) is int else fd.fileno(), as_bytes(data))
-        except OSError:
-            if fd == 1 and self.stdout is None or not self.stdout.isatty():
-                self.logger.info(data.rstrip())
-            elif fd == 2 and self.stderr is None or not self.stderr.isatty():
-                self.logger.error(data.rstrip())
-            return 0
-
-    def process_environment(self):
-        os.environ.update(self.environment or {})
-
     def chdir(self, dir):
         """dummy interface only"""
         pass
 
     def make_pipes(self, pid, stderr=True):
         """ Create pipes for parent to child stdin/stdout/stderr
         communications.  Open fd in non-blocking mode so we can read them
         in the mainloop without blocking.  If stderr is False, don't
         create a pipe for stderr. """
         try:
             process = self.pidhistory[pid].process
         except KeyError:
             raise IOError('pid (%s)' % pid)
         pipes = {
-            'stdin': helpers.InputStream(process.stdin),
-            'stdout': helpers.OutputStream(process.stdout)
+            'stdin': psutil.InputStream(process.stdin),
+            'stdout': psutil.OutputStream(process.stdout)
         }
         if stderr:
-            pipes['stderr'] = helpers.OutputStream(process.stderr)
+            pipes['stderr'] = psutil.OutputStream(process.stderr)
         else:
             pipes['stderr'] = None
         return pipes
 
     def close_parent_pipes(self, pipes):
         for fdname in ('stdin', 'stdout', 'stderr'):
             fd = pipes.get(fdname)
@@ -1393,14 +1391,25 @@
 
     def close_child_pipes(self, pipes):
         for fdname in ('child_stdin', 'child_stdout', 'child_stderr'):
             fd = pipes.get(fdname)
             if fd is not None:
                 self.close_fd(fd)
 
+    def read_stream(self, stream):
+        """
+        The work of this method is to read the data stream of a process, but without blocking
+        the work of the supervisor. A buffer of data is being read in a thread and when the total
+        data is reached is given in return for one of the Dispatcher objects responsible.
+        """
+        return stream.read()
+
+    def write_stream(self, stream, buffer):
+        return stream.write(buffer)
+
 
 class ClientOptions(Options):
     positional_args_allowed = 1
 
     interactive = None
     prompt = None
     serverurl = None
@@ -1440,14 +1449,19 @@
                  handler=float, default=socket.getdefaulttimeout())
 
     def realize(self, *arg, **kw):
         Options.realize(self, *arg, **kw)
         if not self.args:
             self.interactive = 1
 
+        format = '%(levelname)s: %(message)s\n'
+        logger = loggers.getLogger()
+        loggers.handle_stdout(logger, format)
+        self._log_parsing_messages(logger)
+
     def read_config(self, fp):
         section = self.configroot.supervisorctl
         need_close = False
         if not hasattr(fp, 'read'):
             self.here = os.path.dirname(normalize_path(fp))
             if not self.exists(fp):
                 raise ValueError("could not find config file %s" % fp)
@@ -1460,16 +1474,19 @@
         parser = UnhosedConfigParser()
         parser.expansions = self.environ_expansions
         parser.mysection = 'supervisorctl'
         try:
             parser.read_file(fp)
         except AttributeError:
             parser.readfp(fp)
+
         if need_close:
             fp.close()
+        self.read_include_config(fp, parser, parser.expansions)
+
         sections = parser.sections()
         if not 'supervisorctl' in sections:
             raise ValueError('.ini file does not include supervisorctl section')
         serverurl = parser.getdefault('serverurl', 'http://localhost:9001',
             expansions={'here': self.here})
         if serverurl.startswith('unix://'):
             path = normalize_path(serverurl[7:])
@@ -1547,19 +1564,19 @@
         try:
             return ConfigParser.RawConfigParser.read_string(
                 self, string, source)  # Python 3.2 or later
         except AttributeError:
             return self.readfp(StringIO(string))
 
     def read(self, filenames, **kwargs):
-        '''Attempt to read and parse a list of filenames, returning a list
+        """Attempt to read and parse a list of filenames, returning a list
         of filenames which were successfully parsed.  This is a method of
         RawConfigParser that is overridden to build self.section_to_file,
         which is a mapping of section names to the files they came from.
-        '''
+        """
         if isinstance(filenames, basestring):  # RawConfigParser compat
             filenames = [filenames]
 
         ok_filenames = []
         for filename in filenames:
             sections_orig = self._sections.copy()
 
@@ -1648,15 +1665,17 @@
         'stderr_logfile_backups', 'stderr_logfile_maxbytes',
         'stderr_events_enabled', 'stderr_syslog',
         'stopsignal', 'stopwaitsecs', 'stopasgroup', 'killasgroup',
         'exitcodes', 'redirect_stderr']
     optional_param_names = [
         'environment', 'serverurl',
         'cpupriority', 'cpuaffinity',
-        'systemjob'
+        'systemjob',
+        'user',
+        'pwd'
     ]
 
     def __init__(self, options, **params):
         self.options = options
         for name in self.req_param_names:
             setattr(self, name, params[name])
         for name in self.optional_param_names:
@@ -1929,15 +1948,15 @@
             if length == 0:
                 data = b''
             else:
                 f.seek(offset)
                 data = f.read(length)
 
             offset = sz
-            return [as_string(data), offset, overflow]
+            return [as_string(data, errors='replace'), offset, overflow]
     except (OSError, IOError):
         return ['', offset, False]
 
 
 # Helpers for dealing with signals and exit status
 
 def decode_wait_status(sts):
```

### Comparing `supervisor-win-4.6.0/supervisor/pidproxy.py` & `supervisor-win-4.7.0/supervisor/pidproxy.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,44 +1,50 @@
-#!/usr/bin/env python
+#!/usr/bin/env python -u
 
-""" An executable which proxies for a subprocess; upon a signal, it sends that
-signal to the process identified by a pidfile. """
+"""pidproxy -- run command and proxy signals to it via its pidfile.
+
+This executable runs a command and then monitors a pidfile.  When this
+executable receives a signal, it sends the same signal to the pid
+in the pidfile.
+
+Usage: %s <pidfile name> <command> [<cmdarg1> ...]
+"""
 
 import os
 import signal
 import sys
 import time
 
 
 class PidProxy(object):
     pid = None
 
     def __init__(self, args):
-        self.setsignals()
         try:
             self.pidfile, cmdargs = args[1], args[2:]
-            self.command = os.path.abspath(cmdargs[0])
+            self.abscmd = os.path.abspath(cmdargs[0])
             self.cmdargs = cmdargs
         except (ValueError, IndexError):
             self.usage()
             sys.exit(1)
 
     def go(self):
-        self.pid = os.spawnv(os.P_NOWAIT, self.command, self.cmdargs)
+        self.setsignals()
+        self.pid = os.spawnv(os.P_NOWAIT, self.abscmd, self.cmdargs)
         while 1:
             time.sleep(5)
             try:
                 pid = os.waitpid(-1, os.WNOHANG)[0]
             except OSError:
                 pid = None
             if pid:
                 break
 
     def usage(self):
-        print("pidproxy.py <pidfile name> <command> [<cmdarg1> ...]")
+        print(__doc__ % sys.argv[0])
 
     def setsignals(self):
         signal.signal(signal.SIGTERM, self.passtochild)
         signal.signal(signal.SIGHUP, self.passtochild)
         signal.signal(signal.SIGINT, self.passtochild)
         signal.signal(signal.SIGUSR1, self.passtochild)
         signal.signal(signal.SIGUSR2, self.passtochild)
```

### Comparing `supervisor-win-4.6.0/supervisor/poller.py` & `supervisor-win-4.7.0/supervisor/poller.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/process.py` & `supervisor-win-4.7.0/supervisor/process.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,38 +1,39 @@
 import errno
+import functools
 import os
 import shlex
-import subprocess
 import time
 import traceback
 import signal
-from functools import total_ordering
 import win32api
 import win32job
 import win32process
 import win32con
+import subprocess
 
 from supervisor.compat import maxint
 from supervisor.compat import as_bytes
 from supervisor.compat import as_string
 from supervisor.compat import PY2
-from supervisor import events, helpers
-from supervisor.compat import StringIO
+from supervisor import events
 from supervisor.compat import unicode
 
 from supervisor.datatypes import RestartUnconditionally
 from supervisor.dispatchers import EventListenerStates
-from supervisor.helpers import DummyPopen
 from supervisor.medusa import asyncore_25 as asyncore
 from supervisor.options import (
     ProcessException,
     BadCommand,
     signame,
     decode_wait_status
 )
+from supervisor.psutil.subproc import LoginSTARTUPINFO
+from supervisor.psutil import DummyPopen
+from supervisor.psutil import subproc
 from supervisor.socket_manager import SocketManager
 from supervisor.states import (
     ProcessStates,
     STOPPED_STATES,
     SupervisorStates,
     getProcessStateDescription
 )
@@ -125,15 +126,15 @@
             try:
                 pHandle = win32api.OpenProcess(flags, False, pid)
             except win32process.error as e:
                 raise ValueError(e)
         return pHandle
 
 
-@total_ordering
+@functools.total_ordering
 class Subprocess(object):
     """A class to manage a subprocess."""
 
     # Initial state; overridden by instance variables
 
     pid = 0  # Subprocess pid; 0 when not running
     config = None  # ProcessConfig instance
@@ -260,25 +261,24 @@
 
     def change_state(self, new_state, expected=True):
         old_state = self.state
         if new_state is old_state:
             # exists for unit tests
             return False
 
-        event_class = self.event_map.get(new_state)
-        if event_class is not None:
-            event = event_class(self, old_state, expected)
-            events.notify(event)
-
+        self.state = new_state
         if new_state == ProcessStates.BACKOFF:
             now = time.time()
             self.backoff += 1
             self.delay = now + (self.backoff * 10.0)
 
-        self.state = new_state
+        event_class = self.event_map.get(new_state)
+        if event_class is not None:
+            event = event_class(self, old_state, expected)
+            events.notify(event)
 
     def _assertInState(self, *states):
         if self.state not in states:
             current_state = getProcessStateDescription(self.state)
             allowable_states = ' '.join(map(getProcessStateDescription, states))
             processname = as_string(self.config.name)
             raise AssertionError('Assertion failed for %s: %s not in %s' % (
@@ -389,28 +389,39 @@
             except Exception as err:
                 options.logger.error("subprocess cpu affinity: %s" % err)
 
     @classmethod
     def execute(cls, filename, argv, **kwargs):
         """Runs a new process and returns its reference"""
         redirect_stderr = kwargs.pop('redirect_stderr', False)
+        user = kwargs.pop('user', None)
+        pwd = kwargs.pop('pwd', None)
         kwargs.update(dict(
             # Prevents the supervisor from inheriting the signal when expected by the process.
             creationflags=subprocess.CREATE_NEW_PROCESS_GROUP,
             stdout=subprocess.PIPE,
             stdin=subprocess.PIPE,
             bufsize=1024 * 2,  # 2Kb
             close_fds=False
         ))
         # stderr goes to stdout
         if redirect_stderr:
             kwargs['stderr'] = subprocess.STDOUT
         else:
             kwargs['stderr'] = subprocess.PIPE
-        proc = helpers.Popen(argv, **kwargs)
+        # user session
+        if user and pwd:
+            kwargs['startupinfo'] = LoginSTARTUPINFO(
+                user, pwd,
+                startupinfo=kwargs.get('startupinfo')
+            )
+            subproc_open = subproc.WPopen
+        else:
+            subproc_open = subproc.Popen
+        proc = subproc_open(argv, **kwargs)
         if proc.pid <= 0:
             raise OSError('failure initializing new process ' + ' '.join(argv))
         return proc
 
     def spawn_child_error(self, code=127):
         options = self.config.options
         options.write(2, 'supervisor: child process was not spawned\n')
@@ -472,15 +483,17 @@
 
             try:
                 self.process = options.execve(filename, argv, env)
             except NotImplementedError:
                 kwargs = dict(
                     env=env,
                     cwd=self.config.directory,
-                    redirect_stderr=self.config.redirect_stderr
+                    redirect_stderr=self.config.redirect_stderr,
+                    user=self.config.user,
+                    pwd=self.config.pwd
                 )
                 self.process = self.execute(filename, argv, **kwargs)
         except OSError as why:
             code = errno.errorcode.get(why.args[0], why.args[0])
             msg = "couldn't exec %s: %s\n" % (argv[0], code)
             options.write(2, "supervisor: " + msg)
             self.record_spawnerr(msg)
@@ -548,15 +561,16 @@
         self.delay = 0
         self.backoff = 0
         self.system_stop = True
         self._assertInState(ProcessStates.BACKOFF)
         self.change_state(ProcessStates.FATAL)
 
     def kill(self, sig):
-        """Send a signal to the subprocess.  This may or may not kill it.
+        """Send a signal to the subprocess with the intention to kill
+        it (to make it exit).  This may or may not actually kill it.
 
         Return None if the signal was sent, or an error message string
         if an error occurred or if the subprocess is not running.
         """
         now = time.time()
         options = self.config.options
 
@@ -610,23 +624,32 @@
         pid = self.pid
 
         if killasgroup:
             # send to the whole process group instead
             pid = -self.pid
 
         try:
-            options.kill(pid, sig)
+            try:
+                options.kill(pid, sig)
+            except OSError as exc:
+                if exc.errno == errno.ESRCH:
+                    msg = ("unable to signal %s (pid %s), it probably just exited "
+                           "on its own: %s" % (processname, self.pid, str(exc)))
+                    options.logger.debug(msg)
+                    # we could change the state here but we intentionally do
+                    # not.  we will do it during normal SIGCHLD processing.
+                    return None
+                raise
         except:
             tb = traceback.format_exc()
             tb = as_string(tb, errors='ignore')
             msg = 'unknown problem killing %s (%s):%s' % (processname,
                                                           self.pid, tb)
             options.logger.critical(msg)
             self.change_state(ProcessStates.UNKNOWN)
-            self.pid = 0
             self.killing = False
             self.delay = 0
             return msg
 
         return None
 
     def signal(self, sig):
@@ -651,30 +674,40 @@
 
         self._assertInState(
             ProcessStates.RUNNING,
             ProcessStates.STARTING,
             ProcessStates.STOPPING
         )
         try:
-            options.kill(self.pid, sig)
+            try:
+                options.kill(self.pid, sig)
+            except OSError as exc:
+                if exc.errno == errno.ESRCH:
+                    msg = ("unable to signal %s (pid %s), it probably just now exited "
+                           "on its own: %s" % (processname, self.pid,
+                                               str(exc)))
+                    options.logger.debug(msg)
+                    # we could change the state here but we intentionally do
+                    # not.  we will do it during normal SIGCHLD processing.
+                    return None
+                raise
         except ValueError as e:  # signal not supported
             msg = 'problem sending sig %s (%s): %s' % (
                 self.config.name, self.pid, str(e))
             tb = traceback.format_exc()
             tb = as_string(tb, errors='ignore')
             options.logger.error(tb)
             return msg
         except:
             tb = traceback.format_exc()
             tb = as_string(tb, errors='ignore')
             msg = 'unknown problem sending sig %s (%s):%s' % (
                 processname, self.pid, tb)
             options.logger.critical(msg)
             self.change_state(ProcessStates.UNKNOWN)
-            self.pid = 0
             return msg
 
         return None
 
     def finish(self, pid, sts):
         """ The process was reaped and we need to report and manage its state
         """
@@ -704,23 +737,29 @@
             self.killing = False
             self.delay = 0
             self.exitstatus = es
 
             msg = "stopped: %s (%s)" % (processname, msg)
             self._assertInState(ProcessStates.STOPPING)
             self.change_state(ProcessStates.STOPPED)
+            if exit_expected:
+                self.config.options.logger.info(msg)
+            else:
+                self.config.options.logger.warn(msg)
+
 
         elif too_quickly:
             # the program did not stay up long enough to make it to RUNNING
             # implies STARTING -> BACKOFF
             self.exitstatus = None
             self.spawnerr = 'Exited too quickly (process log may have details)'
             msg = "exited: %s (%s)" % (processname, msg + "; not expected")
             self._assertInState(ProcessStates.STARTING)
             self.change_state(ProcessStates.BACKOFF)
+            self.config.options.logger.warn(msg)
 
         else:
             # this finish was not the result of a stop request, the
             # program was in the RUNNING state but exited
             # implies RUNNING -> EXITED normally but see next comment
             self.delay = 0
             self.backoff = 0
@@ -734,21 +773,21 @@
 
             self._assertInState(ProcessStates.RUNNING)
 
             if exit_expected:
                 # expected exit code
                 msg = "exited: %s (%s)" % (processname, msg + "; expected")
                 self.change_state(ProcessStates.EXITED, expected=True)
+                self.config.options.logger.info(msg)
             else:
                 # unexpected exit code
                 self.spawnerr = 'Bad exit code %s' % es
                 msg = "exited: %s (%s)" % (processname, msg + "; not expected")
                 self.change_state(ProcessStates.EXITED, expected=False)
-
-        self.config.options.logger.info(msg)
+                self.config.options.logger.warn(msg)
 
         self.close_all_dispatchers()
         self.pid = 0
         self.pipes = {}
         self.dispatchers = {}
         self.process = None
 
@@ -936,15 +975,15 @@
             options.dup2(self.pipes['child_stdout'], 2)
         else:
             options.dup2(self.pipes['child_stderr'], 2)
         for i in range(3, options.minfds):
             options.close_fd(i)
 
 
-@total_ordering
+@functools.total_ordering
 class ProcessGroupBase(object):
     def __init__(self, config):
         self.config = config
         self.processes = {}
         for pconfig in self.config.process_configs:
             self.processes[pconfig.name] = pconfig.make_process(self)
```

### Comparing `supervisor-win-4.6.0/supervisor/rpcinterface.py` & `supervisor-win-4.7.0/supervisor/rpcinterface.py`

 * *Files 3% similar despite different names*

```diff
@@ -12,14 +12,15 @@
 from supervisor.datatypes import (
     Automatic,
     signal_number,
     )
 
 from supervisor.options import readFile
 from supervisor.options import tailFile
+from supervisor.options import BadCommand
 from supervisor.options import NotExecutable
 from supervisor.options import NotFound
 from supervisor.options import NoPermission
 from supervisor.options import make_namespec
 from supervisor.options import split_namespec
 from supervisor.options import VERSION
 
@@ -42,39 +43,54 @@
     STOPPED_STATES,
     SIGNALLABLE_STATES
     )
 
 API_VERSION = '3.0'
 
 
+class TaskStatus(object):
+    """Assists in initiating a second call."""
+    def __init__(self, callback):
+        self.starting = False
+        self.callback = callback
+
+    @property
+    def result(self):
+        if callable(self.callback):
+            result = self.callback()
+        else:
+            result = self.callback
+        return result
+
+
 class SupervisorNamespaceRPCInterface(object):
     def __init__(self, supervisord):
         self.supervisord = supervisord
 
     def _update(self, text):
         self.update_text = text  # for unit tests, mainly
         if (isinstance(self.supervisord.options.mood, int) and
             self.supervisord.options.mood < SupervisorStates.RUNNING):
             raise RPCError(Faults.SHUTDOWN_STATE)
 
     # RPC API methods
     def getAPIVersion(self):
         """ Return the version of the RPC API used by supervisord
 
-        @return string version version id
+        @return string version id
         """
         self._update('getAPIVersion')
         return API_VERSION
 
     getVersion = getAPIVersion  # b/w compatibility with releases before 3.0
 
     def getSupervisorVersion(self):
         """ Return the version of the supervisor package in use by supervisord
 
-        @return string version version id
+        @return string version id
         """
         self._update('getSupervisorVersion')
         return VERSION
 
     def getIdentification(self):
         """ Return identifying string of supervisord
 
@@ -283,40 +299,28 @@
         """Restarts a process.
 
         @param string name         name of process to restast
         @param boolean wait Wait for process to be fully started
         @return boolean result     Indicates whether the removal was successful
         """
 
-        class Action(object):
-            def __init__(self, callback):
-                self.starting = False
-                self.callback = callback
-
-            @property
-            def result(self):
-                if callable(self.callback):
-                    result = self.callback()
-                else:
-                    result = self.callback
-                return result
-
         callback = self.stopProcess(name, wait=wait)
-        action = Action(callback)
+        action = TaskStatus(callback)
 
         def onwait():
             result = action.result
             if result is NOT_DONE_YET:
                 return NOT_DONE_YET
             elif not action.starting:
                 action.callback = self.startProcess(name, wait=wait)
                 action.starting = True
                 result = action.result
             return result
 
+        onwait.muticall = True
         onwait.delay = 0.05
         onwait.rpcinterface = self
         return onwait  # deferred
 
     def startProcess(self, name, wait=True):
         """ Start a process
 
@@ -333,20 +337,24 @@
 
         # test filespec, don't bother trying to spawn if we know it will
         # eventually fail
         try:
             filename, argv = process.get_execv_args()
         except NotFound as why:
             raise RPCError(Faults.NO_FILE, why.args[0])
-        except (NotExecutable, NoPermission) as why:
+        except (BadCommand, NotExecutable, NoPermission) as why:
             raise RPCError(Faults.NOT_EXECUTABLE, why.args[0])
 
         if process.get_state() in RUNNING_STATES:
             raise RPCError(Faults.ALREADY_STARTED, name)
 
+        if process.get_state() == ProcessStates.UNKNOWN:
+            raise RPCError(Faults.FAILED,
+                           "%s is in an unknown process state" % name)
+
         process.spawn()
 
         # We call reap() in order to more quickly obtain the side effects of
         # process.finish(), which reap() eventually ends up calling.  This
         # might be the case if the spawn() was successful but then the process
         # died before its startsecs elapsed or it exited with an unexpected
         # exit code. In particular, finish() may set spawnerr, which we can
@@ -590,27 +598,53 @@
         processes = self._getAllProcesses()
         signalall = make_allfunc(processes, isSignallable, self.signalProcess,
                                  signal=signal)
         result = signalall()
         self._update('signalAllProcesses')
         return result
 
+    def restartAllProcesses(self, wait=True):
+        """Restarts all processes.
+
+        @param  boolean wait   Wait for each process to be fully stopped
+        @return boolean    Boolan result that indicates whether the operation was successful
+        """
+        callback = self.stopAllProcesses(wait=wait)
+        action = TaskStatus(callback)
+
+        def onwait():
+            result = action.result
+            if result is NOT_DONE_YET:
+                return NOT_DONE_YET
+            elif not action.starting:
+                action.callback = self.startAllProcesses(wait=wait)
+                action.starting = True
+                result = action.result
+            return result
+
+        onwait.muticall = True
+        onwait.delay = 0.05
+        onwait.rpcinterface = self
+        return onwait
+
     def getAllConfigInfo(self):
         """ Get info about all available process configurations. Each struct
         represents a single process (i.e. groups get flattened).
 
         @return array result  An array of process config info structs
         """
         self._update('getAllConfigInfo')
 
         configinfo = []
         for gconfig in self.supervisord.options.process_group_configs:
             inuse = gconfig.name in self.supervisord.process_groups
             for pconfig in gconfig.process_configs:
                 d = {'autostart': pconfig.autostart,
+                     'directory': pconfig.directory,
+                     'uid': pconfig.uid,
                      'command': pconfig.command,
                      'exitcodes': pconfig.exitcodes,
                      'group': gconfig.name,
                      'group_prio': gconfig.priority,
                      'inuse': inuse,
                      'killasgroup': pconfig.killasgroup,
                      'name': pconfig.name,
@@ -619,23 +653,24 @@
                      'startretries': pconfig.startretries,
                      'startsecs': pconfig.startsecs,
                      'stdout_capture_maxbytes': pconfig.stdout_capture_maxbytes,
                      'stdout_events_enabled': pconfig.stdout_events_enabled,
                      'stdout_logfile': pconfig.stdout_logfile,
                      'stdout_logfile_backups': pconfig.stdout_logfile_backups,
                      'stdout_logfile_maxbytes': pconfig.stdout_logfile_maxbytes,
-                     #'stdout_syslog': pconfig.stdout_syslog,
+                     # 'stdout_syslog': pconfig.stdout_syslog,
                      'stopsignal': int(pconfig.stopsignal), # enum on py3
                      'stopwaitsecs': pconfig.stopwaitsecs,
                      'stderr_capture_maxbytes': pconfig.stderr_capture_maxbytes,
                      'stderr_events_enabled': pconfig.stderr_events_enabled,
                      'stderr_logfile': pconfig.stderr_logfile,
                      'stderr_logfile_backups': pconfig.stderr_logfile_backups,
                      'stderr_logfile_maxbytes': pconfig.stderr_logfile_maxbytes,
-                     #'stderr_syslog': pconfig.stderr_syslog,
+                     # 'stderr_syslog': pconfig.stderr_syslog,
+                     'serverurl': pconfig.serverurl,
                     }
                 # no support for these types in xml-rpc
                 d.update((k, 'auto') for k, v in d.items() if v is Automatic)
                 d.update((k, 'none') for k, v in d.items() if v is None)
                 configinfo.append(d)
 
         configinfo.sort(key=lambda r: r['name'])
@@ -963,18 +998,20 @@
 
         notify(
             RemoteCommunicationEvent(type, data)
         )
 
         return True
 
+
 def _total_seconds(timedelta):
     return ((timedelta.days * 86400 + timedelta.seconds) * 10**6 +
                 timedelta.microseconds) / 10**6
 
+
 def make_allfunc(processes, predicate, func, **extra_kwargs):
     """ Return a closure representing a function that calls a
     function for every process, and returns a result """
 
     callbacks = []
     results = []
 
@@ -1059,17 +1096,20 @@
     # the setting of ignore flags to signals.
     return allfunc
 
 
 def isRunning(process):
     return process.get_state() in RUNNING_STATES
 
+
 def isNotRunning(process):
     return not isRunning(process)
 
+
 def isSignallable(process):
     if process.get_state() in SIGNALLABLE_STATES:
         return True
 
+
 # this is not used in code but referenced via an entry point in the conf file
 def make_main_rpcinterface(supervisord):
     return SupervisorNamespaceRPCInterface(supervisord)
```

### Comparing `supervisor-win-4.6.0/supervisor/scripts/loop_eventgen.py` & `supervisor-win-4.7.0/supervisor/scripts/loop_eventgen.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/scripts/loop_listener.py` & `supervisor-win-4.7.0/supervisor/scripts/loop_listener.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/scripts/sample_commevent.py` & `supervisor-win-4.7.0/supervisor/scripts/sample_commevent.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/scripts/sample_eventlistener.py` & `supervisor-win-4.7.0/supervisor/scripts/sample_eventlistener.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/scripts/sample_exiting_eventlistener.py` & `supervisor-win-4.7.0/supervisor/scripts/sample_exiting_eventlistener.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/services.py` & `supervisor-win-4.7.0/supervisor/services.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # coding=utf-8
 """
 Installation script for the supervisor as a service
 To install the service on a terminal, as an administrator, run the command line:
 python -m supervisor.services install -c "{path}\supervisord.conf"
 """
 from __future__ import print_function
-
+import unicodedata
 import argparse
 import logging.handlers
 import os
 import re
 import servicemanager
 import socket
 import sys
@@ -122,26 +122,43 @@
     _svc_deps_ = []
 
     _exe_name_ = settings.get("exe_name", sys.executable)
     _exe_args_ = settings.get("exe_args", '"' + os.path.abspath(sys.argv[0]) + '"')
 
 
 class SupervisorService(SupervisorServiceFramework):
-    logger = supervisor_conf = None
+    logger = lstdout = lstderr = supervisor_conf = None
 
     def __init__(self, args):
         win32serviceutil.ServiceFramework.__init__(self, args)
         self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)
         socket.setdefaulttimeout(60)
         self.initialize()
 
     def initialize(self):
         self.logger = self.get_logger()
         self.supervisor_conf = self.get_config()
 
+        # handle output
+        self.lstdout = StreamHandler(self.logger.info)
+        self.lstderr = StreamHandler(self.logger.error)
+
+    @staticmethod
+    def slugify(value):
+        """
+        Converts to lowercase, removes non-word characters (alphanumerics and
+        underscores) and converts spaces to hyphens. Also strips leading and
+        trailing whitespace.
+        """
+        from supervisor.compat import as_string
+        value = as_string(value, errors='ignore')
+        value = unicodedata.normalize('NFKD', value).encode('ascii', 'ignore').decode('ascii')
+        value = re.sub(r'[^\w\s-]', '', value.lower())
+        return re.sub(r'[-\s]+', '-', value).strip('-_')
+
     @staticmethod
     def get_logger():
         """interface to create logger"""
         return logging.getLogger(__name__)
 
     def get_config(self):
         """Get supervisor config path
@@ -157,27 +174,26 @@
 
         # The log goes to the location of the configuration file
         if supervisor_conf is not None:
             config_dir = os.path.dirname(supervisor_conf)
         else:  # or to python home
             config_dir = os.getcwd()
 
-        log_path = os.path.join(config_dir, self._svc_name_.lower() + "-service.log")
+        log_path = os.path.join(config_dir, self.slugify(self._svc_name_) + "-service.log")
         hdl = logging.handlers.RotatingFileHandler(log_path,
                                                    maxBytes=1024 ** 2,
                                                    backupCount=3)
         hdl.setFormatter(logging.Formatter("%(asctime)s [%(levelname)s] %(message)s"))
         self.logger.setLevel(logging.INFO)
         self.logger.addHandler(hdl)
         self.logger.info("supervisor config path: {0!s}".format(supervisor_conf))
 
         if supervisor_conf_exc is not None:
             self.logger.error("* The service needs to be reinstalled")
             self.logger.error(supervisor_conf_exc)
-            logging.shutdown()
             exit(-1)
         return supervisor_conf
 
     @classmethod
     def set_service_name(cls, name):
         cls._svc_name_ = name
 
@@ -205,84 +221,83 @@
     def stopping_failed(self, exc):
         pass
 
     # noinspection PyBroadException
     def SvcStop(self):
         self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
         # Supervisor process stop event
-        stdout = StreamHandler(self.logger.info)
-        stderr = StreamHandler(self.logger.error)
         try:
-            self.stopping(stdout, stderr)
+            self.stopping(self.lstdout, self.lstderr)
             self.logger.info("supervisorctl shutdown")
             from supervisor import supervisorctl
             supervisorctl.main(("-c", self.supervisor_conf, "shutdown"),
-                               stdout=stdout, stderr=stderr)
+                               stdout=self.lstdout,
+                               stderr=self.lstderr)
         except SystemExit:
             pass  # normal exit
         except Exception as exc:
             self.stopping_failed(exc)
             self.logger.exception("supervisorctl shutdown execution failed")
         finally:
-            logging.shutdown()
-            stderr.close()
-            stdout.close()
+            self.lstderr.close()
+            self.lstdout.close()
             win32event.SetEvent(self.hWaitStop)
 
     def SvcDoRun(self):
         servicemanager.LogMsg(
             servicemanager.EVENTLOG_INFORMATION_TYPE,
             servicemanager.PYS_SERVICE_STARTED,
             (self._svc_name_, '')
         )
         self.main()
 
     # noinspection PyBroadException
     def main(self):
         """Starts running the supervisor"""
-        stdout = StreamHandler(self.logger.info)
-        stderr = StreamHandler(self.logger.error)
         try:
-            self.starting(stdout, stderr)
+            self.starting(self.lstdout, self.lstderr)
             from supervisor import supervisord
             self.logger.info("supervisor starting...")
             supervisord.main(("-c", self.supervisor_conf),
-                             stdout=stdout, stderr=stderr)
+                             stdout=self.lstdout,
+                             stderr=self.lstderr)
             self.logger.info("supervisor shutdown")
         except Exception as exc:
             self.starting_failed(exc)
             self.logger.exception("supervisor starting failed")
         finally:
-            stdout.close()
-            stderr.close()
+            self.lstderr.close()
+            self.lstdout.close()
 
 
 def parse_args_config(options, argv):
     args = []
     index = 0
     while True:
         try:
-            varg = argv[index]
-            last_index = index
+            narg, varg = argv[index], None
             index += 1
         except IndexError:
             break
+        if narg.find("=") > -1:
+            narg, varg = narg.split("=", 1)
         for opts in options:
-            if any([varg == n for n in opts['args']]):
+            if narg in opts['args']:
                 index -= 1
                 name = argv.pop(index)
-                if name.find('=') > -1:
-                    args.extend(varg.split('='))
+                if varg is not None:
+                    args.extend((narg, varg))
+                elif name.find('=') > -1:
+                    args.extend(name.split('=', 1))
                 else:
                     args.append(name)
                     try:
                         args.append(argv.pop(index))
                     except IndexError:
                         break
-                index = last_index
     return args
 
 
 def check_existing_cmd(argv, *args):
     """Checks for cmd in argv"""
     for cmd in args:
         if cmd in argv:
@@ -304,31 +319,36 @@
         {'args': ('-sdn', '--service-display-name'),
          'kwargs': {'required': False, 'type': str}},
     ]
     args = parse_args_config(options, argv)
     return options, args, argv
 
 
+def _stdout_isatty():
+    """attached to terminal"""
+    return sys.stdout is not None and sys.stdout.isatty()
+
+
 def run(cls=SupervisorService):
     """Run the configured service"""
     # service must be starting...
     # for the sake of debugging etc, we use win32traceutil to see
     # any unhandled exceptions and print statements.
     print("supervisor service is starting...")
     print("(execute this script with '-h' or '--help' if that isn't what you want)")
-    if sys.stdout is None or not sys.stdout.isatty():
+    if not _stdout_isatty():
         # By default, the service does not start a console and this
         # causes side effects in sending signals to the subprocess.
         # Manually starts when an output terminal is not detected.
         win32console.AllocConsole()
     servicemanager.Initialize()
     servicemanager.PrepareToHostSingle(cls)
     # Now ask the service manager to fire things up for us...
+    # this api close sys.stdout
     servicemanager.StartServiceCtrlDispatcher()
-    print("supervisor service done!")
 
 
 def installer(argv):
     """Install, remove, update the service"""
     # file configuration supervisord.conf
     options, args, srv_argv = get_config_args(argv[1:])
     # print(args, srv_argv, sep='\n')
@@ -368,15 +388,29 @@
         SupervisorService.set_setting("exe_args", '')
     elif check_existing_cmd(srv_argv, 'remove'):
         settings.delete('exe_name')
         settings.delete('exe_args')
     win32serviceutil.HandleCommandLine(SupervisorService, argv=srv_argv)
 
 
-def main(argv):
+def handle_system_io():
+    """When the process does not have input/output, we must control it in the logger"""
+    logger = logging.getLogger(__name__)
+    stream = StreamHandler(logger.info)
+    if sys.stdout is None:
+        sys.stdout = stream
+    if sys.stderr is None:
+        sys.stderr = stream
+
+
+def main(argv=None):
+    if argv is None:
+        argv = sys.argv
+    if not _stdout_isatty():
+        handle_system_io()
     # starts in the main python directory.
     os.chdir(os.path.dirname(sys.executable))
     try:
         if len(argv) == 1:
             run()
         else:
             installer(argv)
@@ -388,27 +422,21 @@
             print("Administrator permission required!",
                   file=sys.stderr)
         traceback.print_exc(limit=3)
 
 
 def patch_sys_path():
     # supervisor{dir}/supervisor{package}
-    local_dir = os.path.dirname(__file__)
-
+    package_dir = os.path.dirname(__file__)
     # removes supervisor package directory from path
-    local_path_index = None
-    for index, path in enumerate(sys.path):
-        if re.match(re.escape(path), local_dir, re.U | re.I):
-            local_path_index = index
-            break
-    if local_path_index is not None:
-        sys.path.pop(local_path_index)
-
+    for path in list(sys.path):
+        if re.match("^" + re.escape(path) + "$", package_dir, re.U | re.I):
+            sys.path.remove(path)
     try:
         import supervisor
     except ImportError:
-        sys.path.append(os.path.abspath(os.path.join(local_dir, '..')))
+        sys.path.append(os.path.abspath(os.path.join(package_dir, '..')))
 
 
 if __name__ == '__main__':
     patch_sys_path()
     main(sys.argv)
```

### Comparing `supervisor-win-4.6.0/supervisor/skel/sample.conf` & `supervisor-win-4.7.0/supervisor/skel/sample.conf`

 * *Files 0% similar despite different names*

```diff
@@ -21,29 +21,29 @@
 
 ;[inet_http_server]         ; inet (TCP) server disabled by default
 ;port=127.0.0.1:9001        ; ip_address:port specifier, *:port for all iface
 ;username=user              ; default is no username (open server)
 ;password=123               ; default is no password (open server)
 
 [supervisord]
-logfile=%(ENV_TMP)\\supervisord.log ; (main log file;default $CWD/supervisord.log)
+logfile=%(ENV_TMP)s\\supervisord.log ; (main log file;default $CWD/supervisord.log)
 logfile_maxbytes=50MB               ; (max main logfile bytes b4 rotation;default 50MB)
 logfile_backups=10                  ; (num of main logfile rotation backups;default 10)
 loglevel=info                       ; (log level;default info; others: debug,warn,trace)
-pidfile=%(ENV_TMP)\\supervisord.pid ; (supervisord pidfile;default supervisord.pid)
+pidfile=%(ENV_TMP)s\\supervisord.pid ; (supervisord pidfile;default supervisord.pid)
 nodaemon=false                      ; (start in foreground if true;default false)
 silent=false                 ; no logs to stdout if true; default false
 minfds=1024                         ; (min. avail startup file descriptors;default 1024)
 minprocs=200                        ; (min. avail process descriptors;default 200)
 ;umask=022                          ; (process file creation umask;default 022)
 ;user=chrism                        ; (default is current user, required if root)
 ;identifier=supervisor              ; (supervisord identifier, default is 'supervisor')
-;directory=%(ENV_TMP)               ; (default is not to cd during start)
+;directory=%(ENV_TMP)s              ; (default is not to cd during start)
 ;nocleanup=true                     ; (don't clean up tempfiles at start;default false)
-;childlogdir=%(ENV_TMP)             ; ('AUTO' child log dir, default $TEMP)
+;childlogdir=%(ENV_TMP)s            ; ('AUTO' child log dir, default $TEMP)
 ;environment=KEY="value"            ; (key value pairs to add to environment)
 ;strip_ansi=false                   ; (strip ansi escape codes in logs; def. false)
 ;delaysecs=0.5                      ; (delay system processing per seconds; def. 0.5)
 
 ; The rpcinterface:supervisor section must remain in the config file for
 ; RPC (supervisorctl/web interface) to work.  Additional interfaces may be
 ; added by defining them in separate [rpcinterface:x] sections.
@@ -66,15 +66,15 @@
 ; Create one or more 'real' program: sections to be able to control them under
 ; supervisor.
 
 ;[program:theprogramname]
 ;command=cmd.exe               ; the program (relative uses PATH, can take args)
 ;process_name=%(program_name)s ; process_name expr (default %(program_name)s)
 ;numprocs=1                    ; number of processes copies to start (def 1)
-;directory=%(ENV_TMP)          ; directory to cwd to before exec (def no cwd)
+;directory=%(ENV_TMP)s         ; directory to cwd to before exec (def no cwd)
 ;umask=022                     ; umask for process (default None)
 ;priority=999                  ; the relative start priority (default 999)
 ;autostart=true                ; start at supervisord start (default: true)
 ;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)
 ;startretries=3                ; max # of serial start failures when starting (default 3)
 ;autorestart=unexpected        ; when to restart if exited after running (def: unexpected)
 ;exitcodes=0                   ; 'expected' exit codes used with autorestart (default 0)
@@ -108,15 +108,15 @@
 
 ;[eventlistener:theeventlistenername]
 ;command=path\\eventlistener   ; the program (relative uses PATH, can take args)
 ;process_name=%(program_name)s ; process_name expr (default %(program_name)s)
 ;numprocs=1                    ; number of processes copies to start (def 1)
 ;events=EVENT                  ; event notif. types to subscribe to (req'd)
 ;buffer_size=10                ; event buffer queue size (default 10)
-;directory=%(ENV_TMP)          ; directory to cwd to before exec (def no cwd)
+;directory=%(ENV_TMP)s         ; directory to cwd to before exec (def no cwd)
 ;umask=022                     ; umask for process (default None)
 ;priority=-1                   ; the relative start priority (default -1)
 ;autostart=true                ; start at supervisord start (default: true)
 ;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)
 ;startretries=3                ; max # of serial start failures when starting (default 3)
 ;autorestart=unexpected        ; autorestart if exited after running (def: unexpected)
 ;exitcodes=0                   ; 'expected' exit codes used with autorestart (default 0)
```

### Comparing `supervisor-win-4.6.0/supervisor/socket_manager.py` & `supervisor-win-4.7.0/supervisor/socket_manager.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/states.py` & `supervisor-win-4.7.0/supervisor/states.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/supervisorctl.py` & `supervisor-win-4.7.0/supervisor/supervisorctl.py`

 * *Files 0% similar despite different names*

```diff
@@ -982,14 +982,20 @@
         self.ctl.output("restart <name> <name>\tRestart multiple processes or "
                         "groups")
         self.ctl.output("restart all\t\tRestart all processes")
         self.ctl.output("Note: restart does not reread config files. For that,"
                         " see reread and update.")
 
     def do_shutdown(self, arg):
+        if arg:
+            self.ctl.output('Error: shutdown accepts no arguments')
+            self.ctl.exitstatus = LSBInitExitStatuses.GENERIC
+            self.help_shutdown()
+            return
+
         if self.ctl.options.interactive:
             yesno = raw_input('Really shut the remote supervisord process '
                               'down y/N? ')
             really = yesno.lower().startswith('y')
         else:
             really = 1
```

### Comparing `supervisor-win-4.6.0/supervisor/supervisord.py` & `supervisor-win-4.7.0/supervisor/supervisord.py`

 * *Files 2% similar despite different names*

```diff
@@ -86,15 +86,14 @@
         self.process_groups = {}  # clear
         self.stop_groups = None  # clear
         events.clear()
         self.make_job_handler()  # container
         try:
             for config in self.options.process_group_configs:
                 self.add_process_group(config)
-            self.options.process_environment()
             self.options.openhttpservers(self)
             self.options.setsignals()
             if not self.options.nodaemon and self.options.first:
                 try:
                     self.options.daemonize()
                 except NotImplementedError:
                     pass
@@ -116,17 +115,16 @@
         try:
             from supervisor.process import ProcessJobHandler
             self.options.job_handler = ProcessJobHandler(os.getpid())
         except (ImportError, Exception):  # Supervisor can not stop due to execution failure
             self.options.job_handler = None
         return self.options.job_handler
 
-    def diff_to_active(self, new=None):
-        if not new:
-            new = self.options.process_group_configs
+    def diff_to_active(self):
+        new = self.options.process_group_configs
         cur = [group.config for group in self.process_groups.values()]
 
         curdict = dict(zip([cfg.name for cfg in cur], cur))
         newdict = dict(zip([cfg.name for cfg in new], new))
 
         added = [cand for cand in new if cand.name not in curdict]
         removed = [cand for cand in cur if cand.name not in newdict]
@@ -256,27 +254,41 @@
                             'read event caused by %(dispatcher)s',
                             dispatcher=dispatcher)
                         dispatcher.handle_read_event()
                     except asyncore.ExitNow:
                         raise
                     except:
                         combined_map[fd].handle_error()
+                else:
+                    # if the fd is not in combined_map, we should unregister it. otherwise,
+                    # it will be polled every time, which may cause 100% cpu usage
+                    self.options.logger.warn('unexpected read event from fd %r' % fd)
+                    try:
+                        self.options.poller.unregister_readable(fd)
+                    except:
+                        pass
 
             for fd in writables:
                 if fd in combined_map:
                     try:
                         dispatcher = combined_map[fd]
                         self.options.logger.blather(
                             'write event caused by %(dispatcher)s',
                             dispatcher=dispatcher)
                         dispatcher.handle_write_event()
                     except asyncore.ExitNow:
                         raise
                     except:
                         combined_map[fd].handle_error()
+                else:
+                    self.options.logger.warn('unexpected write event from fd %r' % fd)
+                    try:
+                        self.options.poller.unregister_writable(fd)
+                    except:
+                        pass
 
             for group in pgroups:
                 group.transition()
 
             self.reap()
             self.handle_signal()
             self.tick()
@@ -320,15 +332,15 @@
             _, msg = decode_wait_status(sts)
             self.options.logger.info('reaped unknown pid %s (%s)' % (pid, msg))
         else:
             subprocess.finish(pid, sts)
             self.options.remove_pid_history(pid)
         if not once:
             # keep reaping until no more kids to reap, but don't recurse
-            # infintely
+            # infinitely
             self.reap(once=False, recursionguard=recursionguard + 1)
 
     def handle_signal(self):
         sig = self.options.get_signal()
         if sig:
             if sig in (signal.SIGTERM, signal.SIGINT):
                 self.options.logger.warn('received %s indicating exit request' % signame(sig))
```

### Comparing `supervisor-win-4.6.0/supervisor/templating.py` & `supervisor-win-4.7.0/supervisor/templating.py`

 * *Files 0% similar despite different names*

```diff
@@ -507,15 +507,15 @@
         the text 'text' and return the index of our position in
         our parent.  If we have no parent, do nothing, and return None.
         Pass the 'structure' flag to the replace node so it can do the right
         thing at render time. """
         parent = self.parent
         i = self.deparent()
         if i is not None:
-            # reduce function call overhead by not calliing self.insert
+            # reduce function call overhead by not calling self.insert
             node = Replace(text, structure)
             parent._children.insert(i, node)
             node.parent = parent
             return i
 
     def content(self, text, structure=False):
         """ Delete this node's children and append a Replace node that
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/base.py` & `supervisor-win-4.7.0/supervisor/tests/base.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,14 +1,13 @@
 _NOW = 1151365354
 _TIMEFORMAT = '%b %d %I:%M %p'
 
-import os
-import sys
+import functools
 import tempfile
-from functools import total_ordering
+import os
 
 from supervisor.compat import Fault
 from supervisor.compat import as_bytes
 
 # mock is imported here for py2/3 compat.  we only declare mock as a dependency
 # via tests_require so it is not available on all supervisor installs.  the
 # modules imported in supervisor.compat must always be available.
@@ -53,20 +52,24 @@
             self.close()
 
     def remove(self):
         os.remove(self.name)
 
 
 class DummyOptions:
-    make_pipes_error = None
-    fork_error = None
-    execv_error = None
-    kill_error = None
-    minfds = 5
     loglevel = 20
+    minfds = 5
+
+    chdir_exception = None
+    fork_exception = None
+    execv_exception = None
+    kill_exception = None
+    make_pipes_exception = None
+    remove_exception = None
+    write_exception = None
 
     def __init__(self):
         tempdir = tempfile.gettempdir()
         self.identifier = 'supervisor'
         self.childlogdir = tempdir
         self.delaysecs = 0.2
         self.uid = 999
@@ -105,29 +108,27 @@
         self.fds_closed = []
         self._exitcode = None
         self.execve_called = False
         self.execv_args = None
         self.setuid_msg = None
         self.privsdropped = None
         self.logs_reopened = False
-        self.environment_processed = False
         self.write_accept = None
         self.write_error = None
-        self.tempfile_name = os.path.join(tempdir, 'foo\\bar')
+        self.tempfile_name = os.path.join(tempdir, 'foo', 'bar')
         self.remove_error = None
         self.removed = []
         self.existing = []
         self.openreturn = None
         self.readfd_result = ''
         self.parse_criticals = []
         self.parse_warnings = []
         self.parse_infos = []
         self.serverurl = 'http://localhost:9001'
         self.changed_directory = False
-        self.chdir_error = None
         self.umaskset = None
         self.poller = DummyPoller(self)
         self.silent = False
 
     def register_pid(self, pid, process):
         self.pidhistory[pid] = process
 
@@ -191,16 +192,16 @@
     def write_pidfile(self):
         self.pidfile_written = True
 
     def waitpid(self):
         return self.waitpid_return
 
     def kill(self, pid, sig):
-        if self.kill_error:
-            raise OSError(self.kill_error)
+        if self.kill_exception is not None:
+            raise self.kill_exception
         self.kills[pid] = sig
 
     def stat(self, filename):
         import os
         return os.stat(filename)
 
     def get_path(self):
@@ -217,36 +218,37 @@
 
     def check_execv_args(self, filename, argv, st):
         if filename == '/bad/filename':
             from supervisor.options import NotFound
             raise NotFound('bad filename')
 
     def make_pipes(self, pid, stderr=True):
-        if self.make_pipes_error:
-            raise OSError(self.make_pipes_error)
+        import sys
+        if self.make_pipes_exception is not None:
+            raise self.make_pipes_exception
         pipes = {'stdin': sys.stdin, 'stdout': sys.stdout}
         if stderr:
             pipes['stderr'] = sys.stderr
         else:
             pipes['stderr'] = None
         return pipes
 
     def write(self, fd, chars):
-        if self.write_error:
-            raise OSError(self.write_error)
+        if self.write_exception is not None:
+            raise self.write_exception
         if self.write_accept:
             chars = chars[self.write_accept]
         data = self.written.setdefault(fd, '')
         data += chars
         self.written[fd] = data
         return len(chars)
 
     def fork(self):
-        if self.fork_error:
-            raise OSError(self.fork_error)
+        if self.fork_exception is not None:
+            raise self.fork_exception
         return self.forkpid
 
     def close_fd(self, fd):
         self.fds_closed.append(fd)
 
     def close_parent_pipes(self, pipes):
         self.parent_pipes_closed = pipes
@@ -261,58 +263,51 @@
         self.duped[frm] = to
 
     def _exit(self, code):
         self._exitcode = code
 
     def execve(self, filename, argv, environment):
         self.execve_called = True
-        if self.execv_error:
-            if self.execv_error == 1:
-                raise OSError(self.execv_error)
-            else:
-                raise RuntimeError(self.execv_error)
+        if self.execv_exception is not None:
+            raise self.execv_exception
         self.execv_args = (filename, argv)
         self.execv_environment = environment
 
     def drop_privileges(self, uid):
         if self.setuid_msg:
             return self.setuid_msg
         self.privsdropped = uid
 
     def readfd(self, fd):
         return self.readfd_result
 
     def reopenlogs(self):
         self.logs_reopened = True
 
-    def process_environment(self):
-        self.environment_processed = True
-
     def mktempfile(self, prefix, suffix, dir):
         return self.tempfile_name
 
     def remove(self, path):
-        import os
-        if self.remove_error:
-            raise os.error(self.remove_error)
+        if self.remove_exception is not None:
+            raise self.remove_exception
         self.removed.append(path)
 
     def exists(self, path):
         if path in self.existing:
             return True
         return False
 
     def open(self, name, mode='r'):
         if self.openreturn:
             return self.openreturn
         return open(name, mode)
 
     def chdir(self, dir):
-        if self.chdir_error:
-            raise OSError(self.chdir_error)
+        if self.chdir_exception is not None:
+            raise self.chdir_exception
         self.changed_directory = True
 
     def setumask(self, mask):
         self.umaskset = mask
 
 
 class DummyLogger:
@@ -432,16 +427,18 @@
     def config(self):
         return self._config
 
     def get_socket(self):
         return DummySocket(self._config.fd)
 
 
-@total_ordering
+@functools.total_ordering
 class DummyProcess(object):
+    write_exception = None
+
     # Initial state; overridden by instance variables
     pid = 0  # Subprocess pid; 0 when not running
     laststart = 0  # Last time the subprocess was started; 0 if never
     laststop = 0  # Last time the subprocess was stopped; 0 if never
     delay = 0  # If nonzero, delay starting or killing until this time
     administrative_stop = False  # true if the process stopped by an admin
     system_stop = False  # true if the process has been stopped by the system
@@ -486,15 +483,14 @@
         self.dispatchers = {}
         self.finished = None
         self.logs_reopened = False
         self.execv_arg_exception = None
         self.input_fd_drained = None
         self.output_fd_drained = None
         self.transitioned = False
-        self.write_error = None
 
     def reopenlogs(self):
         self.logs_reopened = True
 
     def removelogs(self):
         if self.error_at_clear:
             raise IOError('whatever')
@@ -554,16 +550,16 @@
     def drain_output_fd(self, fd):
         self.output_fd_drained = fd
 
     def drain_input_fd(self, fd):
         self.input_fd_drained = fd
 
     def write(self, chars):
-        if self.write_error:
-            raise OSError(self.write_error)
+        if self.write_exception is not None:
+            raise self.write_exception
         self.stdin_buffer += chars
 
     def transition(self):
         self.transitioned = True
 
     def __eq__(self, other):
         return self.config.priority == other.config.priority
@@ -662,16 +658,16 @@
     data = open(file).read()
     last = os.path.split(file)[1]
 
     substitutions['PYTHON'] = sys.executable
     for key in substitutions.keys():
         data = data.replace('<<%s>>' % key.upper(), substitutions[key])
 
-    tmpnam = tempfile.mktemp(prefix=last)
-    with open(tmpnam, 'w') as f:
+    with tempfile.NamedTemporaryFile(prefix=last, delete=False) as f:
+        tmpnam = f.name
         f.write(data)
     os.chmod(tmpnam, 0o755)
     return tmpnam
 
 
 def makeSpew(unkillable=False):
     import os
@@ -1114,15 +1110,15 @@
 
 class DummyFCGIGroupConfig(DummyPGroupConfig):
     def __init__(self, options, name='whatever', priority=999, pconfigs=None, socket_config=DummySocketConfig(1)):
         DummyPGroupConfig.__init__(self, options, name, priority, pconfigs)
         self.socket_config = socket_config
 
 
-@total_ordering
+@functools.total_ordering
 class DummyProcessGroup(object):
     def __init__(self, config):
         self.config = config
         self.transitioned = False
         self.all_stopped = False
         self.dispatchers = {}
         self.unstopped_processes = []
@@ -1181,21 +1177,22 @@
         setattr(process, attr_name, val)
 
     def reap(self):
         self.reaped = True
 
 
 class DummyDispatcher:
+    flush_exception = None
+
     write_event_handled = False
     read_event_handled = False
     error_handled = False
     logs_reopened = False
     logs_removed = False
     closed = False
-    flush_error = None
     flushed = False
 
     def __init__(self, readable=False, writable=False, error=False):
         self._readable = readable
         self._writable = writable
         self._error = error
         self.input_buffer = ''
@@ -1230,16 +1227,16 @@
     def handle_error(self):
         self.error_handled = True
 
     def close(self):
         self.closed = True
 
     def flush(self):
-        if self.flush_error:
-            raise OSError(self.flush_error)
+        if self.flush_exception:
+            raise self.flush_exception
         self.flushed = True
 
 
 class DummyStream:
     def __init__(self, error=None, fileno=20):
         self.error = error
         self.closed = False
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1231a.conf` & `supervisor-win-4.7.0/supervisor/tests/fixtures/issue-1231c.conf`

 * *Files 16% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 [supervisord]
 loglevel=info                ; log level; default info; others: debug,warn,trace
-logfile=/tmp/issue-1231.log  ; main log file; default $CWD/supervisord.log
-pidfile=/tmp/issue-1231.pid  ; supervisord pidfile; default supervisord.pid
+logfile=/tmp/issue-1231c.log ; main log file; default $CWD/supervisord.log
+pidfile=/tmp/issue-1231c.pid ; supervisord pidfile; default supervisord.pid
 nodaemon=true                ; start in foreground if true; default false
 
 [rpcinterface:supervisor]
 supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
 
 [unix_http_server]
-file=/tmp/issue-1231a.sock   ; the path to the socket file
+file=/tmp/issue-1231c.sock   ; the path to the socket file
 
 [supervisorctl]
-serverurl=unix:///tmp/issue-1231a.sock  ; use a unix:// URL  for a unix socket
+serverurl=unix:///tmp/issue-1231c.sock  ; use a unix:// URL  for a unix socket
 
 [program:hello]
 command=python %(here)s/test_1231.py
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/fixtures/issue-1231b.conf` & `supervisor-win-4.7.0/supervisor/tests/fixtures/issue-986.conf`

 * *Files 19% similar despite different names*

```diff
@@ -1,17 +1,19 @@
 [supervisord]
-loglevel=info                ; log level; default info; others: debug,warn,trace
-logfile=/tmp/issue-1231.log  ; main log file; default $CWD/supervisord.log
-pidfile=/tmp/issue-1231.pid  ; supervisord pidfile; default supervisord.pid
+loglevel=debug               ; log level; default info; others: debug,warn,trace
+logfile=/tmp/issue-986.log   ; main log file; default $CWD/supervisord.log
+pidfile=/tmp/issue-986.pid   ; supervisord pidfile; default supervisord.pid
 nodaemon=true                ; start in foreground if true; default false
 
 [rpcinterface:supervisor]
 supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
 
 [unix_http_server]
-file=/tmp/issue-1231b.sock   ; the path to the socket file
+file=/tmp/issue-986.sock   ; the path to the socket file
 
 [supervisorctl]
-serverurl=unix:///tmp/issue-1231b.sock  ; use a unix:// URL  for a unix socket
+serverurl=unix:///tmp/issue-986.sock  ; use a unix:// URL  for a unix socket
 
-[program:hello]
-command=python %(here)s/test_1231.py
+[program:echo]
+command=bash -c "echo 'dhcrelay -d -q -a %%h:%%p %%P -i Vlan1000 192.168.0.1'"
+startsecs=0
+autorestart=false
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/fixtures/issue-565.conf` & `supervisor-win-4.7.0/supervisor/tests/fixtures/issue-565.conf`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/tests/fixtures/listener.py` & `supervisor-win-4.7.0/supervisor/tests/fixtures/listener.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_childutils.py` & `supervisor-win-4.7.0/supervisor/tests/test_childutils.py`

 * *Files 5% similar despite different names*

```diff
@@ -134,15 +134,7 @@
         from supervisor.dispatchers import PEventListenerDispatcher
         begin = as_string(PEventListenerDispatcher.RESULT_TOKEN_START)
         stdout = StringIO()
         msg = 'the body data ya fool\n'
         listener.send(msg, stdout)
         expected = '%s%s\n%s' % (begin, len(msg), msg)
         self.assertEqual(stdout.getvalue(), expected)
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_datatypes.py` & `supervisor-win-4.7.0/supervisor/tests/test_datatypes.py`

 * *Files 1% similar despite different names*

```diff
@@ -13,15 +13,15 @@
     def _callFUT(self, arg):
         return datatypes.process_or_group_name(arg)
 
     def test_strips_surrounding_whitespace(self):
         name = " foo\t"
         self.assertEqual(self._callFUT(name), "foo")
 
-    def test_disallows_inner_spaces_for_eventlister_protocol(self):
+    def test_disallows_inner_spaces_for_eventlistener_protocol(self):
         name = "foo bar"
         self.assertRaises(ValueError, self._callFUT, name)
 
     def test_disallows_colons_for_eventlistener_protocol(self):
         name = "foo:bar"
         self.assertRaises(ValueError, self._callFUT, name)
 
@@ -474,22 +474,32 @@
     def test_no_port_number(self):
         self.assertRaises(ValueError, self._callFUT, 'a:')
 
     def test_bad_port_number(self):
         self.assertRaises(ValueError, self._callFUT, 'a')
 
     def test_default_host(self):
-        host, port = self._callFUT('*:8080')
+        host, port = self._callFUT('*:9001')
         self.assertEqual(host, '')
-        self.assertEqual(port, 8080)
+        self.assertEqual(port, 9001)
 
-    def test_boring(self):
-        host, port = self._callFUT('localhost:80')
+    def test_hostname_and_port(self):
+        host, port = self._callFUT('localhost:9001')
         self.assertEqual(host, 'localhost')
-        self.assertEqual(port, 80)
+        self.assertEqual(port, 9001)
+
+    def test_ipv4_address_and_port(self):
+        host, port = self._callFUT('127.0.0.1:9001')
+        self.assertEqual(host, '127.0.0.1')
+        self.assertEqual(port, 9001)
+
+    def test_ipv6_address_and_port(self):
+        host, port = self._callFUT('2001:db8:ff:55:0:0:0:138:9001')
+        self.assertEqual(host, '2001:db8:ff:55:0:0:0:138')
+        self.assertEqual(port, 9001)
 
 
 class SocketAddressTests(unittest.TestCase):
     def _getTargetClass(self):
         return datatypes.SocketAddress
 
     def _makeOne(self, s):
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_dispatchers.py` & `supervisor-win-4.7.0/supervisor/tests/test_dispatchers.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,11 +1,10 @@
 import tempfile
 import unittest
 import os
-import sys
 
 from supervisor.compat import as_bytes
 
 from supervisor.tests.base import DummyOptions
 from supervisor.tests.base import DummyProcess
 from supervisor.tests.base import DummyPConfig
 from supervisor.tests.base import DummyLogger
@@ -653,29 +652,31 @@
     def test_handle_write_event_epipe_raised(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         process = DummyProcess(config)
         dispatcher = self._makeOne(process)
         dispatcher.input_buffer = 'halloooo'
         import errno
-        options.write_error = errno.EPIPE
+        options.write_exception = OSError(errno.EPIPE,
+                                          os.strerror(errno.EPIPE))
         dispatcher.handle_write_event()
         self.assertEqual(dispatcher.input_buffer, b'')
         self.assertTrue(options.logger.data[0].startswith(
             'fd 0 closed, stopped monitoring'))
         self.assertTrue(options.logger.data[0].endswith('(stdin)>'))
 
     def test_handle_write_event_uncaught_raised(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         process = DummyProcess(config)
         dispatcher = self._makeOne(process)
         dispatcher.input_buffer = 'halloooo'
         import errno
-        options.write_error = errno.EBADF
+        options.write_exception = OSError(errno.EBADF,
+                                          os.strerror(errno.EBADF))
         self.assertRaises(OSError, dispatcher.handle_write_event)
 
     def test_handle_write_event_over_os_limit(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         process = DummyProcess(config)
         dispatcher = self._makeOne(process)
@@ -1263,15 +1264,7 @@
         ansi = b'\x1b[34mHello world... this is longer than a token!\x1b[0m'
         noansi = b'Hello world... this is longer than a token!'
         self.assertEqual(self._callFUT(ansi), noansi)
 
     def test_noansi(self):
         noansi = b'Hello world... this is longer than a token!'
         self.assertEqual(self._callFUT(noansi), noansi)
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_events.py` & `supervisor-win-4.7.0/supervisor/tests/test_events.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,7 @@
-import sys
 import unittest
 
 from supervisor.tests.base import DummyEvent
 from supervisor.tests.base import DummyOptions
 from supervisor.tests.base import DummyPConfig
 from supervisor.tests.base import DummyProcess
 
@@ -69,74 +68,74 @@
     def test_ProcessLogEvent_attributes(self):
         from supervisor.events import ProcessLogEvent
         inst = ProcessLogEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
 
-    def test_ProcessLogEvent_inheritence(self):
+    def test_ProcessLogEvent_inheritance(self):
         from supervisor.events import ProcessLogEvent
         from supervisor.events import Event
         self.assertTrue(
             issubclass(ProcessLogEvent, Event)
         )
 
     def test_ProcessLogStdoutEvent_attributes(self):
         from supervisor.events import ProcessLogStdoutEvent
         inst = ProcessLogStdoutEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
         self.assertEqual(inst.channel, 'stdout')
 
-    def test_ProcessLogStdoutEvent_inheritence(self):
+    def test_ProcessLogStdoutEvent_inheritance(self):
         from supervisor.events import ProcessLogStdoutEvent
         from supervisor.events import ProcessLogEvent
         self.assertTrue(
             issubclass(ProcessLogStdoutEvent, ProcessLogEvent)
         )
 
     def test_ProcessLogStderrEvent_attributes(self):
         from supervisor.events import ProcessLogStderrEvent
         inst = ProcessLogStderrEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
         self.assertEqual(inst.channel, 'stderr')
 
-    def test_ProcessLogStderrEvent_inheritence(self):
+    def test_ProcessLogStderrEvent_inheritance(self):
         from supervisor.events import ProcessLogStderrEvent
         from supervisor.events import ProcessLogEvent
         self.assertTrue(
             issubclass(ProcessLogStderrEvent, ProcessLogEvent)
         )
 
     def test_ProcessCommunicationEvent_attributes(self):
         from supervisor.events import ProcessCommunicationEvent
         inst = ProcessCommunicationEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
 
-    def test_ProcessCommunicationEvent_inheritence(self):
+    def test_ProcessCommunicationEvent_inheritance(self):
         from supervisor.events import ProcessCommunicationEvent
         from supervisor.events import Event
         self.assertTrue(
             issubclass(ProcessCommunicationEvent, Event)
         )
 
     def test_ProcessCommunicationStdoutEvent_attributes(self):
         from supervisor.events import ProcessCommunicationStdoutEvent
         inst = ProcessCommunicationStdoutEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
         self.assertEqual(inst.channel, 'stdout')
 
-    def test_ProcessCommunicationStdoutEvent_inheritence(self):
+    def test_ProcessCommunicationStdoutEvent_inheritance(self):
         from supervisor.events import ProcessCommunicationStdoutEvent
         from supervisor.events import ProcessCommunicationEvent
         self.assertTrue(
             issubclass(ProcessCommunicationStdoutEvent,
                        ProcessCommunicationEvent)
         )
 
@@ -144,29 +143,29 @@
         from supervisor.events import ProcessCommunicationStderrEvent
         inst = ProcessCommunicationStderrEvent(1, 2, 3)
         self.assertEqual(inst.process, 1)
         self.assertEqual(inst.pid, 2)
         self.assertEqual(inst.data, 3)
         self.assertEqual(inst.channel, 'stderr')
 
-    def test_ProcessCommunicationStderrEvent_inheritence(self):
+    def test_ProcessCommunicationStderrEvent_inheritance(self):
         from supervisor.events import ProcessCommunicationStderrEvent
         from supervisor.events import ProcessCommunicationEvent
         self.assertTrue(
             issubclass(ProcessCommunicationStderrEvent,
                        ProcessCommunicationEvent)
         )
 
     def test_RemoteCommunicationEvent_attributes(self):
         from supervisor.events import RemoteCommunicationEvent
         inst = RemoteCommunicationEvent(1, 2)
         self.assertEqual(inst.type, 1)
         self.assertEqual(inst.data, 2)
 
-    def test_RemoteCommunicationEvent_inheritence(self):
+    def test_RemoteCommunicationEvent_inheritance(self):
         from supervisor.events import RemoteCommunicationEvent
         from supervisor.events import Event
         self.assertTrue(
             issubclass(RemoteCommunicationEvent, Event)
         )
 
     def test_EventRejectedEvent_attributes(self):
@@ -507,16 +506,7 @@
         class FooEvent(events.Event):
             pass
         try:
             events.register('FOO', FooEvent)
             self.assertTrue(events.EventTypes.FOO is FooEvent)
         finally:
             del events.EventTypes.FOO
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
-
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_http.py` & `supervisor-win-4.7.0/supervisor/tests/test_http.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,19 +1,21 @@
+import sys
 import base64
 import os
-import socket
 import stat
-import sys
+import socket
 import tempfile
 import unittest
 
+from supervisor.http import NOT_DONE_YET
+
 from supervisor.compat import as_bytes
 from supervisor.compat import as_string
 from supervisor.compat import sha1
-from supervisor.http import NOT_DONE_YET
+
 from supervisor.tests.base import DummySupervisor
 from supervisor.tests.base import PopulatedDummySupervisor
 from supervisor.tests.base import TempFileOpen
 from supervisor.tests.base import DummyRPCInterfaceFactory
 from supervisor.tests.base import DummyPConfig
 from supervisor.tests.base import DummyOptions
 from supervisor.tests.base import DummyRequest
@@ -43,24 +45,24 @@
         options = DummyOptions()
         pconfig = DummyPConfig(options, 'process1', '/bin/process1', priority=1,
                                stdout_logfile='/tmp/process1.log')
         supervisord = PopulatedDummySupervisor(options, 'process1', pconfig)
         handler = self._makeOne(supervisord)
         request = DummyRequest('/logtail/process1', None, None, None)
         handler.handle_request(request)
-        self.assertEqual(request._error, 410)
+        self.assertEqual(request._error, 404)
 
     def test_handle_request_stdout_logfile_missing(self):
         options = DummyOptions()
         pconfig = DummyPConfig(options, 'foo', 'foo', 'it/is/missing')
         supervisord = PopulatedDummySupervisor(options, 'foo', pconfig)
         handler = self._makeOne(supervisord)
         request = DummyRequest('/logtail/foo', None, None, None)
         handler.handle_request(request)
-        self.assertEqual(request._error, 410)
+        self.assertEqual(request._error, 404)
 
     def test_handle_request(self):
         fd, tfilename = tempfile.mkstemp()
         try:
             options = DummyOptions()
             pconfig = DummyPConfig(options, 'foo', 'foo', stdout_logfile=tfilename)
             supervisord = PopulatedDummySupervisor(options, 'foo', pconfig)
@@ -85,23 +87,23 @@
         return mainlogtail_handler
 
     def test_handle_request_stdout_logfile_none(self):
         supervisor = DummySupervisor()
         handler = self._makeOne(supervisor)
         request = DummyRequest('/mainlogtail', None, None, None)
         handler.handle_request(request)
-        self.assertEqual(request._error, 410)
+        self.assertEqual(request._error, 404)
 
     def test_handle_request_stdout_logfile_missing(self):
         supervisor = DummySupervisor()
         supervisor.options.logfile = '/not/there'
         request = DummyRequest('/mainlogtail', None, None, None)
         handler = self._makeOne(supervisor)
         handler.handle_request(request)
-        self.assertEqual(request._error, 410)
+        self.assertEqual(request._error, 404)
 
     def test_handle_request(self):
         supervisor = DummySupervisor()
         fd, tfilename = tempfile.mkstemp()
         try:
             supervisor.options.logfile = tfilename
             handler = self._makeOne(supervisor)
@@ -144,15 +146,15 @@
 
             result = producer.more()
             self.assertEqual(result, http.NOT_DONE_YET)
             tmpfile.truncate(0)
             tmpfile.flush()
 
             result = producer.more()
-            self.assertEqual(result, '==> File truncated <==\n')
+            self.assertEqual(result, b'==> File truncated <==\n')
 
     def test_handle_more_fd_closed(self):
         request = DummyRequest('/logtail/foo', None, None, None)
         with TempFileOpen() as tmpfile:
 
             tmpfile.write(as_bytes('a' * 80))
             tmpfile.flush()
@@ -634,15 +636,15 @@
         try:
             for config, s in servers:
                 s.close()
                 socketfile = config.get('file')
                 if socketfile is not None:
                     os.unlink(socketfile)
         finally:
-            from asyncore import socket_map
+            from supervisor.medusa.asyncore_25 import socket_map
             socket_map.clear()
         return servers
 
     def test_make_http_servers_socket_type_error(self):
         config = {'family': 999, 'host': 'localhost', 'port': 17735,
                   'username': None, 'password': None,
                   'section': 'inet_http_server'}
@@ -696,14 +698,7 @@
         self.data = list(data)
 
     def more(self):
         if self.data:
             return self.data.pop(0)
         else:
             return b''
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_http_client.py` & `supervisor-win-4.7.0/supervisor/tests/test_http_client.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_loggers.py` & `supervisor-win-4.7.0/supervisor/tests/test_loggers.py`

 * *Files 0% similar despite different names*

```diff
@@ -603,15 +603,7 @@
         self.records = []
 
     def emit(self, record):
         self.records.append(record)
 
     def close(self):
         self.closed = True
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_options.py` & `supervisor-win-4.7.0/supervisor/tests/test_options.py`

 * *Files 2% similar despite different names*

```diff
@@ -259,15 +259,114 @@
         options.doc = 'A sample docstring for %s'
         options.help('')
         self.assertEqual(exitcodes, [0])
         msg = 'A sample docstring for test_help\n'
         self.assertEqual(options.stdout.getvalue(), msg)
 
 
-class ClientOptionsTests(unittest.TestCase):
+class IncludeTestsMixin(object):
+    def test_read_config_include_with_no_files_raises_valueerror(self):
+        instance = self._makeOne()
+        text = lstrip("""\
+        [supervisord]
+
+        [include]
+        ;no files=
+        """)
+        try:
+            instance.read_config(StringIO(text))
+            self.fail("nothing raised")
+        except ValueError as exc:
+            self.assertEqual(exc.args[0],
+                ".ini file has [include] section, but no files setting")
+
+    def test_read_config_include_with_no_matching_files_logs_warning(self):
+        instance = self._makeOne()
+        text = lstrip("""\
+        [supervisord]
+
+        [supervisorctl]
+
+        [include]
+        files=nonexistent\\*
+        """)
+        instance.read_config(StringIO(text))
+        self.assertEqual(instance.parse_warnings,
+                         ['No file matches via include ".\\nonexistent\\*"'])
+
+    def test_read_config_include_reads_files_in_sorted_order(self):
+        dirname = tempfile.mkdtemp()
+        conf_d = os.path.join(dirname, "conf.d")
+        os.mkdir(conf_d)
+
+        supervisord_conf = os.path.join(dirname, "supervisord.conf")
+        text = lstrip("""\
+        [supervisord]
+
+        [supervisorctl]
+
+        [include]
+        files=%s\\conf.d\\*.conf
+        """ % dirname)
+        with open(supervisord_conf, 'w') as f:
+            f.write(text)
+
+        from supervisor.compat import letters
+        a_z = letters[:26]
+        for letter in reversed(a_z):
+            filename = os.path.join(conf_d, "%s.conf" % letter)
+            with open(filename, "w") as f:
+                f.write("[program:%s]\n"
+                        "command=/bin/%s\n" % (letter, letter))
+
+        instance = self._makeOne()
+        try:
+            instance.read_config(supervisord_conf)
+        finally:
+            shutil.rmtree(dirname, ignore_errors=True)
+        expected_msgs = []
+        for letter in sorted(a_z):
+            filename = os.path.join(conf_d, "%s.conf" % letter)
+            expected_msgs.append(
+                'Included extra file "%s" during parsing' % filename)
+        self.assertEqual(instance.parse_infos, expected_msgs)
+
+    def test_read_config_include_extra_file_malformed(self):
+        dirname = tempfile.mkdtemp()
+        conf_d = os.path.join(dirname, "conf.d")
+        os.mkdir(conf_d)
+
+        supervisord_conf = os.path.join(dirname, "supervisord.conf")
+        text = lstrip("""\
+        [supervisord]
+
+        [include]
+        files=%s\\conf.d\\*.conf
+        """ % dirname)
+        with open(supervisord_conf, 'w') as f:
+            f.write(text)
+
+        malformed_file = os.path.join(conf_d, "a.conf")
+        with open(malformed_file, 'w') as f:
+            f.write("[inet_http_server]\njunk\n")
+
+        instance = self._makeOne()
+        try:
+            instance.read_config(supervisord_conf)
+            self.fail("nothing raised")
+        except ValueError as exc:
+            self.assertTrue('contains parsing errors:' in exc.args[0])
+            self.assertTrue(malformed_file in exc.args[0])
+            msg = 'Included extra file "%s" during parsing' % malformed_file
+            self.assertTrue(msg in instance.parse_infos)
+        finally:
+            shutil.rmtree(dirname, ignore_errors=True)
+
+
+class ClientOptionsTests(unittest.TestCase, IncludeTestsMixin):
     def _getTargetClass(self):
         from supervisor.options import ClientOptions
         return ClientOptions
 
     def _makeOne(self):
         return self._getTargetClass()()
 
@@ -343,15 +442,16 @@
         """)
         instance = self._makeOne()
         instance.configfile = StringIO(text)
         instance.realize(args=[])
         # should not raise configparser.DuplicateSectionError on py3
 
     def test_options_with_environment_expansions(self):
-        s = lstrip(r"""[supervisorctl]
+        s = lstrip(r"""
+        [supervisorctl]
         serverurl=http://localhost:%(ENV_SERVER_PORT)s
         username=%(ENV_CLIENT_USER)s
         password=%(ENV_CLIENT_PASS)s
         prompt=%(ENV_CLIENT_PROMPT)s
         history_file=E:\\path\\to\histdir\\.supervisorctl%(ENV_CLIENT_HIST_EXT)s
         """)
 
@@ -432,16 +532,63 @@
     def test_options_unixsocket_cli(self):
         fp = StringIO('[supervisorctl]')
         instance = self._makeOne()
         instance.configfile = fp
         instance.realize(args=['--serverurl', 'unix:///dev/null'])
         self.assertEqual(instance.serverurl, 'unix:///dev/null')
 
+    def test_read_config_include_reads_extra_files(self):
+        dirname = tempfile.mkdtemp()
+        conf_d = os.path.join(dirname, "conf.d")
+        os.mkdir(conf_d)
+
+        supervisord_conf = os.path.join(dirname, "supervisord.conf")
+        text = lstrip("""\
+        [include]
+        files=%s\\conf.d\\*.conf %s\\conf.d\\*.ini
+        """ % (dirname, dirname))
+        with open(supervisord_conf, 'w') as f:
+            f.write(text)
+
+        conf_file = os.path.join(conf_d, "a.conf")
+        with open(conf_file, 'w') as f:
+            f.write("[supervisorctl]\nhistory_file=%(here)s/sc_history\n")
+
+        ini_file = os.path.join(conf_d, "a.ini")
+        with open(ini_file, 'w') as f:
+            f.write("[supervisorctl]\nserverurl=unix://%(here)s/supervisord.sock\n")
+
+        instance = self._makeOne()
+        try:
+            instance.read_config(supervisord_conf)
+        finally:
+            shutil.rmtree(dirname, ignore_errors=True)
+        options = instance.configroot.supervisorctl
+        history_file = os.path.join(conf_d, 'sc_history')
+        self.assertEqual(options.serverurl, 'unix://' + conf_d + '\\supervisord.sock')
+        self.assertEqual(options.history_file, history_file)
+        msg = 'Included extra file "%s" during parsing' % conf_file
+        self.assertTrue(msg in instance.parse_infos)
+        msg = 'Included extra file "%s" during parsing' % ini_file
+        self.assertTrue(msg in instance.parse_infos)
 
-class ServerOptionsTests(unittest.TestCase):
+    def test_read_config_include_expands_here(self):
+        conf = os.path.join(
+            os.path.abspath(os.path.dirname(__file__)), 'fixtures',
+            'include.conf')
+        root_here = os.path.dirname(conf)
+        include_here = os.path.join(root_here, 'example')
+        parser = self._makeOne()
+        parser.configfile = conf
+        parser.process_config_file(True)
+        section = parser.configroot.supervisorctl
+        self.assertEqual(section.history_file, include_here)
+
+
+class ServerOptionsTests(unittest.TestCase, IncludeTestsMixin):
     def _getTargetClass(self):
         from supervisor.options import ServerOptions
         return ServerOptions
 
     def _makeOne(self):
         return self._getTargetClass()()
 
@@ -450,19 +597,15 @@
         options = self._makeOne()
         options.stdout = StringIO()
         self.assertRaises(SystemExit, options.version, None)
         self.assertEqual(options.stdout.getvalue(), VERSION + '\n')
 
     def test_options(self):
         tempdir = tempfile.gettempdir()
-        s = lstrip("""[inet_http_server]
-        port=127.0.0.1:8999
-        username=chrism
-        password=foo
-
+        s = lstrip("""
         [supervisord]
         directory=%(tempdir)s
         backofflimit=10
         user=root
         umask=022
         logfile=supervisord.log
         logfile_maxbytes=1000MB
@@ -474,14 +617,19 @@
         identifier=fleeb
         childlogdir=%(tempdir)s
         nocleanup=true
         minfds=2048
         minprocs=300
         environment=FAKE_ENV_VAR=/some/path
 
+        [inet_http_server]
+        port=127.0.0.1:8999
+        username=chrism
+        password=foo
+
         [program:cat1]
         command=/bin/cat
         priority=1
         autostart=true
         user=root
         stdout_logfile=%(tempdir)s\\cat.log
         stopsignal=TERM
@@ -927,41 +1075,14 @@
         try:
             instance.read_config(StringIO())
             self.fail("nothing raised")
         except ValueError as exc:
             self.assertEqual(exc.args[0],
                              ".ini file does not include supervisord section")
 
-    def test_read_config_include_with_no_files_raises_valueerror(self):
-        instance = self._makeOne()
-        text = lstrip("""\
-        [supervisord]
-
-        [include]
-        ;no files=
-        """)
-        try:
-            instance.read_config(StringIO(text))
-            self.fail("nothing raised")
-        except ValueError as exc:
-            self.assertEqual(exc.args[0],
-                             ".ini file has [include] section, but no files setting")
-
-    def test_read_config_include_with_no_matching_files_logs_warning(self):
-        instance = self._makeOne()
-        text = lstrip("""\
-        [supervisord]
-
-        [include]
-        files=nonexistent\\*
-        """)
-        instance.read_config(StringIO(text))
-        self.assertEqual(instance.parse_warnings,
-                         ['No file matches via include ".\\nonexistent\\*"'])
-
     def test_read_config_include_reads_extra_files(self):
         dirname = tempfile.mkdtemp()
         conf_d = os.path.join(dirname, "conf.d")
         os.mkdir(conf_d)
 
         supervisord_conf = os.path.join(dirname, "supervisord.conf")
         text = lstrip("""\
@@ -990,81 +1111,14 @@
         self.assertEqual(len(options.server_configs), 1)
         self.assertEqual(len(options.process_group_configs), 1)
         msg = 'Included extra file "%s" during parsing' % conf_file
         self.assertTrue(msg in instance.parse_infos)
         msg = 'Included extra file "%s" during parsing' % ini_file
         self.assertTrue(msg in instance.parse_infos)
 
-    def test_read_config_include_reads_files_in_sorted_order(self):
-        dirname = tempfile.mkdtemp()
-        conf_d = os.path.join(dirname, "conf.d")
-        os.mkdir(conf_d)
-
-        supervisord_conf = os.path.join(dirname, "supervisord.conf")
-        text = lstrip("""\
-        [supervisord]
-
-        [include]
-        files=%s\\conf.d\\*.conf
-        """ % dirname)
-        with open(supervisord_conf, 'w') as f:
-            f.write(text)
-
-        from supervisor.compat import letters
-        a_z = letters[:26]
-        for letter in reversed(a_z):
-            filename = os.path.join(conf_d, "%s.conf" % letter)
-            with open(filename, "w") as f:
-                f.write("[program:%s]\n"
-                        "command=/bin/%s\n" % (letter, letter))
-
-        instance = self._makeOne()
-        try:
-            instance.read_config(supervisord_conf)
-        finally:
-            shutil.rmtree(dirname, ignore_errors=True)
-        expected_msgs = []
-        for letter in sorted(a_z):
-            filename = os.path.join(conf_d, "%s.conf" % letter)
-            expected_msgs.append(
-                'Included extra file "%s" during parsing' % filename)
-        self.assertEqual(instance.parse_infos, expected_msgs)
-
-    def test_read_config_include_extra_file_malformed(self):
-        dirname = tempfile.mkdtemp()
-        conf_d = os.path.join(dirname, "conf.d")
-        os.mkdir(conf_d)
-
-        supervisord_conf = os.path.join(dirname, "supervisord.conf")
-        text = lstrip("""\
-        [supervisord]
-
-        [include]
-        files=%s\\conf.d\\*.conf
-        """ % dirname)
-        with open(supervisord_conf, 'w') as f:
-            f.write(text)
-
-        malformed_file = os.path.join(conf_d, "a.conf")
-        with open(malformed_file, 'w') as f:
-            f.write("[inet_http_server]\njunk\n")
-
-        instance = self._makeOne()
-        try:
-            instance.read_config(supervisord_conf)
-            self.fail("nothing raised")
-        except ValueError as exc:
-            self.assertTrue('contains parsing errors:' in exc.args[0])
-            fmt = "%s" if PY2 else '%r'
-            self.assertTrue(fmt % malformed_file in exc.args[0])
-            msg = 'Included extra file "%s" during parsing' % malformed_file
-            self.assertTrue(msg in instance.parse_infos)
-        finally:
-            shutil.rmtree(dirname, ignore_errors=True)
-
     def test_read_config_include_expands_host_node_name(self):
         dirname = tempfile.mkdtemp()
         conf_d = os.path.join(dirname, "conf.d")
         os.mkdir(conf_d)
 
         supervisord_conf = os.path.join(dirname, "supervisord.conf")
         text = lstrip("""\
@@ -1172,14 +1226,24 @@
 
         instance.configfile = StringIO('[supervisord]')
         instance.realize(args=["--bad=1"])
         self.assertEqual(len(recorder), 1)
         self.assertEqual(recorder[0],
                          "option --bad not recognized")
 
+    def test_realize_prefers_identifier_from_args(self):
+        text = lstrip("""
+        [supervisord]
+        identifier=from_config_file
+        """)
+        instance = self._makeOne()
+        instance.configfile = StringIO(text)
+        instance.realize(args=['-i', 'from_args'])
+        self.assertEqual(instance.identifier, "from_args")
+
     def test_options_afunix(self):
         instance = self._makeOne()
         text = lstrip("""\
         [unix_http_server]
         file=/tmp/supvtest.sock
         username=johndoe
         password=passwordhere
@@ -1227,19 +1291,79 @@
         try:
             instance.read_config(StringIO(text))
             self.fail("nothing raised")
         except ValueError as exc:
             self.assertEqual(exc.args[0],
                              "section [inet_http_server] has no port value")
 
+    @unittest.skipIf(sys.platform.startswith("win"), "Very different behaviour on Windows")
+    def test_cleanup_afunix_unlink(self):
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            fn = f.name
+            f.write(b'foo')
+        instance = self._makeOne()
+        instance.unlink_socketfiles = True
+        class Server:
+            pass
+        instance.httpservers = [({'family':socket.AF_UNIX, 'file':fn},
+                                 Server())]
+        instance.pidfile = ''
+        instance.cleanup()
+        self.assertFalse(os.path.exists(fn))
+
+    @unittest.skipIf(sys.platform.startswith("win"), "Very different behaviour on Windows")
+    def test_cleanup_afunix_nounlink(self):
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            fn = f.name
+            f.write(b'foo')
+        try:
+            instance = self._makeOne()
+            class Server:
+                pass
+            instance.httpservers = [({'family':socket.AF_UNIX, 'file':fn},
+                                     Server())]
+            instance.pidfile = ''
+            instance.unlink_socketfiles = False
+            instance.cleanup()
+            self.assertTrue(os.path.exists(fn))
+        finally:
+            try:
+                os.unlink(fn)
+            except OSError:
+                pass
+
+    @unittest.skipIf(sys.platform.startswith("win"), "Very different behaviour on Windows")
+    def test_cleanup_afunix_ignores_oserror_enoent(self):
+        notfound = os.path.join(os.path.dirname(__file__), 'notfound')
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            socketname = f.name
+            f.write(b'foo')
+        try:
+            instance = self._makeOne()
+            instance.unlink_socketfiles = True
+            class Server:
+                pass
+            instance.httpservers = [
+                ({'family': socket.AF_UNIX, 'file': notfound}, Server()),
+                ({'family': socket.AF_UNIX, 'file': socketname}, Server()),
+            ]
+            instance.pidfile = ''
+            instance.cleanup()
+            self.assertFalse(os.path.exists(socketname))
+        finally:
+            try:
+                os.unlink(socketname)
+            except OSError:
+                pass
+
     def test_cleanup_removes_pidfile(self):
-        pidfile = tempfile.mktemp()
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            pidfile = f.name
+            f.write(b'2')
         try:
-            with open(pidfile, 'w') as f:
-                f.write('2')
             instance = self._makeOne()
             instance.pidfile = pidfile
             instance.logger = DummyLogger()
             instance.write_pidfile()
             self.assertTrue(instance.unlink_pidfile)
             instance.cleanup()
             self.assertFalse(os.path.exists(pidfile))
@@ -1252,18 +1376,17 @@
     def test_cleanup_pidfile_ignores_oserror_enoent(self):
         notfound = os.path.join(os.path.dirname(__file__), 'notfound')
         instance = self._makeOne()
         instance.pidfile = notfound
         instance.cleanup()  # shouldn't raise
 
     def test_cleanup_does_not_remove_pidfile_from_another_supervisord(self):
-        pidfile = tempfile.mktemp()
-
-        with open(pidfile, 'w') as f:
-            f.write('1234')
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            pidfile = f.name
+            f.write(b'1234')
 
         try:
             instance = self._makeOne()
             # pidfile exists but unlink_pidfile indicates we did not write it.
             # pidfile must be from another instance of supervisord and
             # shouldn't be removed.
             instance.pidfile = pidfile
@@ -1273,49 +1396,42 @@
         finally:
             try:
                 os.unlink(pidfile)
             except OSError:
                 pass
 
     def test_cleanup_closes_poller(self):
-        pidfile = tempfile.mktemp()
+        with tempfile.NamedTemporaryFile(delete=False) as f:
+            pidfile = f.name
+            f.write(b'2')
         try:
-            with open(pidfile, 'w') as f:
-                f.write('2')
             instance = self._makeOne()
             instance.pidfile = pidfile
 
             poller = DummyPoller({})
             instance.poller = poller
             self.assertFalse(poller.closed)
             instance.cleanup()
             self.assertTrue(poller.closed)
         finally:
             try:
                 os.unlink(pidfile)
             except OSError:
                 pass
 
-    def test_cleanup_fds_closes_5_upto_minfds_ignores_oserror(self):
+    @patch('os.closerange', Mock())
+    def test_cleanup_fds_closes_5_upto_minfds(self):
         instance = self._makeOne()
         instance.minfds = 10
 
-        closed = []
-
-        def close(fd):
-            if fd == 7:
-                raise OSError
-            closed.append(fd)
-
-        @patch('os.close', close)
         def f():
-            self.assertRaises(NotImplementedError, instance.cleanup_fds)
+            instance.cleanup_fds()
 
         f()
-        # self.assertEqual(closed, [5, 6, 8, 9])
+        os.closerange.assert_called_with(5, 10)
 
     def test_close_httpservers(self):
         instance = self._makeOne()
 
         class Server:
             closed = False
 
@@ -1390,15 +1506,18 @@
         logger.handlers = [DummyLogger()]
         instance.logger = logger
         instance.reopenlogs()
         self.assertEqual(logger.handlers[0].reopened, True)
         self.assertEqual(logger.data[0], 'supervisord logreopen')
 
     def test_write_pidfile_ok(self):
-        fn = tempfile.mktemp()
+        with tempfile.NamedTemporaryFile(delete=True) as f:
+            fn = f.name
+        self.assertFalse(os.path.exists(fn))
+
         try:
             instance = self._makeOne()
             instance.logger = DummyLogger()
             instance.pidfile = fn
             instance.write_pidfile()
             self.assertTrue(os.path.exists(fn))
             with open(fn, 'r') as f:
@@ -1652,21 +1771,30 @@
         from supervisor.options import UnhosedConfigParser
         config = UnhosedConfigParser()
         config.read_string(text)
         pconfigs = instance.processes_from_section(config, 'program:foo', 'bar')
         self.assertEqual(instance.parse_warnings, [])
         self.assertEqual(pconfigs[0].stderr_logfile, None)
 
-    def test_options_with_environment_expansions(self):
+    def test_processes_from_section_accepts_number_for_stopsignal(self):
+        instance = self._makeOne()
         text = lstrip("""\
-        [inet_http_server]
-        port=*:%(ENV_HTSRV_PORT)s
-        username=%(ENV_HTSRV_USER)s
-        password=%(ENV_HTSRV_PASS)s
+        [program:foo]
+        command = /bin/foo
+        stopsignal = %d
+        """ % signal.SIGTERM)
+        from supervisor.options import UnhosedConfigParser
+        config = UnhosedConfigParser()
+        config.read_string(text)
+        pconfigs = instance.processes_from_section(config, 'program:foo', 'bar')
+        self.assertEqual(instance.parse_warnings, [])
+        self.assertEqual(pconfigs[0].stopsignal, signal.SIGTERM)
 
+    def test_options_with_environment_expansions(self):
+        text = lstrip("""\
         [supervisord]
         logfile = %(ENV_HOME)s/supervisord.log
         logfile_maxbytes = %(ENV_SUPD_LOGFILE_MAXBYTES)s
         logfile_backups = %(ENV_SUPD_LOGFILE_BACKUPS)s
         loglevel = %(ENV_SUPD_LOGLEVEL)s
         nodaemon = %(ENV_SUPD_NODAEMON)s
         minfds = %(ENV_SUPD_MINFDS)s
@@ -1674,14 +1802,19 @@
         umask = %(ENV_SUPD_UMASK)s
         identifier = supervisor_%(ENV_USER)s
         nocleanup = %(ENV_SUPD_NOCLEANUP)s
         childlogdir = %(ENV_HOME)s
         strip_ansi = %(ENV_SUPD_STRIP_ANSI)s
         environment = FAKE_ENV_VAR=/some/path
 
+        [inet_http_server]
+        port=*:%(ENV_HTSRV_PORT)s
+        username=%(ENV_HTSRV_USER)s
+        password=%(ENV_HTSRV_PASS)s
+
         [program:cat1]
         command=%(ENV_CAT1_COMMAND)s --logdir=%(ENV_CAT1_COMMAND_LOGDIR)s
         priority=%(ENV_CAT1_PRIORITY)s
         autostart=%(ENV_CAT1_AUTOSTART)s
         user=%(ENV_CAT1_USER)s
         stdout_logfile=%(ENV_CAT1_STDOUT_LOGFILE)s
         stdout_logfile_maxbytes = %(ENV_CAT1_STDOUT_LOGFILE_MAXBYTES)s
@@ -1808,14 +1941,63 @@
         self.assertEqual(instance.directory,
             os.path.join(here))
         self.assertEqual(instance.logfile,
             os.path.join(here, 'supervisord.log'))
         self.assertEqual(instance.pidfile,
             os.path.join(here, 'supervisord.pid'))
 
+    def test_options_program_section_expands_env_from_supervisord_sect(self):
+        instance = self._makeOne()
+        text = lstrip('''
+        [supervisord]
+        environment=CMD=/bin/from/supervisord/section
+
+        [program:cmd]
+        command=%(ENV_CMD)s
+        ''')
+        here = tempfile.mkdtemp()
+        supervisord_conf = os.path.join(here, 'supervisord.conf')
+        with open(supervisord_conf, 'w') as f:
+            f.write(text)
+        try:
+            instance.configfile = supervisord_conf
+            instance.realize(args=[])
+        finally:
+            shutil.rmtree(here, ignore_errors=True)
+        options = instance.configroot.supervisord
+        group = options.process_group_configs[0]
+        self.assertEqual(group.name, 'cmd')
+        proc = group.process_configs[0]
+        self.assertEqual(proc.command, '/bin/from/supervisord/section')
+
+    def test_options_program_section_expands_env_from_program_sect(self):
+        instance = self._makeOne()
+        text = lstrip('''
+        [supervisord]
+        environment=CMD=/bin/from/supervisord/section
+
+        [program:cmd]
+        command=%(ENV_CMD)s
+        environment=CMD=/bin/from/program/section
+        ''')
+        here = tempfile.mkdtemp()
+        supervisord_conf = os.path.join(here, 'supervisord.conf')
+        with open(supervisord_conf, 'w') as f:
+            f.write(text)
+        try:
+            instance.configfile = supervisord_conf
+            instance.realize(args=[])
+        finally:
+            shutil.rmtree(here, ignore_errors=True)
+        options = instance.configroot.supervisord
+        group = options.process_group_configs[0]
+        self.assertEqual(group.name, 'cmd')
+        proc = group.process_configs[0]
+        self.assertEqual(proc.command, '/bin/from/program/section')
+
     def test_options_program_section_expands_here(self):
         instance = self._makeOne()
         text = lstrip('''
         [supervisord]
 
         [program:cat]
         command=%(here)s\\bin\\cat
@@ -2339,15 +2521,34 @@
         instance = self._makeOne()
         gconfigs = instance.process_groups_from_parser(config)
         self.assertEqual(len(gconfigs), 1)
 
         gconfig1 = gconfigs[0]
         self.assertEqual(gconfig1.result_handler, dummy_handler)
 
-    def test_event_listener_pool_result_handler_unimportable(self):
+    def test_event_listener_pool_result_handler_unimportable_ImportError(self):
+        text = lstrip("""\
+        [eventlistener:cat]
+        events=PROCESS_COMMUNICATION
+        command = /bin/cat
+        result_handler = thisishopefullynotanimportablepackage:nonexistent
+        """)
+        from supervisor.options import UnhosedConfigParser
+        config = UnhosedConfigParser()
+        config.read_string(text)
+        instance = self._makeOne()
+        try:
+            instance.process_groups_from_parser(config)
+            self.fail('nothing raised')
+        except ValueError as exc:
+            self.assertEqual(exc.args[0],
+                'thisishopefullynotanimportablepackage:nonexistent cannot be '
+                'resolved within [eventlistener:cat]')
+
+    def test_event_listener_pool_result_handler_unimportable_AttributeError(self):
         text = lstrip("""\
         [eventlistener:cat]
         events=PROCESS_COMMUNICATION
         command = /bin/cat
         result_handler = supervisor.tests.base:nonexistent
         """)
         from supervisor.options import UnhosedConfigParser
@@ -3002,15 +3203,15 @@
         # all the gory details on the poor user for troubleshooting
         self.assertRaises(OverflowError,
                           instance.openhttpservers, supervisord)
 
     def test_drop_privileges_user_none(self):
         instance = self._makeOne()
         self.assertRaises(NotImplementedError,
-                          instance.dropPrivileges,
+                          instance.drop_privileges,
                           None)
 
     def test_daemonize_notifies_poller_before_and_after_fork(self):
         instance = self._makeOne()
         instance._daemonize = lambda: None
         instance.poller = Mock()
         self.assertRaises(NotImplementedError, instance.daemonize)
@@ -3487,15 +3688,7 @@
     def test_split_namespec(self):
         from supervisor.options import split_namespec
         s = split_namespec
         self.assertEqual(s('process:group'), ('process', 'group'))
         self.assertEqual(s('process'), ('process', 'process'))
         self.assertEqual(s('group:'), ('group', None))
         self.assertEqual(s('group:*'), ('group', None))
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_poller.py` & `supervisor-win-4.7.0/supervisor/tests/test_poller.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,11 +1,10 @@
 import errno
-import select
-import sys
 import unittest
+import select
 
 from supervisor.tests.base import Mock
 
 from supervisor.poller import SelectPoller, PollPoller, KQueuePoller
 from supervisor.poller import implements_poll, implements_kqueue
 from supervisor.tests.base import DummyOptions
 
@@ -445,15 +444,7 @@
             "`max_events` parameter of `kqueue.control()` should be 0 on register")
 
 
 class FakeKEvent(object):
     def __init__(self, ident, filter):
         self.ident = ident
         self.filter = filter
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_process.py` & `supervisor-win-4.7.0/supervisor/tests/test_process.py`

 * *Files 8% similar despite different names*

```diff
@@ -5,15 +5,14 @@
 import sys
 import tempfile
 import time
 import unittest
 
 from supervisor.compat import as_bytes
 from supervisor.compat import maxint
-from supervisor.helpers import DummyPopen
 from supervisor.options import BadCommand
 from supervisor.process import Subprocess
 from supervisor.tests.base import DummyDispatcher
 from supervisor.tests.base import DummyEvent
 from supervisor.tests.base import DummyFCGIGroupConfig
 from supervisor.tests.base import DummyFCGIProcessGroup
 from supervisor.tests.base import DummyOptions
@@ -235,15 +234,16 @@
         event1 = L[0]
         event2 = L[1]
         self.assertEqual(event1.__class__, events.ProcessStateStartingEvent)
         self.assertEqual(event2.__class__, events.ProcessStateBackoffEvent)
 
     def test_spawn_fail_make_pipes_emfile(self):
         options = DummyOptions()
-        options.make_pipes_error = errno.EMFILE
+        options.make_pipes_exception = OSError(errno.EMFILE,
+                                               os.strerror(errno.EMFILE))
         config = DummyPConfig(options, 'good', '/good/filename')
         instance = self._makeOne(config)
         from supervisor.states import ProcessStates
         instance.state = ProcessStates.BACKOFF
         from supervisor import events
         L = []
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
@@ -260,15 +260,16 @@
         self.assertEqual(len(L), 2)
         event1, event2 = L
         self.assertEqual(event1.__class__, events.ProcessStateStartingEvent)
         self.assertEqual(event2.__class__, events.ProcessStateBackoffEvent)
 
     def test_spawn_fail_make_pipes_other(self):
         options = DummyOptions()
-        options.make_pipes_error = 1
+        options.make_pipes_exception = OSError(errno.EPERM,
+                                               os.strerror(errno.EPERM))
         config = DummyPConfig(options, 'good', '/good/filename')
         instance = self._makeOne(config)
         from supervisor.states import ProcessStates
         instance.state = ProcessStates.BACKOFF
         from supervisor import events
         L = []
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
@@ -353,15 +354,16 @@
         # is to test that no other errors were written.
         self.assertEqual(options.written,
                          {2: "supervisor: child process was not spawned\n"})
 
     def test_spawn_as_child_execv_fail_oserror(self):
         options = DummyOptions()
         options.forkpid = 0
-        options.execv_error = 1
+        options.execv_exception = OSError(errno.EPERM,
+                                          os.strerror(errno.EPERM))
         config = DummyPConfig(options, 'good', '/good/filename')
         instance = self._makeOne(config)
         result = instance.spawn()
         self.assertEqual(result, None)
         self.assertEqual(options.parent_pipes_closed, None)
         self.assertEqual(options.child_pipes_closed, None)
         self.assertEqual(options.pgrp_set, True)
@@ -370,15 +372,15 @@
         self.assertEqual(options.written, out)
         self.assertEqual(options.privsdropped, None)
         self.assertEqual(options._exitcode, 127)
 
     def test_spawn_as_child_execv_fail_runtime_error(self):
         options = DummyOptions()
         options.forkpid = 0
-        options.execv_error = 2
+        options.execv_exception = RuntimeError(errno.ENOENT)
         config = DummyPConfig(options, 'good', '/good/filename')
         instance = self._makeOne(config)
         result = instance.spawn()
         self.assertEqual(result, None)
         self.assertEqual(options.parent_pipes_closed, None)
         self.assertEqual(options.child_pipes_closed, None)
         self.assertEqual(options.pgrp_set, True)
@@ -509,15 +511,16 @@
         config = DummyPConfig(options, 'output', executable)
         instance = self._makeOne(config)
         sent = 'a' * (1 << 13)
         self.assertRaises(OSError, instance.write, sent)
         options.forkpid = 1
         instance.spawn()
         stdin_fd = instance.pipes['stdin']
-        instance.dispatchers[stdin_fd].flush_error = errno.EPIPE
+        instance.dispatchers[stdin_fd].flush_exception = OSError(errno.EPIPE,
+                                                    os.strerror(errno.EPIPE))
         self.assertRaises(OSError, instance.write, sent)
 
     def _dont_test_spawn_and_kill(self):
         # this is a functional test
         from supervisor.tests.base import makeSpew
         try:
             sigchlds = []
@@ -621,14 +624,48 @@
         instance.stop_report()
         self.assertEqual(len(options.logger.data), 1)
         self.assertEqual(options.logger.data[0], 'waiting for test to stop')
         self.assertNotEqual(instance.laststopreport, 0)
         instance.stop_report()
         self.assertEqual(len(options.logger.data), 1) # throttled
 
+    def test_stop_report_laststopreport_in_future(self):
+        future_time = time.time() + 3600 # 1 hour into the future
+        options = DummyOptions()
+        config = DummyPConfig(options, 'test', '/test')
+        instance = self._makeOne(config)
+        instance.pid = 11
+        dispatcher = DummyDispatcher(writable=True)
+        instance.dispatchers = {'foo':dispatcher}
+        from supervisor.states import ProcessStates
+        instance.state = ProcessStates.STOPPING
+        instance.laststopreport = future_time
+
+        # This iteration of stop_report() should reset instance.laststopreport
+        # to the current time
+        instance.stop_report()
+
+        # No logging should have taken place
+        self.assertEqual(len(options.logger.data), 0)
+
+        # Ensure instance.laststopreport has rolled backward
+        self.assertTrue(instance.laststopreport < future_time)
+
+        # Sleep for 2 seconds
+        time.sleep(2)
+
+        # This iteration of stop_report() should actually trigger the report
+        instance.stop_report()
+
+        self.assertEqual(len(options.logger.data), 1)
+        self.assertEqual(options.logger.data[0], 'waiting for test to stop')
+        self.assertNotEqual(instance.laststopreport, 0)
+        instance.stop_report()
+        self.assertEqual(len(options.logger.data), 1) # throttled
+
     def test_give_up(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         instance = self._makeOne(config)
         L = []
         from supervisor.states import ProcessStates
         from supervisor import events
@@ -648,75 +685,103 @@
         config = DummyPConfig(options, 'test', '/test')
         instance = self._makeOne(config)
         instance.kill(signal.SIGTERM)
         self.assertEqual(options.logger.data[0],
                          'Attempted to kill test with sig SIGTERM but it wasn\'t running')
         self.assertFalse(instance.killing)
 
-    def test_kill_error(self):
+    def test_kill_from_starting(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
-        options.kill_error = 1
         instance = self._makeOne(config)
+        instance.pid = 11
         L = []
         from supervisor.states import ProcessStates
         from supervisor import events
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
-        instance.pid = 11
-        instance.state = ProcessStates.RUNNING
+        instance.state = ProcessStates.STARTING
         instance.kill(signal.SIGTERM)
         self.assertEqual(options.logger.data[0], 'killing test (pid 11) with '
                                                  'signal SIGTERM')
-        self.assertTrue(options.logger.data[1].startswith(
-            'unknown problem killing test'))
-        self.assertTrue('Traceback' in options.logger.data[1])
-        self.assertFalse(instance.killing)
-        self.assertEqual(len(L), 2)
-        event1 = L[0]
-        event2 = L[1]
-        self.assertEqual(event1.__class__, events.ProcessStateStoppingEvent)
-        self.assertEqual(event2.__class__, events.ProcessStateUnknownEvent)
+        self.assertTrue(instance.killing)
+        self.assertEqual(options.kills[11], signal.SIGTERM)
+        self.assertEqual(len(L), 1)
+        event = L[0]
+        self.assertEqual(event.__class__, events.ProcessStateStoppingEvent)
 
-    def test_kill_from_starting(self):
+    def test_kill_from_running(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         instance = self._makeOne(config)
         instance.pid = 11
         L = []
         from supervisor.states import ProcessStates
         from supervisor import events
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
-        instance.state = ProcessStates.STARTING
+        instance.state = ProcessStates.RUNNING
         instance.kill(signal.SIGTERM)
         self.assertEqual(options.logger.data[0], 'killing test (pid 11) with '
                                                  'signal SIGTERM')
         self.assertTrue(instance.killing)
         self.assertEqual(options.kills[11], signal.SIGTERM)
         self.assertEqual(len(L), 1)
         event = L[0]
         self.assertEqual(event.__class__, events.ProcessStateStoppingEvent)
 
-    def test_kill_from_running(self):
+    def test_kill_from_running_error(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
+        options.kill_exception = OSError(errno.EPERM,
+                                         os.strerror(errno.EPERM))
         instance = self._makeOne(config)
+        L = []
+        from supervisor.states import ProcessStates
+        from supervisor import events
+        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
         instance.pid = 11
+        instance.state = ProcessStates.RUNNING
+        instance.kill(signal.SIGTERM)
+        self.assertEqual(options.logger.data[0], 'killing test (pid 11) with '
+                         'signal SIGTERM')
+        self.assertTrue(options.logger.data[1].startswith(
+            'unknown problem killing test'))
+        self.assertTrue('Traceback' in options.logger.data[1])
+        self.assertFalse(instance.killing)
+        self.assertEqual(instance.pid, 11) # unchanged
+        self.assertEqual(instance.state, ProcessStates.UNKNOWN)
+        self.assertEqual(len(L), 2)
+        event1 = L[0]
+        event2 = L[1]
+        self.assertEqual(event1.__class__, events.ProcessStateStoppingEvent)
+        self.assertEqual(event2.__class__, events.ProcessStateUnknownEvent)
+
+    def test_kill_from_running_error_ESRCH(self):
+        options = DummyOptions()
+        config = DummyPConfig(options, 'test', '/test')
+        options.kill_exception = OSError(errno.ESRCH,
+                                         os.strerror(errno.ESRCH))
+        instance = self._makeOne(config)
         L = []
         from supervisor.states import ProcessStates
         from supervisor import events
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        instance.pid = 11
         instance.state = ProcessStates.RUNNING
         instance.kill(signal.SIGTERM)
         self.assertEqual(options.logger.data[0], 'killing test (pid 11) with '
                                                  'signal SIGTERM')
+        self.assertEqual(options.logger.data[1], 'unable to signal test (pid 11), '
+            'it probably just exited on its own: %s' %
+            str(options.kill_exception))
         self.assertTrue(instance.killing)
-        self.assertEqual(options.kills[11], signal.SIGTERM)
+        self.assertEqual(instance.pid, 11)  # unchanged
+        self.assertEqual(instance.state, ProcessStates.STOPPING)
         self.assertEqual(len(L), 1)
-        event = L[0]
-        self.assertEqual(event.__class__, events.ProcessStateStoppingEvent)
+        event1 = L[0]
+        self.assertEqual(event1.__class__, events.ProcessStateStoppingEvent)
 
     def test_kill_from_stopping(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         instance = self._makeOne(config)
         instance.pid = 11
         L = []
@@ -781,15 +846,26 @@
         self.assertEqual(options.kills[-11], signal.SIGTERM)
         self.assertEqual(len(L), 1)
         event = L[0]
         self.assertEqual(event.__class__, events.ProcessStateStoppingEvent)
         self.assertEqual(event.extra_values, [('pid', 11)])
         self.assertEqual(event.from_state, ProcessStates.RUNNING)
 
-    def test_signal(self):
+    def test_signal_from_stopped(self):
+        options = DummyOptions()
+        config = DummyPConfig(options, 'test', '/test')
+        instance = self._makeOne(config)
+        from supervisor.states import ProcessStates
+        instance.state = ProcessStates.STOPPED
+        instance.signal(signal.SIGTERM)
+        self.assertEqual(options.logger.data[0], "attempted to send test sig SIGTERM "
+                                                 "but it wasn't running")
+        self.assertEqual(len(options.kills), 0)
+
+    def test_signal_from_running(self):
         options = DummyOptions()
 
         killedpid = []
         killedsig = []
 
         def kill(pid, sig):
             killedpid.append(pid)
@@ -807,58 +883,60 @@
         instance.signal(signal.SIGTERM)
 
         self.assertEqual(killedpid, [instance.pid, ])
         self.assertEqual(killedsig, [signal.SIGTERM, ])
 
         self.assertEqual(options.logger.data[0], 'sending test (pid 11) sig SIGTERM')
 
-    def test_signal_stopped(self):
+    def test_signal_from_running_error_ESRCH(self):
         options = DummyOptions()
 
         killedpid = []
         killedsig = []
 
         def kill(pid, sig):
             killedpid.append(pid)
             killedsig.append(sig)
 
         options.kill = kill  # don't actually start killing random processes...
 
         config = DummyPConfig(options, 'test', '/test')
+        options.kill_exception = OSError(errno.ESRCH,
+                                         os.strerror(errno.ESRCH))
         instance = self._makeOne(config)
-        instance.pid = None
-
+        L = []
         from supervisor.states import ProcessStates
         instance.state = ProcessStates.STOPPED
 
         instance.signal(signal.SIGABRT)
 
         self.assertEqual(options.logger.data[0], "attempted to send test sig SIGABRT "
                                                  "but it wasn't running")
 
-        self.assertEqual(killedpid, [])
-
-    def test_signal_error(self):
+    def test_signal_from_running_error(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
-        options.kill_error = 1
+        options.kill_exception = OSError(errno.EPERM,
+                                         os.strerror(errno.EPERM))
         instance = self._makeOne(config)
         L = []
         from supervisor.states import ProcessStates
         from supervisor import events
         events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
         instance.pid = 11
         instance.state = ProcessStates.RUNNING
         instance.signal(signal.SIGABRT)
         self.assertEqual(options.logger.data[0],
                          'sending test (pid 11) sig SIGABRT')
         self.assertTrue(options.logger.data[1].startswith(
             'unknown problem sending sig test (11)'))
         self.assertTrue('Traceback' in options.logger.data[1])
         self.assertFalse(instance.killing)
+        self.assertEqual(instance.state, ProcessStates.UNKNOWN)
+        self.assertEqual(instance.pid, 11) # unchanged
         self.assertEqual(len(L), 1)
         event = L[0]
         self.assertEqual(event.__class__, events.ProcessStateUnknownEvent)
 
     def test_finish_stopping_state(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'notthere', '/notthere',
@@ -1119,51 +1197,55 @@
         L = [instance2, instance, instance1]
         L.sort()
 
         self.assertEqual(L, [instance, instance1, instance2])
 
     def test_transition_stopped_to_starting_supervisor_stopping(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, emitted_events.append)
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.SHUTDOWN
 
         # this should not be spawned, as supervisor is shutting down
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 0
         process.state = ProcessStates.STOPPED
         process.transition()
         self.assertEqual(process.state, ProcessStates.STOPPED)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_stopped_to_starting_supervisor_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.RUNNING
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 0
         process.state = ProcessStates.STOPPED
         process.transition()
         self.assertEqual(process.state, ProcessStates.STARTING)
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(event.from_state, ProcessStates.STOPPED)
+        self.assertEqual(state_when_event_emitted, ProcessStates.STARTING)
 
     def test_transition_exited_to_starting_supervisor_stopping(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, emitted_events.append)
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.SHUTDOWN
 
         # this should not be spawned, as supervisor is shutting down
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         from supervisor.datatypes import RestartUnconditionally
@@ -1171,132 +1253,147 @@
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.system_stop = True
         process.state = ProcessStates.EXITED
         process.transition()
         self.assertEqual(process.state, ProcessStates.EXITED)
         self.assertTrue(process.system_stop)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_exited_to_starting_uncond_supervisor_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         from supervisor.datatypes import RestartUnconditionally
         pconfig.autorestart = RestartUnconditionally
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.state = ProcessStates.EXITED
         process.transition()
         self.assertEqual(process.state, ProcessStates.STARTING)
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(event.from_state, ProcessStates.EXITED)
+        self.assertEqual(state_when_event_emitted, ProcessStates.STARTING)
 
     def test_transition_exited_to_starting_condit_supervisor_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         from supervisor.datatypes import RestartWhenExitUnexpected
         pconfig.autorestart = RestartWhenExitUnexpected
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.state = ProcessStates.EXITED
         process.exitstatus = 'bogus'
         process.transition()
         self.assertEqual(process.state, ProcessStates.STARTING)
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(event.from_state, ProcessStates.EXITED)
+        self.assertEqual(state_when_event_emitted, ProcessStates.STARTING)
 
     def test_transition_exited_to_starting_condit_fls_supervisor_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, emitted_events.append)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         from supervisor.datatypes import RestartWhenExitUnexpected
         pconfig.autorestart = RestartWhenExitUnexpected
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.state = ProcessStates.EXITED
         process.exitstatus = 0
         process.transition()
         self.assertEqual(process.state, ProcessStates.EXITED)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_backoff_to_starting_supervisor_stopping(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, lambda x: emitted_events.append(x))
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.SHUTDOWN
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.delay = 0
         process.backoff = 0
         process.state = ProcessStates.BACKOFF
         process.transition()
         self.assertEqual(process.state, ProcessStates.BACKOFF)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_backoff_to_starting_supervisor_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.RUNNING
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.delay = 0
         process.backoff = 0
         process.state = ProcessStates.BACKOFF
         process.transition()
         self.assertEqual(process.state, ProcessStates.STARTING)
-        self.assertEqual(len(L), 1)
-        self.assertEqual(L[0].__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
+        self.assertEqual(event.__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(event.from_state, ProcessStates.BACKOFF)
+        self.assertEqual(state_when_event_emitted, ProcessStates.STARTING)
 
     def test_transition_backoff_to_starting_supervisor_running_notyet(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, lambda x: emitted_events.append(x))
         from supervisor.states import ProcessStates, SupervisorStates
         options = DummyOptions()
         options.mood = SupervisorStates.RUNNING
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 1
         process.delay = maxint
         process.backoff = 0
         process.state = ProcessStates.BACKOFF
         process.transition()
         self.assertEqual(process.state, ProcessStates.BACKOFF)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_starting_to_running(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
 
         options = DummyOptions()
 
         # this should go from STARTING to RUNNING via transition()
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
@@ -1313,22 +1410,26 @@
         # this implies RUNNING
         self.assertEqual(process.backoff, 0)
         self.assertEqual(process.delay, 0)
         self.assertFalse(process.system_stop)
         self.assertEqual(options.logger.data[0],
                          'success: process entered RUNNING state, process has '
                          'stayed up for > than 10 seconds (startsecs)')
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateRunningEvent)
+        self.assertEqual(event.from_state, ProcessStates.STARTING)
+        self.assertEqual(state_when_event_emitted, ProcessStates.RUNNING)
 
     def test_transition_starting_to_running_laststart_in_future(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
 
         future_time = time.time() + 3600 # 1 hour into the future
         options = DummyOptions()
         test_startsecs = 2
 
         # this should go from STARTING to RUNNING via transition()
@@ -1353,34 +1454,38 @@
 
         # Ensure process.laststart has rolled backward
         self.assertTrue(process.laststart < future_time)
 
         # Sleep for (startsecs + 1)
         time.sleep(test_startsecs + 1)
 
-        # This iteration of transition() should actaully trigger the state
+        # This iteration of transition() should actually trigger the state
         # transition to RUNNING
         process.transition()
 
         # this implies RUNNING
         self.assertEqual(process.backoff, 0)
         self.assertEqual(process.delay, 0)
         self.assertFalse(process.system_stop)
         self.assertEqual(process.state, ProcessStates.RUNNING)
         self.assertEqual(options.logger.data[0],
                          'success: process entered RUNNING state, process has '
                          'stayed up for > than {} seconds (startsecs)'.format(test_startsecs))
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateRunningEvent)
+        self.assertEqual(event.from_state, ProcessStates.STARTING)
+        self.assertEqual(state_when_event_emitted, ProcessStates.RUNNING)
 
     def test_transition_backoff_to_starting_delay_in_future(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
 
         future_time = time.time() + 3600 # 1 hour into the future
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process','/bin/process')
         process = self._makeOne(pconfig)
@@ -1397,26 +1502,31 @@
         self.assertEqual(process.state, ProcessStates.BACKOFF)
 
         # Ensure process.delay has rolled backward
         self.assertTrue(process.delay < future_time)
 
         time.sleep(0.01)  # now x execution
 
-        # This iteration of transition() should actaully trigger the state
+        # This iteration of transition() should actually trigger the state
         # transition to STARTING
         process.transition()
 
         self.assertEqual(process.state, ProcessStates.STARTING)
-        self.assertEqual(len(L), 1)
-        self.assertEqual(L[0].__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
+        self.assertEqual(event.__class__, events.ProcessStateStartingEvent)
+        self.assertEqual(event.from_state, ProcessStates.BACKOFF)
+        self.assertEqual(state_when_event_emitted, ProcessStates.STARTING)
 
     def test_transition_backoff_to_fatal(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events_with_states = []
+        def subscriber(e):
+            emitted_events_with_states.append((e, e.process.state))
+        events.subscribe(events.ProcessStateEvent, subscriber)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         # this should go from BACKOFF to FATAL via transition()
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.laststart = 1
@@ -1432,38 +1542,40 @@
         # this implies FATAL
         self.assertEqual(process.backoff, 0)
         self.assertEqual(process.delay, 0)
         self.assertTrue(process.system_stop)
         self.assertEqual(options.logger.data[0],
                          'gave up: process entered FATAL state, too many start'
                          ' retries too quickly')
-        self.assertEqual(len(L), 1)
-        event = L[0]
+        self.assertEqual(len(emitted_events_with_states), 1)
+        event, state_when_event_emitted = emitted_events_with_states[0]
         self.assertEqual(event.__class__, events.ProcessStateFatalEvent)
+        self.assertEqual(event.from_state, ProcessStates.BACKOFF)
+        self.assertEqual(state_when_event_emitted, ProcessStates.FATAL)
 
     def test_transition_stops_unkillable_notyet(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, emitted_events.append)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.delay = maxint
         process.state = ProcessStates.STOPPING
 
         process.transition()
         self.assertEqual(process.state, ProcessStates.STOPPING)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_transition_stops_unkillable(self):
         from supervisor import events
-        L = []
-        events.subscribe(events.ProcessStateEvent, lambda x: L.append(x))
+        emitted_events = []
+        events.subscribe(events.ProcessStateEvent, emitted_events.append)
         from supervisor.states import ProcessStates
         options = DummyOptions()
 
         pconfig = DummyPConfig(options, 'process', 'process', '/bin/process')
         process = self._makeOne(pconfig)
         process.delay = 0
         process.pid = 1
@@ -1473,15 +1585,15 @@
         process.transition()
         self.assertTrue(process.killing)
         self.assertNotEqual(process.delay, 0)
         self.assertEqual(process.state, ProcessStates.STOPPING)
         self.assertEqual(options.logger.data[0],
                          "killing 'process' (1) with SIGTERM")
         self.assertEqual(options.kills[1], signal.SIGTERM)
-        self.assertEqual(L, [])
+        self.assertEqual(emitted_events, [])
 
     def test_change_state_doesnt_notify_if_no_state_change(self):
         options = DummyOptions()
         config = DummyPConfig(options, 'test', '/test')
         instance = self._makeOne(config)
         instance.state = 10
         self.assertEqual(instance.change_state(10), False)
@@ -1930,15 +2042,16 @@
         options = DummyOptions()
         gconfig = DummyPGroupConfig(options)
         pconfig1 = DummyPConfig(options, 'process1', 'process1', '/bin/process1')
         from supervisor.states import EventListenerStates
         gconfig = DummyPGroupConfig(options, pconfigs=[pconfig1])
         pool = self._makeOne(gconfig)
         process1 = pool.processes['process1']
-        process1.write_error = errno.EPIPE
+        process1.write_exception = OSError(errno.EPIPE,
+                                           os.strerror(errno.EPIPE))
         process1.listener_state = EventListenerStates.READY
         event = DummyEvent()
         pool._acceptEvent(event)
         pool.dispatch()
         self.assertEqual(process1.listener_state, EventListenerStates.READY)
         self.assertEqual(pool.event_buffer, [event])
         self.assertEqual(options.logger.data[0],
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_rpcinterfaces.py` & `supervisor-win-4.7.0/supervisor/tests/test_rpcinterfaces.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 00000000: 2320 2d2a 2d20 636f 6469 6e67 3a20 7574  # -*- coding: ut
 00000010: 662d 3820 2d2a 2d0d 0a69 6d70 6f72 7420  f-8 -*-..import 
-00000020: 6572 726e 6f0d 0a69 6d70 6f72 7420 6f70  errno..import op
-00000030: 6572 6174 6f72 0d0a 696d 706f 7274 206f  erator..import o
-00000040: 730d 0a69 6d70 6f72 7420 7369 676e 616c  s..import signal
-00000050: 0d0a 696d 706f 7274 2073 7973 0d0a 696d  ..import sys..im
-00000060: 706f 7274 2074 656d 7066 696c 650d 0a69  port tempfile..i
-00000070: 6d70 6f72 7420 7469 6d65 0d0a 696d 706f  mport time..impo
-00000080: 7274 2075 6e69 7474 6573 740d 0a0d 0a66  rt unittest....f
+00000020: 756e 6974 7465 7374 0d0a 696d 706f 7274  unittest..import
+00000030: 2065 7272 6e6f 0d0a 696d 706f 7274 206f   errno..import o
+00000040: 7065 7261 746f 720d 0a69 6d70 6f72 7420  perator..import 
+00000050: 6f73 0d0a 696d 706f 7274 2073 6967 6e61  os..import signa
+00000060: 6c0d 0a69 6d70 6f72 7420 7379 730d 0a69  l..import sys..i
+00000070: 6d70 6f72 7420 7465 6d70 6669 6c65 0d0a  mport tempfile..
+00000080: 696d 706f 7274 2074 696d 650d 0a0d 0a66  import time....f
 00000090: 726f 6d20 7375 7065 7276 6973 6f72 2e74  rom supervisor.t
 000000a0: 6573 7473 2e62 6173 6520 696d 706f 7274  ests.base import
 000000b0: 2054 656d 7046 696c 654f 7065 6e0d 0a66   TempFileOpen..f
 000000c0: 726f 6d20 7375 7065 7276 6973 6f72 2e74  rom supervisor.t
 000000d0: 6573 7473 2e62 6173 6520 696d 706f 7274  ests.base import
 000000e0: 2044 756d 6d79 4f70 7469 6f6e 730d 0a66   DummyOptions..f
 000000f0: 726f 6d20 7375 7065 7276 6973 6f72 2e74  rom supervisor.t
@@ -39,6724 +39,6811 @@
 00000260: 7465 7374 732e 6261 7365 2069 6d70 6f72  tests.base impor
 00000270: 7420 5f54 494d 4546 4f52 4d41 540d 0a0d  t _TIMEFORMAT...
 00000280: 0a66 726f 6d20 7375 7065 7276 6973 6f72  .from supervisor
 00000290: 2e63 6f6d 7061 7420 696d 706f 7274 2061  .compat import a
 000002a0: 735f 7374 7269 6e67 2c20 5059 320d 0a66  s_string, PY2..f
 000002b0: 726f 6d20 7375 7065 7276 6973 6f72 2e64  rom supervisor.d
 000002c0: 6174 6174 7970 6573 2069 6d70 6f72 7420  atatypes import 
-000002d0: 4175 746f 6d61 7469 630d 0a0d 0a63 6c61  Automatic....cla
-000002e0: 7373 2054 6573 7442 6173 6528 756e 6974  ss TestBase(unit
-000002f0: 7465 7374 2e54 6573 7443 6173 6529 3a0d  test.TestCase):.
-00000300: 0a20 2020 2064 6566 2073 6574 5570 2873  .    def setUp(s
-00000310: 656c 6629 3a0d 0a20 2020 2020 2020 2070  elf):..        p
-00000320: 6173 730d 0a0d 0a20 2020 2064 6566 2074  ass....    def t
-00000330: 6561 7244 6f77 6e28 7365 6c66 293a 0d0a  earDown(self):..
-00000340: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
-00000350: 2020 2020 6465 6620 5f61 7373 6572 7452      def _assertR
-00000360: 5043 4572 726f 7228 7365 6c66 2c20 636f  PCError(self, co
-00000370: 6465 2c20 6361 6c6c 6162 6c65 2c20 2a61  de, callable, *a
-00000380: 7267 732c 202a 2a6b 7729 3a0d 0a20 2020  rgs, **kw):..   
-00000390: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
-000003a0: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
-000003b0: 7063 0d0a 2020 2020 2020 2020 7472 793a  pc..        try:
-000003c0: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-000003d0: 6c6c 6162 6c65 282a 6172 6773 2c20 2a2a  llable(*args, **
-000003e0: 6b77 290d 0a20 2020 2020 2020 2065 7863  kw)..        exc
-000003f0: 6570 7420 786d 6c72 7063 2e52 5043 4572  ept xmlrpc.RPCEr
-00000400: 726f 7220 6173 2069 6e73 743a 0d0a 2020  ror as inst:..  
-00000410: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00000420: 7373 6572 7445 7175 616c 2869 6e73 742e  ssertEqual(inst.
-00000430: 636f 6465 2c20 636f 6465 290d 0a20 2020  code, code)..   
-00000440: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00000450: 2020 2020 2020 2020 7261 6973 6520 4173          raise As
-00000460: 7365 7274 696f 6e45 7272 6f72 2822 4469  sertionError("Di
-00000470: 646e 2774 2072 6169 7365 2229 0d0a 0d0a  dn't raise")....
-00000480: 0d0a 636c 6173 7320 4d61 696e 584d 4c52  ..class MainXMLR
-00000490: 5043 496e 7465 7266 6163 6554 6573 7473  PCInterfaceTests
-000004a0: 2854 6573 7442 6173 6529 3a0d 0a0d 0a20  (TestBase):.... 
-000004b0: 2020 2064 6566 205f 6765 7454 6172 6765     def _getTarge
-000004c0: 7443 6c61 7373 2873 656c 6629 3a0d 0a20  tClass(self):.. 
-000004d0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-000004e0: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
-000004f0: 6c72 7063 0d0a 2020 2020 2020 2020 7265  lrpc..        re
-00000500: 7475 726e 2078 6d6c 7270 632e 526f 6f74  turn xmlrpc.Root
-00000510: 5250 4349 6e74 6572 6661 6365 0d0a 0d0a  RPCInterface....
-00000520: 2020 2020 6465 6620 5f6d 616b 654f 6e65      def _makeOne
-00000530: 2873 656c 662c 202a 6172 6773 2c20 2a2a  (self, *args, **
-00000540: 6b77 293a 0d0a 2020 2020 2020 2020 7265  kw):..        re
-00000550: 7475 726e 2073 656c 662e 5f67 6574 5461  turn self._getTa
-00000560: 7267 6574 436c 6173 7328 2928 2a61 7267  rgetClass()(*arg
-00000570: 732c 202a 2a6b 7729 0d0a 0d0a 2020 2020  s, **kw)....    
-00000580: 6465 6620 7465 7374 5f63 746f 7228 7365  def test_ctor(se
-00000590: 6c66 293a 0d0a 2020 2020 2020 2020 696e  lf):..        in
-000005a0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-000005b0: 6d61 6b65 4f6e 6528 5b28 2773 7570 6572  makeOne([('super
-000005c0: 7669 736f 7227 2c20 4e6f 6e65 295d 290d  visor', None)]).
-000005d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000005e0: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
-000005f0: 6163 652e 7375 7065 7276 6973 6f72 2c20  ace.supervisor, 
-00000600: 4e6f 6e65 290d 0a0d 0a20 2020 2064 6566  None)....    def
-00000610: 2074 6573 745f 7472 6176 6572 7365 2873   test_traverse(s
-00000620: 656c 6629 3a0d 0a20 2020 2020 2020 2064  elf):..        d
-00000630: 756d 6d79 203d 2044 756d 6d79 5250 4349  ummy = DummyRPCI
-00000640: 6e74 6572 6661 6365 2829 0d0a 2020 2020  nterface()..    
-00000650: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00000660: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 5b28  self._makeOne([(
-00000670: 2764 756d 6d79 272c 2064 756d 6d79 295d  'dummy', dummy)]
-00000680: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00000690: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-000006a0: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-000006b0: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
-000006c0: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
-000006d0: 756c 7473 2e55 4e4b 4e4f 574e 5f4d 4554  ults.UNKNOWN_MET
-000006e0: 484f 442c 0d0a 2020 2020 2020 2020 2020  HOD,..          
+000002d0: 4175 746f 6d61 7469 630d 0a0d 0a0d 0a63  Automatic......c
+000002e0: 6c61 7373 2054 6573 7442 6173 6528 756e  lass TestBase(un
+000002f0: 6974 7465 7374 2e54 6573 7443 6173 6529  ittest.TestCase)
+00000300: 3a0d 0a20 2020 2064 6566 2073 6574 5570  :..    def setUp
+00000310: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00000320: 2070 6173 730d 0a0d 0a20 2020 2064 6566   pass....    def
+00000330: 2074 6561 7244 6f77 6e28 7365 6c66 293a   tearDown(self):
+00000340: 0d0a 2020 2020 2020 2020 7061 7373 0d0a  ..        pass..
+00000350: 0d0a 2020 2020 6465 6620 5f61 7373 6572  ..    def _asser
+00000360: 7452 5043 4572 726f 7228 7365 6c66 2c20  tRPCError(self, 
+00000370: 636f 6465 2c20 6361 6c6c 6162 6c65 2c20  code, callable, 
+00000380: 2a61 7267 732c 202a 2a6b 7729 3a0d 0a20  *args, **kw):.. 
+00000390: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+000003a0: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
+000003b0: 6c72 7063 0d0a 2020 2020 2020 2020 7472  lrpc..        tr
+000003c0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+000003d0: 6361 6c6c 6162 6c65 282a 6172 6773 2c20  callable(*args, 
+000003e0: 2a2a 6b77 290d 0a20 2020 2020 2020 2065  **kw)..        e
+000003f0: 7863 6570 7420 786d 6c72 7063 2e52 5043  xcept xmlrpc.RPC
+00000400: 4572 726f 7220 6173 2069 6e73 743a 0d0a  Error as inst:..
+00000410: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00000420: 2e61 7373 6572 7445 7175 616c 2869 6e73  .assertEqual(ins
+00000430: 742e 636f 6465 2c20 636f 6465 290d 0a20  t.code, code).. 
+00000440: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00000450: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00000460: 4173 7365 7274 696f 6e45 7272 6f72 2822  AssertionError("
+00000470: 4469 646e 2774 2072 6169 7365 2229 0d0a  Didn't raise")..
+00000480: 0d0a 0d0a 636c 6173 7320 4d61 696e 584d  ....class MainXM
+00000490: 4c52 5043 496e 7465 7266 6163 6554 6573  LRPCInterfaceTes
+000004a0: 7473 2854 6573 7442 6173 6529 3a0d 0a0d  ts(TestBase):...
+000004b0: 0a20 2020 2064 6566 205f 6765 7454 6172  .    def _getTar
+000004c0: 6765 7443 6c61 7373 2873 656c 6629 3a0d  getClass(self):.
+000004d0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+000004e0: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+000004f0: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+00000500: 7265 7475 726e 2078 6d6c 7270 632e 526f  return xmlrpc.Ro
+00000510: 6f74 5250 4349 6e74 6572 6661 6365 0d0a  otRPCInterface..
+00000520: 0d0a 2020 2020 6465 6620 5f6d 616b 654f  ..    def _makeO
+00000530: 6e65 2873 656c 662c 202a 6172 6773 2c20  ne(self, *args, 
+00000540: 2a2a 6b77 293a 0d0a 2020 2020 2020 2020  **kw):..        
+00000550: 7265 7475 726e 2073 656c 662e 5f67 6574  return self._get
+00000560: 5461 7267 6574 436c 6173 7328 2928 2a61  TargetClass()(*a
+00000570: 7267 732c 202a 2a6b 7729 0d0a 0d0a 2020  rgs, **kw)....  
+00000580: 2020 6465 6620 7465 7374 5f63 746f 7228    def test_ctor(
+00000590: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+000005a0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+000005b0: 2e5f 6d61 6b65 4f6e 6528 5b28 2773 7570  ._makeOne([('sup
+000005c0: 6572 7669 736f 7227 2c20 4e6f 6e65 295d  ervisor', None)]
+000005d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+000005e0: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
+000005f0: 7266 6163 652e 7375 7065 7276 6973 6f72  rface.supervisor
+00000600: 2c20 4e6f 6e65 290d 0a0d 0a20 2020 2064  , None)....    d
+00000610: 6566 2074 6573 745f 7472 6176 6572 7365  ef test_traverse
+00000620: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00000630: 2064 756d 6d79 203d 2044 756d 6d79 5250   dummy = DummyRP
+00000640: 4349 6e74 6572 6661 6365 2829 0d0a 2020  CInterface()..  
+00000650: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00000660: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00000670: 5b28 2764 756d 6d79 272c 2064 756d 6d79  [('dummy', dummy
+00000680: 295d 290d 0a20 2020 2020 2020 2066 726f  )])..        fro
+00000690: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+000006a0: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
+000006b0: 2020 2020 7365 6c66 2e5f 6173 7365 7274      self._assert
+000006c0: 5250 4345 7272 6f72 2878 6d6c 7270 632e  RPCError(xmlrpc.
+000006d0: 4661 756c 7473 2e55 4e4b 4e4f 574e 5f4d  Faults.UNKNOWN_M
+000006e0: 4554 484f 442c 0d0a 2020 2020 2020 2020  ETHOD,..        
 000006f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000700: 2020 2078 6d6c 7270 632e 7472 6176 6572     xmlrpc.traver
-00000710: 7365 2c20 696e 7465 7266 6163 652c 2027  se, interface, '
-00000720: 6e6f 7474 6865 7265 2e68 656c 6c6f 272c  notthere.hello',
-00000730: 205b 5d29 0d0a 2020 2020 2020 2020 7365   [])..        se
-00000740: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00000750: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-00000760: 2e55 4e4b 4e4f 574e 5f4d 4554 484f 442c  .UNKNOWN_METHOD,
-00000770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00000780: 2020 2020 2020 2020 2020 2020 2020 2078                 x
-00000790: 6d6c 7270 632e 7472 6176 6572 7365 2c20  mlrpc.traverse, 
-000007a0: 696e 7465 7266 6163 652c 0d0a 2020 2020  interface,..    
+00000700: 2020 2020 2078 6d6c 7270 632e 7472 6176       xmlrpc.trav
+00000710: 6572 7365 2c20 696e 7465 7266 6163 652c  erse, interface,
+00000720: 2027 6e6f 7474 6865 7265 2e68 656c 6c6f   'notthere.hello
+00000730: 272c 205b 5d29 0d0a 2020 2020 2020 2020  ', [])..        
+00000740: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
+00000750: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
+00000760: 7473 2e55 4e4b 4e4f 574e 5f4d 4554 484f  ts.UNKNOWN_METHO
+00000770: 442c 0d0a 2020 2020 2020 2020 2020 2020  D,..            
+00000780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000790: 2078 6d6c 7270 632e 7472 6176 6572 7365   xmlrpc.traverse
+000007a0: 2c20 696e 7465 7266 6163 652c 0d0a 2020  , interface,..  
 000007b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007c0: 2020 2020 2020 2020 2027 7375 7065 7276           'superv
-000007d0: 6973 6f72 2e5f 7265 6164 4669 6c65 272c  isor._readFile',
-000007e0: 205b 5d29 0d0a 2020 2020 2020 2020 7365   [])..        se
-000007f0: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00000800: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-00000810: 2e49 4e43 4f52 5245 4354 5f50 4152 414d  .INCORRECT_PARAM
-00000820: 4554 4552 532c 0d0a 2020 2020 2020 2020  ETERS,..        
+000007c0: 2020 2020 2020 2020 2020 2027 7375 7065             'supe
+000007d0: 7276 6973 6f72 2e5f 7265 6164 4669 6c65  rvisor._readFile
+000007e0: 272c 205b 5d29 0d0a 2020 2020 2020 2020  ', [])..        
+000007f0: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
+00000800: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
+00000810: 7473 2e49 4e43 4f52 5245 4354 5f50 4152  ts.INCORRECT_PAR
+00000820: 414d 4554 4552 532c 0d0a 2020 2020 2020  AMETERS,..      
 00000830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000840: 2020 2020 2078 6d6c 7270 632e 7472 6176       xmlrpc.trav
-00000850: 6572 7365 2c20 696e 7465 7266 6163 652c  erse, interface,
-00000860: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00000870: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00000880: 6475 6d6d 792e 6865 6c6c 6f27 2c20 5b31  dummy.hello', [1
-00000890: 5d29 0d0a 2020 2020 2020 2020 7365 6c66  ])..        self
-000008a0: 2e61 7373 6572 7445 7175 616c 2878 6d6c  .assertEqual(xml
-000008b0: 7270 632e 7472 6176 6572 7365 280d 0a20  rpc.traverse(.. 
-000008c0: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
-000008d0: 6661 6365 2c20 2764 756d 6d79 2e68 656c  face, 'dummy.hel
-000008e0: 6c6f 272c 205b 5d29 2c20 2748 656c 6c6f  lo', []), 'Hello
-000008f0: 2127 290d 0a0d 0a0d 0a63 6c61 7373 2053  !')......class S
-00000900: 7570 6572 7669 736f 724e 616d 6573 7061  upervisorNamespa
-00000910: 6365 584d 4c52 5043 496e 7465 7266 6163  ceXMLRPCInterfac
-00000920: 6554 6573 7473 2854 6573 7442 6173 6529  eTests(TestBase)
-00000930: 3a0d 0a20 2020 2064 6566 205f 6765 7454  :..    def _getT
-00000940: 6172 6765 7443 6c61 7373 2873 656c 6629  argetClass(self)
-00000950: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-00000960: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00000970: 7420 7270 6369 6e74 6572 6661 6365 0d0a  t rpcinterface..
-00000980: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00000990: 7063 696e 7465 7266 6163 652e 5375 7065  pcinterface.Supe
-000009a0: 7276 6973 6f72 4e61 6d65 7370 6163 6552  rvisorNamespaceR
-000009b0: 5043 496e 7465 7266 6163 650d 0a0d 0a20  PCInterface.... 
-000009c0: 2020 2064 6566 205f 6d61 6b65 4f6e 6528     def _makeOne(
-000009d0: 7365 6c66 2c20 2a61 7267 732c 202a 2a6b  self, *args, **k
-000009e0: 7729 3a0d 0a20 2020 2020 2020 2072 6574  w):..        ret
-000009f0: 7572 6e20 7365 6c66 2e5f 6765 7454 6172  urn self._getTar
-00000a00: 6765 7443 6c61 7373 2829 282a 6172 6773  getClass()(*args
-00000a10: 2c20 2a2a 6b77 290d 0a0d 0a20 2020 2064  , **kw)....    d
-00000a20: 6566 2074 6573 745f 7570 6461 7465 2873  ef test_update(s
-00000a30: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
-00000a40: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-00000a50: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-00000a60: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00000a70: 7669 736f 722e 7375 7065 7276 6973 6f72  visor.supervisor
-00000a80: 6420 696d 706f 7274 2053 7570 6572 7669  d import Supervi
-00000a90: 736f 7253 7461 7465 730d 0a20 2020 2020  sorStates..     
-00000aa0: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00000ab0: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
-00000ac0: 2829 0d0a 2020 2020 2020 2020 696e 7465  ()..        inte
-00000ad0: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00000ae0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00000af0: 6429 0d0a 2020 2020 2020 2020 696e 7465  d)..        inte
-00000b00: 7266 6163 652e 5f75 7064 6174 6528 2766  rface._update('f
-00000b10: 6f6f 2729 0d0a 2020 2020 2020 2020 7365  oo')..        se
-00000b20: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
-00000b30: 6e74 6572 6661 6365 2e75 7064 6174 655f  nterface.update_
-00000b40: 7465 7874 2c20 2766 6f6f 2729 0d0a 2020  text, 'foo')..  
-00000b50: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00000b60: 642e 6f70 7469 6f6e 732e 6d6f 6f64 203d  d.options.mood =
-00000b70: 2053 7570 6572 7669 736f 7253 7461 7465   SupervisorState
-00000b80: 732e 5348 5554 444f 574e 0d0a 2020 2020  s.SHUTDOWN..    
-00000b90: 2020 2020 7365 6c66 2e5f 6173 7365 7274      self._assert
-00000ba0: 5250 4345 7272 6f72 2878 6d6c 7270 632e  RPCError(xmlrpc.
-00000bb0: 4661 756c 7473 2e53 4855 5444 4f57 4e5f  Faults.SHUTDOWN_
-00000bc0: 5354 4154 452c 2069 6e74 6572 6661 6365  STATE, interface
-00000bd0: 2e5f 7570 6461 7465 2c0d 0a20 2020 2020  ._update,..     
+00000840: 2020 2020 2020 2078 6d6c 7270 632e 7472         xmlrpc.tr
+00000850: 6176 6572 7365 2c20 696e 7465 7266 6163  averse, interfac
+00000860: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00000870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000880: 2027 6475 6d6d 792e 6865 6c6c 6f27 2c20   'dummy.hello', 
+00000890: 5b31 5d29 0d0a 2020 2020 2020 2020 7365  [1])..        se
+000008a0: 6c66 2e61 7373 6572 7445 7175 616c 2878  lf.assertEqual(x
+000008b0: 6d6c 7270 632e 7472 6176 6572 7365 280d  mlrpc.traverse(.
+000008c0: 0a20 2020 2020 2020 2020 2020 2069 6e74  .            int
+000008d0: 6572 6661 6365 2c20 2764 756d 6d79 2e68  erface, 'dummy.h
+000008e0: 656c 6c6f 272c 205b 5d29 2c20 2748 656c  ello', []), 'Hel
+000008f0: 6c6f 2127 290d 0a0d 0a0d 0a63 6c61 7373  lo!')......class
+00000900: 2053 7570 6572 7669 736f 724e 616d 6573   SupervisorNames
+00000910: 7061 6365 584d 4c52 5043 496e 7465 7266  paceXMLRPCInterf
+00000920: 6163 6554 6573 7473 2854 6573 7442 6173  aceTests(TestBas
+00000930: 6529 3a0d 0a20 2020 2064 6566 205f 6765  e):..    def _ge
+00000940: 7454 6172 6765 7443 6c61 7373 2873 656c  tTargetClass(sel
+00000950: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+00000960: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+00000970: 6f72 7420 7270 6369 6e74 6572 6661 6365  ort rpcinterface
+00000980: 0d0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00000990: 2072 7063 696e 7465 7266 6163 652e 5375   rpcinterface.Su
+000009a0: 7065 7276 6973 6f72 4e61 6d65 7370 6163  pervisorNamespac
+000009b0: 6552 5043 496e 7465 7266 6163 650d 0a0d  eRPCInterface...
+000009c0: 0a20 2020 2064 6566 205f 6d61 6b65 4f6e  .    def _makeOn
+000009d0: 6528 7365 6c66 2c20 2a61 7267 732c 202a  e(self, *args, *
+000009e0: 2a6b 7729 3a0d 0a20 2020 2020 2020 2072  *kw):..        r
+000009f0: 6574 7572 6e20 7365 6c66 2e5f 6765 7454  eturn self._getT
+00000a00: 6172 6765 7443 6c61 7373 2829 282a 6172  argetClass()(*ar
+00000a10: 6773 2c20 2a2a 6b77 290d 0a0d 0a20 2020  gs, **kw)....   
+00000a20: 2064 6566 2074 6573 745f 7570 6461 7465   def test_update
+00000a30: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00000a40: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00000a50: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
+00000a60: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00000a70: 6572 7669 736f 722e 7375 7065 7276 6973  ervisor.supervis
+00000a80: 6f72 6420 696d 706f 7274 2053 7570 6572  ord import Super
+00000a90: 7669 736f 7253 7461 7465 730d 0a20 2020  visorStates..   
+00000aa0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+00000ab0: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
+00000ac0: 6f72 2829 0d0a 2020 2020 2020 2020 696e  or()..        in
+00000ad0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00000ae0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00000af0: 6f72 6429 0d0a 2020 2020 2020 2020 696e  ord)..        in
+00000b00: 7465 7266 6163 652e 5f75 7064 6174 6528  terface._update(
+00000b10: 2766 6f6f 2729 0d0a 2020 2020 2020 2020  'foo')..        
+00000b20: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00000b30: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
+00000b40: 655f 7465 7874 2c20 2766 6f6f 2729 0d0a  e_text, 'foo')..
+00000b50: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00000b60: 6f72 642e 6f70 7469 6f6e 732e 6d6f 6f64  ord.options.mood
+00000b70: 203d 2053 7570 6572 7669 736f 7253 7461   = SupervisorSta
+00000b80: 7465 732e 5348 5554 444f 574e 0d0a 2020  tes.SHUTDOWN..  
+00000b90: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
+00000ba0: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
+00000bb0: 632e 4661 756c 7473 2e53 4855 5444 4f57  c.Faults.SHUTDOW
+00000bc0: 4e5f 5354 4154 452c 2069 6e74 6572 6661  N_STATE, interfa
+00000bd0: 6365 2e5f 7570 6461 7465 2c0d 0a20 2020  ce._update,..   
 00000be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000bf0: 2020 2020 2020 2020 2766 6f6f 2729 0d0a          'foo')..
-00000c00: 0d0a 2020 2020 6465 6620 7465 7374 5f67  ..    def test_g
-00000c10: 6574 4150 4956 6572 7369 6f6e 2873 656c  etAPIVersion(sel
-00000c20: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
-00000c30: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
-00000c40: 6f72 7420 7270 6369 6e74 6572 6661 6365  ort rpcinterface
-00000c50: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-00000c60: 6973 6f72 6420 3d20 4475 6d6d 7953 7570  isord = DummySup
-00000c70: 6572 7669 736f 7228 290d 0a20 2020 2020  ervisor()..     
-00000c80: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
-00000c90: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
-00000ca0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
-00000cb0: 2020 2076 6572 7369 6f6e 203d 2069 6e74     version = int
-00000cc0: 6572 6661 6365 2e67 6574 4150 4956 6572  erface.getAPIVer
-00000cd0: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-00000ce0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00000cf0: 2876 6572 7369 6f6e 2c20 7270 6369 6e74  (version, rpcint
-00000d00: 6572 6661 6365 2e41 5049 5f56 4552 5349  erface.API_VERSI
-00000d10: 4f4e 290d 0a20 2020 2020 2020 2073 656c  ON)..        sel
-00000d20: 662e 6173 7365 7274 4571 7561 6c28 696e  f.assertEqual(in
-00000d30: 7465 7266 6163 652e 7570 6461 7465 5f74  terface.update_t
-00000d40: 6578 742c 2027 6765 7441 5049 5665 7273  ext, 'getAPIVers
-00000d50: 696f 6e27 290d 0a0d 0a20 2020 2064 6566  ion')....    def
-00000d60: 2074 6573 745f 6765 7441 5049 5665 7273   test_getAPIVers
-00000d70: 696f 6e5f 616c 6961 7365 645f 746f 5f64  ion_aliased_to_d
-00000d80: 6570 7265 6361 7465 645f 6765 7456 6572  eprecated_getVer
-00000d90: 7369 6f6e 2873 656c 6629 3a0d 0a20 2020  sion(self):..   
-00000da0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00000db0: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
-00000dc0: 6f72 2829 0d0a 2020 2020 2020 2020 696e  or()..        in
-00000dd0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-00000de0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-00000df0: 6f72 6429 0d0a 2020 2020 2020 2020 7365  ord)..        se
-00000e00: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
-00000e10: 6e74 6572 6661 6365 2e67 6574 4150 4956  nterface.getAPIV
-00000e20: 6572 7369 6f6e 2c20 696e 7465 7266 6163  ersion, interfac
-00000e30: 652e 6765 7456 6572 7369 6f6e 290d 0a0d  e.getVersion)...
-00000e40: 0a20 2020 2064 6566 2074 6573 745f 6765  .    def test_ge
-00000e50: 7453 7570 6572 7669 736f 7256 6572 7369  tSupervisorVersi
-00000e60: 6f6e 2873 656c 6629 3a0d 0a20 2020 2020  on(self):..     
-00000e70: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00000e80: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
-00000e90: 2829 0d0a 2020 2020 2020 2020 696e 7465  ()..        inte
-00000ea0: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00000eb0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00000ec0: 6429 0d0a 2020 2020 2020 2020 7665 7273  d)..        vers
-00000ed0: 696f 6e20 3d20 696e 7465 7266 6163 652e  ion = interface.
-00000ee0: 6765 7453 7570 6572 7669 736f 7256 6572  getSupervisorVer
-00000ef0: 7369 6f6e 2829 0d0a 2020 2020 2020 2020  sion()..        
-00000f00: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
-00000f10: 696d 706f 7274 206f 7074 696f 6e73 0d0a  import options..
-00000f20: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00000f30: 6572 7445 7175 616c 2876 6572 7369 6f6e  ertEqual(version
-00000f40: 2c20 6f70 7469 6f6e 732e 5645 5253 494f  , options.VERSIO
-00000f50: 4e29 0d0a 2020 2020 2020 2020 7365 6c66  N)..        self
-00000f60: 2e61 7373 6572 7445 7175 616c 2869 6e74  .assertEqual(int
-00000f70: 6572 6661 6365 2e75 7064 6174 655f 7465  erface.update_te
-00000f80: 7874 2c20 2767 6574 5375 7065 7276 6973  xt, 'getSupervis
-00000f90: 6f72 5665 7273 696f 6e27 290d 0a0d 0a20  orVersion').... 
-00000fa0: 2020 2064 6566 2074 6573 745f 6765 7449     def test_getI
-00000fb0: 6465 6e74 6966 6963 6174 696f 6e28 7365  dentification(se
-00000fc0: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
-00000fd0: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
-00000fe0: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
-00000ff0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00001000: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00001010: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-00001020: 2020 2020 2020 2069 6465 6e74 6966 6965         identifie
-00001030: 7220 3d20 696e 7465 7266 6163 652e 6765  r = interface.ge
-00001040: 7449 6465 6e74 6966 6963 6174 696f 6e28  tIdentification(
-00001050: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00001060: 6173 7365 7274 4571 7561 6c28 6964 656e  assertEqual(iden
-00001070: 7469 6669 6572 2c20 7375 7065 7276 6973  tifier, supervis
-00001080: 6f72 642e 6f70 7469 6f6e 732e 6964 656e  ord.options.iden
-00001090: 7469 6669 6572 290d 0a20 2020 2020 2020  tifier)..       
-000010a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000010b0: 6c28 696e 7465 7266 6163 652e 7570 6461  l(interface.upda
-000010c0: 7465 5f74 6578 742c 2027 6765 7449 6465  te_text, 'getIde
-000010d0: 6e74 6966 6963 6174 696f 6e27 290d 0a0d  ntification')...
-000010e0: 0a20 2020 2064 6566 2074 6573 745f 6765  .    def test_ge
-000010f0: 7453 7461 7465 2873 656c 6629 3a0d 0a20  tState(self):.. 
-00001100: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00001110: 7276 6973 6f72 2e73 7461 7465 7320 696d  rvisor.states im
-00001120: 706f 7274 2067 6574 5375 7065 7276 6973  port getSupervis
-00001130: 6f72 5374 6174 6544 6573 6372 6970 7469  orStateDescripti
-00001140: 6f6e 0d0a 2020 2020 2020 2020 7375 7065  on..        supe
-00001150: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
-00001160: 7570 6572 7669 736f 7228 290d 0a20 2020  upervisor()..   
-00001170: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00001180: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00001190: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-000011a0: 2020 2020 2073 7461 7465 696e 666f 203d       stateinfo =
-000011b0: 2069 6e74 6572 6661 6365 2e67 6574 5374   interface.getSt
-000011c0: 6174 6528 290d 0a20 2020 2020 2020 2073  ate()..        s
-000011d0: 7461 7465 636f 6465 203d 2073 7570 6572  tatecode = super
-000011e0: 7669 736f 7264 2e6f 7074 696f 6e73 2e6d  visord.options.m
-000011f0: 6f6f 640d 0a20 2020 2020 2020 2073 7461  ood..        sta
-00001200: 7465 6e61 6d65 203d 2067 6574 5375 7065  tename = getSupe
-00001210: 7276 6973 6f72 5374 6174 6544 6573 6372  rvisorStateDescr
-00001220: 6970 7469 6f6e 2873 7461 7465 636f 6465  iption(statecode
-00001230: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00001240: 6173 7365 7274 4571 7561 6c28 7374 6174  assertEqual(stat
-00001250: 6569 6e66 6f5b 2773 7461 7465 636f 6465  einfo['statecode
-00001260: 275d 2c20 7374 6174 6563 6f64 6529 0d0a  '], statecode)..
-00001270: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00001280: 6572 7445 7175 616c 2873 7461 7465 696e  ertEqual(statein
-00001290: 666f 5b27 7374 6174 656e 616d 6527 5d2c  fo['statename'],
-000012a0: 2073 7461 7465 6e61 6d65 290d 0a20 2020   statename)..   
-000012b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000012c0: 4571 7561 6c28 696e 7465 7266 6163 652e  Equal(interface.
-000012d0: 7570 6461 7465 5f74 6578 742c 2027 6765  update_text, 'ge
-000012e0: 7453 7461 7465 2729 0d0a 0d0a 2020 2020  tState')....    
-000012f0: 6465 6620 7465 7374 5f67 6574 5049 4428  def test_getPID(
-00001300: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00001310: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00001320: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00001330: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-00001340: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00001350: 6f70 7469 6f6e 7329 0d0a 2020 2020 2020  options)..      
-00001360: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
-00001370: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
-00001380: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
-00001390: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000013a0: 616c 2869 6e74 6572 6661 6365 2e67 6574  al(interface.get
-000013b0: 5049 4428 292c 206f 7074 696f 6e73 2e67  PID(), options.g
-000013c0: 6574 5f70 6964 2829 290d 0a20 2020 2020  et_pid())..     
-000013d0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000013e0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
-000013f0: 6461 7465 5f74 6578 742c 2027 6765 7450  date_text, 'getP
-00001400: 4944 2729 0d0a 0d0a 2020 2020 6465 6620  ID')....    def 
-00001410: 7465 7374 5f72 6561 644c 6f67 5f61 6c69  test_readLog_ali
-00001420: 6173 6564 5f74 6f5f 6465 7072 6563 6174  ased_to_deprecat
-00001430: 6564 5f72 6561 644d 6169 6e4c 6f67 2873  ed_readMainLog(s
-00001440: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-00001450: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-00001460: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
-00001470: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00001480: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00001490: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-000014a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000014b0: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
-000014c0: 6365 2e72 6561 644d 6169 6e4c 6f67 2c20  ce.readMainLog, 
-000014d0: 696e 7465 7266 6163 652e 7265 6164 4c6f  interface.readLo
-000014e0: 6729 0d0a 0d0a 2020 2020 6465 6620 7465  g)....    def te
-000014f0: 7374 5f72 6561 644c 6f67 5f75 6e72 6561  st_readLog_unrea
-00001500: 6461 626c 6528 7365 6c66 293a 0d0a 2020  dable(self):..  
-00001510: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00001520: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
-00001530: 7270 630d 0a20 2020 2020 2020 2073 7570  rpc..        sup
-00001540: 6572 7669 736f 7264 203d 2044 756d 6d79  ervisord = Dummy
-00001550: 5375 7065 7276 6973 6f72 2829 0d0a 2020  Supervisor()..  
-00001560: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-00001570: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-00001580: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-00001590: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
-000015a0: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
-000015b0: 632e 4661 756c 7473 2e4e 4f5f 4649 4c45  c.Faults.NO_FILE
-000015c0: 2c20 696e 7465 7266 6163 652e 7265 6164  , interface.read
-000015d0: 4c6f 672c 0d0a 2020 2020 2020 2020 2020  Log,..          
+00000bf0: 2020 2020 2020 2020 2020 2766 6f6f 2729            'foo')
+00000c00: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00000c10: 5f67 6574 4150 4956 6572 7369 6f6e 2873  _getAPIVersion(s
+00000c20: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
+00000c30: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
+00000c40: 6d70 6f72 7420 7270 6369 6e74 6572 6661  mport rpcinterfa
+00000c50: 6365 0d0a 2020 2020 2020 2020 7375 7065  ce..        supe
+00000c60: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
+00000c70: 7570 6572 7669 736f 7228 290d 0a20 2020  upervisor()..   
+00000c80: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00000c90: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+00000ca0: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+00000cb0: 2020 2020 2076 6572 7369 6f6e 203d 2069       version = i
+00000cc0: 6e74 6572 6661 6365 2e67 6574 4150 4956  nterface.getAPIV
+00000cd0: 6572 7369 6f6e 2829 0d0a 2020 2020 2020  ersion()..      
+00000ce0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00000cf0: 616c 2876 6572 7369 6f6e 2c20 7270 6369  al(version, rpci
+00000d00: 6e74 6572 6661 6365 2e41 5049 5f56 4552  nterface.API_VER
+00000d10: 5349 4f4e 290d 0a20 2020 2020 2020 2073  SION)..        s
+00000d20: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00000d30: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
+00000d40: 5f74 6578 742c 2027 6765 7441 5049 5665  _text, 'getAPIVe
+00000d50: 7273 696f 6e27 290d 0a0d 0a20 2020 2064  rsion')....    d
+00000d60: 6566 2074 6573 745f 6765 7441 5049 5665  ef test_getAPIVe
+00000d70: 7273 696f 6e5f 616c 6961 7365 645f 746f  rsion_aliased_to
+00000d80: 5f64 6570 7265 6361 7465 645f 6765 7456  _deprecated_getV
+00000d90: 6572 7369 6f6e 2873 656c 6629 3a0d 0a20  ersion(self):.. 
+00000da0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00000db0: 7264 203d 2044 756d 6d79 5375 7065 7276  rd = DummySuperv
+00000dc0: 6973 6f72 2829 0d0a 2020 2020 2020 2020  isor()..        
+00000dd0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00000de0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00000df0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00000e00: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00000e10: 2869 6e74 6572 6661 6365 2e67 6574 4150  (interface.getAP
+00000e20: 4956 6572 7369 6f6e 2c20 696e 7465 7266  IVersion, interf
+00000e30: 6163 652e 6765 7456 6572 7369 6f6e 290d  ace.getVersion).
+00000e40: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+00000e50: 6765 7453 7570 6572 7669 736f 7256 6572  getSupervisorVer
+00000e60: 7369 6f6e 2873 656c 6629 3a0d 0a20 2020  sion(self):..   
+00000e70: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+00000e80: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
+00000e90: 6f72 2829 0d0a 2020 2020 2020 2020 696e  or()..        in
+00000ea0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00000eb0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00000ec0: 6f72 6429 0d0a 2020 2020 2020 2020 7665  ord)..        ve
+00000ed0: 7273 696f 6e20 3d20 696e 7465 7266 6163  rsion = interfac
+00000ee0: 652e 6765 7453 7570 6572 7669 736f 7256  e.getSupervisorV
+00000ef0: 6572 7369 6f6e 2829 0d0a 2020 2020 2020  ersion()..      
+00000f00: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+00000f10: 7220 696d 706f 7274 206f 7074 696f 6e73  r import options
+00000f20: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00000f30: 7373 6572 7445 7175 616c 2876 6572 7369  ssertEqual(versi
+00000f40: 6f6e 2c20 6f70 7469 6f6e 732e 5645 5253  on, options.VERS
+00000f50: 494f 4e29 0d0a 2020 2020 2020 2020 7365  ION)..        se
+00000f60: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
+00000f70: 6e74 6572 6661 6365 2e75 7064 6174 655f  nterface.update_
+00000f80: 7465 7874 2c20 2767 6574 5375 7065 7276  text, 'getSuperv
+00000f90: 6973 6f72 5665 7273 696f 6e27 290d 0a0d  isorVersion')...
+00000fa0: 0a20 2020 2064 6566 2074 6573 745f 6765  .    def test_ge
+00000fb0: 7449 6465 6e74 6966 6963 6174 696f 6e28  tIdentification(
+00000fc0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00000fd0: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
+00000fe0: 6d6d 7953 7570 6572 7669 736f 7228 290d  mmySupervisor().
+00000ff0: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00001000: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00001010: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00001020: 0a20 2020 2020 2020 2069 6465 6e74 6966  .        identif
+00001030: 6965 7220 3d20 696e 7465 7266 6163 652e  ier = interface.
+00001040: 6765 7449 6465 6e74 6966 6963 6174 696f  getIdentificatio
+00001050: 6e28 290d 0a20 2020 2020 2020 2073 656c  n()..        sel
+00001060: 662e 6173 7365 7274 4571 7561 6c28 6964  f.assertEqual(id
+00001070: 656e 7469 6669 6572 2c20 7375 7065 7276  entifier, superv
+00001080: 6973 6f72 642e 6f70 7469 6f6e 732e 6964  isord.options.id
+00001090: 656e 7469 6669 6572 290d 0a20 2020 2020  entifier)..     
+000010a0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000010b0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
+000010c0: 6461 7465 5f74 6578 742c 2027 6765 7449  date_text, 'getI
+000010d0: 6465 6e74 6966 6963 6174 696f 6e27 290d  dentification').
+000010e0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+000010f0: 6765 7453 7461 7465 2873 656c 6629 3a0d  getState(self):.
+00001100: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00001110: 7065 7276 6973 6f72 2e73 7461 7465 7320  pervisor.states 
+00001120: 696d 706f 7274 2067 6574 5375 7065 7276  import getSuperv
+00001130: 6973 6f72 5374 6174 6544 6573 6372 6970  isorStateDescrip
+00001140: 7469 6f6e 0d0a 2020 2020 2020 2020 7375  tion..        su
+00001150: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+00001160: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
+00001170: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00001180: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+00001190: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
+000011a0: 2020 2020 2020 2073 7461 7465 696e 666f         stateinfo
+000011b0: 203d 2069 6e74 6572 6661 6365 2e67 6574   = interface.get
+000011c0: 5374 6174 6528 290d 0a20 2020 2020 2020  State()..       
+000011d0: 2073 7461 7465 636f 6465 203d 2073 7570   statecode = sup
+000011e0: 6572 7669 736f 7264 2e6f 7074 696f 6e73  ervisord.options
+000011f0: 2e6d 6f6f 640d 0a20 2020 2020 2020 2073  .mood..        s
+00001200: 7461 7465 6e61 6d65 203d 2067 6574 5375  tatename = getSu
+00001210: 7065 7276 6973 6f72 5374 6174 6544 6573  pervisorStateDes
+00001220: 6372 6970 7469 6f6e 2873 7461 7465 636f  cription(stateco
+00001230: 6465 290d 0a20 2020 2020 2020 2073 656c  de)..        sel
+00001240: 662e 6173 7365 7274 4571 7561 6c28 7374  f.assertEqual(st
+00001250: 6174 6569 6e66 6f5b 2773 7461 7465 636f  ateinfo['stateco
+00001260: 6465 275d 2c20 7374 6174 6563 6f64 6529  de'], statecode)
+00001270: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00001280: 7373 6572 7445 7175 616c 2873 7461 7465  ssertEqual(state
+00001290: 696e 666f 5b27 7374 6174 656e 616d 6527  info['statename'
+000012a0: 5d2c 2073 7461 7465 6e61 6d65 290d 0a20  ], statename).. 
+000012b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000012c0: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+000012d0: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+000012e0: 6765 7453 7461 7465 2729 0d0a 0d0a 2020  getState')....  
+000012f0: 2020 6465 6620 7465 7374 5f67 6574 5049    def test_getPI
+00001300: 4428 7365 6c66 293a 0d0a 2020 2020 2020  D(self):..      
+00001310: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
+00001320: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
+00001330: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00001340: 3d20 4475 6d6d 7953 7570 6572 7669 736f  = DummySuperviso
+00001350: 7228 6f70 7469 6f6e 7329 0d0a 2020 2020  r(options)..    
+00001360: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+00001370: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+00001380: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
+00001390: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000013a0: 7175 616c 2869 6e74 6572 6661 6365 2e67  qual(interface.g
+000013b0: 6574 5049 4428 292c 206f 7074 696f 6e73  etPID(), options
+000013c0: 2e67 6574 5f70 6964 2829 290d 0a20 2020  .get_pid())..   
+000013d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000013e0: 4571 7561 6c28 696e 7465 7266 6163 652e  Equal(interface.
+000013f0: 7570 6461 7465 5f74 6578 742c 2027 6765  update_text, 'ge
+00001400: 7450 4944 2729 0d0a 0d0a 2020 2020 6465  tPID')....    de
+00001410: 6620 7465 7374 5f72 6561 644c 6f67 5f61  f test_readLog_a
+00001420: 6c69 6173 6564 5f74 6f5f 6465 7072 6563  liased_to_deprec
+00001430: 6174 6564 5f72 6561 644d 6169 6e4c 6f67  ated_readMainLog
+00001440: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00001450: 2073 7570 6572 7669 736f 7264 203d 2044   supervisord = D
+00001460: 756d 6d79 5375 7065 7276 6973 6f72 2829  ummySupervisor()
+00001470: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
+00001480: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
+00001490: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
+000014a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000014b0: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
+000014c0: 6661 6365 2e72 6561 644d 6169 6e4c 6f67  face.readMainLog
+000014d0: 2c20 696e 7465 7266 6163 652e 7265 6164  , interface.read
+000014e0: 4c6f 6729 0d0a 0d0a 2020 2020 6465 6620  Log)....    def 
+000014f0: 7465 7374 5f72 6561 644c 6f67 5f75 6e72  test_readLog_unr
+00001500: 6561 6461 626c 6528 7365 6c66 293a 0d0a  eadable(self):..
+00001510: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00001520: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
+00001530: 6d6c 7270 630d 0a20 2020 2020 2020 2073  mlrpc..        s
+00001540: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
+00001550: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
+00001560: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00001570: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00001580: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+00001590: 2020 2020 2020 2020 7365 6c66 2e5f 6173          self._as
+000015a0: 7365 7274 5250 4345 7272 6f72 2878 6d6c  sertRPCError(xml
+000015b0: 7270 632e 4661 756c 7473 2e4e 4f5f 4649  rpc.Faults.NO_FI
+000015c0: 4c45 2c20 696e 7465 7266 6163 652e 7265  LE, interface.re
+000015d0: 6164 4c6f 672c 0d0a 2020 2020 2020 2020  adLog,..        
 000015e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000015f0: 2020 206f 6666 7365 743d 302c 206c 656e     offset=0, len
-00001600: 6774 683d 3129 0d0a 0d0a 2020 2020 6465  gth=1)....    de
-00001610: 6620 7465 7374 5f72 6561 644c 6f67 5f62  f test_readLog_b
-00001620: 6164 6172 6773 2873 656c 6629 3a0d 0a20  adargs(self):.. 
-00001630: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00001640: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
-00001650: 6c72 7063 0d0a 2020 2020 2020 2020 7375  lrpc..        su
-00001660: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
-00001670: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
-00001680: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00001690: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-000016a0: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-000016b0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-000016c0: 2020 2020 2020 2020 206c 6f67 6669 6c65           logfile
-000016d0: 203d 2073 7570 6572 7669 736f 7264 2e6f   = supervisord.o
-000016e0: 7074 696f 6e73 2e6c 6f67 6669 6c65 0d0a  ptions.logfile..
-000016f0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00001700: 206f 7065 6e28 6c6f 6766 696c 652c 2027   open(logfile, '
-00001710: 772b 2729 2061 7320 663a 0d0a 2020 2020  w+') as f:..    
-00001720: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-00001730: 6974 6528 2778 2720 2a20 3230 3438 290d  ite('x' * 2048).
-00001740: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00001750: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
-00001760: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
-00001770: 4241 445f 4152 4755 4d45 4e54 532c 0d0a  BAD_ARGUMENTS,..
-00001780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000015f0: 2020 2020 206f 6666 7365 743d 302c 206c       offset=0, l
+00001600: 656e 6774 683d 3129 0d0a 0d0a 2020 2020  ength=1)....    
+00001610: 6465 6620 7465 7374 5f72 6561 644c 6f67  def test_readLog
+00001620: 5f62 6164 6172 6773 2873 656c 6629 3a0d  _badargs(self):.
+00001630: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00001640: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+00001650: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+00001660: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
+00001670: 6d6d 7953 7570 6572 7669 736f 7228 290d  mmySupervisor().
+00001680: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00001690: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+000016a0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+000016b0: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+000016c0: 2020 2020 2020 2020 2020 206c 6f67 6669             logfi
+000016d0: 6c65 203d 2073 7570 6572 7669 736f 7264  le = supervisord
+000016e0: 2e6f 7074 696f 6e73 2e6c 6f67 6669 6c65  .options.logfile
+000016f0: 0d0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
+00001700: 7468 206f 7065 6e28 6c6f 6766 696c 652c  th open(logfile,
+00001710: 2027 772b 2729 2061 7320 663a 0d0a 2020   'w+') as f:..  
+00001720: 2020 2020 2020 2020 2020 2020 2020 662e                f.
+00001730: 7772 6974 6528 2778 2720 2a20 3230 3438  write('x' * 2048
+00001740: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00001750: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
+00001760: 726f 7228 786d 6c72 7063 2e46 6175 6c74  ror(xmlrpc.Fault
+00001770: 732e 4241 445f 4152 4755 4d45 4e54 532c  s.BAD_ARGUMENTS,
+00001780: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 00001790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000017a0: 2069 6e74 6572 6661 6365 2e72 6561 644c   interface.readL
-000017b0: 6f67 2c20 6f66 6673 6574 3d2d 312c 206c  og, offset=-1, l
-000017c0: 656e 6774 683d 3129 0d0a 2020 2020 2020  ength=1)..      
-000017d0: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
-000017e0: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
-000017f0: 632e 4661 756c 7473 2e42 4144 5f41 5247  c.Faults.BAD_ARG
-00001800: 554d 454e 5453 2c0d 0a20 2020 2020 2020  UMENTS,..       
+000017a0: 2020 2069 6e74 6572 6661 6365 2e72 6561     interface.rea
+000017b0: 644c 6f67 2c20 6f66 6673 6574 3d2d 312c  dLog, offset=-1,
+000017c0: 206c 656e 6774 683d 3129 0d0a 2020 2020   length=1)..    
+000017d0: 2020 2020 2020 2020 7365 6c66 2e5f 6173          self._as
+000017e0: 7365 7274 5250 4345 7272 6f72 2878 6d6c  sertRPCError(xml
+000017f0: 7270 632e 4661 756c 7473 2e42 4144 5f41  rpc.Faults.BAD_A
+00001800: 5247 554d 454e 5453 2c0d 0a20 2020 2020  RGUMENTS,..     
 00001810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001820: 2020 2020 2020 2020 2020 696e 7465 7266            interf
-00001830: 6163 652e 7265 6164 4c6f 672c 206f 6666  ace.readLog, off
-00001840: 7365 743d 2d31 2c0d 0a20 2020 2020 2020  set=-1,..       
+00001820: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00001830: 7266 6163 652e 7265 6164 4c6f 672c 206f  rface.readLog, o
+00001840: 6666 7365 743d 2d31 2c0d 0a20 2020 2020  ffset=-1,..     
 00001850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001860: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
-00001870: 3d2d 3129 0d0a 2020 2020 2020 2020 6669  =-1)..        fi
-00001880: 6e61 6c6c 793a 0d0a 2020 2020 2020 2020  nally:..        
-00001890: 2020 2020 6f73 2e72 656d 6f76 6528 6c6f      os.remove(lo
-000018a0: 6766 696c 6529 0d0a 0d0a 2020 2020 6465  gfile)....    de
-000018b0: 6620 7465 7374 5f72 6561 644c 6f67 2873  f test_readLog(s
-000018c0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-000018d0: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-000018e0: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
-000018f0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00001900: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00001910: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00001920: 2020 2020 2020 2020 6c6f 6766 696c 6520          logfile 
-00001930: 3d20 7375 7065 7276 6973 6f72 642e 6f70  = supervisord.op
-00001940: 7469 6f6e 732e 6c6f 6766 696c 650d 0a20  tions.logfile.. 
-00001950: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00001960: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-00001970: 656e 286c 6f67 6669 6c65 2c20 2777 2b27  en(logfile, 'w+'
-00001980: 2920 6173 2066 3a0d 0a20 2020 2020 2020  ) as f:..       
-00001990: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-000019a0: 2827 7827 202a 2032 3034 3829 0d0a 2020  ('x' * 2048)..  
-000019b0: 2020 2020 2020 2020 2020 2020 2020 662e                f.
-000019c0: 7772 6974 6528 2779 2720 2a20 3230 3438  write('y' * 2048
-000019d0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-000019e0: 6174 6120 3d20 696e 7465 7266 6163 652e  ata = interface.
-000019f0: 7265 6164 4c6f 6728 6f66 6673 6574 3d30  readLog(offset=0
-00001a00: 2c20 6c65 6e67 7468 3d30 290d 0a20 2020  , length=0)..   
-00001a10: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00001a20: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
-00001a30: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
-00001a40: 2027 7265 6164 4c6f 6727 290d 0a20 2020   'readLog')..   
-00001a50: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00001a60: 7365 7274 4571 7561 6c28 6461 7461 2c20  sertEqual(data, 
-00001a70: 2827 7827 202a 2032 3034 3829 202b 2028  ('x' * 2048) + (
-00001a80: 2779 2720 2a20 3230 3438 2929 0d0a 2020  'y' * 2048))..  
-00001a90: 2020 2020 2020 2020 2020 6461 7461 203d            data =
-00001aa0: 2069 6e74 6572 6661 6365 2e72 6561 644c   interface.readL
-00001ab0: 6f67 286f 6666 7365 743d 3230 3438 2c20  og(offset=2048, 
-00001ac0: 6c65 6e67 7468 3d30 290d 0a20 2020 2020  length=0)..     
-00001ad0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00001ae0: 7274 4571 7561 6c28 6461 7461 2c20 2779  rtEqual(data, 'y
-00001af0: 2720 2a20 3230 3438 290d 0a20 2020 2020  ' * 2048)..     
-00001b00: 2020 2020 2020 2064 6174 6120 3d20 696e         data = in
-00001b10: 7465 7266 6163 652e 7265 6164 4c6f 6728  terface.readLog(
-00001b20: 6f66 6673 6574 3d30 2c20 6c65 6e67 7468  offset=0, length
-00001b30: 3d32 3034 3829 0d0a 2020 2020 2020 2020  =2048)..        
-00001b40: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00001b50: 7175 616c 2864 6174 612c 2027 7827 202a  qual(data, 'x' *
-00001b60: 2032 3034 3829 0d0a 2020 2020 2020 2020   2048)..        
-00001b70: 2020 2020 6461 7461 203d 2069 6e74 6572      data = inter
-00001b80: 6661 6365 2e72 6561 644c 6f67 286f 6666  face.readLog(off
-00001b90: 7365 743d 2d34 2c20 6c65 6e67 7468 3d30  set=-4, length=0
-00001ba0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00001bb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00001bc0: 6461 7461 2c20 2779 2720 2a20 3429 0d0a  data, 'y' * 4)..
-00001bd0: 2020 2020 2020 2020 6669 6e61 6c6c 793a          finally:
-00001be0: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00001bf0: 2e72 656d 6f76 6528 6c6f 6766 696c 6529  .remove(logfile)
-00001c00: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
-00001c10: 5f63 6c65 6172 4c6f 675f 756e 7265 6164  _clearLog_unread
-00001c20: 6162 6c65 2873 656c 6629 3a0d 0a20 2020  able(self):..   
-00001c30: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
-00001c40: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
-00001c50: 7063 0d0a 2020 2020 2020 2020 7375 7065  pc..        supe
-00001c60: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
-00001c70: 7570 6572 7669 736f 7228 290d 0a20 2020  upervisor()..   
-00001c80: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00001c90: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00001ca0: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00001cb0: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
-00001cc0: 7452 5043 4572 726f 7228 786d 6c72 7063  tRPCError(xmlrpc
-00001cd0: 2e46 6175 6c74 732e 4e4f 5f46 494c 452c  .Faults.NO_FILE,
-00001ce0: 2069 6e74 6572 6661 6365 2e63 6c65 6172   interface.clear
-00001cf0: 4c6f 6729 0d0a 0d0a 2020 2020 6465 6620  Log)....    def 
-00001d00: 7465 7374 5f63 6c65 6172 4c6f 675f 756e  test_clearLog_un
-00001d10: 7265 6d6f 7665 6162 6c65 2873 656c 6629  removeable(self)
-00001d20: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-00001d30: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00001d40: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-00001d50: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-00001d60: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-00001d70: 2020 2020 6f70 7469 6f6e 732e 6578 6973      options.exis
-00001d80: 7469 6e67 203d 205b 6f70 7469 6f6e 732e  ting = [options.
-00001d90: 6c6f 6766 696c 655d 0d0a 2020 2020 2020  logfile]..      
-00001da0: 2020 6f70 7469 6f6e 732e 7265 6d6f 7665    options.remove
-00001db0: 5f65 7272 6f72 203d 2031 0d0a 2020 2020  _error = 1..    
-00001dc0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-00001dd0: 3d20 4475 6d6d 7953 7570 6572 7669 736f  = DummySuperviso
-00001de0: 7228 6f70 7469 6f6e 7329 0d0a 2020 2020  r(options)..    
-00001df0: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00001e00: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
-00001e10: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
-00001e20: 2020 2020 7365 6c66 2e61 7373 6572 7452      self.assertR
-00001e30: 6169 7365 7328 786d 6c72 7063 2e52 5043  aises(xmlrpc.RPC
-00001e40: 4572 726f 722c 2069 6e74 6572 6661 6365  Error, interface
-00001e50: 2e63 6c65 6172 4c6f 6729 0d0a 2020 2020  .clearLog)..    
-00001e60: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00001e70: 7175 616c 2869 6e74 6572 6661 6365 2e75  qual(interface.u
-00001e80: 7064 6174 655f 7465 7874 2c20 2763 6c65  pdate_text, 'cle
-00001e90: 6172 4c6f 6727 290d 0a0d 0a20 2020 2064  arLog')....    d
-00001ea0: 6566 2074 6573 745f 636c 6561 724c 6f67  ef test_clearLog
-00001eb0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00001ec0: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
-00001ed0: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
-00001ee0: 2020 206f 7074 696f 6e73 2e65 7869 7374     options.exist
-00001ef0: 696e 6720 3d20 5b6f 7074 696f 6e73 2e6c  ing = [options.l
-00001f00: 6f67 6669 6c65 5d0d 0a20 2020 2020 2020  ogfile]..       
-00001f10: 2073 7570 6572 7669 736f 7264 203d 2044   supervisord = D
-00001f20: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
-00001f30: 7074 696f 6e73 290d 0a20 2020 2020 2020  ptions)..       
-00001f40: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00001f50: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00001f60: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00001f70: 2072 6573 756c 7420 3d20 696e 7465 7266   result = interf
-00001f80: 6163 652e 636c 6561 724c 6f67 2829 0d0a  ace.clearLog()..
-00001f90: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00001fa0: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
-00001fb0: 6365 2e75 7064 6174 655f 7465 7874 2c20  ce.update_text, 
-00001fc0: 2763 6c65 6172 4c6f 6727 290d 0a20 2020  'clearLog')..   
-00001fd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00001fe0: 4571 7561 6c28 7265 7375 6c74 2c20 5472  Equal(result, Tr
-00001ff0: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
-00002000: 662e 6173 7365 7274 4571 7561 6c28 6f70  f.assertEqual(op
-00002010: 7469 6f6e 732e 7265 6d6f 7665 645b 305d  tions.removed[0]
-00002020: 2c20 6f70 7469 6f6e 732e 6c6f 6766 696c  , options.logfil
-00002030: 6529 0d0a 2020 2020 2020 2020 666f 7220  e)..        for 
-00002040: 6861 6e64 6c65 7220 696e 2073 7570 6572  handler in super
-00002050: 7669 736f 7264 2e6f 7074 696f 6e73 2e6c  visord.options.l
-00002060: 6f67 6765 722e 6861 6e64 6c65 7273 3a0d  ogger.handlers:.
-00002070: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00002080: 662e 6173 7365 7274 4571 7561 6c28 6861  f.assertEqual(ha
-00002090: 6e64 6c65 722e 7265 6f70 656e 6564 2c20  ndler.reopened, 
-000020a0: 5472 7565 290d 0a0d 0a20 2020 2064 6566  True)....    def
-000020b0: 2074 6573 745f 7368 7574 646f 776e 2873   test_shutdown(s
-000020c0: 656c 6629 3a0d 0a20 2020 2020 2020 2073  elf):..        s
-000020d0: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-000020e0: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
-000020f0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00002100: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00002110: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00002120: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-00002130: 696e 7465 7266 6163 652e 7368 7574 646f  interface.shutdo
-00002140: 776e 2829 0d0a 2020 2020 2020 2020 7365  wn()..        se
-00002150: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
-00002160: 616c 7565 2c20 5472 7565 290d 0a20 2020  alue, True)..   
-00002170: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00002180: 4571 7561 6c28 7375 7065 7276 6973 6f72  Equal(supervisor
-00002190: 642e 6f70 7469 6f6e 732e 6d6f 6f64 2c20  d.options.mood, 
-000021a0: 2d31 290d 0a0d 0a20 2020 2064 6566 2074  -1)....    def t
-000021b0: 6573 745f 7265 7374 6172 7428 7365 6c66  est_restart(self
-000021c0: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
-000021d0: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
-000021e0: 7570 6572 7669 736f 7228 290d 0a20 2020  upervisor()..   
-000021f0: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00002200: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00002210: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00002220: 2020 2020 2076 616c 7565 203d 2069 6e74       value = int
-00002230: 6572 6661 6365 2e72 6573 7461 7274 2829  erface.restart()
-00002240: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00002250: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
-00002260: 2c20 5472 7565 290d 0a20 2020 2020 2020  , True)..       
-00002270: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00002280: 6c28 7375 7065 7276 6973 6f72 642e 6f70  l(supervisord.op
-00002290: 7469 6f6e 732e 6d6f 6f64 2c20 3029 0d0a  tions.mood, 0)..
-000022a0: 0d0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
-000022b0: 656c 6f61 6443 6f6e 6669 6728 7365 6c66  eloadConfig(self
-000022c0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
-000022d0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-000022e0: 6e73 2829 0d0a 2020 2020 2020 2020 7375  ns()..        su
-000022f0: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
-00002300: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
-00002310: 6f6e 7329 0d0a 2020 2020 2020 2020 696e  ons)..        in
-00002320: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-00002330: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-00002340: 6f72 6429 0d0a 0d0a 2020 2020 2020 2020  ord)....        
-00002350: 6368 616e 6765 7320 3d20 5b5b 4475 6d6d  changes = [[Dumm
-00002360: 7950 4772 6f75 7043 6f6e 6669 6728 6f70  yPGroupConfig(op
-00002370: 7469 6f6e 732c 2027 6164 6465 6427 295d  tions, 'added')]
-00002380: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00002390: 2020 2020 2020 5b44 756d 6d79 5047 726f        [DummyPGro
-000023a0: 7570 436f 6e66 6967 286f 7074 696f 6e73  upConfig(options
-000023b0: 2c20 2763 6861 6e67 6564 2729 5d2c 0d0a  , 'changed')],..
-000023c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000023d0: 2020 205b 4475 6d6d 7950 4772 6f75 7043     [DummyPGroupC
-000023e0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-000023f0: 6472 6f70 7065 6427 295d 5d0d 0a0d 0a20  dropped')]].... 
-00002400: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-00002410: 7264 2e64 6966 665f 746f 5f61 6374 6976  rd.diff_to_activ
-00002420: 6520 3d20 6c61 6d62 6461 3a20 6368 616e  e = lambda: chan
-00002430: 6765 730d 0a0d 0a20 2020 2020 2020 2076  ges....        v
-00002440: 616c 7565 203d 2069 6e74 6572 6661 6365  alue = interface
-00002450: 2e72 656c 6f61 6443 6f6e 6669 6728 290d  .reloadConfig().
-00002460: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00002470: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-00002480: 205b 5b5b 2761 6464 6564 275d 2c20 5b27   [[['added'], ['
-00002490: 6368 616e 6765 6427 5d2c 205b 2764 726f  changed'], ['dro
-000024a0: 7070 6564 275d 5d5d 290d 0a0d 0a20 2020  pped']]])....   
-000024b0: 2064 6566 2074 6573 745f 7265 6c6f 6164   def test_reload
-000024c0: 436f 6e66 6967 5f70 726f 6365 7373 5f63  Config_process_c
-000024d0: 6f6e 6669 675f 7261 6973 6573 5f56 616c  onfig_raises_Val
-000024e0: 7565 4572 726f 7228 7365 6c66 293a 0d0a  ueError(self):..
-000024f0: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-00002500: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
-00002510: 6d6c 7270 630d 0a20 2020 2020 2020 206f  mlrpc..        o
-00002520: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
-00002530: 7469 6f6e 7328 290d 0a0d 0a20 2020 2020  tions()....     
-00002540: 2020 2064 6566 2072 6169 7365 5f65 7863     def raise_exc
-00002550: 282a 6172 672c 202a 2a6b 7729 3a0d 0a20  (*arg, **kw):.. 
-00002560: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00002570: 2056 616c 7565 4572 726f 7228 2766 6f6f   ValueError('foo
-00002580: 2729 0d0a 0d0a 2020 2020 2020 2020 6f70  ')....        op
-00002590: 7469 6f6e 732e 7072 6f63 6573 735f 636f  tions.process_co
-000025a0: 6e66 6967 203d 2072 6169 7365 5f65 7863  nfig = raise_exc
-000025b0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-000025c0: 6973 6f72 6420 3d20 4475 6d6d 7953 7570  isord = DummySup
-000025d0: 6572 7669 736f 7228 6f70 7469 6f6e 7329  ervisor(options)
-000025e0: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-000025f0: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00002600: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00002610: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00002620: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
-00002630: 6d6c 7270 632e 4661 756c 7473 2e43 414e  mlrpc.Faults.CAN
-00002640: 545f 5245 5245 4144 2c20 696e 7465 7266  T_REREAD, interf
-00002650: 6163 652e 7265 6c6f 6164 436f 6e66 6967  ace.reloadConfig
-00002660: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00002670: 745f 6164 6450 726f 6365 7373 4772 6f75  t_addProcessGrou
-00002680: 7028 7365 6c66 293a 0d0a 2020 2020 2020  p(self):..      
-00002690: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-000026a0: 722e 7375 7065 7276 6973 6f72 6420 696d  r.supervisord im
-000026b0: 706f 7274 2053 7570 6572 7669 736f 720d  port Supervisor.
-000026c0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-000026d0: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
-000026e0: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
-000026f0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00002700: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00002710: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-00002720: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-00002730: 6e73 290d 0a20 2020 2020 2020 2070 636f  ns)..        pco
-00002740: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
-00002750: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
-00002760: 6f27 2c20 5f5f 6669 6c65 5f5f 2c20 6175  o', __file__, au
-00002770: 746f 7374 6172 743d 4661 6c73 6529 0d0a  tostart=False)..
-00002780: 2020 2020 2020 2020 6763 6f6e 6669 6720          gconfig 
-00002790: 3d20 4475 6d6d 7950 4772 6f75 7043 6f6e  = DummyPGroupCon
-000027a0: 6669 6728 6f70 7469 6f6e 732c 2027 6772  fig(options, 'gr
-000027b0: 6f75 7031 272c 2070 636f 6e66 6967 733d  oup1', pconfigs=
-000027c0: 5b70 636f 6e66 6967 5d29 0d0a 2020 2020  [pconfig])..    
-000027d0: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
-000027e0: 6f70 7469 6f6e 732e 7072 6f63 6573 735f  options.process_
-000027f0: 6772 6f75 705f 636f 6e66 6967 7320 3d20  group_configs = 
-00002800: 5b67 636f 6e66 6967 5d0d 0a0d 0a20 2020  [gconfig]....   
-00002810: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00002820: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00002830: 7570 6572 7669 736f 7264 290d 0a0d 0a20  upervisord).... 
-00002840: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00002850: 696e 7465 7266 6163 652e 6164 6450 726f  interface.addPro
-00002860: 6365 7373 4772 6f75 7028 2767 726f 7570  cessGroup('group
-00002870: 3127 290d 0a20 2020 2020 2020 2073 656c  1')..        sel
-00002880: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
-00002890: 756c 7429 0d0a 2020 2020 2020 2020 7365  ult)..        se
-000028a0: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
-000028b0: 6973 7428 7375 7065 7276 6973 6f72 642e  ist(supervisord.
-000028c0: 7072 6f63 6573 735f 6772 6f75 7073 2e6b  process_groups.k
-000028d0: 6579 7328 2929 2c20 5b27 6772 6f75 7031  eys()), ['group1
-000028e0: 275d 290d 0a0d 0a20 2020 2020 2020 2073  '])....        s
-000028f0: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
-00002900: 726f 7228 786d 6c72 7063 2e46 6175 6c74  ror(xmlrpc.Fault
-00002910: 732e 414c 5245 4144 595f 4144 4445 442c  s.ALREADY_ADDED,
-00002920: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00002930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00002940: 6e74 6572 6661 6365 2e61 6464 5072 6f63  nterface.addProc
-00002950: 6573 7347 726f 7570 2c20 2767 726f 7570  essGroup, 'group
-00002960: 3127 290d 0a20 2020 2020 2020 2073 656c  1')..        sel
-00002970: 662e 6173 7365 7274 4571 7561 6c28 6c69  f.assertEqual(li
-00002980: 7374 2873 7570 6572 7669 736f 7264 2e70  st(supervisord.p
-00002990: 726f 6365 7373 5f67 726f 7570 732e 6b65  rocess_groups.ke
-000029a0: 7973 2829 292c 205b 2767 726f 7570 3127  ys()), ['group1'
-000029b0: 5d29 0d0a 0d0a 2020 2020 2020 2020 7365  ])....        se
-000029c0: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-000029d0: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-000029e0: 2e42 4144 5f4e 414d 452c 0d0a 2020 2020  .BAD_NAME,..    
-000029f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002a00: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
-00002a10: 6365 2e61 6464 5072 6f63 6573 7347 726f  ce.addProcessGro
-00002a20: 7570 2c20 2761 7364 6627 290d 0a20 2020  up, 'asdf')..   
-00002a30: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00002a40: 4571 7561 6c28 6c69 7374 2873 7570 6572  Equal(list(super
-00002a50: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00002a60: 726f 7570 732e 6b65 7973 2829 292c 205b  roups.keys()), [
-00002a70: 2767 726f 7570 3127 5d29 0d0a 0d0a 2020  'group1'])....  
-00002a80: 2020 6465 6620 7465 7374 5f72 656d 6f76    def test_remov
-00002a90: 6550 726f 6365 7373 4772 6f75 7028 7365  eProcessGroup(se
-00002aa0: 6c66 293a 0d0a 2020 2020 2020 2020 6672  lf):..        fr
-00002ab0: 6f6d 2073 7570 6572 7669 736f 722e 7375  om supervisor.su
-00002ac0: 7065 7276 6973 6f72 6420 696d 706f 7274  pervisord import
-00002ad0: 2053 7570 6572 7669 736f 720d 0a20 2020   Supervisor..   
-00002ae0: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
-00002af0: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
-00002b00: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-00002b10: 7264 203d 2053 7570 6572 7669 736f 7228  rd = Supervisor(
-00002b20: 6f70 7469 6f6e 7329 0d0a 2020 2020 2020  options)..      
-00002b30: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
-00002b40: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
-00002b50: 2c20 2766 6f6f 272c 205f 5f66 696c 655f  , 'foo', __file_
-00002b60: 5f2c 2061 7574 6f73 7461 7274 3d46 616c  _, autostart=Fal
-00002b70: 7365 290d 0a20 2020 2020 2020 2067 636f  se)..        gco
-00002b80: 6e66 6967 203d 2044 756d 6d79 5047 726f  nfig = DummyPGro
-00002b90: 7570 436f 6e66 6967 286f 7074 696f 6e73  upConfig(options
-00002ba0: 2c20 2767 726f 7570 3127 2c20 7063 6f6e  , 'group1', pcon
-00002bb0: 6669 6773 3d5b 7063 6f6e 6669 675d 290d  figs=[pconfig]).
-00002bc0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00002bd0: 736f 7264 2e6f 7074 696f 6e73 2e70 726f  sord.options.pro
-00002be0: 6365 7373 5f67 726f 7570 5f63 6f6e 6669  cess_group_confi
-00002bf0: 6773 203d 205b 6763 6f6e 6669 675d 0d0a  gs = [gconfig]..
-00002c00: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00002c10: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00002c20: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00002c30: 0d0a 0d0a 2020 2020 2020 2020 696e 7465  ....        inte
-00002c40: 7266 6163 652e 6164 6450 726f 6365 7373  rface.addProcess
-00002c50: 4772 6f75 7028 2767 726f 7570 3127 290d  Group('group1').
-00002c60: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00002c70: 3d20 696e 7465 7266 6163 652e 7265 6d6f  = interface.remo
-00002c80: 7665 5072 6f63 6573 7347 726f 7570 2827  veProcessGroup('
-00002c90: 6772 6f75 7031 2729 0d0a 2020 2020 2020  group1')..      
-00002ca0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00002cb0: 6528 7265 7375 6c74 290d 0a20 2020 2020  e(result)..     
-00002cc0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00002cd0: 7561 6c28 6c69 7374 2873 7570 6572 7669  ual(list(supervi
-00002ce0: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
-00002cf0: 7570 732e 6b65 7973 2829 292c 205b 5d29  ups.keys()), [])
-00002d00: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
-00002d10: 5f72 656d 6f76 6550 726f 6365 7373 4772  _removeProcessGr
-00002d20: 6f75 705f 6261 645f 6e61 6d65 2873 656c  oup_bad_name(sel
-00002d30: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
-00002d40: 6d20 7375 7065 7276 6973 6f72 2e73 7570  m supervisor.sup
-00002d50: 6572 7669 736f 7264 2069 6d70 6f72 7420  ervisord import 
-00002d60: 5375 7065 7276 6973 6f72 0d0a 2020 2020  Supervisor..    
-00002d70: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-00002d80: 736f 7220 696d 706f 7274 2078 6d6c 7270  sor import xmlrp
-00002d90: 630d 0a20 2020 2020 2020 206f 7074 696f  c..        optio
-00002da0: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
-00002db0: 7328 290d 0a20 2020 2020 2020 2073 7570  s()..        sup
-00002dc0: 6572 7669 736f 7264 203d 2053 7570 6572  ervisord = Super
-00002dd0: 7669 736f 7228 6f70 7469 6f6e 7329 0d0a  visor(options)..
-00002de0: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-00002df0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00002e00: 7074 696f 6e73 2c20 2766 6f6f 272c 205f  ptions, 'foo', _
-00002e10: 5f66 696c 655f 5f2c 2061 7574 6f73 7461  _file__, autosta
-00002e20: 7274 3d46 616c 7365 290d 0a20 2020 2020  rt=False)..     
-00002e30: 2020 2067 636f 6e66 6967 203d 2044 756d     gconfig = Dum
-00002e40: 6d79 5047 726f 7570 436f 6e66 6967 286f  myPGroupConfig(o
-00002e50: 7074 696f 6e73 2c20 2767 726f 7570 3127  ptions, 'group1'
-00002e60: 2c20 7063 6f6e 6669 6773 3d5b 7063 6f6e  , pconfigs=[pcon
-00002e70: 6669 675d 290d 0a20 2020 2020 2020 2073  fig])..        s
-00002e80: 7570 6572 7669 736f 7264 2e6f 7074 696f  upervisord.optio
-00002e90: 6e73 2e70 726f 6365 7373 5f67 726f 7570  ns.process_group
-00002ea0: 5f63 6f6e 6669 6773 203d 205b 6763 6f6e  _configs = [gcon
-00002eb0: 6669 675d 0d0a 0d0a 2020 2020 2020 2020  fig]....        
-00002ec0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
-00002ed0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
-00002ee0: 6973 6f72 6429 0d0a 0d0a 2020 2020 2020  isord)....      
-00002ef0: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
-00002f00: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
-00002f10: 756c 7473 2e42 4144 5f4e 414d 452c 0d0a  ults.BAD_NAME,..
-00002f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002f30: 2020 2020 2020 2020 2020 2020 2069 6e74               int
-00002f40: 6572 6661 6365 2e72 656d 6f76 6550 726f  erface.removePro
-00002f50: 6365 7373 4772 6f75 702c 2027 6173 6466  cessGroup, 'asdf
-00002f60: 2729 0d0a 0d0a 2020 2020 6465 6620 7465  ')....    def te
-00002f70: 7374 5f72 656d 6f76 6550 726f 6365 7373  st_removeProcess
-00002f80: 4772 6f75 705f 7374 696c 6c5f 7275 6e6e  Group_still_runn
-00002f90: 696e 6728 7365 6c66 293a 0d0a 2020 2020  ing(self):..    
-00002fa0: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-00002fb0: 736f 722e 7375 7065 7276 6973 6f72 6420  sor.supervisord 
-00002fc0: 696d 706f 7274 2053 7570 6572 7669 736f  import Superviso
-00002fd0: 720d 0a20 2020 2020 2020 2066 726f 6d20  r..        from 
-00002fe0: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00002ff0: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-00003000: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-00003010: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-00003020: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-00003030: 3d20 5375 7065 7276 6973 6f72 286f 7074  = Supervisor(opt
-00003040: 696f 6e73 290d 0a20 2020 2020 2020 2070  ions)..        p
-00003050: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-00003060: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00003070: 666f 6f27 2c20 5f5f 6669 6c65 5f5f 2c20  foo', __file__, 
-00003080: 6175 746f 7374 6172 743d 4661 6c73 6529  autostart=False)
-00003090: 0d0a 2020 2020 2020 2020 6763 6f6e 6669  ..        gconfi
-000030a0: 6720 3d20 4475 6d6d 7950 4772 6f75 7043  g = DummyPGroupC
-000030b0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-000030c0: 6772 6f75 7031 272c 2070 636f 6e66 6967  group1', pconfig
-000030d0: 733d 5b70 636f 6e66 6967 5d29 0d0a 2020  s=[pconfig])..  
-000030e0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-000030f0: 642e 6f70 7469 6f6e 732e 7072 6f63 6573  d.options.proces
-00003100: 735f 6772 6f75 705f 636f 6e66 6967 7320  s_group_configs 
-00003110: 3d20 5b67 636f 6e66 6967 5d0d 0a20 2020  = [gconfig]..   
-00003120: 2020 2020 2070 726f 6365 7373 203d 2044       process = D
-00003130: 756d 6d79 5072 6f63 6573 7347 726f 7570  ummyProcessGroup
-00003140: 2867 636f 6e66 6967 290d 0a20 2020 2020  (gconfig)..     
-00003150: 2020 2070 726f 6365 7373 2e75 6e73 746f     process.unsto
-00003160: 7070 6564 5f70 726f 6365 7373 6573 203d  pped_processes =
-00003170: 205b 3132 335d 0d0a 2020 2020 2020 2020   [123]..        
-00003180: 7375 7065 7276 6973 6f72 642e 7072 6f63  supervisord.proc
-00003190: 6573 735f 6772 6f75 7073 203d 207b 2767  ess_groups = {'g
-000031a0: 726f 7570 3127 3a20 7072 6f63 6573 737d  roup1': process}
-000031b0: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-000031c0: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-000031d0: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-000031e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-000031f0: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
-00003200: 6d6c 7270 632e 4661 756c 7473 2e53 5449  mlrpc.Faults.STI
-00003210: 4c4c 5f52 554e 4e49 4e47 2c0d 0a20 2020  LL_RUNNING,..   
-00003220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003230: 2020 2020 2020 2020 2020 696e 7465 7266            interf
-00003240: 6163 652e 7265 6d6f 7665 5072 6f63 6573  ace.removeProces
-00003250: 7347 726f 7570 2c20 2767 726f 7570 3127  sGroup, 'group1'
-00003260: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00003270: 745f 7374 6172 7450 726f 6365 7373 5f61  t_startProcess_a
-00003280: 6c72 6561 6479 5f73 7461 7274 6564 2873  lready_started(s
-00003290: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
-000032a0: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-000032b0: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-000032c0: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-000032d0: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-000032e0: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-000032f0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00003300: 7074 696f 6e73 2c20 2766 6f6f 272c 205f  ptions, 'foo', _
-00003310: 5f66 696c 655f 5f2c 2061 7574 6f73 7461  _file__, autosta
-00003320: 7274 3d46 616c 7365 290d 0a20 2020 2020  rt=False)..     
-00003330: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00003340: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
-00003350: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
-00003360: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
-00003370: 6729 0d0a 2020 2020 2020 2020 7375 7065  g)..        supe
-00003380: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
-00003390: 6174 7472 2827 666f 6f27 2c20 2770 6964  attr('foo', 'pid
-000033a0: 272c 2031 3029 0d0a 2020 2020 2020 2020  ', 10)..        
-000033b0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
-000033c0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
-000033d0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
-000033e0: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
-000033f0: 7272 6f72 280d 0a20 2020 2020 2020 2020  rror(..         
-00003400: 2020 2078 6d6c 7270 632e 4661 756c 7473     xmlrpc.Faults
-00003410: 2e41 4c52 4541 4459 5f53 5441 5254 4544  .ALREADY_STARTED
-00003420: 2c0d 0a20 2020 2020 2020 2020 2020 2069  ,..            i
-00003430: 6e74 6572 6661 6365 2e73 7461 7274 5072  nterface.startPr
-00003440: 6f63 6573 732c 2027 666f 6f27 0d0a 2020  ocess, 'foo'..  
-00003450: 2020 2020 2020 290d 0a0d 0a20 2020 2064        )....    d
-00003460: 6566 2074 6573 745f 7374 6172 7450 726f  ef test_startPro
-00003470: 6365 7373 5f62 6164 5f67 726f 7570 5f6e  cess_bad_group_n
-00003480: 616d 6528 7365 6c66 293a 0d0a 2020 2020  ame(self):..    
-00003490: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-000034a0: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-000034b0: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
-000034c0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-000034d0: 696f 6e73 2c20 2766 6f6f 272c 205f 5f66  ions, 'foo', __f
-000034e0: 696c 655f 5f2c 2061 7574 6f73 7461 7274  ile__, autostart
-000034f0: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
-00003500: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00003510: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00003520: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00003530: 2027 6772 6f75 7031 272c 2070 636f 6e66   'group1', pconf
-00003540: 6967 290d 0a20 2020 2020 2020 2069 6e74  ig)..        int
-00003550: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
-00003560: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
-00003570: 7264 290d 0a20 2020 2020 2020 2066 726f  rd)..        fro
-00003580: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
-00003590: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
-000035a0: 2020 2020 7365 6c66 2e5f 6173 7365 7274      self._assert
-000035b0: 5250 4345 7272 6f72 2878 6d6c 7270 632e  RPCError(xmlrpc.
-000035c0: 4661 756c 7473 2e42 4144 5f4e 414d 452c  Faults.BAD_NAME,
-000035d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000035e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000035f0: 6e74 6572 6661 6365 2e73 7461 7274 5072  nterface.startPr
-00003600: 6f63 6573 732c 2027 6772 6f75 7032 3a66  ocess, 'group2:f
-00003610: 6f6f 2729 0d0a 0d0a 2020 2020 6465 6620  oo')....    def 
-00003620: 7465 7374 5f73 7461 7274 5072 6f63 6573  test_startProces
-00003630: 735f 6261 645f 7072 6f63 6573 735f 6e61  s_bad_process_na
-00003640: 6d65 2873 656c 6629 3a0d 0a20 2020 2020  me(self):..     
-00003650: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
-00003660: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
-00003670: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
-00003680: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
-00003690: 6f6e 732c 2027 666f 6f27 2c20 5f5f 6669  ons, 'foo', __fi
-000036a0: 6c65 5f5f 2c20 6175 746f 7374 6172 743d  le__, autostart=
-000036b0: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-000036c0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-000036d0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-000036e0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-000036f0: 2767 726f 7570 3127 2c20 7063 6f6e 6669  'group1', pconfi
-00003700: 6729 0d0a 2020 2020 2020 2020 696e 7465  g)..        inte
-00003710: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00003720: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00003730: 6429 0d0a 2020 2020 2020 2020 6672 6f6d  d)..        from
-00003740: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
-00003750: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
-00003760: 2020 2073 656c 662e 5f61 7373 6572 7452     self._assertR
-00003770: 5043 4572 726f 7228 786d 6c72 7063 2e46  PCError(xmlrpc.F
-00003780: 6175 6c74 732e 4241 445f 4e41 4d45 2c0d  aults.BAD_NAME,.
-00003790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000037a0: 2020 2020 2020 2020 2020 2020 2020 696e                in
-000037b0: 7465 7266 6163 652e 7374 6172 7450 726f  terface.startPro
-000037c0: 6365 7373 2c20 2767 726f 7570 313a 6261  cess, 'group1:ba
-000037d0: 7227 290d 0a0d 0a20 2020 2064 6566 2074  r')....    def t
-000037e0: 6573 745f 7374 6172 7450 726f 6365 7373  est_startProcess
-000037f0: 5f66 696c 655f 6e6f 745f 666f 756e 6428  _file_not_found(
-00003800: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00003810: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00003820: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00003830: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
-00003840: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
-00003850: 2c20 2766 6f6f 272c 2027 2f66 6f6f 2f62  , 'foo', '/foo/b
-00003860: 6172 272c 2061 7574 6f73 7461 7274 3d46  ar', autostart=F
-00003870: 616c 7365 290d 0a20 2020 2020 2020 2066  alse)..        f
-00003880: 726f 6d20 7375 7065 7276 6973 6f72 2e6f  rom supervisor.o
-00003890: 7074 696f 6e73 2069 6d70 6f72 7420 4e6f  ptions import No
-000038a0: 7446 6f75 6e64 0d0a 2020 2020 2020 2020  tFound..        
-000038b0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-000038c0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-000038d0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-000038e0: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
-000038f0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00003900: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
-00003910: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
-00003920: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
-00003930: 666f 6f27 5d0d 0a20 2020 2020 2020 2070  foo']..        p
-00003940: 726f 6365 7373 2e65 7865 6376 5f61 7267  rocess.execv_arg
-00003950: 5f65 7863 6570 7469 6f6e 203d 204e 6f74  _exception = Not
-00003960: 466f 756e 640d 0a20 2020 2020 2020 2069  Found..        i
-00003970: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00003980: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00003990: 736f 7264 290d 0a20 2020 2020 2020 2066  sord)..        f
-000039a0: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-000039b0: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-000039c0: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
-000039d0: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
-000039e0: 632e 4661 756c 7473 2e4e 4f5f 4649 4c45  c.Faults.NO_FILE
-000039f0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a10: 696e 7465 7266 6163 652e 7374 6172 7450  interface.startP
-00003a20: 726f 6365 7373 2c20 2766 6f6f 2729 0d0a  rocess, 'foo')..
-00003a30: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
-00003a40: 7461 7274 5072 6f63 6573 735f 6669 6c65  tartProcess_file
-00003a50: 5f6e 6f74 5f65 7865 6375 7461 626c 6528  _not_executable(
-00003a60: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00003a70: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00003a80: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00003a90: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
-00003aa0: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
-00003ab0: 2c20 2766 6f6f 272c 2027 2f66 6f6f 2f62  , 'foo', '/foo/b
-00003ac0: 6172 272c 2061 7574 6f73 7461 7274 3d46  ar', autostart=F
-00003ad0: 616c 7365 290d 0a20 2020 2020 2020 2066  alse)..        f
-00003ae0: 726f 6d20 7375 7065 7276 6973 6f72 2e6f  rom supervisor.o
-00003af0: 7074 696f 6e73 2069 6d70 6f72 7420 4e6f  ptions import No
-00003b00: 7445 7865 6375 7461 626c 650d 0a20 2020  tExecutable..   
-00003b10: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00003b20: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
-00003b30: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
-00003b40: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
-00003b50: 6669 6729 0d0a 2020 2020 2020 2020 7072  fig)..        pr
-00003b60: 6f63 6573 7320 3d20 7375 7065 7276 6973  ocess = supervis
-00003b70: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
-00003b80: 7073 5b27 666f 6f27 5d2e 7072 6f63 6573  ps['foo'].proces
-00003b90: 7365 735b 2766 6f6f 275d 0d0a 2020 2020  ses['foo']..    
-00003ba0: 2020 2020 7072 6f63 6573 732e 6578 6563      process.exec
-00003bb0: 765f 6172 675f 6578 6365 7074 696f 6e20  v_arg_exception 
-00003bc0: 3d20 4e6f 7445 7865 6375 7461 626c 650d  = NotExecutable.
-00003bd0: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00003be0: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-00003bf0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-00003c00: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-00003c10: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
-00003c20: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
-00003c30: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
-00003c40: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
-00003c50: 7473 2e4e 4f54 5f45 5845 4355 5441 424c  ts.NOT_EXECUTABL
-00003c60: 452c 0d0a 2020 2020 2020 2020 2020 2020  E,..            
-00003c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003c80: 2069 6e74 6572 6661 6365 2e73 7461 7274   interface.start
-00003c90: 5072 6f63 6573 732c 2027 666f 6f27 290d  Process, 'foo').
-00003ca0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-00003cb0: 7374 6172 7450 726f 6365 7373 5f73 7061  startProcess_spa
-00003cc0: 776e 6572 7228 7365 6c66 293a 0d0a 2020  wnerr(self):..  
-00003cd0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00003ce0: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
-00003cf0: 7270 630d 0a20 2020 2020 2020 206f 7074  rpc..        opt
-00003d00: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-00003d10: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
-00003d20: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-00003d30: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00003d40: 666f 6f27 2c20 5f5f 6669 6c65 5f5f 2c20  foo', __file__, 
-00003d50: 6175 746f 7374 6172 743d 4661 6c73 6529  autostart=False)
-00003d60: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00003d70: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
-00003d80: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
-00003d90: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
-00003da0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-00003db0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-00003dc0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-00003dd0: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
-00003de0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00003df0: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
-00003e00: 7228 2766 6f6f 272c 2027 7374 6174 6527  r('foo', 'state'
-00003e10: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
-00003e20: 5354 4f50 5045 4429 0d0a 2020 2020 2020  STOPPED)..      
-00003e30: 2020 7072 6f63 6573 7320 3d20 7375 7065    process = supe
-00003e40: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
-00003e50: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
-00003e60: 6f63 6573 7365 735b 2766 6f6f 275d 0d0a  ocesses['foo']..
-00003e70: 2020 2020 2020 2020 7072 6f63 6573 732e          process.
-00003e80: 7370 6177 6e65 7272 203d 2027 6162 6327  spawnerr = 'abc'
-00003e90: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00003ea0: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00003eb0: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00003ec0: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00003ed0: 6173 7365 7274 5250 4345 7272 6f72 280d  assertRPCError(.
-00003ee0: 0a20 2020 2020 2020 2020 2020 2078 6d6c  .            xml
-00003ef0: 7270 632e 4661 756c 7473 2e53 5041 574e  rpc.Faults.SPAWN
-00003f00: 5f45 5252 4f52 2c0d 0a20 2020 2020 2020  _ERROR,..       
-00003f10: 2020 2020 2069 6e74 6572 6661 6365 2e73       interface.s
-00003f20: 7461 7274 5072 6f63 6573 732c 0d0a 2020  tartProcess,..  
-00003f30: 2020 2020 2020 2020 2020 2766 6f6f 270d            'foo'.
-00003f40: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
-00003f50: 2020 6465 6620 7465 7374 5f73 7461 7274    def test_start
-00003f60: 5072 6f63 6573 7328 7365 6c66 293a 0d0a  Process(self):..
-00003f70: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-00003f80: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-00003f90: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-00003fa0: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
-00003fb0: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
-00003fc0: 205f 5f66 696c 655f 5f2c 2061 7574 6f73   __file__, autos
-00003fd0: 7461 7274 3d46 616c 7365 2c0d 0a20 2020  tart=False,..   
-00003fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ff0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00004000: 7473 6563 733d 2e30 3129 0d0a 2020 2020  tsecs=.01)..    
-00004010: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-00004020: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
-00004030: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
-00004040: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-00004050: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
-00004060: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
-00004070: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
-00004080: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
-00004090: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
-000040a0: 6574 5f70 726f 6361 7474 7228 2766 6f6f  et_procattr('foo
-000040b0: 272c 2027 7374 6174 6527 2c20 5072 6f63  ', 'state', Proc
-000040c0: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
-000040d0: 4429 0d0a 2020 2020 2020 2020 696e 7465  D)..        inte
-000040e0: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-000040f0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00004100: 6429 0d0a 2020 2020 2020 2020 7265 7375  d)..        resu
-00004110: 6c74 203d 2069 6e74 6572 6661 6365 2e73  lt = interface.s
-00004120: 7461 7274 5072 6f63 6573 7328 2766 6f6f  tartProcess('foo
-00004130: 2729 0d0a 2020 2020 2020 2020 7072 6f63  ')..        proc
-00004140: 6573 7320 3d20 7375 7065 7276 6973 6f72  ess = supervisor
-00004150: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
-00004160: 5b27 666f 6f27 5d2e 7072 6f63 6573 7365  ['foo'].processe
-00004170: 735b 2766 6f6f 275d 0d0a 2020 2020 2020  s['foo']..      
-00004180: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00004190: 616c 2870 726f 6365 7373 2e73 7061 776e  al(process.spawn
-000041a0: 6564 2c20 5472 7565 290d 0a20 2020 2020  ed, True)..     
-000041b0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000041c0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
-000041d0: 6461 7465 5f74 6578 742c 2027 7374 6172  date_text, 'star
-000041e0: 7450 726f 6365 7373 2729 0d0a 2020 2020  tProcess')..    
-000041f0: 2020 2020 7072 6f63 6573 732e 7374 6174      process.stat
-00004200: 6520 3d20 5072 6f63 6573 7353 7461 7465  e = ProcessState
-00004210: 732e 5255 4e4e 494e 470d 0a20 2020 2020  s.RUNNING..     
-00004220: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00004230: 7561 6c28 7265 7375 6c74 2c20 5472 7565  ual(result, True
-00004240: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00004250: 745f 7374 6172 7450 726f 6365 7373 5f73  t_startProcess_s
-00004260: 7061 776e 6572 725f 696e 5f6f 6e77 6169  pawnerr_in_onwai
-00004270: 7428 7365 6c66 293a 0d0a 2020 2020 2020  t(self):..      
-00004280: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00004290: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-000042a0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-000042b0: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-000042c0: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-000042d0: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
-000042e0: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
-000042f0: 2c20 5f5f 6669 6c65 5f5f 2c20 6175 746f  , __file__, auto
-00004300: 7374 6172 743d 4661 6c73 6529 0d0a 2020  start=False)..  
-00004310: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00004320: 7669 736f 722e 7072 6f63 6573 7320 696d  visor.process im
-00004330: 706f 7274 2050 726f 6365 7373 5374 6174  port ProcessStat
-00004340: 6573 0d0a 2020 2020 2020 2020 7375 7065  es..        supe
-00004350: 7276 6973 6f72 6420 3d20 506f 7075 6c61  rvisord = Popula
-00004360: 7465 6444 756d 6d79 5375 7065 7276 6973  tedDummySupervis
-00004370: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
-00004380: 272c 2070 636f 6e66 6967 290d 0a20 2020  ', pconfig)..   
-00004390: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-000043a0: 2e73 6574 5f70 726f 6361 7474 7228 2766  .set_procattr('f
-000043b0: 6f6f 272c 2027 7374 6174 6527 2c20 5072  oo', 'state', Pr
-000043c0: 6f63 6573 7353 7461 7465 732e 5354 4f50  ocessStates.STOP
-000043d0: 5045 4429 0d0a 2020 2020 2020 2020 7072  PED)..        pr
-000043e0: 6f63 6573 7320 3d20 7375 7065 7276 6973  ocess = supervis
-000043f0: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
-00004400: 7073 5b27 666f 6f27 5d2e 7072 6f63 6573  ps['foo'].proces
-00004410: 7365 735b 2766 6f6f 275d 0d0a 0d0a 2020  ses['foo']....  
-00004420: 2020 2020 2020 6465 6620 7370 6177 6e28        def spawn(
-00004430: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00004440: 7072 6f63 6573 732e 7370 6177 6e65 6420  process.spawned 
-00004450: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
-00004460: 2020 2020 7072 6f63 6573 732e 7374 6174      process.stat
-00004470: 6520 3d20 5072 6f63 6573 7353 7461 7465  e = ProcessState
-00004480: 732e 5354 4152 5449 4e47 0d0a 0d0a 2020  s.STARTING....  
-00004490: 2020 2020 2020 6465 6620 7472 616e 7369        def transi
-000044a0: 7469 6f6e 2829 3a0d 0a20 2020 2020 2020  tion():..       
-000044b0: 2020 2020 2070 726f 6365 7373 2e73 7061       process.spa
-000044c0: 776e 6572 7220 3d20 2761 6263 270d 0a0d  wnerr = 'abc'...
-000044d0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-000044e0: 2e73 7061 776e 203d 2073 7061 776e 0d0a  .spawn = spawn..
-000044f0: 2020 2020 2020 2020 7072 6f63 6573 732e          process.
-00004500: 7472 616e 7369 7469 6f6e 203d 2074 7261  transition = tra
-00004510: 6e73 6974 696f 6e0d 0a20 2020 2020 2020  nsition..       
-00004520: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00004530: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00004540: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00004550: 2063 616c 6c62 6163 6b20 3d20 696e 7465   callback = inte
-00004560: 7266 6163 652e 7374 6172 7450 726f 6365  rface.startProce
-00004570: 7373 2827 666f 6f27 290d 0a20 2020 2020  ss('foo')..     
-00004580: 2020 2073 656c 662e 5f61 7373 6572 7452     self._assertR
-00004590: 5043 4572 726f 7228 786d 6c72 7063 2e46  PCError(xmlrpc.F
-000045a0: 6175 6c74 732e 5350 4157 4e5f 4552 524f  aults.SPAWN_ERRO
-000045b0: 522c 2063 616c 6c62 6163 6b29 0d0a 0d0a  R, callback)....
-000045c0: 2020 2020 6465 6620 7465 7374 5f73 7461      def test_sta
-000045d0: 7274 5072 6f63 6573 735f 7375 6363 6573  rtProcess_succes
-000045e0: 735f 696e 5f6f 6e77 6169 7428 7365 6c66  s_in_onwait(self
-000045f0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
-00004600: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-00004610: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-00004620: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
-00004630: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
-00004640: 6f6f 272c 205f 5f66 696c 655f 5f2c 2061  oo', __file__, a
-00004650: 7574 6f73 7461 7274 3d46 616c 7365 290d  utostart=False).
-00004660: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-00004670: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
-00004680: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
-00004690: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
-000046a0: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-000046b0: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-000046c0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-000046d0: 666f 6f27 2c20 7063 6f6e 6669 6729 0d0a  foo', pconfig)..
-000046e0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-000046f0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-00004700: 2827 666f 6f27 2c20 2773 7461 7465 272c  ('foo', 'state',
-00004710: 2050 726f 6365 7373 5374 6174 6573 2e53   ProcessStates.S
-00004720: 544f 5050 4544 290d 0a20 2020 2020 2020  TOPPED)..       
-00004730: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00004740: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00004750: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00004760: 6365 7373 6573 5b27 666f 6f27 5d0d 0a0d  cesses['foo']...
-00004770: 0a20 2020 2020 2020 2064 6566 2073 7061  .        def spa
-00004780: 776e 2829 3a0d 0a20 2020 2020 2020 2020  wn():..         
-00004790: 2020 2070 726f 6365 7373 2e73 7061 776e     process.spawn
-000047a0: 6564 203d 2054 7275 650d 0a20 2020 2020  ed = True..     
-000047b0: 2020 2020 2020 2070 726f 6365 7373 2e73         process.s
-000047c0: 7461 7465 203d 2050 726f 6365 7373 5374  tate = ProcessSt
-000047d0: 6174 6573 2e53 5441 5254 494e 470d 0a0d  ates.STARTING...
-000047e0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-000047f0: 2e73 7061 776e 203d 2073 7061 776e 0d0a  .spawn = spawn..
-00004800: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00004810: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00004820: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00004830: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-00004840: 203d 2069 6e74 6572 6661 6365 2e73 7461   = interface.sta
-00004850: 7274 5072 6f63 6573 7328 2766 6f6f 2729  rtProcess('foo')
-00004860: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
-00004870: 732e 7374 6174 6520 3d20 5072 6f63 6573  s.state = Proces
-00004880: 7353 7461 7465 732e 5255 4e4e 494e 470d  sStates.RUNNING.
-00004890: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000048a0: 7365 7274 4571 7561 6c28 6361 6c6c 6261  sertEqual(callba
-000048b0: 636b 2829 2c20 5472 7565 290d 0a0d 0a20  ck(), True).... 
-000048c0: 2020 2064 6566 2074 6573 745f 7374 6172     def test_star
-000048d0: 7450 726f 6365 7373 5f6e 6f77 6169 7428  tProcess_nowait(
-000048e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000048f0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00004900: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00004910: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
-00004920: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
-00004930: 2c20 2766 6f6f 272c 205f 5f66 696c 655f  , 'foo', __file_
-00004940: 5f2c 2061 7574 6f73 7461 7274 3d46 616c  _, autostart=Fal
-00004950: 7365 290d 0a20 2020 2020 2020 2066 726f  se)..        fro
-00004960: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
-00004970: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
-00004980: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
-00004990: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-000049a0: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
-000049b0: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
-000049c0: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
-000049d0: 6729 0d0a 2020 2020 2020 2020 7375 7065  g)..        supe
-000049e0: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
-000049f0: 6174 7472 2827 666f 6f27 2c20 2773 7461  attr('foo', 'sta
-00004a00: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
-00004a10: 6573 2e53 544f 5050 4544 290d 0a20 2020  es.STOPPED)..   
-00004a20: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00004a30: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00004a40: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00004a50: 2020 2020 2072 6573 756c 7420 3d20 696e       result = in
-00004a60: 7465 7266 6163 652e 7374 6172 7450 726f  terface.startPro
-00004a70: 6365 7373 2827 666f 6f27 2c20 7761 6974  cess('foo', wait
-00004a80: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
-00004a90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00004aa0: 6c28 7265 7375 6c74 2c20 5472 7565 290d  l(result, True).
-00004ab0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00004ac0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
-00004ad0: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
-00004ae0: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
-00004af0: 666f 6f27 5d0d 0a20 2020 2020 2020 2073  foo']..        s
-00004b00: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00004b10: 7072 6f63 6573 732e 7370 6177 6e65 642c  process.spawned,
-00004b20: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-00004b30: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00004b40: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-00004b50: 655f 7465 7874 2c20 2773 7461 7274 5072  e_text, 'startPr
-00004b60: 6f63 6573 7327 290d 0a0d 0a20 2020 2064  ocess')....    d
-00004b70: 6566 2074 6573 745f 7374 6172 7450 726f  ef test_startPro
-00004b80: 6365 7373 5f61 626e 6f72 6d61 6c5f 7465  cess_abnormal_te
-00004b90: 726d 5f70 726f 6365 7373 5f6e 6f74 5f72  rm_process_not_r
-00004ba0: 756e 6e69 6e67 2873 656c 6629 3a0d 0a20  unning(self):.. 
-00004bb0: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-00004bc0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-00004bd0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00004be0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
-00004bf0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-00004c00: 5f5f 6669 6c65 5f5f 2c20 6175 746f 7374  __file__, autost
-00004c10: 6172 743d 4661 6c73 6529 0d0a 2020 2020  art=False)..    
-00004c20: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-00004c30: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
-00004c40: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
-00004c50: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00004c60: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
-00004c70: 2068 7474 700d 0a20 2020 2020 2020 2073   http..        s
-00004c80: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-00004c90: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-00004ca0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-00004cb0: 666f 6f27 2c20 7063 6f6e 6669 6729 0d0a  foo', pconfig)..
-00004cc0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00004cd0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-00004ce0: 2827 666f 6f27 2c20 2773 7461 7465 272c  ('foo', 'state',
-00004cf0: 2050 726f 6365 7373 5374 6174 6573 2e53   ProcessStates.S
-00004d00: 544f 5050 4544 290d 0a20 2020 2020 2020  TOPPED)..       
-00004d10: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00004d20: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00004d30: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00004d40: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00004d50: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00004d60: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00004d70: 6365 7373 6573 5b27 666f 6f27 5d0d 0a0d  cesses['foo']...
-00004d80: 0a20 2020 2020 2020 2064 6566 2073 7061  .        def spa
-00004d90: 776e 2829 3a0d 0a20 2020 2020 2020 2020  wn():..         
-00004da0: 2020 2070 726f 6365 7373 2e73 7061 776e     process.spawn
-00004db0: 6564 203d 2054 7275 650d 0a20 2020 2020  ed = True..     
-00004dc0: 2020 2020 2020 2070 726f 6365 7373 2e73         process.s
-00004dd0: 7461 7465 203d 2050 726f 6365 7373 5374  tate = ProcessSt
-00004de0: 6174 6573 2e53 5441 5254 494e 470d 0a0d  ates.STARTING...
-00004df0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00004e00: 2e73 7061 776e 203d 2073 7061 776e 0d0a  .spawn = spawn..
-00004e10: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-00004e20: 203d 2069 6e74 6572 6661 6365 2e73 7461   = interface.sta
-00004e30: 7274 5072 6f63 6573 7328 2766 6f6f 272c  rtProcess('foo',
-00004e40: 2031 3030 2920 2023 206d 696c 6c69 7365   100)  # millise
-00004e50: 636f 6e64 730d 0a20 2020 2020 2020 2072  conds..        r
-00004e60: 6573 756c 7420 3d20 6361 6c6c 6261 636b  esult = callback
-00004e70: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-00004e80: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
-00004e90: 756c 742c 2068 7474 702e 4e4f 545f 444f  ult, http.NOT_DO
-00004ea0: 4e45 5f59 4554 290d 0a20 2020 2020 2020  NE_YET)..       
-00004eb0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00004ec0: 6c28 7072 6f63 6573 732e 7370 6177 6e65  l(process.spawne
-00004ed0: 642c 2054 7275 6529 0d0a 2020 2020 2020  d, True)..      
-00004ee0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00004ef0: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
-00004f00: 6174 655f 7465 7874 2c20 2773 7461 7274  ate_text, 'start
-00004f10: 5072 6f63 6573 7327 290d 0a20 2020 2020  Process')..     
-00004f20: 2020 2070 726f 6365 7373 2e73 7461 7465     process.state
-00004f30: 203d 2050 726f 6365 7373 5374 6174 6573   = ProcessStates
-00004f40: 2e42 4143 4b4f 4646 0d0a 2020 2020 2020  .BACKOFF..      
-00004f50: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00004f60: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-00004f70: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-00004f80: 7373 6572 7452 5043 4572 726f 7228 786d  ssertRPCError(xm
-00004f90: 6c72 7063 2e46 6175 6c74 732e 4142 4e4f  lrpc.Faults.ABNO
-00004fa0: 524d 414c 5f54 4552 4d49 4e41 5449 4f4e  RMAL_TERMINATION
-00004fb0: 2c20 6361 6c6c 6261 636b 290d 0a0d 0a20  , callback).... 
-00004fc0: 2020 2064 6566 2074 6573 745f 7374 6172     def test_star
-00004fd0: 7450 726f 6365 7373 5f73 706c 6174 5f63  tProcess_splat_c
-00004fe0: 616c 6c73 5f73 7461 7274 5072 6f63 6573  alls_startProces
-00004ff0: 7347 726f 7570 2873 656c 6629 3a0d 0a20  sGroup(self):.. 
-00005000: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-00005010: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-00005020: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00005030: 3120 3d20 4475 6d6d 7950 436f 6e66 6967  1 = DummyPConfig
-00005040: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00005050: 7373 3127 2c20 5f5f 6669 6c65 5f5f 2c20  ss1', __file__, 
-00005060: 6175 746f 7374 6172 743d 4661 6c73 652c  autostart=False,
-00005070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005090: 2020 7374 6172 7473 6563 733d 2e30 3129    startsecs=.01)
-000050a0: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-000050b0: 6732 203d 2044 756d 6d79 5043 6f6e 6669  g2 = DummyPConfi
-000050c0: 6728 6f70 7469 6f6e 732c 2027 7072 6f63  g(options, 'proc
-000050d0: 6573 7332 272c 205f 5f66 696c 655f 5f2c  ess2', __file__,
-000050e0: 2070 7269 6f72 6974 793d 322c 0d0a 2020   priority=2,..  
-000050f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005100: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00005110: 6172 7473 6563 733d 2e30 3129 0d0a 2020  artsecs=.01)..  
-00005120: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00005130: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
-00005140: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-00005150: 696f 6e73 2c20 2766 6f6f 272c 0d0a 2020  ions, 'foo',..  
-00005160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005180: 2020 2020 2020 2020 2020 2020 2070 636f               pco
-00005190: 6e66 6967 312c 2070 636f 6e66 6967 3229  nfig1, pconfig2)
-000051a0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-000051b0: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
-000051c0: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
-000051d0: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
-000051e0: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
-000051f0: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
-00005200: 7331 272c 2027 7374 6174 6527 2c20 5072  s1', 'state', Pr
-00005210: 6f63 6573 7353 7461 7465 732e 5354 4f50  ocessStates.STOP
-00005220: 5045 4429 0d0a 2020 2020 2020 2020 7375  PED)..        su
-00005230: 7065 7276 6973 6f72 642e 7365 745f 7072  pervisord.set_pr
-00005240: 6f63 6174 7472 2827 7072 6f63 6573 7332  ocattr('process2
-00005250: 272c 2027 7374 6174 6527 2c20 5072 6f63  ', 'state', Proc
-00005260: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
-00005270: 4429 0d0a 2020 2020 2020 2020 696e 7465  D)..        inte
-00005280: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00005290: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-000052a0: 6429 0d0a 2020 2020 2020 2020 696e 7465  d)..        inte
-000052b0: 7266 6163 652e 7374 6172 7450 726f 6365  rface.startProce
-000052c0: 7373 2827 666f 6f3a 2a27 290d 0a20 2020  ss('foo:*')..   
-000052d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000052e0: 4571 7561 6c28 696e 7465 7266 6163 652e  Equal(interface.
-000052f0: 7570 6461 7465 5f74 6578 742c 2027 7374  update_text, 'st
-00005300: 6172 7450 726f 6365 7373 4772 6f75 7027  artProcessGroup'
-00005310: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00005320: 745f 7374 6172 7450 726f 6365 7373 4772  t_startProcessGr
-00005330: 6f75 7028 7365 6c66 293a 0d0a 2020 2020  oup(self):..    
-00005340: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-00005350: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-00005360: 2020 2020 2020 7063 6f6e 6669 6731 203d        pconfig1 =
-00005370: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-00005380: 7469 6f6e 732c 2027 7072 6f63 6573 7331  tions, 'process1
-00005390: 272c 205f 5f66 696c 655f 5f2c 2070 7269  ', __file__, pri
-000053a0: 6f72 6974 793d 312c 0d0a 2020 2020 2020  ority=1,..      
-000053b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000053c0: 2020 2020 2020 2020 2020 7374 6172 7473            starts
-000053d0: 6563 733d 2e30 3129 0d0a 2020 2020 2020  ecs=.01)..      
-000053e0: 2020 7063 6f6e 6669 6732 203d 2044 756d    pconfig2 = Dum
-000053f0: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00005400: 732c 2027 7072 6f63 6573 7332 272c 205f  s, 'process2', _
-00005410: 5f66 696c 655f 5f2c 2070 7269 6f72 6974  _file__, priorit
-00005420: 793d 322c 0d0a 2020 2020 2020 2020 2020  y=2,..          
-00005430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005440: 2020 2020 2020 7374 6172 7473 6563 733d        startsecs=
-00005450: 2e30 3129 0d0a 2020 2020 2020 2020 7375  .01)..        su
-00005460: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
-00005470: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
-00005480: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
-00005490: 6f6f 272c 2070 636f 6e66 6967 312c 0d0a  oo', pconfig1,..
-000054a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000054d0: 636f 6e66 6967 3229 0d0a 2020 2020 2020  config2)..      
-000054e0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-000054f0: 722e 7072 6f63 6573 7320 696d 706f 7274  r.process import
-00005500: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
-00005510: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-00005520: 6572 7669 736f 722e 786d 6c72 7063 2069  ervisor.xmlrpc i
-00005530: 6d70 6f72 7420 4661 756c 7473 0d0a 2020  mport Faults..  
-00005540: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00005550: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
-00005560: 7072 6f63 6573 7331 272c 2027 7374 6174  process1', 'stat
-00005570: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
-00005580: 732e 5354 4f50 5045 4429 0d0a 2020 2020  s.STOPPED)..    
-00005590: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
-000055a0: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
-000055b0: 6f63 6573 7332 272c 2027 7374 6174 6527  ocess2', 'state'
-000055c0: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
-000055d0: 5354 4f50 5045 4429 0d0a 2020 2020 2020  STOPPED)..      
-000055e0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
-000055f0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
-00005600: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
-00005610: 2020 6361 6c6c 6261 636b 203d 2069 6e74    callback = int
-00005620: 6572 6661 6365 2e73 7461 7274 5072 6f63  erface.startProc
-00005630: 6573 7347 726f 7570 2827 666f 6f27 290d  essGroup('foo').
-00005640: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00005650: 6173 7365 7274 4571 7561 6c28 0d0a 2020  assertEqual(..  
-00005660: 2020 2020 2020 2020 2020 6361 6c6c 6261            callba
-00005670: 636b 2829 2c0d 0a20 2020 2020 2020 2020  ck(),..         
-00005680: 2020 205b 7b27 6772 6f75 7027 3a20 2766     [{'group': 'f
-00005690: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-000056a0: 2020 2020 2773 7461 7475 7327 3a20 4661      'status': Fa
-000056b0: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
-000056c0: 2020 2020 2020 2020 2020 2020 2027 6465               'de
-000056d0: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
-000056e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-000056f0: 2027 6e61 6d65 273a 2027 7072 6f63 6573   'name': 'proces
-00005700: 7331 277d 2c0d 0a20 2020 2020 2020 2020  s1'},..         
-00005710: 2020 2020 7b27 6772 6f75 7027 3a20 2766      {'group': 'f
-00005720: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-00005730: 2020 2020 2773 7461 7475 7327 3a20 4661      'status': Fa
-00005740: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
-00005750: 2020 2020 2020 2020 2020 2020 2027 6465               'de
-00005760: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
-00005770: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00005780: 2027 6e61 6d65 273a 2027 7072 6f63 6573   'name': 'proces
-00005790: 7332 277d 0d0a 2020 2020 2020 2020 2020  s2'}..          
-000057a0: 2020 205d 0d0a 2020 2020 2020 2020 290d     ]..        ).
-000057b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000057c0: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
-000057d0: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
-000057e0: 2027 7374 6172 7450 726f 6365 7373 2729   'startProcess')
-000057f0: 0d0a 0d0a 2020 2020 2020 2020 7072 6f63  ....        proc
-00005800: 6573 7331 203d 2073 7570 6572 7669 736f  ess1 = superviso
-00005810: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
-00005820: 735b 2766 6f6f 275d 2e70 726f 6365 7373  s['foo'].process
-00005830: 6573 5b27 7072 6f63 6573 7331 275d 0d0a  es['process1']..
-00005840: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00005850: 6572 7445 7175 616c 2870 726f 6365 7373  ertEqual(process
-00005860: 312e 7370 6177 6e65 642c 2054 7275 6529  1.spawned, True)
-00005870: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
-00005880: 7332 203d 2073 7570 6572 7669 736f 7264  s2 = supervisord
-00005890: 2e70 726f 6365 7373 5f67 726f 7570 735b  .process_groups[
-000058a0: 2766 6f6f 275d 2e70 726f 6365 7373 6573  'foo'].processes
-000058b0: 5b27 7072 6f63 6573 7332 275d 0d0a 2020  ['process2']..  
-000058c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000058d0: 7445 7175 616c 2870 726f 6365 7373 322e  tEqual(process2.
-000058e0: 7370 6177 6e65 642c 2054 7275 6529 0d0a  spawned, True)..
-000058f0: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
-00005900: 7461 7274 5072 6f63 6573 7347 726f 7570  tartProcessGroup
-00005910: 5f6e 6f77 6169 7428 7365 6c66 293a 0d0a  _nowait(self):..
-00005920: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-00005930: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-00005940: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-00005950: 6731 203d 2044 756d 6d79 5043 6f6e 6669  g1 = DummyPConfi
-00005960: 6728 6f70 7469 6f6e 732c 2027 7072 6f63  g(options, 'proc
-00005970: 6573 7331 272c 205f 5f66 696c 655f 5f2c  ess1', __file__,
-00005980: 2070 7269 6f72 6974 793d 312c 0d0a 2020   priority=1,..  
-00005990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059a0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-000059b0: 6172 7473 6563 733d 2e30 3129 0d0a 2020  artsecs=.01)..  
-000059c0: 2020 2020 2020 7063 6f6e 6669 6732 203d        pconfig2 =
-000059d0: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-000059e0: 7469 6f6e 732c 2027 7072 6f63 6573 7332  tions, 'process2
-000059f0: 272c 205f 5f66 696c 655f 5f2c 2070 7269  ', __file__, pri
-00005a00: 6f72 6974 793d 322c 0d0a 2020 2020 2020  ority=2,..      
-00005a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a20: 2020 2020 2020 2020 2020 7374 6172 7473            starts
-00005a30: 6563 733d 2e30 3129 0d0a 2020 2020 2020  ecs=.01)..      
-00005a40: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-00005a50: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
-00005a60: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
-00005a70: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
-00005a80: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00005a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ab0: 2020 2070 636f 6e66 6967 3229 0d0a 2020     pconfig2)..  
-00005ac0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00005ad0: 7669 736f 722e 7072 6f63 6573 7320 696d  visor.process im
-00005ae0: 706f 7274 2050 726f 6365 7373 5374 6174  port ProcessStat
-00005af0: 6573 0d0a 2020 2020 2020 2020 7375 7065  es..        supe
-00005b00: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
-00005b10: 6174 7472 2827 7072 6f63 6573 7331 272c  attr('process1',
-00005b20: 2027 7374 6174 6527 2c20 5072 6f63 6573   'state', Proces
-00005b30: 7353 7461 7465 732e 5354 4f50 5045 4429  sStates.STOPPED)
-00005b40: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-00005b50: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
-00005b60: 7472 2827 7072 6f63 6573 7332 272c 2027  tr('process2', '
-00005b70: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
-00005b80: 7461 7465 732e 5354 4f50 5045 4429 0d0a  tates.STOPPED)..
-00005b90: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00005ba0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00005bb0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00005bc0: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-00005bd0: 203d 2069 6e74 6572 6661 6365 2e73 7461   = interface.sta
-00005be0: 7274 5072 6f63 6573 7347 726f 7570 2827  rtProcessGroup('
-00005bf0: 666f 6f27 2c20 7761 6974 3d46 616c 7365  foo', wait=False
-00005c00: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00005c10: 7375 7065 7276 6973 6f72 2e78 6d6c 7270  supervisor.xmlrp
-00005c20: 6320 696d 706f 7274 2046 6175 6c74 730d  c import Faults.
-00005c30: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00005c40: 6173 7365 7274 4571 7561 6c28 0d0a 2020  assertEqual(..  
-00005c50: 2020 2020 2020 2020 2020 6361 6c6c 6261            callba
-00005c60: 636b 2829 2c0d 0a20 2020 2020 2020 2020  ck(),..         
-00005c70: 2020 205b 7b27 6772 6f75 7027 3a20 2766     [{'group': 'f
-00005c80: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-00005c90: 2020 2020 2773 7461 7475 7327 3a20 4661      'status': Fa
-00005ca0: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
-00005cb0: 2020 2020 2020 2020 2020 2020 2027 6465               'de
-00005cc0: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
-00005cd0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00005ce0: 2027 6e61 6d65 273a 2027 7072 6f63 6573   'name': 'proces
-00005cf0: 7331 277d 2c0d 0a20 2020 2020 2020 2020  s1'},..         
-00005d00: 2020 2020 7b27 6772 6f75 7027 3a20 2766      {'group': 'f
-00005d10: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-00005d20: 2020 2020 2773 7461 7475 7327 3a20 4661      'status': Fa
-00005d30: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
-00005d40: 2020 2020 2020 2020 2020 2020 2027 6465               'de
-00005d50: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
-00005d60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00005d70: 2027 6e61 6d65 273a 2027 7072 6f63 6573   'name': 'proces
-00005d80: 7332 277d 0d0a 2020 2020 2020 2020 2020  s2'}..          
-00005d90: 2020 205d 0d0a 2020 2020 2020 2020 290d     ]..        ).
-00005da0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-00005db0: 7374 6172 7450 726f 6365 7373 4772 6f75  startProcessGrou
-00005dc0: 705f 6261 646e 616d 6528 7365 6c66 293a  p_badname(self):
-00005dd0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00005de0: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
-00005df0: 2078 6d6c 7270 630d 0a20 2020 2020 2020   xmlrpc..       
-00005e00: 2073 7570 6572 7669 736f 7264 203d 2044   supervisord = D
-00005e10: 756d 6d79 5375 7065 7276 6973 6f72 2829  ummySupervisor()
-00005e20: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00005e30: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00005e40: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00005e50: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00005e60: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
-00005e70: 6d6c 7270 632e 4661 756c 7473 2e42 4144  mlrpc.Faults.BAD
-00005e80: 5f4e 414d 452c 0d0a 2020 2020 2020 2020  _NAME,..        
-00005e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ea0: 2020 2020 2069 6e74 6572 6661 6365 2e73       interface.s
-00005eb0: 7461 7274 5072 6f63 6573 7347 726f 7570  tartProcessGroup
-00005ec0: 2c20 2766 6f6f 2729 0d0a 0d0a 2020 2020  , 'foo')....    
-00005ed0: 6465 6620 7465 7374 5f73 7461 7274 416c  def test_startAl
-00005ee0: 6c50 726f 6365 7373 6573 2873 656c 6629  lProcesses(self)
-00005ef0: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
-00005f00: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
-00005f10: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
-00005f20: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
-00005f30: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
-00005f40: 726f 6365 7373 3127 2c20 5f5f 6669 6c65  rocess1', __file
-00005f50: 5f5f 2c20 7072 696f 7269 7479 3d31 2c0d  __, priority=1,.
-00005f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005f80: 2073 7461 7274 7365 6373 3d2e 3031 290d   startsecs=.01).
-00005f90: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00005fa0: 3220 3d20 4475 6d6d 7950 436f 6e66 6967  2 = DummyPConfig
-00005fb0: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00005fc0: 7373 3227 2c20 5f5f 6669 6c65 5f5f 2c20  ss2', __file__, 
-00005fd0: 7072 696f 7269 7479 3d32 2c0d 0a20 2020  priority=2,..   
-00005fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005ff0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-00006000: 7274 7365 6373 3d2e 3031 290d 0a20 2020  rtsecs=.01)..   
-00006010: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00006020: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
-00006030: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
-00006040: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
-00006050: 6669 6731 2c0d 0a20 2020 2020 2020 2020  fig1,..         
-00006060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006080: 2020 2020 2020 7063 6f6e 6669 6732 290d        pconfig2).
-00006090: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-000060a0: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
-000060b0: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
-000060c0: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
-000060d0: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
-000060e0: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
-000060f0: 3127 2c20 2773 7461 7465 272c 2050 726f  1', 'state', Pro
-00006100: 6365 7373 5374 6174 6573 2e53 544f 5050  cessStates.STOPP
-00006110: 4544 290d 0a20 2020 2020 2020 2073 7570  ED)..        sup
-00006120: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
-00006130: 6361 7474 7228 2770 726f 6365 7373 3227  cattr('process2'
-00006140: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
-00006150: 7373 5374 6174 6573 2e53 544f 5050 4544  ssStates.STOPPED
-00006160: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00006170: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00006180: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00006190: 290d 0a20 2020 2020 2020 2063 616c 6c62  )..        callb
-000061a0: 6163 6b20 3d20 696e 7465 7266 6163 652e  ack = interface.
-000061b0: 7374 6172 7441 6c6c 5072 6f63 6573 7365  startAllProcesse
-000061c0: 7328 290d 0a0d 0a20 2020 2020 2020 2066  s()....        f
-000061d0: 726f 6d20 7375 7065 7276 6973 6f72 2e78  rom supervisor.x
-000061e0: 6d6c 7270 6320 696d 706f 7274 2046 6175  mlrpc import Fau
-000061f0: 6c74 730d 0a0d 0a20 2020 2020 2020 2073  lts....        s
-00006200: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00006210: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-00006220: 6c6c 6261 636b 2829 2c0d 0a20 2020 2020  llback(),..     
-00006230: 2020 2020 2020 205b 7b27 6772 6f75 7027         [{'group'
-00006240: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-00006250: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
-00006260: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
-00006270: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00006280: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
-00006290: 274f 4b27 2c0d 0a20 2020 2020 2020 2020  'OK',..         
-000062a0: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-000062b0: 6f63 6573 7331 277d 2c0d 0a20 2020 2020  ocess1'},..     
-000062c0: 2020 2020 2020 2020 7b27 6772 6f75 7027          {'group'
-000062d0: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-000062e0: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
-000062f0: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
-00006300: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00006310: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
-00006320: 274f 4b27 2c0d 0a20 2020 2020 2020 2020  'OK',..         
-00006330: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-00006340: 6f63 6573 7332 277d 0d0a 2020 2020 2020  ocess2'}..      
-00006350: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
-00006360: 2020 290d 0a0d 0a20 2020 2020 2020 2073    )....        s
-00006370: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00006380: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
-00006390: 5f74 6578 742c 2027 7374 6172 7450 726f  _text, 'startPro
-000063a0: 6365 7373 2729 0d0a 0d0a 2020 2020 2020  cess')....      
-000063b0: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
-000063c0: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-000063d0: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-000063e0: 726f 6365 7373 6573 5b27 7072 6f63 6573  rocesses['proces
-000063f0: 7331 275d 0d0a 2020 2020 2020 2020 7365  s1']..        se
-00006400: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-00006410: 726f 6365 7373 312e 7370 6177 6e65 642c  rocess1.spawned,
-00006420: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-00006430: 7072 6f63 6573 7332 203d 2073 7570 6572  process2 = super
-00006440: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00006450: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00006460: 6365 7373 6573 5b27 7072 6f63 6573 7332  cesses['process2
-00006470: 275d 0d0a 2020 2020 2020 2020 7365 6c66  ']..        self
-00006480: 2e61 7373 6572 7445 7175 616c 2870 726f  .assertEqual(pro
-00006490: 6365 7373 322e 7370 6177 6e65 642c 2054  cess2.spawned, T
-000064a0: 7275 6529 0d0a 0d0a 2020 2020 6465 6620  rue)....    def 
-000064b0: 7465 7374 5f73 7461 7274 416c 6c50 726f  test_startAllPro
-000064c0: 6365 7373 6573 5f6e 6f77 6169 7428 7365  cesses_nowait(se
-000064d0: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
-000064e0: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-000064f0: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-00006500: 7063 6f6e 6669 6731 203d 2044 756d 6d79  pconfig1 = Dummy
-00006510: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-00006520: 2027 7072 6f63 6573 7331 272c 205f 5f66   'process1', __f
-00006530: 696c 655f 5f2c 2070 7269 6f72 6974 793d  ile__, priority=
-00006540: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00006550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006560: 2020 2020 7374 6172 7473 6563 733d 2e30      startsecs=.0
-00006570: 3129 0d0a 2020 2020 2020 2020 7063 6f6e  1)..        pcon
-00006580: 6669 6732 203d 2044 756d 6d79 5043 6f6e  fig2 = DummyPCon
-00006590: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
-000065a0: 6f63 6573 7332 272c 205f 5f66 696c 655f  ocess2', __file_
-000065b0: 5f2c 2070 7269 6f72 6974 793d 322c 0d0a  _, priority=2,..
-000065c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000065d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000065e0: 7374 6172 7473 6563 733d 2e30 3129 0d0a  startsecs=.01)..
-000065f0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00006600: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
-00006610: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
-00006620: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
-00006630: 636f 6e66 6967 312c 0d0a 2020 2020 2020  config1,..      
-00006640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006660: 2020 2020 2020 2020 2070 636f 6e66 6967           pconfig
-00006670: 3229 0d0a 2020 2020 2020 2020 6672 6f6d  2)..        from
-00006680: 2073 7570 6572 7669 736f 722e 7072 6f63   supervisor.proc
-00006690: 6573 7320 696d 706f 7274 2050 726f 6365  ess import Proce
-000066a0: 7373 5374 6174 6573 0d0a 2020 2020 2020  ssStates..      
-000066b0: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
-000066c0: 745f 7072 6f63 6174 7472 2827 7072 6f63  t_procattr('proc
-000066d0: 6573 7331 272c 2027 7374 6174 6527 2c20  ess1', 'state', 
-000066e0: 5072 6f63 6573 7353 7461 7465 732e 5354  ProcessStates.ST
-000066f0: 4f50 5045 4429 0d0a 2020 2020 2020 2020  OPPED)..        
-00006700: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
-00006710: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
-00006720: 7332 272c 2027 7374 6174 6527 2c20 5072  s2', 'state', Pr
-00006730: 6f63 6573 7353 7461 7465 732e 5354 4f50  ocessStates.STOP
-00006740: 5045 4429 0d0a 2020 2020 2020 2020 696e  PED)..        in
-00006750: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-00006760: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-00006770: 6f72 6429 0d0a 2020 2020 2020 2020 6361  ord)..        ca
-00006780: 6c6c 6261 636b 203d 2069 6e74 6572 6661  llback = interfa
-00006790: 6365 2e73 7461 7274 416c 6c50 726f 6365  ce.startAllProce
-000067a0: 7373 6573 2877 6169 743d 4661 6c73 6529  sses(wait=False)
-000067b0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-000067c0: 7570 6572 7669 736f 722e 786d 6c72 7063  upervisor.xmlrpc
-000067d0: 2069 6d70 6f72 7420 4661 756c 7473 0d0a   import Faults..
-000067e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000067f0: 7373 6572 7445 7175 616c 280d 0a20 2020  ssertEqual(..   
-00006800: 2020 2020 2020 2020 2063 616c 6c62 6163           callbac
-00006810: 6b28 292c 0d0a 2020 2020 2020 2020 2020  k(),..          
-00006820: 2020 5b7b 2767 726f 7570 273a 2027 666f    [{'group': 'fo
-00006830: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-00006840: 2020 2027 7374 6174 7573 273a 2046 6175     'status': Fau
-00006850: 6c74 732e 5355 4343 4553 532c 0d0a 2020  lts.SUCCESS,..  
-00006860: 2020 2020 2020 2020 2020 2020 2764 6573              'des
-00006870: 6372 6970 7469 6f6e 273a 2027 4f4b 272c  cription': 'OK',
-00006880: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006890: 276e 616d 6527 3a20 2770 726f 6365 7373  'name': 'process
-000068a0: 3127 7d2c 0d0a 2020 2020 2020 2020 2020  1'},..          
-000068b0: 2020 207b 2767 726f 7570 273a 2027 666f     {'group': 'fo
-000068c0: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-000068d0: 2020 2027 7374 6174 7573 273a 2046 6175     'status': Fau
-000068e0: 6c74 732e 5355 4343 4553 532c 0d0a 2020  lts.SUCCESS,..  
-000068f0: 2020 2020 2020 2020 2020 2020 2764 6573              'des
-00006900: 6372 6970 7469 6f6e 273a 2027 4f4b 272c  cription': 'OK',
-00006910: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006920: 276e 616d 6527 3a20 2770 726f 6365 7373  'name': 'process
-00006930: 3227 7d0d 0a20 2020 2020 2020 2020 2020  2'}..           
-00006940: 2020 5d0d 0a20 2020 2020 2020 2029 0d0a    ]..        )..
-00006950: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
-00006960: 746f 7050 726f 6365 7373 2873 656c 6629  topProcess(self)
-00006970: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
-00006980: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
-00006990: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
-000069a0: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
-000069b0: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
-000069c0: 6f27 2c20 272f 6269 6e2f 666f 6f27 290d  o', '/bin/foo').
-000069d0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-000069e0: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
-000069f0: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
-00006a00: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
-00006a10: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-00006a20: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-00006a30: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-00006a40: 666f 6f27 2c20 7063 6f6e 6669 6729 0d0a  foo', pconfig)..
-00006a50: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00006a60: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-00006a70: 2827 666f 6f27 2c20 2773 7461 7465 272c  ('foo', 'state',
-00006a80: 2050 726f 6365 7373 5374 6174 6573 2e52   ProcessStates.R
-00006a90: 554e 4e49 4e47 290d 0a20 2020 2020 2020  UNNING)..       
-00006aa0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00006ab0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00006ac0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00006ad0: 2072 6573 756c 7420 3d20 696e 7465 7266   result = interf
-00006ae0: 6163 652e 7374 6f70 5072 6f63 6573 7328  ace.stopProcess(
-00006af0: 2766 6f6f 2729 0d0a 2020 2020 2020 2020  'foo')..        
-00006b00: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00006b10: 7265 7375 6c74 290d 0a20 2020 2020 2020  result)..       
-00006b20: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00006b30: 6c28 696e 7465 7266 6163 652e 7570 6461  l(interface.upda
-00006b40: 7465 5f74 6578 742c 2027 7374 6f70 5072  te_text, 'stopPr
-00006b50: 6f63 6573 7327 290d 0a20 2020 2020 2020  ocess')..       
-00006b60: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00006b70: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00006b80: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00006b90: 6365 7373 6573 5b27 666f 6f27 5d0d 0a20  cesses['foo'].. 
-00006ba0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00006bb0: 7274 4571 7561 6c28 7072 6f63 6573 732e  rtEqual(process.
-00006bc0: 6261 636b 6f66 662c 2030 290d 0a20 2020  backoff, 0)..   
-00006bd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00006be0: 4571 7561 6c28 7072 6f63 6573 732e 6465  Equal(process.de
-00006bf0: 6c61 792c 2030 290d 0a20 2020 2020 2020  lay, 0)..       
-00006c00: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00006c10: 6528 7072 6f63 6573 732e 6b69 6c6c 696e  e(process.killin
-00006c20: 6729 0d0a 2020 2020 2020 2020 7365 6c66  g)..        self
-00006c30: 2e61 7373 6572 7445 7175 616c 2870 726f  .assertEqual(pro
-00006c40: 6365 7373 2e73 7461 7465 2c20 5072 6f63  cess.state, Proc
-00006c50: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
-00006c60: 4429 0d0a 2020 2020 2020 2020 7365 6c66  D)..        self
-00006c70: 2e61 7373 6572 7454 7275 6528 7072 6f63  .assertTrue(proc
-00006c80: 6573 732e 7374 6f70 5f72 6570 6f72 745f  ess.stop_report_
-00006c90: 6361 6c6c 6564 290d 0a20 2020 2020 2020  called)..       
-00006ca0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00006cb0: 6c28 6c65 6e28 7375 7065 7276 6973 6f72  l(len(supervisor
-00006cc0: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
-00006cd0: 5b27 666f 6f27 5d2e 7072 6f63 6573 7365  ['foo'].processe
-00006ce0: 7329 2c20 3129 0d0a 2020 2020 2020 2020  s), 1)..        
-00006cf0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00006d00: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-00006d10: 655f 7465 7874 2c20 2773 746f 7050 726f  e_text, 'stopPro
-00006d20: 6365 7373 2729 0d0a 0d0a 2020 2020 6465  cess')....    de
-00006d30: 6620 7465 7374 5f73 746f 7050 726f 6365  f test_stopProce
-00006d40: 7373 5f6e 6f77 6169 7428 7365 6c66 293a  ss_nowait(self):
-00006d50: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-00006d60: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-00006d70: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
-00006d80: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
-00006d90: 6967 286f 7074 696f 6e73 2c20 2766 6f6f  ig(options, 'foo
-00006da0: 272c 205f 5f66 696c 655f 5f29 0d0a 2020  ', __file__)..  
-00006db0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00006dc0: 7669 736f 722e 7072 6f63 6573 7320 696d  visor.process im
-00006dd0: 706f 7274 2050 726f 6365 7373 5374 6174  port ProcessStat
-00006de0: 6573 0d0a 2020 2020 2020 2020 7375 7065  es..        supe
-00006df0: 7276 6973 6f72 6420 3d20 506f 7075 6c61  rvisord = Popula
-00006e00: 7465 6444 756d 6d79 5375 7065 7276 6973  tedDummySupervis
-00006e10: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
-00006e20: 272c 2070 636f 6e66 6967 290d 0a20 2020  ', pconfig)..   
-00006e30: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00006e40: 2e73 6574 5f70 726f 6361 7474 7228 2766  .set_procattr('f
-00006e50: 6f6f 272c 2027 7374 6174 6527 2c20 5072  oo', 'state', Pr
-00006e60: 6f63 6573 7353 7461 7465 732e 5255 4e4e  ocessStates.RUNN
-00006e70: 494e 4729 0d0a 2020 2020 2020 2020 696e  ING)..        in
-00006e80: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-00006e90: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-00006ea0: 6f72 6429 0d0a 2020 2020 2020 2020 7265  ord)..        re
-00006eb0: 7375 6c74 203d 2069 6e74 6572 6661 6365  sult = interface
-00006ec0: 2e73 746f 7050 726f 6365 7373 2827 666f  .stopProcess('fo
-00006ed0: 6f27 2c20 7761 6974 3d46 616c 7365 290d  o', wait=False).
-00006ee0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00006ef0: 7365 7274 4571 7561 6c28 7265 7375 6c74  sertEqual(result
-00006f00: 2c20 5472 7565 290d 0a20 2020 2020 2020  , True)..       
-00006f10: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00006f20: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00006f30: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00006f40: 6365 7373 6573 5b27 666f 6f27 5d0d 0a20  cesses['foo'].. 
-00006f50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00006f60: 7274 4571 7561 6c28 7072 6f63 6573 732e  rtEqual(process.
-00006f70: 7374 6f70 5f63 616c 6c65 642c 2054 7275  stop_called, Tru
-00006f80: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
-00006f90: 2e61 7373 6572 7454 7275 6528 7072 6f63  .assertTrue(proc
-00006fa0: 6573 732e 7374 6f70 5f72 6570 6f72 745f  ess.stop_report_
-00006fb0: 6361 6c6c 6564 290d 0a20 2020 2020 2020  called)..       
-00006fc0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00006fd0: 6c28 696e 7465 7266 6163 652e 7570 6461  l(interface.upda
-00006fe0: 7465 5f74 6578 742c 2027 7374 6f70 5072  te_text, 'stopPr
-00006ff0: 6f63 6573 7327 290d 0a0d 0a20 2020 2064  ocess')....    d
-00007000: 6566 2074 6573 745f 7374 6f70 5072 6f63  ef test_stopProc
-00007010: 6573 735f 7375 6363 6573 735f 696e 5f6f  ess_success_in_o
-00007020: 6e77 6169 7428 7365 6c66 293a 0d0a 2020  nwait(self):..  
-00007030: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-00007040: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-00007050: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-00007060: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00007070: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
-00007080: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
-00007090: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-000070a0: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
-000070b0: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
-000070c0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-000070d0: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
-000070e0: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
-000070f0: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
-00007100: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
-00007110: 2020 2070 726f 6365 7373 203d 2073 7570     process = sup
-00007120: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-00007130: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-00007140: 726f 6365 7373 6573 5b27 666f 6f27 5d0d  rocesses['foo'].
-00007150: 0a20 2020 2020 2020 204c 203d 205b 5072  .        L = [Pr
-00007160: 6f63 6573 7353 7461 7465 732e 5255 4e4e  ocessStates.RUNN
-00007170: 494e 472c 0d0a 2020 2020 2020 2020 2020  ING,..          
-00007180: 2020 2050 726f 6365 7373 5374 6174 6573     ProcessStates
-00007190: 2e53 544f 5050 494e 472c 0d0a 2020 2020  .STOPPING,..    
-000071a0: 2020 2020 2020 2020 2050 726f 6365 7373           Process
-000071b0: 5374 6174 6573 2e53 544f 5050 4544 5d0d  States.STOPPED].
-000071c0: 0a0d 0a20 2020 2020 2020 2064 6566 2067  ...        def g
-000071d0: 6574 5f73 7461 7465 2829 3a0d 0a20 2020  et_state():..   
-000071e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000071f0: 4c2e 706f 7028 3029 0d0a 0d0a 2020 2020  L.pop(0)....    
-00007200: 2020 2020 7072 6f63 6573 732e 6765 745f      process.get_
-00007210: 7374 6174 6520 3d20 6765 745f 7374 6174  state = get_stat
-00007220: 650d 0a20 2020 2020 2020 2069 6e74 6572  e..        inter
-00007230: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00007240: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00007250: 290d 0a20 2020 2020 2020 2063 616c 6c62  )..        callb
-00007260: 6163 6b20 3d20 696e 7465 7266 6163 652e  ack = interface.
-00007270: 7374 6f70 5072 6f63 6573 7328 2766 6f6f  stopProcess('foo
-00007280: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-00007290: 2e61 7373 6572 7445 7175 616c 2869 6e74  .assertEqual(int
-000072a0: 6572 6661 6365 2e75 7064 6174 655f 7465  erface.update_te
-000072b0: 7874 2c20 2773 746f 7050 726f 6365 7373  xt, 'stopProcess
-000072c0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-000072d0: 2e61 7373 6572 7454 7275 6528 6361 6c6c  .assertTrue(call
-000072e0: 6261 636b 2829 290d 0a0d 0a20 2020 2064  back())....    d
-000072f0: 6566 2074 6573 745f 7374 6f70 5072 6f63  ef test_stopProc
-00007300: 6573 735f 4e44 595f 696e 5f6f 6e77 6169  ess_NDY_in_onwai
-00007310: 7428 7365 6c66 293a 0d0a 2020 2020 2020  t(self):..      
-00007320: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00007330: 722e 6874 7470 2069 6d70 6f72 7420 4e4f  r.http import NO
-00007340: 545f 444f 4e45 5f59 4554 0d0a 2020 2020  T_DONE_YET..    
-00007350: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-00007360: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-00007370: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
-00007380: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-00007390: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
-000073a0: 696e 2f66 6f6f 2729 0d0a 2020 2020 2020  in/foo')..      
-000073b0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-000073c0: 722e 7072 6f63 6573 7320 696d 706f 7274  r.process import
-000073d0: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
-000073e0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-000073f0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
-00007400: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
-00007410: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
-00007420: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
-00007430: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00007440: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00007450: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-00007460: 6365 7373 6573 5b27 666f 6f27 5d0d 0a20  cesses['foo'].. 
-00007470: 2020 2020 2020 204c 203d 205b 5072 6f63         L = [Proc
-00007480: 6573 7353 7461 7465 732e 5255 4e4e 494e  essStates.RUNNIN
-00007490: 472c 0d0a 2020 2020 2020 2020 2020 2020  G,..            
-000074a0: 2050 726f 6365 7373 5374 6174 6573 2e53   ProcessStates.S
-000074b0: 544f 5050 494e 472c 0d0a 2020 2020 2020  TOPPING,..      
-000074c0: 2020 2020 2020 2050 726f 6365 7373 5374         ProcessSt
-000074d0: 6174 6573 2e53 544f 5050 494e 475d 0d0a  ates.STOPPING]..
-000074e0: 0d0a 2020 2020 2020 2020 6465 6620 6765  ..        def ge
-000074f0: 745f 7374 6174 6528 293a 0d0a 2020 2020  t_state():..    
-00007500: 2020 2020 2020 2020 7265 7475 726e 204c          return L
-00007510: 2e70 6f70 2830 290d 0a0d 0a20 2020 2020  .pop(0)....     
-00007520: 2020 2070 726f 6365 7373 2e67 6574 5f73     process.get_s
-00007530: 7461 7465 203d 2067 6574 5f73 7461 7465  tate = get_state
-00007540: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00007550: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00007560: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00007570: 0d0a 2020 2020 2020 2020 6361 6c6c 6261  ..        callba
-00007580: 636b 203d 2069 6e74 6572 6661 6365 2e73  ck = interface.s
-00007590: 746f 7050 726f 6365 7373 2827 666f 6f27  topProcess('foo'
-000075a0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000075b0: 6173 7365 7274 4571 7561 6c28 6361 6c6c  assertEqual(call
-000075c0: 6261 636b 2829 2c20 4e4f 545f 444f 4e45  back(), NOT_DONE
-000075d0: 5f59 4554 290d 0a20 2020 2020 2020 2073  _YET)..        s
-000075e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000075f0: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
-00007600: 5f74 6578 742c 2027 7374 6f70 5072 6f63  _text, 'stopProc
-00007610: 6573 7327 290d 0a0d 0a20 2020 2064 6566  ess')....    def
-00007620: 2074 6573 745f 7374 6f70 5072 6f63 6573   test_stopProces
-00007630: 735f 6261 645f 6e61 6d65 2873 656c 6629  s_bad_name(self)
-00007640: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-00007650: 7375 7065 7276 6973 6f72 2e78 6d6c 7270  supervisor.xmlrp
-00007660: 6320 696d 706f 7274 2046 6175 6c74 730d  c import Faults.
-00007670: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00007680: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
-00007690: 7276 6973 6f72 2829 0d0a 2020 2020 2020  rvisor()..      
-000076a0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
-000076b0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
-000076c0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
-000076d0: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
-000076e0: 4345 7272 6f72 2846 6175 6c74 732e 4241  CError(Faults.BA
-000076f0: 445f 4e41 4d45 2c0d 0a20 2020 2020 2020  D_NAME,..       
-00007700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007710: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-00007720: 7374 6f70 5072 6f63 6573 732c 2027 666f  stopProcess, 'fo
-00007730: 6f27 290d 0a0d 0a20 2020 2064 6566 2074  o')....    def t
-00007740: 6573 745f 7374 6f70 5072 6f63 6573 735f  est_stopProcess_
-00007750: 6e6f 745f 7275 6e6e 696e 6728 7365 6c66  not_running(self
-00007760: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
-00007770: 2073 7570 6572 7669 736f 722e 7374 6174   supervisor.stat
-00007780: 6573 2069 6d70 6f72 7420 5072 6f63 6573  es import Proces
-00007790: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
-000077a0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-000077b0: 2e78 6d6c 7270 6320 696d 706f 7274 2046  .xmlrpc import F
-000077c0: 6175 6c74 730d 0a20 2020 2020 2020 206f  aults..        o
-000077d0: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
-000077e0: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
-000077f0: 2070 636f 6e66 6967 203d 2044 756d 6d79   pconfig = Dummy
-00007800: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-00007810: 2027 666f 6f27 2c20 272f 6269 6e2f 666f   'foo', '/bin/fo
-00007820: 6f27 290d 0a20 2020 2020 2020 2073 7570  o')..        sup
-00007830: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
-00007840: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
-00007850: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
-00007860: 6f27 2c20 7063 6f6e 6669 6729 0d0a 2020  o', pconfig)..  
-00007870: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00007880: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
-00007890: 666f 6f27 2c20 2773 7461 7465 272c 2050  foo', 'state', P
-000078a0: 726f 6365 7373 5374 6174 6573 2e45 5849  rocessStates.EXI
-000078b0: 5445 4429 0d0a 2020 2020 2020 2020 696e  TED)..        in
-000078c0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-000078d0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-000078e0: 6f72 6429 0d0a 2020 2020 2020 2020 7365  ord)..        se
-000078f0: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00007900: 6f72 2846 6175 6c74 732e 4e4f 545f 5255  or(Faults.NOT_RU
-00007910: 4e4e 494e 472c 2069 6e74 6572 6661 6365  NNING, interface
-00007920: 2e73 746f 7050 726f 6365 7373 2c20 2766  .stopProcess, 'f
-00007930: 6f6f 2729 0d0a 0d0a 2020 2020 6465 6620  oo')....    def 
-00007940: 7465 7374 5f73 746f 7050 726f 6365 7373  test_stopProcess
-00007950: 5f66 6169 6c65 6428 7365 6c66 293a 0d0a  _failed(self):..
-00007960: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-00007970: 6572 7669 736f 722e 786d 6c72 7063 2069  ervisor.xmlrpc i
-00007980: 6d70 6f72 7420 4661 756c 7473 0d0a 2020  mport Faults..  
-00007990: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-000079a0: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-000079b0: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-000079c0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-000079d0: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
-000079e0: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
-000079f0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-00007a00: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
-00007a10: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-00007a20: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
-00007a30: 6967 290d 0a20 2020 2020 2020 2073 7570  ig)..        sup
-00007a40: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
-00007a50: 6361 7474 7228 2766 6f6f 272c 2027 7374  cattr('foo', 'st
-00007a60: 6f70 272c 206c 616d 6264 613a 2027 756e  op', lambda: 'un
-00007a70: 7374 6f70 7061 626c 6527 290d 0a20 2020  stoppable')..   
-00007a80: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00007a90: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00007aa0: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00007ab0: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
-00007ac0: 7452 5043 4572 726f 7228 4661 756c 7473  tRPCError(Faults
-00007ad0: 2e46 4149 4c45 442c 2069 6e74 6572 6661  .FAILED, interfa
-00007ae0: 6365 2e73 746f 7050 726f 6365 7373 2c20  ce.stopProcess, 
-00007af0: 2766 6f6f 2729 0d0a 0d0a 2020 2020 6465  'foo')....    de
-00007b00: 6620 7465 7374 5f73 746f 7050 726f 6365  f test_stopProce
-00007b10: 7373 4772 6f75 7028 7365 6c66 293a 0d0a  ssGroup(self):..
-00007b20: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-00007b30: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-00007b40: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-00007b50: 6731 203d 2044 756d 6d79 5043 6f6e 6669  g1 = DummyPConfi
-00007b60: 6728 6f70 7469 6f6e 732c 2027 7072 6f63  g(options, 'proc
-00007b70: 6573 7331 272c 2027 2f62 696e 2f66 6f6f  ess1', '/bin/foo
-00007b80: 272c 2070 7269 6f72 6974 793d 3129 0d0a  ', priority=1)..
-00007b90: 2020 2020 2020 2020 7063 6f6e 6669 6732          pconfig2
-00007ba0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
-00007bb0: 6f70 7469 6f6e 732c 2027 7072 6f63 6573  options, 'proces
-00007bc0: 7332 272c 2027 2f62 696e 2f66 6f6f 3227  s2', '/bin/foo2'
-00007bd0: 2c20 7072 696f 7269 7479 3d32 290d 0a20  , priority=2).. 
-00007be0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00007bf0: 7276 6973 6f72 2e70 726f 6365 7373 2069  rvisor.process i
-00007c00: 6d70 6f72 7420 5072 6f63 6573 7353 7461  mport ProcessSta
-00007c10: 7465 730d 0a20 2020 2020 2020 2073 7570  tes..        sup
-00007c20: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
-00007c30: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
-00007c40: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
-00007c50: 6f27 2c20 7063 6f6e 6669 6731 2c0d 0a20  o', pconfig1,.. 
-00007c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c80: 2020 2020 2020 2020 2020 2020 2020 7063                pc
-00007c90: 6f6e 6669 6732 290d 0a20 2020 2020 2020  onfig2)..       
-00007ca0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-00007cb0: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-00007cc0: 7373 3127 2c20 2773 7461 7465 272c 2050  ss1', 'state', P
-00007cd0: 726f 6365 7373 5374 6174 6573 2e52 554e  rocessStates.RUN
-00007ce0: 4e49 4e47 290d 0a20 2020 2020 2020 2073  NING)..        s
-00007cf0: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
-00007d00: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
-00007d10: 3227 2c20 2773 7461 7465 272c 2050 726f  2', 'state', Pro
-00007d20: 6365 7373 5374 6174 6573 2e52 554e 4e49  cessStates.RUNNI
-00007d30: 4e47 290d 0a20 2020 2020 2020 2069 6e74  NG)..        int
-00007d40: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
-00007d50: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
-00007d60: 7264 290d 0a20 2020 2020 2020 2063 616c  rd)..        cal
-00007d70: 6c62 6163 6b20 3d20 696e 7465 7266 6163  lback = interfac
-00007d80: 652e 7374 6f70 5072 6f63 6573 7347 726f  e.stopProcessGro
-00007d90: 7570 2827 666f 6f27 290d 0a20 2020 2020  up('foo')..     
-00007da0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00007db0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
-00007dc0: 6461 7465 5f74 6578 742c 2027 7374 6f70  date_text, 'stop
-00007dd0: 5072 6f63 6573 7347 726f 7570 2729 0d0a  ProcessGroup')..
-00007de0: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-00007df0: 6572 7669 736f 7220 696d 706f 7274 2068  ervisor import h
-00007e00: 7474 700d 0a20 2020 2020 2020 2076 616c  ttp..        val
-00007e10: 7565 203d 2068 7474 702e 4e4f 545f 444f  ue = http.NOT_DO
-00007e20: 4e45 5f59 4554 0d0a 2020 2020 2020 2020  NE_YET..        
-00007e30: 7768 696c 6520 313a 0d0a 2020 2020 2020  while 1:..      
-00007e40: 2020 2020 2020 7661 6c75 6520 3d20 6361        value = ca
-00007e50: 6c6c 6261 636b 2829 0d0a 2020 2020 2020  llback()..      
-00007e60: 2020 2020 2020 6966 2076 616c 7565 2069        if value i
-00007e70: 7320 6e6f 7420 6874 7470 2e4e 4f54 5f44  s not http.NOT_D
-00007e80: 4f4e 455f 5945 543a 0d0a 2020 2020 2020  ONE_YET:..      
-00007e90: 2020 2020 2020 2020 2020 6272 6561 6b0d            break.
-00007ea0: 0a0d 0a20 2020 2020 2020 2066 726f 6d20  ...        from 
-00007eb0: 7375 7065 7276 6973 6f72 2e78 6d6c 7270  supervisor.xmlrp
-00007ec0: 6320 696d 706f 7274 2046 6175 6c74 730d  c import Faults.
-00007ed0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00007ee0: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-00007ef0: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-00007f00: 7b27 7374 6174 7573 273a 2046 6175 6c74  {'status': Fault
-00007f10: 732e 5355 4343 4553 532c 0d0a 2020 2020  s.SUCCESS,..    
-00007f20: 2020 2020 2020 2020 2027 6772 6f75 7027           'group'
-00007f30: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-00007f40: 2020 2020 2020 2027 6e61 6d65 273a 2027         'name': '
-00007f50: 7072 6f63 6573 7331 272c 0d0a 2020 2020  process1',..    
-00007f60: 2020 2020 2020 2020 2027 6465 7363 7269           'descri
-00007f70: 7074 696f 6e27 3a20 274f 4b27 7d2c 0d0a  ption': 'OK'},..
-00007f80: 0d0a 2020 2020 2020 2020 2020 2020 7b27  ..            {'
-00007f90: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
-00007fa0: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
-00007fb0: 2020 2020 2020 2027 6772 6f75 7027 3a20         'group': 
-00007fc0: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
-00007fd0: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-00007fe0: 6f63 6573 7332 272c 0d0a 2020 2020 2020  ocess2',..      
-00007ff0: 2020 2020 2020 2027 6465 7363 7269 7074         'descript
-00008000: 696f 6e27 3a20 274f 4b27 7d2c 0d0a 2020  ion': 'OK'},..  
-00008010: 2020 2020 2020 5d29 0d0a 2020 2020 2020        ])..      
-00008020: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
-00008030: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-00008040: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-00008050: 726f 6365 7373 6573 5b27 7072 6f63 6573  rocesses['proces
-00008060: 7331 275d 0d0a 2020 2020 2020 2020 7365  s1']..        se
-00008070: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-00008080: 726f 6365 7373 312e 7374 6f70 5f63 616c  rocess1.stop_cal
-00008090: 6c65 642c 2054 7275 6529 0d0a 2020 2020  led, True)..    
-000080a0: 2020 2020 7072 6f63 6573 7332 203d 2073      process2 = s
-000080b0: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
-000080c0: 7373 5f67 726f 7570 735b 2766 6f6f 275d  ss_groups['foo']
-000080d0: 2e70 726f 6365 7373 6573 5b27 7072 6f63  .processes['proc
-000080e0: 6573 7332 275d 0d0a 2020 2020 2020 2020  ess2']..        
-000080f0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00008100: 2870 726f 6365 7373 322e 7374 6f70 5f63  (process2.stop_c
-00008110: 616c 6c65 642c 2054 7275 6529 0d0a 0d0a  alled, True)....
-00008120: 2020 2020 6465 6620 7465 7374 5f73 746f      def test_sto
-00008130: 7050 726f 6365 7373 4772 6f75 705f 6e6f  pProcessGroup_no
-00008140: 7761 6974 2873 656c 6629 3a0d 0a20 2020  wait(self):..   
-00008150: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
-00008160: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
-00008170: 2020 2020 2020 2070 636f 6e66 6967 3120         pconfig1 
-00008180: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00008190: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
-000081a0: 3127 2c20 5f5f 6669 6c65 5f5f 2c20 7072  1', __file__, pr
-000081b0: 696f 7269 7479 3d31 290d 0a20 2020 2020  iority=1)..     
-000081c0: 2020 2070 636f 6e66 6967 3220 3d20 4475     pconfig2 = Du
-000081d0: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
-000081e0: 6e73 2c20 2770 726f 6365 7373 3227 2c20  ns, 'process2', 
-000081f0: 5f5f 6669 6c65 5f5f 2c20 7072 696f 7269  __file__, priori
-00008200: 7479 3d32 290d 0a20 2020 2020 2020 2073  ty=2)..        s
-00008210: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-00008220: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-00008230: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-00008240: 666f 6f27 2c20 7063 6f6e 6669 6731 2c0d  foo', pconfig1,.
-00008250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008280: 7063 6f6e 6669 6732 290d 0a20 2020 2020  pconfig2)..     
-00008290: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
-000082a0: 6f72 2e70 726f 6365 7373 2069 6d70 6f72  or.process impor
-000082b0: 7420 5072 6f63 6573 7353 7461 7465 730d  t ProcessStates.
-000082c0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-000082d0: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
-000082e0: 7228 2770 726f 6365 7373 3127 2c20 2773  r('process1', 's
-000082f0: 7461 7465 272c 2050 726f 6365 7373 5374  tate', ProcessSt
-00008300: 6174 6573 2e52 554e 4e49 4e47 290d 0a20  ates.RUNNING).. 
-00008310: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-00008320: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
-00008330: 2770 726f 6365 7373 3227 2c20 2773 7461  'process2', 'sta
-00008340: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
-00008350: 6573 2e52 554e 4e49 4e47 290d 0a20 2020  es.RUNNING)..   
-00008360: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00008370: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00008380: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00008390: 2020 2020 2063 616c 6c62 6163 6b20 3d20       callback = 
-000083a0: 696e 7465 7266 6163 652e 7374 6f70 5072  interface.stopPr
-000083b0: 6f63 6573 7347 726f 7570 2827 666f 6f27  ocessGroup('foo'
-000083c0: 2c20 7761 6974 3d46 616c 7365 290d 0a20  , wait=False).. 
-000083d0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-000083e0: 7276 6973 6f72 2e78 6d6c 7270 6320 696d  rvisor.xmlrpc im
-000083f0: 706f 7274 2046 6175 6c74 730d 0a0d 0a20  port Faults.... 
-00008400: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00008410: 7274 4571 7561 6c28 0d0a 2020 2020 2020  rtEqual(..      
-00008420: 2020 2020 2020 6361 6c6c 6261 636b 2829        callback()
-00008430: 2c0d 0a20 2020 2020 2020 2020 2020 205b  ,..            [
-00008440: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008450: 2020 7b27 6e61 6d65 273a 2027 7072 6f63    {'name': 'proc
-00008460: 6573 7331 272c 0d0a 2020 2020 2020 2020  ess1',..        
-00008470: 2020 2020 2020 2020 2027 6465 7363 7269           'descri
-00008480: 7074 696f 6e27 3a20 274f 4b27 2c0d 0a20  ption': 'OK',.. 
-00008490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000084a0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
-000084b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000084c0: 2020 2773 7461 7475 7327 3a20 4661 756c    'status': Faul
-000084d0: 7473 2e53 5543 4345 5353 7d2c 0d0a 2020  ts.SUCCESS},..  
-000084e0: 2020 2020 2020 2020 2020 2020 2020 7b27                {'
-000084f0: 6e61 6d65 273a 2027 7072 6f63 6573 7332  name': 'process2
-00008500: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00008510: 2020 2020 2027 6465 7363 7269 7074 696f       'descriptio
-00008520: 6e27 3a20 274f 4b27 2c0d 0a20 2020 2020  n': 'OK',..     
-00008530: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
-00008540: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
-00008550: 2020 2020 2020 2020 2020 2020 2020 2773                's
-00008560: 7461 7475 7327 3a20 4661 756c 7473 2e53  tatus': Faults.S
-00008570: 5543 4345 5353 7d0d 0a20 2020 2020 2020  UCCESS}..       
-00008580: 2020 2020 205d 0d0a 2020 2020 2020 2020       ]..        
-00008590: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-000085a0: 745f 7374 6f70 5072 6f63 6573 7347 726f  t_stopProcessGro
-000085b0: 7570 5f62 6164 6e61 6d65 2873 656c 6629  up_badname(self)
-000085c0: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
-000085d0: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-000085e0: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-000085f0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-00008600: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00008610: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00008620: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00008630: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00008640: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00008650: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-00008660: 786d 6c72 7063 2e46 6175 6c74 732e 4241  xmlrpc.Faults.BA
-00008670: 445f 4e41 4d45 2c0d 0a20 2020 2020 2020  D_NAME,..       
-00008680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008690: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-000086a0: 7374 6f70 5072 6f63 6573 7347 726f 7570  stopProcessGroup
-000086b0: 2c20 2766 6f6f 2729 0d0a 0d0a 2020 2020  , 'foo')....    
-000086c0: 6465 6620 7465 7374 5f73 746f 7050 726f  def test_stopPro
-000086d0: 6365 7373 5f73 706c 6174 5f63 616c 6c73  cess_splat_calls
-000086e0: 5f73 746f 7050 726f 6365 7373 4772 6f75  _stopProcessGrou
-000086f0: 7028 7365 6c66 293a 0d0a 2020 2020 2020  p(self):..      
-00008700: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-00008710: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-00008720: 2020 2020 7063 6f6e 6669 6731 203d 2044      pconfig1 = D
-00008730: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
-00008740: 6f6e 732c 2027 7072 6f63 6573 7331 272c  ons, 'process1',
-00008750: 205f 5f66 696c 655f 5f2c 2061 7574 6f73   __file__, autos
-00008760: 7461 7274 3d46 616c 7365 2c0d 0a20 2020  tart=False,..   
-00008770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008780: 2020 2020 2020 2020 2020 2020 2073 7461               sta
-00008790: 7274 7365 6373 3d2e 3031 290d 0a20 2020  rtsecs=.01)..   
-000087a0: 2020 2020 2070 636f 6e66 6967 3220 3d20       pconfig2 = 
-000087b0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-000087c0: 696f 6e73 2c20 2770 726f 6365 7373 3227  ions, 'process2'
-000087d0: 2c20 5f5f 6669 6c65 5f5f 2c20 7072 696f  , __file__, prio
-000087e0: 7269 7479 3d32 2c0d 0a20 2020 2020 2020  rity=2,..       
-000087f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008800: 2020 2020 2020 2020 2073 7461 7274 7365           startse
-00008810: 6373 3d2e 3031 290d 0a20 2020 2020 2020  cs=.01)..       
-00008820: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00008830: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00008840: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00008850: 2027 666f 6f27 2c0d 0a20 2020 2020 2020   'foo',..       
-00008860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008880: 2020 2020 2020 2020 7063 6f6e 6669 6731          pconfig1
-00008890: 2c20 7063 6f6e 6669 6732 290d 0a20 2020  , pconfig2)..   
-000088a0: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
-000088b0: 6973 6f72 2e70 726f 6365 7373 2069 6d70  isor.process imp
-000088c0: 6f72 7420 5072 6f63 6573 7353 7461 7465  ort ProcessState
-000088d0: 730d 0a20 2020 2020 2020 2073 7570 6572  s..        super
-000088e0: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
-000088f0: 7474 7228 2770 726f 6365 7373 3127 2c20  ttr('process1', 
-00008900: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
-00008910: 5374 6174 6573 2e53 544f 5050 4544 290d  States.STOPPED).
-00008920: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00008930: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
-00008940: 7228 2770 726f 6365 7373 3227 2c20 2773  r('process2', 's
-00008950: 7461 7465 272c 2050 726f 6365 7373 5374  tate', ProcessSt
-00008960: 6174 6573 2e53 544f 5050 4544 290d 0a20  ates.STOPPED).. 
-00008970: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00008980: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00008990: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-000089a0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-000089b0: 2e73 746f 7050 726f 6365 7373 2827 666f  .stopProcess('fo
-000089c0: 6f3a 2a27 290d 0a20 2020 2020 2020 2073  o:*')..        s
-000089d0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000089e0: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
-000089f0: 5f74 6578 742c 2027 7374 6f70 5072 6f63  _text, 'stopProc
-00008a00: 6573 7347 726f 7570 2729 0d0a 0d0a 2020  essGroup')....  
-00008a10: 2020 6465 6620 7465 7374 5f73 746f 7041    def test_stopA
-00008a20: 6c6c 5072 6f63 6573 7365 7328 7365 6c66  llProcesses(self
-00008a30: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
-00008a40: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-00008a50: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-00008a60: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
-00008a70: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00008a80: 7072 6f63 6573 7331 272c 2027 2f62 696e  process1', '/bin
-00008a90: 2f66 6f6f 272c 2070 7269 6f72 6974 793d  /foo', priority=
-00008aa0: 3129 0d0a 2020 2020 2020 2020 7063 6f6e  1)..        pcon
-00008ab0: 6669 6732 203d 2044 756d 6d79 5043 6f6e  fig2 = DummyPCon
-00008ac0: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
-00008ad0: 6f63 6573 7332 272c 2027 2f62 696e 2f66  ocess2', '/bin/f
-00008ae0: 6f6f 3227 2c20 7072 696f 7269 7479 3d32  oo2', priority=2
-00008af0: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00008b00: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
-00008b10: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
-00008b20: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
-00008b30: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00008b40: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00008b50: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00008b60: 2027 666f 6f27 2c20 7063 6f6e 6669 6731   'foo', pconfig1
-00008b70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00008b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ba0: 2020 7063 6f6e 6669 6732 290d 0a20 2020    pconfig2)..   
-00008bb0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00008bc0: 2e73 6574 5f70 726f 6361 7474 7228 2770  .set_procattr('p
-00008bd0: 726f 6365 7373 3127 2c20 2773 7461 7465  rocess1', 'state
-00008be0: 272c 2050 726f 6365 7373 5374 6174 6573  ', ProcessStates
-00008bf0: 2e52 554e 4e49 4e47 290d 0a20 2020 2020  .RUNNING)..     
-00008c00: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
-00008c10: 6574 5f70 726f 6361 7474 7228 2770 726f  et_procattr('pro
-00008c20: 6365 7373 3227 2c20 2773 7461 7465 272c  cess2', 'state',
-00008c30: 2050 726f 6365 7373 5374 6174 6573 2e52   ProcessStates.R
-00008c40: 554e 4e49 4e47 290d 0a20 2020 2020 2020  UNNING)..       
-00008c50: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00008c60: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00008c70: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00008c80: 2063 616c 6c62 6163 6b20 3d20 696e 7465   callback = inte
-00008c90: 7266 6163 652e 7374 6f70 416c 6c50 726f  rface.stopAllPro
-00008ca0: 6365 7373 6573 2829 0d0a 2020 2020 2020  cesses()..      
-00008cb0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00008cc0: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
-00008cd0: 6174 655f 7465 7874 2c20 2773 746f 7041  ate_text, 'stopA
-00008ce0: 6c6c 5072 6f63 6573 7365 7327 290d 0a20  llProcesses').. 
-00008cf0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00008d00: 7276 6973 6f72 2069 6d70 6f72 7420 6874  rvisor import ht
-00008d10: 7470 0d0a 2020 2020 2020 2020 7661 6c75  tp..        valu
-00008d20: 6520 3d20 6874 7470 2e4e 4f54 5f44 4f4e  e = http.NOT_DON
-00008d30: 455f 5945 540d 0a20 2020 2020 2020 2077  E_YET..        w
-00008d40: 6869 6c65 2031 3a0d 0a20 2020 2020 2020  hile 1:..       
-00008d50: 2020 2020 2076 616c 7565 203d 2063 616c       value = cal
-00008d60: 6c62 6163 6b28 290d 0a20 2020 2020 2020  lback()..       
-00008d70: 2020 2020 2069 6620 7661 6c75 6520 6973       if value is
-00008d80: 206e 6f74 2068 7474 702e 4e4f 545f 444f   not http.NOT_DO
-00008d90: 4e45 5f59 4554 3a0d 0a20 2020 2020 2020  NE_YET:..       
-00008da0: 2020 2020 2020 2020 2062 7265 616b 0d0a           break..
-00008db0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00008dc0: 7570 6572 7669 736f 722e 786d 6c72 7063  upervisor.xmlrpc
-00008dd0: 2069 6d70 6f72 7420 4661 756c 7473 0d0a   import Faults..
-00008de0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00008df0: 6572 7445 7175 616c 2876 616c 7565 2c20  ertEqual(value, 
-00008e00: 5b0d 0a20 2020 2020 2020 2020 2020 207b  [..            {
-00008e10: 2773 7461 7475 7327 3a20 4661 756c 7473  'status': Faults
-00008e20: 2e53 5543 4345 5353 2c0d 0a20 2020 2020  .SUCCESS,..     
-00008e30: 2020 2020 2020 2020 2767 726f 7570 273a          'group':
-00008e40: 2027 666f 6f27 2c0d 0a20 2020 2020 2020   'foo',..       
-00008e50: 2020 2020 2020 276e 616d 6527 3a20 2770        'name': 'p
-00008e60: 726f 6365 7373 3127 2c0d 0a20 2020 2020  rocess1',..     
-00008e70: 2020 2020 2020 2020 2764 6573 6372 6970          'descrip
-00008e80: 7469 6f6e 273a 2027 4f4b 277d 2c0d 0a0d  tion': 'OK'},...
-00008e90: 0a20 2020 2020 2020 2020 2020 207b 2773  .            {'s
-00008ea0: 7461 7475 7327 3a20 4661 756c 7473 2e53  tatus': Faults.S
-00008eb0: 5543 4345 5353 2c0d 0a20 2020 2020 2020  UCCESS,..       
-00008ec0: 2020 2020 2020 2767 726f 7570 273a 2027        'group': '
-00008ed0: 666f 6f27 2c0d 0a20 2020 2020 2020 2020  foo',..         
-00008ee0: 2020 2020 276e 616d 6527 3a20 2770 726f      'name': 'pro
-00008ef0: 6365 7373 3227 2c0d 0a20 2020 2020 2020  cess2',..       
-00008f00: 2020 2020 2020 2764 6573 6372 6970 7469        'descripti
-00008f10: 6f6e 273a 2027 4f4b 277d 2c0d 0a20 2020  on': 'OK'},..   
-00008f20: 2020 2020 205d 290d 0a20 2020 2020 2020       ])..       
-00008f30: 2070 726f 6365 7373 3120 3d20 7375 7065   process1 = supe
-00008f40: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
-00008f50: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
-00008f60: 6f63 6573 7365 735b 2770 726f 6365 7373  ocesses['process
-00008f70: 3127 5d0d 0a20 2020 2020 2020 2073 656c  1']..        sel
-00008f80: 662e 6173 7365 7274 4571 7561 6c28 7072  f.assertEqual(pr
-00008f90: 6f63 6573 7331 2e73 746f 705f 6361 6c6c  ocess1.stop_call
-00008fa0: 6564 2c20 5472 7565 290d 0a20 2020 2020  ed, True)..     
-00008fb0: 2020 2070 726f 6365 7373 3220 3d20 7375     process2 = su
-00008fc0: 7065 7276 6973 6f72 642e 7072 6f63 6573  pervisord.proces
-00008fd0: 735f 6772 6f75 7073 5b27 666f 6f27 5d2e  s_groups['foo'].
-00008fe0: 7072 6f63 6573 7365 735b 2770 726f 6365  processes['proce
-00008ff0: 7373 3227 5d0d 0a20 2020 2020 2020 2073  ss2']..        s
-00009000: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00009010: 7072 6f63 6573 7332 2e73 746f 705f 6361  process2.stop_ca
-00009020: 6c6c 6564 2c20 5472 7565 290d 0a0d 0a20  lled, True).... 
-00009030: 2020 2064 6566 2074 6573 745f 7374 6f70     def test_stop
-00009040: 416c 6c50 726f 6365 7373 6573 5f6e 6f77  AllProcesses_now
-00009050: 6169 7428 7365 6c66 293a 0d0a 2020 2020  ait(self):..    
-00009060: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-00009070: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-00009080: 2020 2020 2020 7063 6f6e 6669 6731 203d        pconfig1 =
-00009090: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-000090a0: 7469 6f6e 732c 2027 7072 6f63 6573 7331  tions, 'process1
-000090b0: 272c 205f 5f66 696c 655f 5f2c 2070 7269  ', __file__, pri
-000090c0: 6f72 6974 793d 3129 0d0a 2020 2020 2020  ority=1)..      
-000090d0: 2020 7063 6f6e 6669 6732 203d 2044 756d    pconfig2 = Dum
-000090e0: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-000090f0: 732c 2027 7072 6f63 6573 7332 272c 205f  s, 'process2', _
-00009100: 5f66 696c 655f 5f2c 2070 7269 6f72 6974  _file__, priorit
-00009110: 793d 3229 0d0a 2020 2020 2020 2020 7375  y=2)..        su
-00009120: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
-00009130: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
-00009140: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
-00009150: 6f6f 272c 2070 636f 6e66 6967 312c 0d0a  oo', pconfig1,..
-00009160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009180: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00009190: 636f 6e66 6967 3229 0d0a 2020 2020 2020  config2)..      
-000091a0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-000091b0: 722e 7072 6f63 6573 7320 696d 706f 7274  r.process import
-000091c0: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
-000091d0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-000091e0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-000091f0: 2827 7072 6f63 6573 7331 272c 2027 7374  ('process1', 'st
-00009200: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
-00009210: 7465 732e 5255 4e4e 494e 4729 0d0a 2020  tes.RUNNING)..  
-00009220: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00009230: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
-00009240: 7072 6f63 6573 7332 272c 2027 7374 6174  process2', 'stat
-00009250: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
-00009260: 732e 5255 4e4e 494e 4729 0d0a 2020 2020  s.RUNNING)..    
-00009270: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00009280: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
-00009290: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
-000092a0: 2020 2020 6361 6c6c 6261 636b 203d 2069      callback = i
-000092b0: 6e74 6572 6661 6365 2e73 746f 7041 6c6c  nterface.stopAll
-000092c0: 5072 6f63 6573 7365 7328 7761 6974 3d46  Processes(wait=F
-000092d0: 616c 7365 290d 0a20 2020 2020 2020 2066  alse)..        f
-000092e0: 726f 6d20 7375 7065 7276 6973 6f72 2e78  rom supervisor.x
-000092f0: 6d6c 7270 6320 696d 706f 7274 2046 6175  mlrpc import Fau
-00009300: 6c74 730d 0a0d 0a20 2020 2020 2020 2073  lts....        s
-00009310: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00009320: 0d0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-00009330: 6c6c 6261 636b 2829 2c0d 0a20 2020 2020  llback(),..     
-00009340: 2020 2020 2020 205b 7b27 6772 6f75 7027         [{'group'
-00009350: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-00009360: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
-00009370: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
-00009380: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00009390: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
-000093a0: 274f 4b27 2c0d 0a20 2020 2020 2020 2020  'OK',..         
-000093b0: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-000093c0: 6f63 6573 7331 277d 2c0d 0a20 2020 2020  ocess1'},..     
-000093d0: 2020 2020 2020 2020 7b27 6772 6f75 7027          {'group'
-000093e0: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-000093f0: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
-00009400: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
-00009410: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00009420: 2027 6465 7363 7269 7074 696f 6e27 3a20   'description': 
-00009430: 274f 4b27 2c0d 0a20 2020 2020 2020 2020  'OK',..         
-00009440: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-00009450: 6f63 6573 7332 277d 0d0a 2020 2020 2020  ocess2'}..      
-00009460: 2020 2020 2020 205d 0d0a 2020 2020 2020         ]..      
-00009470: 2020 290d 0a0d 0a20 2020 2064 6566 2074    )....    def t
-00009480: 6573 745f 7369 676e 616c 5072 6f63 6573  est_signalProces
-00009490: 735f 7769 7468 5f73 6967 6e61 6c5f 6e75  s_with_signal_nu
-000094a0: 6d62 6572 2873 656c 6629 3a0d 0a20 2020  mber(self):..   
-000094b0: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
-000094c0: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
-000094d0: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
-000094e0: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-000094f0: 7469 6f6e 732c 2027 666f 6f27 2c20 272f  tions, 'foo', '/
-00009500: 6269 6e2f 666f 6f27 290d 0a20 2020 2020  bin/foo')..     
-00009510: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
-00009520: 6f72 2e70 726f 6365 7373 2069 6d70 6f72  or.process impor
-00009530: 7420 5072 6f63 6573 7353 7461 7465 730d  t ProcessStates.
-00009540: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00009550: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-00009560: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00009570: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-00009580: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
-00009590: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
-000095a0: 745f 7072 6f63 6174 7472 2827 666f 6f27  t_procattr('foo'
-000095b0: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
-000095c0: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
-000095d0: 290d 0a0d 0a20 2020 2020 2020 2073 6967  )....        sig
-000095e0: 203d 2073 6967 6e61 6c2e 5349 4741 4252   = signal.SIGABR
-000095f0: 540d 0a20 2020 2020 2020 2069 6e74 6572  T..        inter
-00009600: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00009610: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00009620: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
-00009630: 7420 3d20 696e 7465 7266 6163 652e 7369  t = interface.si
-00009640: 676e 616c 5072 6f63 6573 7328 2766 6f6f  gnalProcess('foo
-00009650: 272c 2073 6967 290d 0a0d 0a20 2020 2020  ', sig)....     
-00009660: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00009670: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
-00009680: 6461 7465 5f74 6578 742c 2027 7369 676e  date_text, 'sign
-00009690: 616c 5072 6f63 6573 7327 290d 0a20 2020  alProcess')..   
-000096a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000096b0: 4571 7561 6c28 7265 7375 6c74 2c20 5472  Equal(result, Tr
-000096c0: 7565 290d 0a20 2020 2020 2020 2070 203d  ue)..        p =
-000096d0: 2073 7570 6572 7669 736f 7264 2e70 726f   supervisord.pro
-000096e0: 6365 7373 5f67 726f 7570 735b 7375 7065  cess_groups[supe
-000096f0: 7276 6973 6f72 642e 6772 6f75 705f 6e61  rvisord.group_na
-00009700: 6d65 5d2e 7072 6f63 6573 7365 735b 2766  me].processes['f
-00009710: 6f6f 275d 0d0a 2020 2020 2020 2020 7365  oo']..        se
-00009720: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-00009730: 2e73 656e 745f 7369 676e 616c 2c20 7369  .sent_signal, si
-00009740: 6729 0d0a 0d0a 2020 2020 6465 6620 7465  g)....    def te
-00009750: 7374 5f73 6967 6e61 6c50 726f 6365 7373  st_signalProcess
-00009760: 5f77 6974 685f 7369 676e 616c 5f6e 616d  _with_signal_nam
-00009770: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-00009780: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-00009790: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-000097a0: 2020 2020 7063 6f6e 6669 6720 3d20 4475      pconfig = Du
-000097b0: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
-000097c0: 6e73 2c20 2766 6f6f 272c 2027 2f62 696e  ns, 'foo', '/bin
-000097d0: 2f66 6f6f 2729 0d0a 2020 2020 2020 2020  /foo')..        
-000097e0: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
-000097f0: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
-00009800: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
-00009810: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00009820: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
-00009830: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-00009840: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
-00009850: 6e66 6967 290d 0a20 2020 2020 2020 2073  nfig)..        s
-00009860: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
-00009870: 726f 6361 7474 7228 2766 6f6f 272c 2027  rocattr('foo', '
-00009880: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
-00009890: 7461 7465 732e 5255 4e4e 494e 4729 0d0a  tates.RUNNING)..
-000098a0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-000098b0: 7570 6572 7669 736f 722e 6461 7461 7479  upervisor.dataty
-000098c0: 7065 7320 696d 706f 7274 2073 6967 6e61  pes import signa
-000098d0: 6c5f 6e75 6d62 6572 0d0a 2020 2020 2020  l_number..      
-000098e0: 2020 7369 676e 616d 6520 3d20 2774 6572    signame = 'ter
-000098f0: 6d27 0d0a 2020 2020 2020 2020 7369 676e  m'..        sign
-00009900: 756d 203d 2073 6967 6e61 6c5f 6e75 6d62  um = signal_numb
-00009910: 6572 2873 6967 6e61 6d65 290d 0a0d 0a20  er(signame).... 
-00009920: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00009930: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00009940: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-00009950: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-00009960: 696e 7465 7266 6163 652e 7369 676e 616c  interface.signal
-00009970: 5072 6f63 6573 7328 2766 6f6f 272c 2073  Process('foo', s
-00009980: 6967 6e61 6d65 290d 0a0d 0a20 2020 2020  igname)....     
-00009990: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000099a0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
-000099b0: 6461 7465 5f74 6578 742c 2027 7369 676e  date_text, 'sign
-000099c0: 616c 5072 6f63 6573 7327 290d 0a20 2020  alProcess')..   
-000099d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000099e0: 4571 7561 6c28 7265 7375 6c74 2c20 5472  Equal(result, Tr
-000099f0: 7565 290d 0a20 2020 2020 2020 2070 203d  ue)..        p =
-00009a00: 2073 7570 6572 7669 736f 7264 2e70 726f   supervisord.pro
-00009a10: 6365 7373 5f67 726f 7570 735b 7375 7065  cess_groups[supe
-00009a20: 7276 6973 6f72 642e 6772 6f75 705f 6e61  rvisord.group_na
-00009a30: 6d65 5d2e 7072 6f63 6573 7365 735b 2766  me].processes['f
-00009a40: 6f6f 275d 0d0a 2020 2020 2020 2020 7365  oo']..        se
-00009a50: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-00009a60: 2e73 656e 745f 7369 676e 616c 2c20 7369  .sent_signal, si
-00009a70: 676e 756d 290d 0a0d 0a20 2020 2064 6566  gnum)....    def
-00009a80: 2074 6573 745f 7369 676e 616c 5072 6f63   test_signalProc
-00009a90: 6573 735f 7374 6f70 7069 6e67 2873 656c  ess_stopping(sel
-00009aa0: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
-00009ab0: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-00009ac0: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
-00009ad0: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-00009ae0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00009af0: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
-00009b00: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00009b10: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
-00009b20: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
-00009b30: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
-00009b40: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00009b50: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00009b60: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00009b70: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
-00009b80: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-00009b90: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
-00009ba0: 7472 2827 666f 6f27 2c20 2773 7461 7465  tr('foo', 'state
-00009bb0: 272c 2050 726f 6365 7373 5374 6174 6573  ', ProcessStates
-00009bc0: 2e53 544f 5050 494e 4729 0d0a 0d0a 2020  .STOPPING)....  
-00009bd0: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-00009be0: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-00009bf0: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-00009c00: 2020 2020 2020 7265 7375 6c74 203d 2069        result = i
-00009c10: 6e74 6572 6661 6365 2e73 6967 6e61 6c50  nterface.signalP
-00009c20: 726f 6365 7373 2827 666f 6f27 2c20 7369  rocess('foo', si
-00009c30: 676e 616c 2e53 4947 4252 4541 4b29 0d0a  gnal.SIGBREAK)..
-00009c40: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00009c50: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
-00009c60: 6661 6365 2e75 7064 6174 655f 7465 7874  face.update_text
-00009c70: 2c20 2773 6967 6e61 6c50 726f 6365 7373  , 'signalProcess
-00009c80: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
-00009c90: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
-00009ca0: 756c 742c 2054 7275 6529 0d0a 2020 2020  ult, True)..    
-00009cb0: 2020 2020 7020 3d20 7375 7065 7276 6973      p = supervis
-00009cc0: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
-00009cd0: 7073 5b73 7570 6572 7669 736f 7264 2e67  ps[supervisord.g
-00009ce0: 726f 7570 5f6e 616d 655d 2e70 726f 6365  roup_name].proce
-00009cf0: 7373 6573 5b27 666f 6f27 5d0d 0a20 2020  sses['foo']..   
-00009d00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00009d10: 4571 7561 6c28 702e 7365 6e74 5f73 6967  Equal(p.sent_sig
-00009d20: 6e61 6c2c 2073 6967 6e61 6c2e 5349 4742  nal, signal.SIGB
-00009d30: 5245 414b 290d 0a0d 0a20 2020 2064 6566  REAK)....    def
-00009d40: 2074 6573 745f 7369 676e 616c 5072 6f63   test_signalProc
-00009d50: 6573 735f 6261 6473 6967 6e61 6c28 7365  ess_badsignal(se
-00009d60: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
-00009d70: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-00009d80: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-00009d90: 7063 6f6e 6669 6720 3d20 4475 6d6d 7950  pconfig = DummyP
-00009da0: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
-00009db0: 2766 6f6f 272c 2027 2f62 696e 2f66 6f6f  'foo', '/bin/foo
-00009dc0: 2729 0d0a 2020 2020 2020 2020 6672 6f6d  ')..        from
-00009dd0: 2073 7570 6572 7669 736f 722e 7072 6f63   supervisor.proc
-00009de0: 6573 7320 696d 706f 7274 2050 726f 6365  ess import Proce
-00009df0: 7373 5374 6174 6573 0d0a 2020 2020 2020  ssStates..      
-00009e00: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00009e10: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-00009e20: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00009e30: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-00009e40: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00009e50: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-00009e60: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
-00009e70: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
-00009e80: 745f 7072 6f63 6174 7472 2827 666f 6f27  t_procattr('foo'
-00009e90: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
-00009ea0: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
-00009eb0: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00009ec0: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00009ed0: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00009ee0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00009ef0: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-00009f00: 0d0a 2020 2020 2020 2020 2020 2020 786d  ..            xm
-00009f10: 6c72 7063 2e46 6175 6c74 732e 4241 445f  lrpc.Faults.BAD_
-00009f20: 5349 474e 414c 2c20 696e 7465 7266 6163  SIGNAL, interfac
-00009f30: 652e 7369 676e 616c 5072 6f63 6573 732c  e.signalProcess,
-00009f40: 2027 666f 6f27 2c20 3135 350d 0a20 2020   'foo', 155..   
-00009f50: 2020 2020 2029 0d0a 0d0a 2020 2020 6465       )....    de
-00009f60: 6620 7465 7374 5f73 6967 6e61 6c50 726f  f test_signalPro
-00009f70: 6365 7373 5f6e 6f74 7275 6e6e 696e 6728  cess_notrunning(
-00009f80: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00009f90: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00009fa0: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00009fb0: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
-00009fc0: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
-00009fd0: 2c20 2766 6f6f 272c 2027 2f62 696e 2f66  , 'foo', '/bin/f
-00009fe0: 6f6f 2729 0d0a 2020 2020 2020 2020 6672  oo')..        fr
-00009ff0: 6f6d 2073 7570 6572 7669 736f 722e 7072  om supervisor.pr
-0000a000: 6f63 6573 7320 696d 706f 7274 2050 726f  ocess import Pro
-0000a010: 6365 7373 5374 6174 6573 0d0a 2020 2020  cessStates..    
-0000a020: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-0000a030: 736f 7220 696d 706f 7274 2078 6d6c 7270  sor import xmlrp
-0000a040: 630d 0a20 2020 2020 2020 2073 7570 6572  c..        super
-0000a050: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
-0000a060: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
-0000a070: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
-0000a080: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
-0000a090: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
-0000a0a0: 7365 745f 7072 6f63 6174 7472 2827 666f  set_procattr('fo
-0000a0b0: 6f27 2c20 2773 7461 7465 272c 2050 726f  o', 'state', Pro
-0000a0c0: 6365 7373 5374 6174 6573 2e53 544f 5050  cessStates.STOPP
-0000a0d0: 4544 290d 0a20 2020 2020 2020 2069 6e74  ED)..        int
-0000a0e0: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
-0000a0f0: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
-0000a100: 7264 290d 0a20 2020 2020 2020 2073 656c  rd)..        sel
-0000a110: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
-0000a120: 7228 0d0a 2020 2020 2020 2020 2020 2020  r(..            
-0000a130: 786d 6c72 7063 2e46 6175 6c74 732e 4e4f  xmlrpc.Faults.NO
-0000a140: 545f 5255 4e4e 494e 472c 2069 6e74 6572  T_RUNNING, inter
-0000a150: 6661 6365 2e73 6967 6e61 6c50 726f 6365  face.signalProce
-0000a160: 7373 2c20 2766 6f6f 272c 2073 6967 6e61  ss, 'foo', signa
-0000a170: 6c2e 5349 4754 4552 4d0d 0a20 2020 2020  l.SIGTERM..     
-0000a180: 2020 2029 0d0a 0d0a 0d0a 2020 2020 6465     )......    de
-0000a190: 6620 7465 7374 5f73 6967 6e61 6c50 726f  f test_signalPro
-0000a1a0: 6365 7373 5f73 6967 6e61 6c5f 7265 7475  cess_signal_retu
-0000a1b0: 726e 735f 6d65 7373 6167 6528 7365 6c66  rns_message(self
-0000a1c0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
-0000a1d0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-0000a1e0: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-0000a1f0: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
-0000a200: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
-0000a210: 6f6f 272c 2027 2f62 696e 2f66 6f6f 2729  oo', '/bin/foo')
-0000a220: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-0000a230: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
-0000a240: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
-0000a250: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
-0000a260: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
-0000a270: 696d 706f 7274 2078 6d6c 7270 630d 0a20  import xmlrpc.. 
-0000a280: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-0000a290: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
-0000a2a0: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
-0000a2b0: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
-0000a2c0: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
-0000a2d0: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
-0000a2e0: 7072 6f63 6174 7472 2827 666f 6f27 2c20  procattr('foo', 
-0000a2f0: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
-0000a300: 5374 6174 6573 2e52 554e 4e49 4e47 290d  States.RUNNING).
-0000a310: 0a0d 0a20 2020 2020 2020 2064 6566 2073  ...        def s
-0000a320: 6967 6e61 6c72 6574 7572 6e28 7369 6729  ignalreturn(sig)
-0000a330: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-0000a340: 6574 7572 6e20 276d 7367 270d 0a0d 0a20  eturn 'msg'.... 
-0000a350: 2020 2020 2020 2070 6772 6f75 7020 3d20         pgroup = 
-0000a360: 7375 7065 7276 6973 6f72 642e 7072 6f63  supervisord.proc
-0000a370: 6573 735f 6772 6f75 7073 5b73 7570 6572  ess_groups[super
-0000a380: 7669 736f 7264 2e67 726f 7570 5f6e 616d  visord.group_nam
-0000a390: 655d 0d0a 2020 2020 2020 2020 7072 6f63  e]..        proc
-0000a3a0: 203d 2070 6772 6f75 702e 7072 6f63 6573   = pgroup.proces
-0000a3b0: 7365 735b 2766 6f6f 275d 0d0a 2020 2020  ses['foo']..    
-0000a3c0: 2020 2020 7072 6f63 2e73 6967 6e61 6c20      proc.signal 
-0000a3d0: 3d20 7369 676e 616c 7265 7475 726e 0d0a  = signalreturn..
-0000a3e0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-0000a3f0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-0000a400: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-0000a410: 2020 2020 2020 2020 7365 6c66 2e5f 6173          self._as
-0000a420: 7365 7274 5250 4345 7272 6f72 280d 0a20  sertRPCError(.. 
-0000a430: 2020 2020 2020 2020 2020 2078 6d6c 7270             xmlrp
-0000a440: 632e 4661 756c 7473 2e46 4149 4c45 442c  c.Faults.FAILED,
-0000a450: 2069 6e74 6572 6661 6365 2e73 6967 6e61   interface.signa
-0000a460: 6c50 726f 6365 7373 2c20 2766 6f6f 272c  lProcess, 'foo',
-0000a470: 2073 6967 6e61 6c2e 5349 4754 4552 4d0d   signal.SIGTERM.
-0000a480: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
-0000a490: 2020 6465 6620 7465 7374 5f73 6967 6e61    def test_signa
-0000a4a0: 6c50 726f 6365 7373 5f77 6974 6867 726f  lProcess_withgro
-0000a4b0: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
-0000a4c0: 2020 2022 2222 2054 6573 7420 7468 6174     """ Test that
-0000a4d0: 2073 656e 6469 6e67 2066 6f6f 3a2a 2077   sending foo:* w
-0000a4e0: 6f72 6b73 2022 2222 0d0a 2020 2020 2020  orks """..      
-0000a4f0: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-0000a500: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-0000a510: 2020 2020 7063 6f6e 6669 6731 203d 2044      pconfig1 = D
-0000a520: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
-0000a530: 6f6e 732c 2027 7072 6f63 6573 7331 272c  ons, 'process1',
-0000a540: 2027 2f62 696e 2f66 6f6f 2729 0d0a 2020   '/bin/foo')..  
-0000a550: 2020 2020 2020 7063 6f6e 6669 6732 203d        pconfig2 =
-0000a560: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-0000a570: 7469 6f6e 732c 2027 7072 6f63 6573 7332  tions, 'process2
-0000a580: 272c 2027 2f62 696e 2f66 6f6f 3227 290d  ', '/bin/foo2').
-0000a590: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
-0000a5a0: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
-0000a5b0: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
-0000a5c0: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
-0000a5d0: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-0000a5e0: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-0000a5f0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-0000a600: 666f 6f27 2c20 7063 6f6e 6669 6731 2c0d  foo', pconfig1,.
-0000a610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a640: 7063 6f6e 6669 6732 290d 0a20 2020 2020  pconfig2)..     
-0000a650: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
-0000a660: 6574 5f70 726f 6361 7474 7228 2770 726f  et_procattr('pro
-0000a670: 6365 7373 3127 2c20 2773 7461 7465 272c  cess1', 'state',
-0000a680: 2050 726f 6365 7373 5374 6174 6573 2e52   ProcessStates.R
-0000a690: 554e 4e49 4e47 290d 0a20 2020 2020 2020  UNNING)..       
-0000a6a0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-0000a6b0: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-0000a6c0: 7373 3227 2c20 2773 7461 7465 272c 2050  ss2', 'state', P
-0000a6d0: 726f 6365 7373 5374 6174 6573 2e53 544f  rocessStates.STO
-0000a6e0: 5050 494e 4729 0d0a 2020 2020 2020 2020  PPING)..        
-0000a6f0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
-0000a700: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
-0000a710: 6973 6f72 6429 0d0a 0d0a 2020 2020 2020  isord)....      
-0000a720: 2020 7369 6720 3d20 7369 676e 616c 2e43    sig = signal.C
-0000a730: 5452 4c5f 435f 4556 454e 540d 0a20 2020  TRL_C_EVENT..   
-0000a740: 2020 2020 2072 6573 756c 7420 3d20 696e       result = in
-0000a750: 7465 7266 6163 652e 7369 676e 616c 5072  terface.signalPr
-0000a760: 6f63 6573 7328 2766 6f6f 3a2a 272c 2073  ocess('foo:*', s
-0000a770: 6967 290d 0a20 2020 2020 2020 2073 656c  ig)..        sel
-0000a780: 662e 6173 7365 7274 4571 7561 6c28 696e  f.assertEqual(in
-0000a790: 7465 7266 6163 652e 7570 6461 7465 5f74  terface.update_t
-0000a7a0: 6578 742c 2027 7369 676e 616c 5072 6f63  ext, 'signalProc
-0000a7b0: 6573 7347 726f 7570 2729 0d0a 0d0a 2020  essGroup')....  
-0000a7c0: 2020 2020 2020 2320 536f 7274 2073 6f20        # Sort so 
-0000a7d0: 7765 2067 6574 2064 6574 6572 6d69 6e69  we get determini
-0000a7e0: 7374 6963 2072 6573 756c 7473 2064 6573  stic results des
-0000a7f0: 7069 7465 2068 6173 6820 7261 6e64 6f6d  pite hash random
-0000a800: 697a 6174 696f 6e0d 0a20 2020 2020 2020  ization..       
-0000a810: 2072 6573 756c 7420 3d20 736f 7274 6564   result = sorted
-0000a820: 2872 6573 756c 742c 206b 6579 3d6f 7065  (result, key=ope
-0000a830: 7261 746f 722e 6974 656d 6765 7474 6572  rator.itemgetter
-0000a840: 2827 6e61 6d65 2729 290d 0a0d 0a20 2020  ('name'))....   
-0000a850: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
-0000a860: 6973 6f72 2e78 6d6c 7270 6320 696d 706f  isor.xmlrpc impo
-0000a870: 7274 2046 6175 6c74 730d 0a20 2020 2020  rt Faults..     
-0000a880: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000a890: 7561 6c28 7265 7375 6c74 2c20 5b0d 0a20  ual(result, [.. 
-0000a8a0: 2020 2020 2020 2020 2020 207b 2773 7461             {'sta
-0000a8b0: 7475 7327 3a20 4661 756c 7473 2e53 5543  tus': Faults.SUC
-0000a8c0: 4345 5353 2c0d 0a20 2020 2020 2020 2020  CESS,..         
-0000a8d0: 2020 2020 2767 726f 7570 273a 2027 666f      'group': 'fo
-0000a8e0: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-0000a8f0: 2020 276e 616d 6527 3a20 2770 726f 6365    'name': 'proce
-0000a900: 7373 3127 2c0d 0a20 2020 2020 2020 2020  ss1',..         
-0000a910: 2020 2020 2764 6573 6372 6970 7469 6f6e      'description
-0000a920: 273a 2027 4f4b 277d 2c0d 0a0d 0a20 2020  ': 'OK'},....   
-0000a930: 2020 2020 2020 2020 207b 2773 7461 7475           {'statu
-0000a940: 7327 3a20 4661 756c 7473 2e53 5543 4345  s': Faults.SUCCE
-0000a950: 5353 2c0d 0a20 2020 2020 2020 2020 2020  SS,..           
-0000a960: 2020 2767 726f 7570 273a 2027 666f 6f27    'group': 'foo'
-0000a970: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000a980: 276e 616d 6527 3a20 2770 726f 6365 7373  'name': 'process
-0000a990: 3227 2c0d 0a20 2020 2020 2020 2020 2020  2',..           
-0000a9a0: 2020 2764 6573 6372 6970 7469 6f6e 273a    'description':
-0000a9b0: 2027 4f4b 277d 2c0d 0a20 2020 2020 2020   'OK'},..       
-0000a9c0: 205d 290d 0a20 2020 2020 2020 2070 726f   ])..        pro
-0000a9d0: 6365 7373 3120 3d20 7375 7065 7276 6973  cess1 = supervis
-0000a9e0: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
-0000a9f0: 7073 5b27 666f 6f27 5d2e 7072 6f63 6573  ps['foo'].proces
-0000aa00: 7365 735b 2770 726f 6365 7373 3127 5d0d  ses['process1'].
-0000aa10: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000aa20: 7365 7274 4571 7561 6c28 7072 6f63 6573  sertEqual(proces
-0000aa30: 7331 2e73 656e 745f 7369 676e 616c 2c20  s1.sent_signal, 
-0000aa40: 7369 6729 0d0a 2020 2020 2020 2020 7072  sig)..        pr
-0000aa50: 6f63 6573 7332 203d 2073 7570 6572 7669  ocess2 = supervi
-0000aa60: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
-0000aa70: 7570 735b 2766 6f6f 275d 2e70 726f 6365  ups['foo'].proce
-0000aa80: 7373 6573 5b27 7072 6f63 6573 7332 275d  sses['process2']
-0000aa90: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000aaa0: 7373 6572 7445 7175 616c 2870 726f 6365  ssertEqual(proce
-0000aab0: 7373 322e 7365 6e74 5f73 6967 6e61 6c2c  ss2.sent_signal,
-0000aac0: 2073 6967 290d 0a0d 0a20 2020 2064 6566   sig)....    def
-0000aad0: 2074 6573 745f 7369 676e 616c 5072 6f63   test_signalProc
-0000aae0: 6573 7347 726f 7570 5f77 6974 685f 7369  essGroup_with_si
-0000aaf0: 676e 616c 5f6e 756d 6265 7228 7365 6c66  gnal_number(self
-0000ab00: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
-0000ab10: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-0000ab20: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-0000ab30: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
-0000ab40: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-0000ab50: 7072 6f63 6573 7331 272c 2027 2f62 696e  process1', '/bin
-0000ab60: 2f66 6f6f 2729 0d0a 2020 2020 2020 2020  /foo')..        
-0000ab70: 7063 6f6e 6669 6732 203d 2044 756d 6d79  pconfig2 = Dummy
-0000ab80: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-0000ab90: 2027 7072 6f63 6573 7332 272c 2027 2f62   'process2', '/b
-0000aba0: 696e 2f66 6f6f 3227 290d 0a20 2020 2020  in/foo2')..     
-0000abb0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
-0000abc0: 6f72 2e70 726f 6365 7373 2069 6d70 6f72  or.process impor
-0000abd0: 7420 5072 6f63 6573 7353 7461 7465 730d  t ProcessStates.
-0000abe0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-0000abf0: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-0000ac00: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-0000ac10: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-0000ac20: 7063 6f6e 6669 6731 2c0d 0a20 2020 2020  pconfig1,..     
-0000ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac50: 2020 2020 2020 2020 2020 7063 6f6e 6669            pconfi
-0000ac60: 6732 290d 0a20 2020 2020 2020 2073 7570  g2)..        sup
-0000ac70: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
-0000ac80: 6361 7474 7228 2770 726f 6365 7373 3127  cattr('process1'
-0000ac90: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
-0000aca0: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
-0000acb0: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
-0000acc0: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
-0000acd0: 7474 7228 2770 726f 6365 7373 3227 2c20  ttr('process2', 
-0000ace0: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
-0000acf0: 5374 6174 6573 2e52 554e 4e49 4e47 290d  States.RUNNING).
-0000ad00: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-0000ad10: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-0000ad20: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-0000ad30: 0a20 2020 2020 2020 2073 6967 203d 2073  .        sig = s
-0000ad40: 6967 6e61 6c2e 5349 4741 4252 540d 0a20  ignal.SIGABRT.. 
-0000ad50: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0000ad60: 696e 7465 7266 6163 652e 7369 676e 616c  interface.signal
-0000ad70: 5072 6f63 6573 7347 726f 7570 2827 666f  ProcessGroup('fo
-0000ad80: 6f27 2c20 7369 6729 0d0a 2020 2020 2020  o', sig)..      
-0000ad90: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000ada0: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
-0000adb0: 6174 655f 7465 7874 2c20 2773 6967 6e61  ate_text, 'signa
-0000adc0: 6c50 726f 6365 7373 4772 6f75 7027 290d  lProcessGroup').
-0000add0: 0a20 2020 2020 2020 2023 2053 6f72 7420  .        # Sort 
-0000ade0: 736f 2077 6520 6765 7420 6465 7465 726d  so we get determ
-0000adf0: 696e 6973 7469 6320 7265 7375 6c74 7320  inistic results 
-0000ae00: 6465 7370 6974 6520 6861 7368 2072 616e  despite hash ran
-0000ae10: 646f 6d69 7a61 7469 6f6e 0d0a 2020 2020  domization..    
-0000ae20: 2020 2020 7265 7375 6c74 203d 2073 6f72      result = sor
-0000ae30: 7465 6428 7265 7375 6c74 2c20 6b65 793d  ted(result, key=
-0000ae40: 6f70 6572 6174 6f72 2e69 7465 6d67 6574  operator.itemget
-0000ae50: 7465 7228 276e 616d 6527 2929 0d0a 0d0a  ter('name'))....
-0000ae60: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-0000ae70: 6572 7669 736f 722e 786d 6c72 7063 2069  ervisor.xmlrpc i
-0000ae80: 6d70 6f72 7420 4661 756c 7473 0d0a 2020  mport Faults..  
-0000ae90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000aea0: 7445 7175 616c 2872 6573 756c 742c 205b  tEqual(result, [
-0000aeb0: 0d0a 2020 2020 2020 2020 2020 2020 7b27  ..            {'
-0000aec0: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
-0000aed0: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
-0000aee0: 2020 2020 2020 2027 6772 6f75 7027 3a20         'group': 
-0000aef0: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
-0000af00: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-0000af10: 6f63 6573 7331 272c 0d0a 2020 2020 2020  ocess1',..      
-0000af20: 2020 2020 2020 2027 6465 7363 7269 7074         'descript
-0000af30: 696f 6e27 3a20 274f 4b27 7d2c 0d0a 0d0a  ion': 'OK'},....
-0000af40: 2020 2020 2020 2020 2020 2020 7b27 7374              {'st
-0000af50: 6174 7573 273a 2046 6175 6c74 732e 5355  atus': Faults.SU
-0000af60: 4343 4553 532c 0d0a 2020 2020 2020 2020  CCESS,..        
-0000af70: 2020 2020 2027 6772 6f75 7027 3a20 2766       'group': 'f
-0000af80: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-0000af90: 2020 2027 6e61 6d65 273a 2027 7072 6f63     'name': 'proc
-0000afa0: 6573 7332 272c 0d0a 2020 2020 2020 2020  ess2',..        
-0000afb0: 2020 2020 2027 6465 7363 7269 7074 696f       'descriptio
-0000afc0: 6e27 3a20 274f 4b27 7d2c 0d0a 2020 2020  n': 'OK'},..    
-0000afd0: 2020 2020 5d29 0d0a 2020 2020 2020 2020      ])..        
-0000afe0: 7072 6f63 6573 7331 203d 2073 7570 6572  process1 = super
-0000aff0: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-0000b000: 726f 7570 735b 2766 6f6f 275d 2e70 726f  roups['foo'].pro
-0000b010: 6365 7373 6573 5b27 7072 6f63 6573 7331  cesses['process1
-0000b020: 275d 0d0a 2020 2020 2020 2020 7365 6c66  ']..        self
-0000b030: 2e61 7373 6572 7445 7175 616c 2870 726f  .assertEqual(pro
-0000b040: 6365 7373 312e 7365 6e74 5f73 6967 6e61  cess1.sent_signa
-0000b050: 6c2c 2073 6967 290d 0a20 2020 2020 2020  l, sig)..       
-0000b060: 2070 726f 6365 7373 3220 3d20 7375 7065   process2 = supe
-0000b070: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
-0000b080: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
-0000b090: 6f63 6573 7365 735b 2770 726f 6365 7373  ocesses['process
-0000b0a0: 3227 5d0d 0a20 2020 2020 2020 2073 656c  2']..        sel
-0000b0b0: 662e 6173 7365 7274 4571 7561 6c28 7072  f.assertEqual(pr
-0000b0c0: 6f63 6573 7332 2e73 656e 745f 7369 676e  ocess2.sent_sign
-0000b0d0: 616c 2c20 7369 6729 0d0a 0d0a 2020 2020  al, sig)....    
-0000b0e0: 6465 6620 7465 7374 5f73 6967 6e61 6c50  def test_signalP
-0000b0f0: 726f 6365 7373 4772 6f75 705f 7769 7468  rocessGroup_with
-0000b100: 5f73 6967 6e61 6c5f 6e61 6d65 2873 656c  _signal_name(sel
-0000b110: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
-0000b120: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-0000b130: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
-0000b140: 636f 6e66 6967 3120 3d20 4475 6d6d 7950  config1 = DummyP
-0000b150: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
-0000b160: 2770 726f 6365 7373 3127 2c20 272f 6269  'process1', '/bi
-0000b170: 6e2f 666f 6f27 290d 0a20 2020 2020 2020  n/foo')..       
-0000b180: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-0000b190: 2e70 726f 6365 7373 2069 6d70 6f72 7420  .process import 
-0000b1a0: 5072 6f63 6573 7353 7461 7465 730d 0a20  ProcessStates.. 
-0000b1b0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-0000b1c0: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
-0000b1d0: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
-0000b1e0: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
-0000b1f0: 6f6e 6669 6731 290d 0a20 2020 2020 2020  onfig1)..       
-0000b200: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-0000b210: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-0000b220: 7373 3127 2c20 2773 7461 7465 272c 2050  ss1', 'state', P
-0000b230: 726f 6365 7373 5374 6174 6573 2e52 554e  rocessStates.RUN
-0000b240: 4e49 4e47 290d 0a0d 0a20 2020 2020 2020  NING)....       
-0000b250: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-0000b260: 2e64 6174 6174 7970 6573 2069 6d70 6f72  .datatypes impor
-0000b270: 7420 7369 676e 616c 5f6e 756d 6265 720d  t signal_number.
-0000b280: 0a20 2020 2020 2020 2073 6967 6e61 6d65  .        signame
-0000b290: 203d 2027 7465 726d 270d 0a20 2020 2020   = 'term'..     
-0000b2a0: 2020 2073 6967 6e75 6d20 3d20 7369 676e     signum = sign
-0000b2b0: 616c 5f6e 756d 6265 7228 7369 676e 616d  al_number(signam
-0000b2c0: 6529 0d0a 0d0a 2020 2020 2020 2020 696e  e)....        in
-0000b2d0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-0000b2e0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-0000b2f0: 6f72 6429 0d0a 2020 2020 2020 2020 7265  ord)..        re
+00001860: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
+00001870: 7468 3d2d 3129 0d0a 2020 2020 2020 2020  th=-1)..        
+00001880: 6669 6e61 6c6c 793a 0d0a 2020 2020 2020  finally:..      
+00001890: 2020 2020 2020 6f73 2e72 656d 6f76 6528        os.remove(
+000018a0: 6c6f 6766 696c 6529 0d0a 0d0a 2020 2020  logfile)....    
+000018b0: 6465 6620 7465 7374 5f72 6561 644c 6f67  def test_readLog
+000018c0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+000018d0: 2073 7570 6572 7669 736f 7264 203d 2044   supervisord = D
+000018e0: 756d 6d79 5375 7065 7276 6973 6f72 2829  ummySupervisor()
+000018f0: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
+00001900: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
+00001910: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
+00001920: 0d0a 2020 2020 2020 2020 6c6f 6766 696c  ..        logfil
+00001930: 6520 3d20 7375 7065 7276 6973 6f72 642e  e = supervisord.
+00001940: 6f70 7469 6f6e 732e 6c6f 6766 696c 650d  options.logfile.
+00001950: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+00001960: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+00001970: 6f70 656e 286c 6f67 6669 6c65 2c20 2777  open(logfile, 'w
+00001980: 2b27 2920 6173 2066 3a0d 0a20 2020 2020  +') as f:..     
+00001990: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+000019a0: 7465 2827 7827 202a 2032 3034 3829 0d0a  te('x' * 2048)..
+000019b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000019c0: 662e 7772 6974 6528 2779 2720 2a20 3230  f.write('y' * 20
+000019d0: 3438 290d 0a20 2020 2020 2020 2020 2020  48)..           
+000019e0: 2064 6174 6120 3d20 696e 7465 7266 6163   data = interfac
+000019f0: 652e 7265 6164 4c6f 6728 6f66 6673 6574  e.readLog(offset
+00001a00: 3d30 2c20 6c65 6e67 7468 3d30 290d 0a20  =0, length=0).. 
+00001a10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00001a20: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
+00001a30: 7266 6163 652e 7570 6461 7465 5f74 6578  rface.update_tex
+00001a40: 742c 2027 7265 6164 4c6f 6727 290d 0a20  t, 'readLog').. 
+00001a50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00001a60: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
+00001a70: 2c20 2827 7827 202a 2032 3034 3829 202b  , ('x' * 2048) +
+00001a80: 2028 2779 2720 2a20 3230 3438 2929 0d0a   ('y' * 2048))..
+00001a90: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00001aa0: 203d 2069 6e74 6572 6661 6365 2e72 6561   = interface.rea
+00001ab0: 644c 6f67 286f 6666 7365 743d 3230 3438  dLog(offset=2048
+00001ac0: 2c20 6c65 6e67 7468 3d30 290d 0a20 2020  , length=0)..   
+00001ad0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00001ae0: 7365 7274 4571 7561 6c28 6461 7461 2c20  sertEqual(data, 
+00001af0: 2779 2720 2a20 3230 3438 290d 0a20 2020  'y' * 2048)..   
+00001b00: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+00001b10: 696e 7465 7266 6163 652e 7265 6164 4c6f  interface.readLo
+00001b20: 6728 6f66 6673 6574 3d30 2c20 6c65 6e67  g(offset=0, leng
+00001b30: 7468 3d32 3034 3829 0d0a 2020 2020 2020  th=2048)..      
+00001b40: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00001b50: 7445 7175 616c 2864 6174 612c 2027 7827  tEqual(data, 'x'
+00001b60: 202a 2032 3034 3829 0d0a 2020 2020 2020   * 2048)..      
+00001b70: 2020 2020 2020 6461 7461 203d 2069 6e74        data = int
+00001b80: 6572 6661 6365 2e72 6561 644c 6f67 286f  erface.readLog(o
+00001b90: 6666 7365 743d 2d34 2c20 6c65 6e67 7468  ffset=-4, length
+00001ba0: 3d30 290d 0a20 2020 2020 2020 2020 2020  =0)..           
+00001bb0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00001bc0: 6c28 6461 7461 2c20 2779 2720 2a20 3429  l(data, 'y' * 4)
+00001bd0: 0d0a 2020 2020 2020 2020 6669 6e61 6c6c  ..        finall
+00001be0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00001bf0: 6f73 2e72 656d 6f76 6528 6c6f 6766 696c  os.remove(logfil
+00001c00: 6529 0d0a 0d0a 2020 2020 6465 6620 7465  e)....    def te
+00001c10: 7374 5f63 6c65 6172 4c6f 675f 756e 7265  st_clearLog_unre
+00001c20: 6164 6162 6c65 2873 656c 6629 3a0d 0a20  adable(self):.. 
+00001c30: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+00001c40: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
+00001c50: 6c72 7063 0d0a 2020 2020 2020 2020 7375  lrpc..        su
+00001c60: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+00001c70: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
+00001c80: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00001c90: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+00001ca0: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
+00001cb0: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
+00001cc0: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
+00001cd0: 7063 2e46 6175 6c74 732e 4e4f 5f46 494c  pc.Faults.NO_FIL
+00001ce0: 452c 2069 6e74 6572 6661 6365 2e63 6c65  E, interface.cle
+00001cf0: 6172 4c6f 6729 0d0a 0d0a 2020 2020 6465  arLog)....    de
+00001d00: 6620 7465 7374 5f63 6c65 6172 4c6f 675f  f test_clearLog_
+00001d10: 756e 7265 6d6f 7665 6162 6c65 2873 656c  unremoveable(sel
+00001d20: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+00001d30: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+00001d40: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
+00001d50: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+00001d60: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+00001d70: 2020 2020 2020 6f70 7469 6f6e 732e 6578        options.ex
+00001d80: 6973 7469 6e67 203d 205b 6f70 7469 6f6e  isting = [option
+00001d90: 732e 6c6f 6766 696c 655d 0d0a 2020 2020  s.logfile]..    
+00001da0: 2020 2020 6f70 7469 6f6e 732e 7265 6d6f      options.remo
+00001db0: 7665 5f65 7863 6570 7469 6f6e 203d 204f  ve_exception = O
+00001dc0: 5345 7272 6f72 2865 7272 6e6f 2e45 5045  SError(errno.EPE
+00001dd0: 524d 2c0d 0a20 2020 2020 2020 2020 2020  RM,..           
+00001de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001e00: 6f73 2e73 7472 6572 726f 7228 6572 726e  os.strerror(errn
+00001e10: 6f2e 4550 4552 4d29 290d 0a20 2020 2020  o.EPERM))..     
+00001e20: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
+00001e30: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
+00001e40: 286f 7074 696f 6e73 290d 0a20 2020 2020  (options)..     
+00001e50: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00001e60: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+00001e70: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+00001e80: 2020 2073 656c 662e 6173 7365 7274 5261     self.assertRa
+00001e90: 6973 6573 2878 6d6c 7270 632e 5250 4345  ises(xmlrpc.RPCE
+00001ea0: 7272 6f72 2c20 696e 7465 7266 6163 652e  rror, interface.
+00001eb0: 636c 6561 724c 6f67 290d 0a20 2020 2020  clearLog)..     
+00001ec0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00001ed0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
+00001ee0: 6461 7465 5f74 6578 742c 2027 636c 6561  date_text, 'clea
+00001ef0: 724c 6f67 2729 0d0a 0d0a 2020 2020 6465  rLog')....    de
+00001f00: 6620 7465 7374 5f63 6c65 6172 4c6f 6728  f test_clearLog(
+00001f10: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00001f20: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00001f30: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00001f40: 2020 6f70 7469 6f6e 732e 6578 6973 7469    options.existi
+00001f50: 6e67 203d 205b 6f70 7469 6f6e 732e 6c6f  ng = [options.lo
+00001f60: 6766 696c 655d 0d0a 2020 2020 2020 2020  gfile]..        
+00001f70: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
+00001f80: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
+00001f90: 7469 6f6e 7329 0d0a 2020 2020 2020 2020  tions)..        
+00001fa0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00001fb0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00001fc0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00001fd0: 7265 7375 6c74 203d 2069 6e74 6572 6661  result = interfa
+00001fe0: 6365 2e63 6c65 6172 4c6f 6728 290d 0a20  ce.clearLog().. 
+00001ff0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00002000: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+00002010: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+00002020: 636c 6561 724c 6f67 2729 0d0a 2020 2020  clearLog')..    
+00002030: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00002040: 7175 616c 2872 6573 756c 742c 2054 7275  qual(result, Tru
+00002050: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00002060: 2e61 7373 6572 7445 7175 616c 286f 7074  .assertEqual(opt
+00002070: 696f 6e73 2e72 656d 6f76 6564 5b30 5d2c  ions.removed[0],
+00002080: 206f 7074 696f 6e73 2e6c 6f67 6669 6c65   options.logfile
+00002090: 290d 0a20 2020 2020 2020 2066 6f72 2068  )..        for h
+000020a0: 616e 646c 6572 2069 6e20 7375 7065 7276  andler in superv
+000020b0: 6973 6f72 642e 6f70 7469 6f6e 732e 6c6f  isord.options.lo
+000020c0: 6767 6572 2e68 616e 646c 6572 733a 0d0a  gger.handlers:..
+000020d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000020e0: 2e61 7373 6572 7445 7175 616c 2868 616e  .assertEqual(han
+000020f0: 646c 6572 2e72 656f 7065 6e65 642c 2054  dler.reopened, T
+00002100: 7275 6529 0d0a 0d0a 2020 2020 6465 6620  rue)....    def 
+00002110: 7465 7374 5f73 6875 7464 6f77 6e28 7365  test_shutdown(se
+00002120: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
+00002130: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+00002140: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
+00002150: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00002160: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+00002170: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
+00002180: 2020 2020 2020 2076 616c 7565 203d 2069         value = i
+00002190: 6e74 6572 6661 6365 2e73 6875 7464 6f77  nterface.shutdow
+000021a0: 6e28 290d 0a20 2020 2020 2020 2073 656c  n()..        sel
+000021b0: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+000021c0: 6c75 652c 2054 7275 6529 0d0a 2020 2020  lue, True)..    
+000021d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000021e0: 7175 616c 2873 7570 6572 7669 736f 7264  qual(supervisord
+000021f0: 2e6f 7074 696f 6e73 2e6d 6f6f 642c 202d  .options.mood, -
+00002200: 3129 0d0a 0d0a 2020 2020 6465 6620 7465  1)....    def te
+00002210: 7374 5f72 6573 7461 7274 2873 656c 6629  st_restart(self)
+00002220: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
+00002230: 7669 736f 7264 203d 2044 756d 6d79 5375  visord = DummySu
+00002240: 7065 7276 6973 6f72 2829 0d0a 2020 2020  pervisor()..    
+00002250: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+00002260: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+00002270: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
+00002280: 2020 2020 7661 6c75 6520 3d20 696e 7465      value = inte
+00002290: 7266 6163 652e 7265 7374 6172 7428 290d  rface.restart().
+000022a0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000022b0: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
+000022c0: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+000022d0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000022e0: 2873 7570 6572 7669 736f 7264 2e6f 7074  (supervisord.opt
+000022f0: 696f 6e73 2e6d 6f6f 642c 2030 290d 0a0d  ions.mood, 0)...
+00002300: 0a20 2020 2064 6566 2074 6573 745f 7265  .    def test_re
+00002310: 6c6f 6164 436f 6e66 6967 2873 656c 6629  loadConfig(self)
+00002320: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
+00002330: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00002340: 7328 290d 0a20 2020 2020 2020 2073 7570  s()..        sup
+00002350: 6572 7669 736f 7264 203d 2044 756d 6d79  ervisord = Dummy
+00002360: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00002370: 6e73 290d 0a20 2020 2020 2020 2069 6e74  ns)..        int
+00002380: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+00002390: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+000023a0: 7264 290d 0a0d 0a20 2020 2020 2020 2063  rd)....        c
+000023b0: 6861 6e67 6573 203d 205b 5b44 756d 6d79  hanges = [[Dummy
+000023c0: 5047 726f 7570 436f 6e66 6967 286f 7074  PGroupConfig(opt
+000023d0: 696f 6e73 2c20 2761 6464 6564 2729 5d2c  ions, 'added')],
+000023e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000023f0: 2020 2020 205b 4475 6d6d 7950 4772 6f75       [DummyPGrou
+00002400: 7043 6f6e 6669 6728 6f70 7469 6f6e 732c  pConfig(options,
+00002410: 2027 6368 616e 6765 6427 295d 2c0d 0a20   'changed')],.. 
+00002420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002430: 2020 5b44 756d 6d79 5047 726f 7570 436f    [DummyPGroupCo
+00002440: 6e66 6967 286f 7074 696f 6e73 2c20 2764  nfig(options, 'd
+00002450: 726f 7070 6564 2729 5d5d 0d0a 0d0a 2020  ropped')]]....  
+00002460: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00002470: 642e 6469 6666 5f74 6f5f 6163 7469 7665  d.diff_to_active
+00002480: 203d 206c 616d 6264 613a 2063 6861 6e67   = lambda: chang
+00002490: 6573 0d0a 0d0a 2020 2020 2020 2020 7661  es....        va
+000024a0: 6c75 6520 3d20 696e 7465 7266 6163 652e  lue = interface.
+000024b0: 7265 6c6f 6164 436f 6e66 6967 2829 0d0a  reloadConfig()..
+000024c0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000024d0: 6572 7445 7175 616c 2876 616c 7565 2c20  ertEqual(value, 
+000024e0: 5b5b 5b27 6164 6465 6427 5d2c 205b 2763  [[['added'], ['c
+000024f0: 6861 6e67 6564 275d 2c20 5b27 6472 6f70  hanged'], ['drop
+00002500: 7065 6427 5d5d 5d29 0d0a 0d0a 2020 2020  ped']]])....    
+00002510: 6465 6620 7465 7374 5f72 656c 6f61 6443  def test_reloadC
+00002520: 6f6e 6669 675f 7072 6f63 6573 735f 636f  onfig_process_co
+00002530: 6e66 6967 5f72 6169 7365 735f 5661 6c75  nfig_raises_Valu
+00002540: 6545 7272 6f72 2873 656c 6629 3a0d 0a20  eError(self):.. 
+00002550: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+00002560: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
+00002570: 6c72 7063 0d0a 2020 2020 2020 2020 6f70  lrpc..        op
+00002580: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+00002590: 696f 6e73 2829 0d0a 0d0a 2020 2020 2020  ions()....      
+000025a0: 2020 6465 6620 7261 6973 655f 6578 6328    def raise_exc(
+000025b0: 2a61 7267 2c20 2a2a 6b77 293a 0d0a 2020  *arg, **kw):..  
+000025c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000025d0: 5661 6c75 6545 7272 6f72 2827 666f 6f27  ValueError('foo'
+000025e0: 290d 0a0d 0a20 2020 2020 2020 206f 7074  )....        opt
+000025f0: 696f 6e73 2e70 726f 6365 7373 5f63 6f6e  ions.process_con
+00002600: 6669 6720 3d20 7261 6973 655f 6578 630d  fig = raise_exc.
+00002610: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00002620: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
+00002630: 7276 6973 6f72 286f 7074 696f 6e73 290d  rvisor(options).
+00002640: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00002650: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00002660: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00002670: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
+00002680: 7373 6572 7452 5043 4572 726f 7228 786d  ssertRPCError(xm
+00002690: 6c72 7063 2e46 6175 6c74 732e 4341 4e54  lrpc.Faults.CANT
+000026a0: 5f52 4552 4541 442c 2069 6e74 6572 6661  _REREAD, interfa
+000026b0: 6365 2e72 656c 6f61 6443 6f6e 6669 6729  ce.reloadConfig)
+000026c0: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+000026d0: 5f61 6464 5072 6f63 6573 7347 726f 7570  _addProcessGroup
+000026e0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+000026f0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00002700: 2e73 7570 6572 7669 736f 7264 2069 6d70  .supervisord imp
+00002710: 6f72 7420 5375 7065 7276 6973 6f72 0d0a  ort Supervisor..
+00002720: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00002730: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
+00002740: 6d6c 7270 630d 0a20 2020 2020 2020 206f  mlrpc..        o
+00002750: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+00002760: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+00002770: 2073 7570 6572 7669 736f 7264 203d 2053   supervisord = S
+00002780: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
+00002790: 7329 0d0a 2020 2020 2020 2020 7063 6f6e  s)..        pcon
+000027a0: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
+000027b0: 6967 286f 7074 696f 6e73 2c20 2766 6f6f  ig(options, 'foo
+000027c0: 272c 205f 5f66 696c 655f 5f2c 2061 7574  ', __file__, aut
+000027d0: 6f73 7461 7274 3d46 616c 7365 290d 0a20  ostart=False).. 
+000027e0: 2020 2020 2020 2067 636f 6e66 6967 203d         gconfig =
+000027f0: 2044 756d 6d79 5047 726f 7570 436f 6e66   DummyPGroupConf
+00002800: 6967 286f 7074 696f 6e73 2c20 2767 726f  ig(options, 'gro
+00002810: 7570 3127 2c20 7063 6f6e 6669 6773 3d5b  up1', pconfigs=[
+00002820: 7063 6f6e 6669 675d 290d 0a20 2020 2020  pconfig])..     
+00002830: 2020 2073 7570 6572 7669 736f 7264 2e6f     supervisord.o
+00002840: 7074 696f 6e73 2e70 726f 6365 7373 5f67  ptions.process_g
+00002850: 726f 7570 5f63 6f6e 6669 6773 203d 205b  roup_configs = [
+00002860: 6763 6f6e 6669 675d 0d0a 0d0a 2020 2020  gconfig]....    
+00002870: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+00002880: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+00002890: 7065 7276 6973 6f72 6429 0d0a 0d0a 2020  pervisord)....  
+000028a0: 2020 2020 2020 7265 7375 6c74 203d 2069        result = i
+000028b0: 6e74 6572 6661 6365 2e61 6464 5072 6f63  nterface.addProc
+000028c0: 6573 7347 726f 7570 2827 6772 6f75 7031  essGroup('group1
+000028d0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+000028e0: 2e61 7373 6572 7454 7275 6528 7265 7375  .assertTrue(resu
+000028f0: 6c74 290d 0a20 2020 2020 2020 2073 656c  lt)..        sel
+00002900: 662e 6173 7365 7274 4571 7561 6c28 6c69  f.assertEqual(li
+00002910: 7374 2873 7570 6572 7669 736f 7264 2e70  st(supervisord.p
+00002920: 726f 6365 7373 5f67 726f 7570 732e 6b65  rocess_groups.ke
+00002930: 7973 2829 292c 205b 2767 726f 7570 3127  ys()), ['group1'
+00002940: 5d29 0d0a 0d0a 2020 2020 2020 2020 7365  ])....        se
+00002950: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
+00002960: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
+00002970: 2e41 4c52 4541 4459 5f41 4444 4544 2c0d  .ALREADY_ADDED,.
+00002980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002990: 2020 2020 2020 2020 2020 2020 2020 696e                in
+000029a0: 7465 7266 6163 652e 6164 6450 726f 6365  terface.addProce
+000029b0: 7373 4772 6f75 702c 2027 6772 6f75 7031  ssGroup, 'group1
+000029c0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+000029d0: 2e61 7373 6572 7445 7175 616c 286c 6973  .assertEqual(lis
+000029e0: 7428 7375 7065 7276 6973 6f72 642e 7072  t(supervisord.pr
+000029f0: 6f63 6573 735f 6772 6f75 7073 2e6b 6579  ocess_groups.key
+00002a00: 7328 2929 2c20 5b27 6772 6f75 7031 275d  s()), ['group1']
+00002a10: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00002a20: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00002a30: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+00002a40: 4241 445f 4e41 4d45 2c0d 0a20 2020 2020  BAD_NAME,..     
+00002a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a60: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00002a70: 652e 6164 6450 726f 6365 7373 4772 6f75  e.addProcessGrou
+00002a80: 702c 2027 6173 6466 2729 0d0a 2020 2020  p, 'asdf')..    
+00002a90: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00002aa0: 7175 616c 286c 6973 7428 7375 7065 7276  qual(list(superv
+00002ab0: 6973 6f72 642e 7072 6f63 6573 735f 6772  isord.process_gr
+00002ac0: 6f75 7073 2e6b 6579 7328 2929 2c20 5b27  oups.keys()), ['
+00002ad0: 6772 6f75 7031 275d 290d 0a0d 0a20 2020  group1'])....   
+00002ae0: 2064 6566 2074 6573 745f 7265 6d6f 7665   def test_remove
+00002af0: 5072 6f63 6573 7347 726f 7570 2873 656c  ProcessGroup(sel
+00002b00: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+00002b10: 6d20 7375 7065 7276 6973 6f72 2e73 7570  m supervisor.sup
+00002b20: 6572 7669 736f 7264 2069 6d70 6f72 7420  ervisord import 
+00002b30: 5375 7065 7276 6973 6f72 0d0a 2020 2020  Supervisor..    
+00002b40: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+00002b50: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+00002b60: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00002b70: 6420 3d20 5375 7065 7276 6973 6f72 286f  d = Supervisor(o
+00002b80: 7074 696f 6e73 290d 0a20 2020 2020 2020  ptions)..       
+00002b90: 2070 636f 6e66 6967 203d 2044 756d 6d79   pconfig = Dummy
+00002ba0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+00002bb0: 2027 666f 6f27 2c20 5f5f 6669 6c65 5f5f   'foo', __file__
+00002bc0: 2c20 6175 746f 7374 6172 743d 4661 6c73  , autostart=Fals
+00002bd0: 6529 0d0a 2020 2020 2020 2020 6763 6f6e  e)..        gcon
+00002be0: 6669 6720 3d20 4475 6d6d 7950 4772 6f75  fig = DummyPGrou
+00002bf0: 7043 6f6e 6669 6728 6f70 7469 6f6e 732c  pConfig(options,
+00002c00: 2027 6772 6f75 7031 272c 2070 636f 6e66   'group1', pconf
+00002c10: 6967 733d 5b70 636f 6e66 6967 5d29 0d0a  igs=[pconfig])..
+00002c20: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00002c30: 6f72 642e 6f70 7469 6f6e 732e 7072 6f63  ord.options.proc
+00002c40: 6573 735f 6772 6f75 705f 636f 6e66 6967  ess_group_config
+00002c50: 7320 3d20 5b67 636f 6e66 6967 5d0d 0a0d  s = [gconfig]...
+00002c60: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00002c70: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00002c80: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00002c90: 0a0d 0a20 2020 2020 2020 2069 6e74 6572  ...        inter
+00002ca0: 6661 6365 2e61 6464 5072 6f63 6573 7347  face.addProcessG
+00002cb0: 726f 7570 2827 6772 6f75 7031 2729 0d0a  roup('group1')..
+00002cc0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00002cd0: 2069 6e74 6572 6661 6365 2e72 656d 6f76   interface.remov
+00002ce0: 6550 726f 6365 7373 4772 6f75 7028 2767  eProcessGroup('g
+00002cf0: 726f 7570 3127 290d 0a20 2020 2020 2020  roup1')..       
+00002d00: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00002d10: 2872 6573 756c 7429 0d0a 2020 2020 2020  (result)..      
+00002d20: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00002d30: 616c 286c 6973 7428 7375 7065 7276 6973  al(list(supervis
+00002d40: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
+00002d50: 7073 2e6b 6579 7328 2929 2c20 5b5d 290d  ps.keys()), []).
+00002d60: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+00002d70: 7265 6d6f 7665 5072 6f63 6573 7347 726f  removeProcessGro
+00002d80: 7570 5f62 6164 5f6e 616d 6528 7365 6c66  up_bad_name(self
+00002d90: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
+00002da0: 2073 7570 6572 7669 736f 722e 7375 7065   supervisor.supe
+00002db0: 7276 6973 6f72 6420 696d 706f 7274 2053  rvisord import S
+00002dc0: 7570 6572 7669 736f 720d 0a20 2020 2020  upervisor..     
+00002dd0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00002de0: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
+00002df0: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+00002e00: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+00002e10: 2829 0d0a 2020 2020 2020 2020 7375 7065  ()..        supe
+00002e20: 7276 6973 6f72 6420 3d20 5375 7065 7276  rvisord = Superv
+00002e30: 6973 6f72 286f 7074 696f 6e73 290d 0a20  isor(options).. 
+00002e40: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
+00002e50: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
+00002e60: 7469 6f6e 732c 2027 666f 6f27 2c20 5f5f  tions, 'foo', __
+00002e70: 6669 6c65 5f5f 2c20 6175 746f 7374 6172  file__, autostar
+00002e80: 743d 4661 6c73 6529 0d0a 2020 2020 2020  t=False)..      
+00002e90: 2020 6763 6f6e 6669 6720 3d20 4475 6d6d    gconfig = Dumm
+00002ea0: 7950 4772 6f75 7043 6f6e 6669 6728 6f70  yPGroupConfig(op
+00002eb0: 7469 6f6e 732c 2027 6772 6f75 7031 272c  tions, 'group1',
+00002ec0: 2070 636f 6e66 6967 733d 5b70 636f 6e66   pconfigs=[pconf
+00002ed0: 6967 5d29 0d0a 2020 2020 2020 2020 7375  ig])..        su
+00002ee0: 7065 7276 6973 6f72 642e 6f70 7469 6f6e  pervisord.option
+00002ef0: 732e 7072 6f63 6573 735f 6772 6f75 705f  s.process_group_
+00002f00: 636f 6e66 6967 7320 3d20 5b67 636f 6e66  configs = [gconf
+00002f10: 6967 5d0d 0a0d 0a20 2020 2020 2020 2069  ig]....        i
+00002f20: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00002f30: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00002f40: 736f 7264 290d 0a0d 0a20 2020 2020 2020  sord)....       
+00002f50: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+00002f60: 4572 726f 7228 786d 6c72 7063 2e46 6175  Error(xmlrpc.Fau
+00002f70: 6c74 732e 4241 445f 4e41 4d45 2c0d 0a20  lts.BAD_NAME,.. 
+00002f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f90: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00002fa0: 7266 6163 652e 7265 6d6f 7665 5072 6f63  rface.removeProc
+00002fb0: 6573 7347 726f 7570 2c20 2761 7364 6627  essGroup, 'asdf'
+00002fc0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+00002fd0: 745f 7265 6d6f 7665 5072 6f63 6573 7347  t_removeProcessG
+00002fe0: 726f 7570 5f73 7469 6c6c 5f72 756e 6e69  roup_still_runni
+00002ff0: 6e67 2873 656c 6629 3a0d 0a20 2020 2020  ng(self):..     
+00003000: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00003010: 6f72 2e73 7570 6572 7669 736f 7264 2069  or.supervisord i
+00003020: 6d70 6f72 7420 5375 7065 7276 6973 6f72  mport Supervisor
+00003030: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00003040: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
+00003050: 2078 6d6c 7270 630d 0a20 2020 2020 2020   xmlrpc..       
+00003060: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+00003070: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
+00003080: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
+00003090: 2053 7570 6572 7669 736f 7228 6f70 7469   Supervisor(opti
+000030a0: 6f6e 7329 0d0a 2020 2020 2020 2020 7063  ons)..        pc
+000030b0: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
+000030c0: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
+000030d0: 6f6f 272c 205f 5f66 696c 655f 5f2c 2061  oo', __file__, a
+000030e0: 7574 6f73 7461 7274 3d46 616c 7365 290d  utostart=False).
+000030f0: 0a20 2020 2020 2020 2067 636f 6e66 6967  .        gconfig
+00003100: 203d 2044 756d 6d79 5047 726f 7570 436f   = DummyPGroupCo
+00003110: 6e66 6967 286f 7074 696f 6e73 2c20 2767  nfig(options, 'g
+00003120: 726f 7570 3127 2c20 7063 6f6e 6669 6773  roup1', pconfigs
+00003130: 3d5b 7063 6f6e 6669 675d 290d 0a20 2020  =[pconfig])..   
+00003140: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+00003150: 2e6f 7074 696f 6e73 2e70 726f 6365 7373  .options.process
+00003160: 5f67 726f 7570 5f63 6f6e 6669 6773 203d  _group_configs =
+00003170: 205b 6763 6f6e 6669 675d 0d0a 2020 2020   [gconfig]..    
+00003180: 2020 2020 7072 6f63 6573 7320 3d20 4475      process = Du
+00003190: 6d6d 7950 726f 6365 7373 4772 6f75 7028  mmyProcessGroup(
+000031a0: 6763 6f6e 6669 6729 0d0a 2020 2020 2020  gconfig)..      
+000031b0: 2020 7072 6f63 6573 732e 756e 7374 6f70    process.unstop
+000031c0: 7065 645f 7072 6f63 6573 7365 7320 3d20  ped_processes = 
+000031d0: 5b31 3233 5d0d 0a20 2020 2020 2020 2073  [123]..        s
+000031e0: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
+000031f0: 7373 5f67 726f 7570 7320 3d20 7b27 6772  ss_groups = {'gr
+00003200: 6f75 7031 273a 2070 726f 6365 7373 7d0d  oup1': process}.
+00003210: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00003220: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00003230: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00003240: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
+00003250: 7373 6572 7452 5043 4572 726f 7228 786d  ssertRPCError(xm
+00003260: 6c72 7063 2e46 6175 6c74 732e 5354 494c  lrpc.Faults.STIL
+00003270: 4c5f 5255 4e4e 494e 472c 0d0a 2020 2020  L_RUNNING,..    
+00003280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003290: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
+000032a0: 6365 2e72 656d 6f76 6550 726f 6365 7373  ce.removeProcess
+000032b0: 4772 6f75 702c 2027 6772 6f75 7031 2729  Group, 'group1')
+000032c0: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+000032d0: 5f73 7461 7274 5072 6f63 6573 735f 616c  _startProcess_al
+000032e0: 7265 6164 795f 7374 6172 7465 6428 7365  ready_started(se
+000032f0: 6c66 293a 0d0a 2020 2020 2020 2020 6672  lf):..        fr
+00003300: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
+00003310: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
+00003320: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+00003330: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+00003340: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
+00003350: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
+00003360: 7469 6f6e 732c 2027 666f 6f27 2c20 5f5f  tions, 'foo', __
+00003370: 6669 6c65 5f5f 2c20 6175 746f 7374 6172  file__, autostar
+00003380: 743d 4661 6c73 6529 0d0a 2020 2020 2020  t=False)..      
+00003390: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
+000033a0: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
+000033b0: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
+000033c0: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
+000033d0: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+000033e0: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
+000033f0: 7474 7228 2766 6f6f 272c 2027 7069 6427  ttr('foo', 'pid'
+00003400: 2c20 3130 290d 0a20 2020 2020 2020 2069  , 10)..        i
+00003410: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00003420: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00003430: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
+00003440: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
+00003450: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+00003460: 2020 786d 6c72 7063 2e46 6175 6c74 732e    xmlrpc.Faults.
+00003470: 414c 5245 4144 595f 5354 4152 5445 442c  ALREADY_STARTED,
+00003480: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+00003490: 7465 7266 6163 652e 7374 6172 7450 726f  terface.startPro
+000034a0: 6365 7373 2c20 2766 6f6f 270d 0a20 2020  cess, 'foo'..   
+000034b0: 2020 2020 2029 0d0a 0d0a 2020 2020 6465       )....    de
+000034c0: 6620 7465 7374 5f73 7461 7274 5072 6f63  f test_startProc
+000034d0: 6573 735f 756e 6b6e 6f77 6e5f 7374 6174  ess_unknown_stat
+000034e0: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
+000034f0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+00003500: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
+00003510: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00003520: 7065 7276 6973 6f72 2e73 7461 7465 7320  pervisor.states 
+00003530: 696d 706f 7274 2050 726f 6365 7373 5374  import ProcessSt
+00003540: 6174 6573 0d0a 2020 2020 2020 2020 6f70  ates..        op
+00003550: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+00003560: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
+00003570: 7063 6f6e 6669 6720 3d20 4475 6d6d 7950  pconfig = DummyP
+00003580: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
+00003590: 2766 6f6f 272c 205f 5f66 696c 655f 5f2c  'foo', __file__,
+000035a0: 2061 7574 6f73 7461 7274 3d46 616c 7365   autostart=False
+000035b0: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+000035c0: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+000035d0: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+000035e0: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
+000035f0: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
+00003600: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+00003610: 7365 745f 7072 6f63 6174 7472 2827 666f  set_procattr('fo
+00003620: 6f27 2c20 2770 6964 272c 2031 3029 0d0a  o', 'pid', 10)..
+00003630: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00003640: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+00003650: 2827 666f 6f27 2c20 2773 7461 7465 272c  ('foo', 'state',
+00003660: 2050 726f 6365 7373 5374 6174 6573 2e55   ProcessStates.U
+00003670: 4e4b 4e4f 574e 290d 0a20 2020 2020 2020  NKNOWN)..       
+00003680: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+00003690: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+000036a0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+000036b0: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+000036c0: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
+000036d0: 2020 2020 786d 6c72 7063 2e46 6175 6c74      xmlrpc.Fault
+000036e0: 732e 4641 494c 4544 2c0d 0a20 2020 2020  s.FAILED,..     
+000036f0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00003700: 2e73 7461 7274 5072 6f63 6573 732c 2027  .startProcess, '
+00003710: 666f 6f27 0d0a 2020 2020 2020 2020 2020  foo'..          
+00003720: 2020 290d 0a20 2020 2020 2020 2070 726f    )..        pro
+00003730: 6365 7373 203d 2073 7570 6572 7669 736f  cess = superviso
+00003740: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
+00003750: 735b 2766 6f6f 275d 2e70 726f 6365 7373  s['foo'].process
+00003760: 6573 5b27 666f 6f27 5d0d 0a20 2020 2020  es['foo']..     
+00003770: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00003780: 7561 6c28 7072 6f63 6573 732e 7370 6177  ual(process.spaw
+00003790: 6e65 642c 2046 616c 7365 290d 0a0d 0a20  ned, False).... 
+000037a0: 2020 2064 6566 2074 6573 745f 7374 6172     def test_star
+000037b0: 7450 726f 6365 7373 5f62 6164 5f67 726f  tProcess_bad_gro
+000037c0: 7570 5f6e 616d 6528 7365 6c66 293a 0d0a  up_name(self):..
+000037d0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
+000037e0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
+000037f0: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
+00003800: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
+00003810: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+00003820: 205f 5f66 696c 655f 5f2c 2061 7574 6f73   __file__, autos
+00003830: 7461 7274 3d46 616c 7365 290d 0a20 2020  tart=False)..   
+00003840: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+00003850: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
+00003860: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+00003870: 6f6e 732c 2027 6772 6f75 7031 272c 2070  ons, 'group1', p
+00003880: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+00003890: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+000038a0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+000038b0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+000038c0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+000038d0: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
+000038e0: 2020 2020 2020 2020 7365 6c66 2e5f 6173          self._as
+000038f0: 7365 7274 5250 4345 7272 6f72 2878 6d6c  sertRPCError(xml
+00003900: 7270 632e 4661 756c 7473 2e42 4144 5f4e  rpc.Faults.BAD_N
+00003910: 414d 452c 0d0a 2020 2020 2020 2020 2020  AME,..          
+00003920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003930: 2020 2069 6e74 6572 6661 6365 2e73 7461     interface.sta
+00003940: 7274 5072 6f63 6573 732c 2027 6772 6f75  rtProcess, 'grou
+00003950: 7032 3a66 6f6f 2729 0d0a 0d0a 2020 2020  p2:foo')....    
+00003960: 6465 6620 7465 7374 5f73 7461 7274 5072  def test_startPr
+00003970: 6f63 6573 735f 6261 645f 7072 6f63 6573  ocess_bad_proces
+00003980: 735f 6e61 6d65 2873 656c 6629 3a0d 0a20  s_name(self):.. 
+00003990: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+000039a0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+000039b0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+000039c0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
+000039d0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+000039e0: 5f5f 6669 6c65 5f5f 2c20 6175 746f 7374  __file__, autost
+000039f0: 6172 743d 4661 6c73 6529 0d0a 2020 2020  art=False)..    
+00003a00: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00003a10: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+00003a20: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00003a30: 6e73 2c20 2767 726f 7570 3127 2c20 7063  ns, 'group1', pc
+00003a40: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+00003a50: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00003a60: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00003a70: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00003a80: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
+00003a90: 696d 706f 7274 2078 6d6c 7270 630d 0a20  import xmlrpc.. 
+00003aa0: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
+00003ab0: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
+00003ac0: 7063 2e46 6175 6c74 732e 4241 445f 4e41  pc.Faults.BAD_NA
+00003ad0: 4d45 2c0d 0a20 2020 2020 2020 2020 2020  ME,..           
+00003ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003af0: 2020 696e 7465 7266 6163 652e 7374 6172    interface.star
+00003b00: 7450 726f 6365 7373 2c20 2767 726f 7570  tProcess, 'group
+00003b10: 313a 6261 7227 290d 0a0d 0a20 2020 2064  1:bar')....    d
+00003b20: 6566 2074 6573 745f 7374 6172 7450 726f  ef test_startPro
+00003b30: 6365 7373 5f66 696c 655f 6e6f 745f 666f  cess_file_not_fo
+00003b40: 756e 6428 7365 6c66 293a 0d0a 2020 2020  und(self):..    
+00003b50: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+00003b60: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+00003b70: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
+00003b80: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+00003b90: 696f 6e73 2c20 2766 6f6f 272c 2027 2f66  ions, 'foo', '/f
+00003ba0: 6f6f 2f62 6172 272c 2061 7574 6f73 7461  oo/bar', autosta
+00003bb0: 7274 3d46 616c 7365 290d 0a20 2020 2020  rt=False)..     
+00003bc0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00003bd0: 6f72 2e6f 7074 696f 6e73 2069 6d70 6f72  or.options impor
+00003be0: 7420 4e6f 7446 6f75 6e64 0d0a 2020 2020  t NotFound..    
+00003bf0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00003c00: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+00003c10: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00003c20: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
+00003c30: 6967 290d 0a20 2020 2020 2020 2070 726f  ig)..        pro
+00003c40: 6365 7373 203d 2073 7570 6572 7669 736f  cess = superviso
+00003c50: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
+00003c60: 735b 2766 6f6f 275d 2e70 726f 6365 7373  s['foo'].process
+00003c70: 6573 5b27 666f 6f27 5d0d 0a20 2020 2020  es['foo']..     
+00003c80: 2020 2070 726f 6365 7373 2e65 7865 6376     process.execv
+00003c90: 5f61 7267 5f65 7863 6570 7469 6f6e 203d  _arg_exception =
+00003ca0: 204e 6f74 466f 756e 640d 0a20 2020 2020   NotFound..     
+00003cb0: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00003cc0: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+00003cd0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+00003ce0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00003cf0: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
+00003d00: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00003d10: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
+00003d20: 6d6c 7270 632e 4661 756c 7473 2e4e 4f5f  mlrpc.Faults.NO_
+00003d30: 4649 4c45 2c0d 0a20 2020 2020 2020 2020  FILE,..         
+00003d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d50: 2020 2020 696e 7465 7266 6163 652e 7374      interface.st
+00003d60: 6172 7450 726f 6365 7373 2c20 2766 6f6f  artProcess, 'foo
+00003d70: 2729 0d0a 0d0a 2020 2020 6465 6620 7465  ')....    def te
+00003d80: 7374 5f73 7461 7274 5072 6f63 6573 735f  st_startProcess_
+00003d90: 6261 645f 636f 6d6d 616e 6428 7365 6c66  bad_command(self
+00003da0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
+00003db0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+00003dc0: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
+00003dd0: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
+00003de0: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
+00003df0: 6f6f 272c 2027 2f66 6f6f 2f62 6172 272c  oo', '/foo/bar',
+00003e00: 2061 7574 6f73 7461 7274 3d46 616c 7365   autostart=False
+00003e10: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
+00003e20: 7375 7065 7276 6973 6f72 2e6f 7074 696f  supervisor.optio
+00003e30: 6e73 2069 6d70 6f72 7420 4261 6443 6f6d  ns import BadCom
+00003e40: 6d61 6e64 0d0a 2020 2020 2020 2020 7375  mand..        su
+00003e50: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
+00003e60: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
+00003e70: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
+00003e80: 6f6f 272c 2070 636f 6e66 6967 290d 0a20  oo', pconfig).. 
+00003e90: 2020 2020 2020 2070 726f 6365 7373 203d         process =
+00003ea0: 2073 7570 6572 7669 736f 7264 2e70 726f   supervisord.pro
+00003eb0: 6365 7373 5f67 726f 7570 735b 2766 6f6f  cess_groups['foo
+00003ec0: 275d 2e70 726f 6365 7373 6573 5b27 666f  '].processes['fo
+00003ed0: 6f27 5d0d 0a20 2020 2020 2020 2070 726f  o']..        pro
+00003ee0: 6365 7373 2e65 7865 6376 5f61 7267 5f65  cess.execv_arg_e
+00003ef0: 7863 6570 7469 6f6e 203d 2042 6164 436f  xception = BadCo
+00003f00: 6d6d 616e 640d 0a20 2020 2020 2020 2069  mmand..        i
+00003f10: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00003f20: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00003f30: 736f 7264 290d 0a20 2020 2020 2020 2066  sord)..        f
+00003f40: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
+00003f50: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
+00003f60: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
+00003f70: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
+00003f80: 632e 4661 756c 7473 2e4e 4f54 5f45 5845  c.Faults.NOT_EXE
+00003f90: 4355 5441 424c 452c 0d0a 2020 2020 2020  CUTABLE,..      
+00003fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003fb0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00003fc0: 2e73 7461 7274 5072 6f63 6573 732c 2027  .startProcess, '
+00003fd0: 666f 6f27 290d 0a0d 0a20 2020 2064 6566  foo')....    def
+00003fe0: 2074 6573 745f 7374 6172 7450 726f 6365   test_startProce
+00003ff0: 7373 5f66 696c 655f 6e6f 745f 6578 6563  ss_file_not_exec
+00004000: 7574 6162 6c65 2873 656c 6629 3a0d 0a20  utable(self):.. 
+00004010: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+00004020: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+00004030: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+00004040: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
+00004050: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+00004060: 272f 666f 6f2f 6261 7227 2c20 6175 746f  '/foo/bar', auto
+00004070: 7374 6172 743d 4661 6c73 6529 0d0a 2020  start=False)..  
+00004080: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00004090: 7669 736f 722e 6f70 7469 6f6e 7320 696d  visor.options im
+000040a0: 706f 7274 204e 6f74 4578 6563 7574 6162  port NotExecutab
+000040b0: 6c65 0d0a 2020 2020 2020 2020 7375 7065  le..        supe
+000040c0: 7276 6973 6f72 6420 3d20 506f 7075 6c61  rvisord = Popula
+000040d0: 7465 6444 756d 6d79 5375 7065 7276 6973  tedDummySupervis
+000040e0: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
+000040f0: 272c 2070 636f 6e66 6967 290d 0a20 2020  ', pconfig)..   
+00004100: 2020 2020 2070 726f 6365 7373 203d 2073       process = s
+00004110: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
+00004120: 7373 5f67 726f 7570 735b 2766 6f6f 275d  ss_groups['foo']
+00004130: 2e70 726f 6365 7373 6573 5b27 666f 6f27  .processes['foo'
+00004140: 5d0d 0a20 2020 2020 2020 2070 726f 6365  ]..        proce
+00004150: 7373 2e65 7865 6376 5f61 7267 5f65 7863  ss.execv_arg_exc
+00004160: 6570 7469 6f6e 203d 204e 6f74 4578 6563  eption = NotExec
+00004170: 7574 6162 6c65 0d0a 2020 2020 2020 2020  utable..        
+00004180: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00004190: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+000041a0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+000041b0: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
+000041c0: 696d 706f 7274 2078 6d6c 7270 630d 0a20  import xmlrpc.. 
+000041d0: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
+000041e0: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
+000041f0: 7063 2e46 6175 6c74 732e 4e4f 545f 4558  pc.Faults.NOT_EX
+00004200: 4543 5554 4142 4c45 2c0d 0a20 2020 2020  ECUTABLE,..     
+00004210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004220: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00004230: 652e 7374 6172 7450 726f 6365 7373 2c20  e.startProcess, 
+00004240: 2766 6f6f 2729 0d0a 0d0a 2020 2020 6465  'foo')....    de
+00004250: 6620 7465 7374 5f73 7461 7274 5072 6f63  f test_startProc
+00004260: 6573 735f 7370 6177 6e65 7272 2873 656c  ess_spawnerr(sel
+00004270: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+00004280: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+00004290: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
+000042a0: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+000042b0: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+000042c0: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
+000042d0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+000042e0: 696f 6e73 2c20 2766 6f6f 272c 205f 5f66  ions, 'foo', __f
+000042f0: 696c 655f 5f2c 2061 7574 6f73 7461 7274  ile__, autostart
+00004300: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
+00004310: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00004320: 2e70 726f 6365 7373 2069 6d70 6f72 7420  .process import 
+00004330: 5072 6f63 6573 7353 7461 7465 730d 0a20  ProcessStates.. 
+00004340: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00004350: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
+00004360: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
+00004370: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
+00004380: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+00004390: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+000043a0: 7072 6f63 6174 7472 2827 666f 6f27 2c20  procattr('foo', 
+000043b0: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
+000043c0: 5374 6174 6573 2e53 544f 5050 4544 290d  States.STOPPED).
+000043d0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+000043e0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
+000043f0: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
+00004400: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
+00004410: 666f 6f27 5d0d 0a20 2020 2020 2020 2070  foo']..        p
+00004420: 726f 6365 7373 2e73 7061 776e 6572 7220  rocess.spawnerr 
+00004430: 3d20 2761 6263 270d 0a20 2020 2020 2020  = 'abc'..       
+00004440: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+00004450: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+00004460: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00004470: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+00004480: 4572 726f 7228 0d0a 2020 2020 2020 2020  Error(..        
+00004490: 2020 2020 786d 6c72 7063 2e46 6175 6c74      xmlrpc.Fault
+000044a0: 732e 5350 4157 4e5f 4552 524f 522c 0d0a  s.SPAWN_ERROR,..
+000044b0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+000044c0: 7266 6163 652e 7374 6172 7450 726f 6365  rface.startProce
+000044d0: 7373 2c0d 0a20 2020 2020 2020 2020 2020  ss,..           
+000044e0: 2027 666f 6f27 0d0a 2020 2020 2020 2020   'foo'..        
+000044f0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+00004500: 745f 7374 6172 7450 726f 6365 7373 2873  t_startProcess(s
+00004510: 656c 6629 3a0d 0a20 2020 2020 2020 206f  elf):..        o
+00004520: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+00004530: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+00004540: 2070 636f 6e66 6967 203d 2044 756d 6d79   pconfig = Dummy
+00004550: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+00004560: 2027 666f 6f27 2c20 5f5f 6669 6c65 5f5f   'foo', __file__
+00004570: 2c20 6175 746f 7374 6172 743d 4661 6c73  , autostart=Fals
+00004580: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00004590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045a0: 2020 2073 7461 7274 7365 6373 3d2e 3031     startsecs=.01
+000045b0: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
+000045c0: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
+000045d0: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
+000045e0: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
+000045f0: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
+00004600: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
+00004610: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
+00004620: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
+00004630: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+00004640: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
+00004650: 7472 2827 666f 6f27 2c20 2773 7461 7465  tr('foo', 'state
+00004660: 272c 2050 726f 6365 7373 5374 6174 6573  ', ProcessStates
+00004670: 2e53 544f 5050 4544 290d 0a20 2020 2020  .STOPPED)..     
+00004680: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00004690: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+000046a0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+000046b0: 2020 2072 6573 756c 7420 3d20 696e 7465     result = inte
+000046c0: 7266 6163 652e 7374 6172 7450 726f 6365  rface.startProce
+000046d0: 7373 2827 666f 6f27 290d 0a20 2020 2020  ss('foo')..     
+000046e0: 2020 2070 726f 6365 7373 203d 2073 7570     process = sup
+000046f0: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
+00004700: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
+00004710: 726f 6365 7373 6573 5b27 666f 6f27 5d0d  rocesses['foo'].
+00004720: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00004730: 7365 7274 4571 7561 6c28 7072 6f63 6573  sertEqual(proces
+00004740: 732e 7370 6177 6e65 642c 2054 7275 6529  s.spawned, True)
+00004750: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00004760: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
+00004770: 6661 6365 2e75 7064 6174 655f 7465 7874  face.update_text
+00004780: 2c20 2773 7461 7274 5072 6f63 6573 7327  , 'startProcess'
+00004790: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+000047a0: 7373 2e73 7461 7465 203d 2050 726f 6365  ss.state = Proce
+000047b0: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
+000047c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000047d0: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
+000047e0: 742c 2054 7275 6529 0d0a 0d0a 2020 2020  t, True)....    
+000047f0: 6465 6620 7465 7374 5f73 7461 7274 5072  def test_startPr
+00004800: 6f63 6573 735f 7370 6177 6e65 7272 5f69  ocess_spawnerr_i
+00004810: 6e5f 6f6e 7761 6974 2873 656c 6629 3a0d  n_onwait(self):.
+00004820: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00004830: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+00004840: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+00004850: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00004860: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00004870: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
+00004880: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00004890: 2c20 2766 6f6f 272c 205f 5f66 696c 655f  , 'foo', __file_
+000048a0: 5f2c 2061 7574 6f73 7461 7274 3d46 616c  _, autostart=Fal
+000048b0: 7365 290d 0a20 2020 2020 2020 2066 726f  se)..        fro
+000048c0: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
+000048d0: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
+000048e0: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
+000048f0: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
+00004900: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
+00004910: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
+00004920: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
+00004930: 6729 0d0a 2020 2020 2020 2020 7375 7065  g)..        supe
+00004940: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
+00004950: 6174 7472 2827 666f 6f27 2c20 2773 7461  attr('foo', 'sta
+00004960: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
+00004970: 6573 2e53 544f 5050 4544 290d 0a20 2020  es.STOPPED)..   
+00004980: 2020 2020 2070 726f 6365 7373 203d 2073       process = s
+00004990: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
+000049a0: 7373 5f67 726f 7570 735b 2766 6f6f 275d  ss_groups['foo']
+000049b0: 2e70 726f 6365 7373 6573 5b27 666f 6f27  .processes['foo'
+000049c0: 5d0d 0a0d 0a20 2020 2020 2020 2064 6566  ]....        def
+000049d0: 2073 7061 776e 2829 3a0d 0a20 2020 2020   spawn():..     
+000049e0: 2020 2020 2020 2070 726f 6365 7373 2e73         process.s
+000049f0: 7061 776e 6564 203d 2054 7275 650d 0a20  pawned = True.. 
+00004a00: 2020 2020 2020 2020 2020 2070 726f 6365             proce
+00004a10: 7373 2e73 7461 7465 203d 2050 726f 6365  ss.state = Proce
+00004a20: 7373 5374 6174 6573 2e53 5441 5254 494e  ssStates.STARTIN
+00004a30: 470d 0a0d 0a20 2020 2020 2020 2064 6566  G....        def
+00004a40: 2074 7261 6e73 6974 696f 6e28 293a 0d0a   transition():..
+00004a50: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
+00004a60: 6573 732e 7370 6177 6e65 7272 203d 2027  ess.spawnerr = '
+00004a70: 6162 6327 0d0a 0d0a 2020 2020 2020 2020  abc'....        
+00004a80: 7072 6f63 6573 732e 7370 6177 6e20 3d20  process.spawn = 
+00004a90: 7370 6177 6e0d 0a20 2020 2020 2020 2070  spawn..        p
+00004aa0: 726f 6365 7373 2e74 7261 6e73 6974 696f  rocess.transitio
+00004ab0: 6e20 3d20 7472 616e 7369 7469 6f6e 0d0a  n = transition..
+00004ac0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00004ad0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00004ae0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+00004af0: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
+00004b00: 203d 2069 6e74 6572 6661 6365 2e73 7461   = interface.sta
+00004b10: 7274 5072 6f63 6573 7328 2766 6f6f 2729  rtProcess('foo')
+00004b20: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00004b30: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
+00004b40: 6d6c 7270 632e 4661 756c 7473 2e53 5041  mlrpc.Faults.SPA
+00004b50: 574e 5f45 5252 4f52 2c20 6361 6c6c 6261  WN_ERROR, callba
+00004b60: 636b 290d 0a0d 0a20 2020 2064 6566 2074  ck)....    def t
+00004b70: 6573 745f 7374 6172 7450 726f 6365 7373  est_startProcess
+00004b80: 5f73 7563 6365 7373 5f69 6e5f 6f6e 7761  _success_in_onwa
+00004b90: 6974 2873 656c 6629 3a0d 0a20 2020 2020  it(self):..     
+00004ba0: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+00004bb0: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+00004bc0: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
+00004bd0: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+00004be0: 6f6e 732c 2027 666f 6f27 2c20 5f5f 6669  ons, 'foo', __fi
+00004bf0: 6c65 5f5f 2c20 6175 746f 7374 6172 743d  le__, autostart=
+00004c00: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+00004c10: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
+00004c20: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
+00004c30: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
+00004c40: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00004c50: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+00004c60: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+00004c70: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+00004c80: 6e66 6967 290d 0a20 2020 2020 2020 2073  nfig)..        s
+00004c90: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+00004ca0: 726f 6361 7474 7228 2766 6f6f 272c 2027  rocattr('foo', '
+00004cb0: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
+00004cc0: 7461 7465 732e 5354 4f50 5045 4429 0d0a  tates.STOPPED)..
+00004cd0: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+00004ce0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+00004cf0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+00004d00: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
+00004d10: 6f6f 275d 0d0a 0d0a 2020 2020 2020 2020  oo']....        
+00004d20: 6465 6620 7370 6177 6e28 293a 0d0a 2020  def spawn():..  
+00004d30: 2020 2020 2020 2020 2020 7072 6f63 6573            proces
+00004d40: 732e 7370 6177 6e65 6420 3d20 5472 7565  s.spawned = True
+00004d50: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00004d60: 6f63 6573 732e 7374 6174 6520 3d20 5072  ocess.state = Pr
+00004d70: 6f63 6573 7353 7461 7465 732e 5354 4152  ocessStates.STAR
+00004d80: 5449 4e47 0d0a 0d0a 2020 2020 2020 2020  TING....        
+00004d90: 7072 6f63 6573 732e 7370 6177 6e20 3d20  process.spawn = 
+00004da0: 7370 6177 6e0d 0a20 2020 2020 2020 2069  spawn..        i
+00004db0: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00004dc0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00004dd0: 736f 7264 290d 0a20 2020 2020 2020 2063  sord)..        c
+00004de0: 616c 6c62 6163 6b20 3d20 696e 7465 7266  allback = interf
+00004df0: 6163 652e 7374 6172 7450 726f 6365 7373  ace.startProcess
+00004e00: 2827 666f 6f27 290d 0a20 2020 2020 2020  ('foo')..       
+00004e10: 2070 726f 6365 7373 2e73 7461 7465 203d   process.state =
+00004e20: 2050 726f 6365 7373 5374 6174 6573 2e52   ProcessStates.R
+00004e30: 554e 4e49 4e47 0d0a 2020 2020 2020 2020  UNNING..        
+00004e40: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00004e50: 2863 616c 6c62 6163 6b28 292c 2054 7275  (callback(), Tru
+00004e60: 6529 0d0a 0d0a 2020 2020 6465 6620 7465  e)....    def te
+00004e70: 7374 5f73 7461 7274 5072 6f63 6573 735f  st_startProcess_
+00004e80: 6e6f 7761 6974 2873 656c 6629 3a0d 0a20  nowait(self):.. 
+00004e90: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+00004ea0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+00004eb0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+00004ec0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
+00004ed0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+00004ee0: 5f5f 6669 6c65 5f5f 2c20 6175 746f 7374  __file__, autost
+00004ef0: 6172 743d 4661 6c73 6529 0d0a 2020 2020  art=False)..    
+00004f00: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+00004f10: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
+00004f20: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
+00004f30: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+00004f40: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
+00004f50: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
+00004f60: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+00004f70: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
+00004f80: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
+00004f90: 6574 5f70 726f 6361 7474 7228 2766 6f6f  et_procattr('foo
+00004fa0: 272c 2027 7374 6174 6527 2c20 5072 6f63  ', 'state', Proc
+00004fb0: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
+00004fc0: 4429 0d0a 2020 2020 2020 2020 696e 7465  D)..        inte
+00004fd0: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
+00004fe0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
+00004ff0: 6429 0d0a 2020 2020 2020 2020 7265 7375  d)..        resu
+00005000: 6c74 203d 2069 6e74 6572 6661 6365 2e73  lt = interface.s
+00005010: 7461 7274 5072 6f63 6573 7328 2766 6f6f  tartProcess('foo
+00005020: 272c 2077 6169 743d 4661 6c73 6529 0d0a  ', wait=False)..
+00005030: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005040: 6572 7445 7175 616c 2872 6573 756c 742c  ertEqual(result,
+00005050: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+00005060: 7072 6f63 6573 7320 3d20 7375 7065 7276  process = superv
+00005070: 6973 6f72 642e 7072 6f63 6573 735f 6772  isord.process_gr
+00005080: 6f75 7073 5b27 666f 6f27 5d2e 7072 6f63  oups['foo'].proc
+00005090: 6573 7365 735b 2766 6f6f 275d 0d0a 2020  esses['foo']..  
+000050a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000050b0: 7445 7175 616c 2870 726f 6365 7373 2e73  tEqual(process.s
+000050c0: 7061 776e 6564 2c20 5472 7565 290d 0a20  pawned, True).. 
+000050d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000050e0: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+000050f0: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+00005100: 7374 6172 7450 726f 6365 7373 2729 0d0a  startProcess')..
+00005110: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00005120: 7461 7274 5072 6f63 6573 735f 6162 6e6f  tartProcess_abno
+00005130: 726d 616c 5f74 6572 6d5f 7072 6f63 6573  rmal_term_proces
+00005140: 735f 6e6f 745f 7275 6e6e 696e 6728 7365  s_not_running(se
+00005150: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
+00005160: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+00005170: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
+00005180: 7063 6f6e 6669 6720 3d20 4475 6d6d 7950  pconfig = DummyP
+00005190: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
+000051a0: 2766 6f6f 272c 205f 5f66 696c 655f 5f2c  'foo', __file__,
+000051b0: 2061 7574 6f73 7461 7274 3d46 616c 7365   autostart=False
+000051c0: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
+000051d0: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
+000051e0: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
+000051f0: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
+00005200: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00005210: 2069 6d70 6f72 7420 6874 7470 0d0a 2020   import http..  
+00005220: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00005230: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+00005240: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+00005250: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+00005260: 6e66 6967 290d 0a20 2020 2020 2020 2073  nfig)..        s
+00005270: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+00005280: 726f 6361 7474 7228 2766 6f6f 272c 2027  rocattr('foo', '
+00005290: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
+000052a0: 7461 7465 732e 5354 4f50 5045 4429 0d0a  tates.STOPPED)..
+000052b0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+000052c0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+000052d0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+000052e0: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+000052f0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+00005300: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+00005310: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
+00005320: 6f6f 275d 0d0a 0d0a 2020 2020 2020 2020  oo']....        
+00005330: 6465 6620 7370 6177 6e28 293a 0d0a 2020  def spawn():..  
+00005340: 2020 2020 2020 2020 2020 7072 6f63 6573            proces
+00005350: 732e 7370 6177 6e65 6420 3d20 5472 7565  s.spawned = True
+00005360: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+00005370: 6f63 6573 732e 7374 6174 6520 3d20 5072  ocess.state = Pr
+00005380: 6f63 6573 7353 7461 7465 732e 5354 4152  ocessStates.STAR
+00005390: 5449 4e47 0d0a 0d0a 2020 2020 2020 2020  TING....        
+000053a0: 7072 6f63 6573 732e 7370 6177 6e20 3d20  process.spawn = 
+000053b0: 7370 6177 6e0d 0a20 2020 2020 2020 2063  spawn..        c
+000053c0: 616c 6c62 6163 6b20 3d20 696e 7465 7266  allback = interf
+000053d0: 6163 652e 7374 6172 7450 726f 6365 7373  ace.startProcess
+000053e0: 2827 666f 6f27 2c20 3130 3029 2020 2320  ('foo', 100)  # 
+000053f0: 6d69 6c6c 6973 6563 6f6e 6473 0d0a 2020  milliseconds..  
+00005400: 2020 2020 2020 7265 7375 6c74 203d 2063        result = c
+00005410: 616c 6c62 6163 6b28 290d 0a20 2020 2020  allback()..     
+00005420: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00005430: 7561 6c28 7265 7375 6c74 2c20 6874 7470  ual(result, http
+00005440: 2e4e 4f54 5f44 4f4e 455f 5945 5429 0d0a  .NOT_DONE_YET)..
+00005450: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005460: 6572 7445 7175 616c 2870 726f 6365 7373  ertEqual(process
+00005470: 2e73 7061 776e 6564 2c20 5472 7565 290d  .spawned, True).
+00005480: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00005490: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
+000054a0: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
+000054b0: 2027 7374 6172 7450 726f 6365 7373 2729   'startProcess')
+000054c0: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+000054d0: 732e 7374 6174 6520 3d20 5072 6f63 6573  s.state = Proces
+000054e0: 7353 7461 7465 732e 4241 434b 4f46 460d  sStates.BACKOFF.
+000054f0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00005500: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+00005510: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+00005520: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
+00005530: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
+00005540: 7473 2e41 424e 4f52 4d41 4c5f 5445 524d  ts.ABNORMAL_TERM
+00005550: 494e 4154 494f 4e2c 2063 616c 6c62 6163  INATION, callbac
+00005560: 6b29 0d0a 0d0a 2020 2020 6465 6620 7465  k)....    def te
+00005570: 7374 5f73 7461 7274 5072 6f63 6573 735f  st_startProcess_
+00005580: 7370 6c61 745f 6361 6c6c 735f 7374 6172  splat_calls_star
+00005590: 7450 726f 6365 7373 4772 6f75 7028 7365  tProcessGroup(se
+000055a0: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
+000055b0: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+000055c0: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
+000055d0: 7063 6f6e 6669 6731 203d 2044 756d 6d79  pconfig1 = Dummy
+000055e0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+000055f0: 2027 7072 6f63 6573 7331 272c 205f 5f66   'process1', __f
+00005600: 696c 655f 5f2c 2061 7574 6f73 7461 7274  ile__, autostart
+00005610: 3d46 616c 7365 2c0d 0a20 2020 2020 2020  =False,..       
+00005620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005630: 2020 2020 2020 2020 2073 7461 7274 7365           startse
+00005640: 6373 3d2e 3031 290d 0a20 2020 2020 2020  cs=.01)..       
+00005650: 2070 636f 6e66 6967 3220 3d20 4475 6d6d   pconfig2 = Dumm
+00005660: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00005670: 2c20 2770 726f 6365 7373 3227 2c20 5f5f  , 'process2', __
+00005680: 6669 6c65 5f5f 2c20 7072 696f 7269 7479  file__, priority
+00005690: 3d32 2c0d 0a20 2020 2020 2020 2020 2020  =2,..           
+000056a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056b0: 2020 2020 2073 7461 7274 7365 6373 3d2e       startsecs=.
+000056c0: 3031 290d 0a20 2020 2020 2020 2073 7570  01)..        sup
+000056d0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
+000056e0: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
+000056f0: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
+00005700: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
+00005710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005730: 2020 2020 7063 6f6e 6669 6731 2c20 7063      pconfig1, pc
+00005740: 6f6e 6669 6732 290d 0a20 2020 2020 2020  onfig2)..       
+00005750: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00005760: 2e70 726f 6365 7373 2069 6d70 6f72 7420  .process import 
+00005770: 5072 6f63 6573 7353 7461 7465 730d 0a20  ProcessStates.. 
+00005780: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00005790: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
+000057a0: 2770 726f 6365 7373 3127 2c20 2773 7461  'process1', 'sta
+000057b0: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
+000057c0: 6573 2e53 544f 5050 4544 290d 0a20 2020  es.STOPPED)..   
+000057d0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+000057e0: 2e73 6574 5f70 726f 6361 7474 7228 2770  .set_procattr('p
+000057f0: 726f 6365 7373 3227 2c20 2773 7461 7465  rocess2', 'state
+00005800: 272c 2050 726f 6365 7373 5374 6174 6573  ', ProcessStates
+00005810: 2e53 544f 5050 4544 290d 0a20 2020 2020  .STOPPED)..     
+00005820: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00005830: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+00005840: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+00005850: 2020 2069 6e74 6572 6661 6365 2e73 7461     interface.sta
+00005860: 7274 5072 6f63 6573 7328 2766 6f6f 3a2a  rtProcess('foo:*
+00005870: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+00005880: 2e61 7373 6572 7445 7175 616c 2869 6e74  .assertEqual(int
+00005890: 6572 6661 6365 2e75 7064 6174 655f 7465  erface.update_te
+000058a0: 7874 2c20 2773 7461 7274 5072 6f63 6573  xt, 'startProces
+000058b0: 7347 726f 7570 2729 0d0a 0d0a 2020 2020  sGroup')....    
+000058c0: 6465 6620 7465 7374 5f73 7461 7274 5072  def test_startPr
+000058d0: 6f63 6573 7347 726f 7570 2873 656c 6629  ocessGroup(self)
+000058e0: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
+000058f0: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00005900: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+00005910: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
+00005920: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+00005930: 726f 6365 7373 3127 2c20 5f5f 6669 6c65  rocess1', __file
+00005940: 5f5f 2c20 7072 696f 7269 7479 3d31 2c0d  __, priority=1,.
+00005950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005970: 2073 7461 7274 7365 6373 3d2e 3031 290d   startsecs=.01).
+00005980: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+00005990: 3220 3d20 4475 6d6d 7950 436f 6e66 6967  2 = DummyPConfig
+000059a0: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+000059b0: 7373 3227 2c20 5f5f 6669 6c65 5f5f 2c20  ss2', __file__, 
+000059c0: 7072 696f 7269 7479 3d32 2c0d 0a20 2020  priority=2,..   
+000059d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059e0: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+000059f0: 7274 7365 6373 3d2e 3031 290d 0a20 2020  rtsecs=.01)..   
+00005a00: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+00005a10: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
+00005a20: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+00005a30: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
+00005a40: 6669 6731 2c0d 0a20 2020 2020 2020 2020  fig1,..         
+00005a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a70: 2020 2020 2020 7063 6f6e 6669 6732 290d        pconfig2).
+00005a80: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00005a90: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
+00005aa0: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
+00005ab0: 7461 7465 730d 0a20 2020 2020 2020 2066  tates..        f
+00005ac0: 726f 6d20 7375 7065 7276 6973 6f72 2e78  rom supervisor.x
+00005ad0: 6d6c 7270 6320 696d 706f 7274 2046 6175  mlrpc import Fau
+00005ae0: 6c74 730d 0a20 2020 2020 2020 2073 7570  lts..        sup
+00005af0: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
+00005b00: 6361 7474 7228 2770 726f 6365 7373 3127  cattr('process1'
+00005b10: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
+00005b20: 7373 5374 6174 6573 2e53 544f 5050 4544  ssStates.STOPPED
+00005b30: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+00005b40: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
+00005b50: 7474 7228 2770 726f 6365 7373 3227 2c20  ttr('process2', 
+00005b60: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
+00005b70: 5374 6174 6573 2e53 544f 5050 4544 290d  States.STOPPED).
+00005b80: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00005b90: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00005ba0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00005bb0: 0a20 2020 2020 2020 2063 616c 6c62 6163  .        callbac
+00005bc0: 6b20 3d20 696e 7465 7266 6163 652e 7374  k = interface.st
+00005bd0: 6172 7450 726f 6365 7373 4772 6f75 7028  artProcessGroup(
+00005be0: 2766 6f6f 2729 0d0a 0d0a 2020 2020 2020  'foo')....      
+00005bf0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00005c00: 616c 280d 0a20 2020 2020 2020 2020 2020  al(..           
+00005c10: 2063 616c 6c62 6163 6b28 292c 0d0a 2020   callback(),..  
+00005c20: 2020 2020 2020 2020 2020 5b7b 2767 726f            [{'gro
+00005c30: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+00005c40: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+00005c50: 7573 273a 2046 6175 6c74 732e 5355 4343  us': Faults.SUCC
+00005c60: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
+00005c70: 2020 2020 2764 6573 6372 6970 7469 6f6e      'description
+00005c80: 273a 2027 4f4b 272c 0d0a 2020 2020 2020  ': 'OK',..      
+00005c90: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
+00005ca0: 2770 726f 6365 7373 3127 7d2c 0d0a 2020  'process1'},..  
+00005cb0: 2020 2020 2020 2020 2020 207b 2767 726f             {'gro
+00005cc0: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+00005cd0: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+00005ce0: 7573 273a 2046 6175 6c74 732e 5355 4343  us': Faults.SUCC
+00005cf0: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
+00005d00: 2020 2020 2764 6573 6372 6970 7469 6f6e      'description
+00005d10: 273a 2027 4f4b 272c 0d0a 2020 2020 2020  ': 'OK',..      
+00005d20: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
+00005d30: 2770 726f 6365 7373 3227 7d0d 0a20 2020  'process2'}..   
+00005d40: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
+00005d50: 2020 2020 2029 0d0a 2020 2020 2020 2020       )..        
+00005d60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00005d70: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
+00005d80: 655f 7465 7874 2c20 2773 7461 7274 5072  e_text, 'startPr
+00005d90: 6f63 6573 7327 290d 0a0d 0a20 2020 2020  ocess')....     
+00005da0: 2020 2070 726f 6365 7373 3120 3d20 7375     process1 = su
+00005db0: 7065 7276 6973 6f72 642e 7072 6f63 6573  pervisord.proces
+00005dc0: 735f 6772 6f75 7073 5b27 666f 6f27 5d2e  s_groups['foo'].
+00005dd0: 7072 6f63 6573 7365 735b 2770 726f 6365  processes['proce
+00005de0: 7373 3127 5d0d 0a20 2020 2020 2020 2073  ss1']..        s
+00005df0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00005e00: 7072 6f63 6573 7331 2e73 7061 776e 6564  process1.spawned
+00005e10: 2c20 5472 7565 290d 0a20 2020 2020 2020  , True)..       
+00005e20: 2070 726f 6365 7373 3220 3d20 7375 7065   process2 = supe
+00005e30: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
+00005e40: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
+00005e50: 6f63 6573 7365 735b 2770 726f 6365 7373  ocesses['process
+00005e60: 3227 5d0d 0a20 2020 2020 2020 2073 656c  2']..        sel
+00005e70: 662e 6173 7365 7274 4571 7561 6c28 7072  f.assertEqual(pr
+00005e80: 6f63 6573 7332 2e73 7061 776e 6564 2c20  ocess2.spawned, 
+00005e90: 5472 7565 290d 0a0d 0a20 2020 2064 6566  True)....    def
+00005ea0: 2074 6573 745f 7374 6172 7450 726f 6365   test_startProce
+00005eb0: 7373 4772 6f75 705f 6e6f 7761 6974 2873  ssGroup_nowait(s
+00005ec0: 656c 6629 3a0d 0a20 2020 2020 2020 206f  elf):..        o
+00005ed0: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+00005ee0: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+00005ef0: 2070 636f 6e66 6967 3120 3d20 4475 6d6d   pconfig1 = Dumm
+00005f00: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00005f10: 2c20 2770 726f 6365 7373 3127 2c20 5f5f  , 'process1', __
+00005f20: 6669 6c65 5f5f 2c20 7072 696f 7269 7479  file__, priority
+00005f30: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
+00005f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005f50: 2020 2020 2073 7461 7274 7365 6373 3d2e       startsecs=.
+00005f60: 3031 290d 0a20 2020 2020 2020 2070 636f  01)..        pco
+00005f70: 6e66 6967 3220 3d20 4475 6d6d 7950 436f  nfig2 = DummyPCo
+00005f80: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+00005f90: 726f 6365 7373 3227 2c20 5f5f 6669 6c65  rocess2', __file
+00005fa0: 5f5f 2c20 7072 696f 7269 7479 3d32 2c0d  __, priority=2,.
+00005fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005fd0: 2073 7461 7274 7365 6373 3d2e 3031 290d   startsecs=.01).
+00005fe0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00005ff0: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
+00006000: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
+00006010: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+00006020: 7063 6f6e 6669 6731 2c0d 0a20 2020 2020  pconfig1,..     
+00006030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006050: 2020 2020 2020 2020 2020 7063 6f6e 6669            pconfi
+00006060: 6732 290d 0a20 2020 2020 2020 2066 726f  g2)..        fro
+00006070: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
+00006080: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
+00006090: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
+000060a0: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
+000060b0: 6574 5f70 726f 6361 7474 7228 2770 726f  et_procattr('pro
+000060c0: 6365 7373 3127 2c20 2773 7461 7465 272c  cess1', 'state',
+000060d0: 2050 726f 6365 7373 5374 6174 6573 2e53   ProcessStates.S
+000060e0: 544f 5050 4544 290d 0a20 2020 2020 2020  TOPPED)..       
+000060f0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
+00006100: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
+00006110: 7373 3227 2c20 2773 7461 7465 272c 2050  ss2', 'state', P
+00006120: 726f 6365 7373 5374 6174 6573 2e53 544f  rocessStates.STO
+00006130: 5050 4544 290d 0a20 2020 2020 2020 2069  PPED)..        i
+00006140: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00006150: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00006160: 736f 7264 290d 0a20 2020 2020 2020 2063  sord)..        c
+00006170: 616c 6c62 6163 6b20 3d20 696e 7465 7266  allback = interf
+00006180: 6163 652e 7374 6172 7450 726f 6365 7373  ace.startProcess
+00006190: 4772 6f75 7028 2766 6f6f 272c 2077 6169  Group('foo', wai
+000061a0: 743d 4661 6c73 6529 0d0a 2020 2020 2020  t=False)..      
+000061b0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+000061c0: 722e 786d 6c72 7063 2069 6d70 6f72 7420  r.xmlrpc import 
+000061d0: 4661 756c 7473 0d0a 0d0a 2020 2020 2020  Faults....      
+000061e0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+000061f0: 616c 280d 0a20 2020 2020 2020 2020 2020  al(..           
+00006200: 2063 616c 6c62 6163 6b28 292c 0d0a 2020   callback(),..  
+00006210: 2020 2020 2020 2020 2020 5b7b 2767 726f            [{'gro
+00006220: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+00006230: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+00006240: 7573 273a 2046 6175 6c74 732e 5355 4343  us': Faults.SUCC
+00006250: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
+00006260: 2020 2020 2764 6573 6372 6970 7469 6f6e      'description
+00006270: 273a 2027 4f4b 272c 0d0a 2020 2020 2020  ': 'OK',..      
+00006280: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
+00006290: 2770 726f 6365 7373 3127 7d2c 0d0a 2020  'process1'},..  
+000062a0: 2020 2020 2020 2020 2020 207b 2767 726f             {'gro
+000062b0: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+000062c0: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+000062d0: 7573 273a 2046 6175 6c74 732e 5355 4343  us': Faults.SUCC
+000062e0: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
+000062f0: 2020 2020 2764 6573 6372 6970 7469 6f6e      'description
+00006300: 273a 2027 4f4b 272c 0d0a 2020 2020 2020  ': 'OK',..      
+00006310: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
+00006320: 2770 726f 6365 7373 3227 7d0d 0a20 2020  'process2'}..   
+00006330: 2020 2020 2020 2020 2020 5d0d 0a20 2020            ]..   
+00006340: 2020 2020 2029 0d0a 0d0a 2020 2020 6465       )....    de
+00006350: 6620 7465 7374 5f73 7461 7274 5072 6f63  f test_startProc
+00006360: 6573 7347 726f 7570 5f62 6164 6e61 6d65  essGroup_badname
+00006370: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00006380: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00006390: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
+000063a0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000063b0: 6f72 6420 3d20 4475 6d6d 7953 7570 6572  ord = DummySuper
+000063c0: 7669 736f 7228 290d 0a20 2020 2020 2020  visor()..       
+000063d0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+000063e0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+000063f0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00006400: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+00006410: 4572 726f 7228 786d 6c72 7063 2e46 6175  Error(xmlrpc.Fau
+00006420: 6c74 732e 4241 445f 4e41 4d45 2c0d 0a20  lts.BAD_NAME,.. 
+00006430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006440: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00006450: 7266 6163 652e 7374 6172 7450 726f 6365  rface.startProce
+00006460: 7373 4772 6f75 702c 2027 666f 6f27 290d  ssGroup, 'foo').
+00006470: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+00006480: 7374 6172 7441 6c6c 5072 6f63 6573 7365  startAllProcesse
+00006490: 7328 7365 6c66 293a 0d0a 2020 2020 2020  s(self):..      
+000064a0: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
+000064b0: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
+000064c0: 2020 2020 7063 6f6e 6669 6731 203d 2044      pconfig1 = D
+000064d0: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+000064e0: 6f6e 732c 2027 7072 6f63 6573 7331 272c  ons, 'process1',
+000064f0: 205f 5f66 696c 655f 5f2c 2070 7269 6f72   __file__, prior
+00006500: 6974 793d 312c 0d0a 2020 2020 2020 2020  ity=1,..        
+00006510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006520: 2020 2020 2020 2020 7374 6172 7473 6563          startsec
+00006530: 733d 2e30 3129 0d0a 2020 2020 2020 2020  s=.01)..        
+00006540: 7063 6f6e 6669 6732 203d 2044 756d 6d79  pconfig2 = Dummy
+00006550: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+00006560: 2027 7072 6f63 6573 7332 272c 205f 5f66   'process2', __f
+00006570: 696c 655f 5f2c 2070 7269 6f72 6974 793d  ile__, priority=
+00006580: 322c 0d0a 2020 2020 2020 2020 2020 2020  2,..            
+00006590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000065a0: 2020 2020 7374 6172 7473 6563 733d 2e30      startsecs=.0
+000065b0: 3129 0d0a 2020 2020 2020 2020 7375 7065  1)..        supe
+000065c0: 7276 6973 6f72 6420 3d20 506f 7075 6c61  rvisord = Popula
+000065d0: 7465 6444 756d 6d79 5375 7065 7276 6973  tedDummySupervis
+000065e0: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
+000065f0: 272c 2070 636f 6e66 6967 312c 0d0a 2020  ', pconfig1,..  
+00006600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006620: 2020 2020 2020 2020 2020 2020 2070 636f               pco
+00006630: 6e66 6967 3229 0d0a 2020 2020 2020 2020  nfig2)..        
+00006640: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
+00006650: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
+00006660: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
+00006670: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00006680: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
+00006690: 7072 6f63 6573 7331 272c 2027 7374 6174  process1', 'stat
+000066a0: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
+000066b0: 732e 5354 4f50 5045 4429 0d0a 2020 2020  s.STOPPED)..    
+000066c0: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+000066d0: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
+000066e0: 6f63 6573 7332 272c 2027 7374 6174 6527  ocess2', 'state'
+000066f0: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
+00006700: 5354 4f50 5045 4429 0d0a 2020 2020 2020  STOPPED)..      
+00006710: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+00006720: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+00006730: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+00006740: 2020 6361 6c6c 6261 636b 203d 2069 6e74    callback = int
+00006750: 6572 6661 6365 2e73 7461 7274 416c 6c50  erface.startAllP
+00006760: 726f 6365 7373 6573 2829 0d0a 0d0a 2020  rocesses()....  
+00006770: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00006780: 7669 736f 722e 786d 6c72 7063 2069 6d70  visor.xmlrpc imp
+00006790: 6f72 7420 4661 756c 7473 0d0a 0d0a 2020  ort Faults....  
+000067a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000067b0: 7445 7175 616c 280d 0a20 2020 2020 2020  tEqual(..       
+000067c0: 2020 2020 2063 616c 6c62 6163 6b28 292c       callback(),
+000067d0: 0d0a 2020 2020 2020 2020 2020 2020 5b7b  ..            [{
+000067e0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+000067f0: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+00006800: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
+00006810: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
+00006820: 2020 2020 2020 2020 2764 6573 6372 6970          'descrip
+00006830: 7469 6f6e 273a 2027 4f4b 272c 0d0a 2020  tion': 'OK',..  
+00006840: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+00006850: 6527 3a20 2770 726f 6365 7373 3127 7d2c  e': 'process1'},
+00006860: 0d0a 2020 2020 2020 2020 2020 2020 207b  ..             {
+00006870: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+00006880: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+00006890: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
+000068a0: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
+000068b0: 2020 2020 2020 2020 2764 6573 6372 6970          'descrip
+000068c0: 7469 6f6e 273a 2027 4f4b 272c 0d0a 2020  tion': 'OK',..  
+000068d0: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+000068e0: 6527 3a20 2770 726f 6365 7373 3227 7d0d  e': 'process2'}.
+000068f0: 0a20 2020 2020 2020 2020 2020 2020 5d0d  .             ].
+00006900: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00006910: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00006920: 7445 7175 616c 2869 6e74 6572 6661 6365  tEqual(interface
+00006930: 2e75 7064 6174 655f 7465 7874 2c20 2773  .update_text, 's
+00006940: 7461 7274 5072 6f63 6573 7327 290d 0a0d  tartProcess')...
+00006950: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+00006960: 3120 3d20 7375 7065 7276 6973 6f72 642e  1 = supervisord.
+00006970: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+00006980: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+00006990: 2770 726f 6365 7373 3127 5d0d 0a20 2020  'process1']..   
+000069a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000069b0: 4571 7561 6c28 7072 6f63 6573 7331 2e73  Equal(process1.s
+000069c0: 7061 776e 6564 2c20 5472 7565 290d 0a20  pawned, True).. 
+000069d0: 2020 2020 2020 2070 726f 6365 7373 3220         process2 
+000069e0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+000069f0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+00006a00: 6f27 5d2e 7072 6f63 6573 7365 735b 2770  o'].processes['p
+00006a10: 726f 6365 7373 3227 5d0d 0a20 2020 2020  rocess2']..     
+00006a20: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00006a30: 7561 6c28 7072 6f63 6573 7332 2e73 7061  ual(process2.spa
+00006a40: 776e 6564 2c20 5472 7565 290d 0a0d 0a20  wned, True).... 
+00006a50: 2020 2064 6566 2074 6573 745f 7374 6172     def test_star
+00006a60: 7441 6c6c 5072 6f63 6573 7365 735f 6e6f  tAllProcesses_no
+00006a70: 7761 6974 2873 656c 6629 3a0d 0a20 2020  wait(self):..   
+00006a80: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+00006a90: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+00006aa0: 2020 2020 2020 2070 636f 6e66 6967 3120         pconfig1 
+00006ab0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
+00006ac0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+00006ad0: 3127 2c20 5f5f 6669 6c65 5f5f 2c20 7072  1', __file__, pr
+00006ae0: 696f 7269 7479 3d31 2c0d 0a20 2020 2020  iority=1,..     
+00006af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b00: 2020 2020 2020 2020 2020 2073 7461 7274             start
+00006b10: 7365 6373 3d2e 3031 290d 0a20 2020 2020  secs=.01)..     
+00006b20: 2020 2070 636f 6e66 6967 3220 3d20 4475     pconfig2 = Du
+00006b30: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
+00006b40: 6e73 2c20 2770 726f 6365 7373 3227 2c20  ns, 'process2', 
+00006b50: 5f5f 6669 6c65 5f5f 2c20 7072 696f 7269  __file__, priori
+00006b60: 7479 3d32 2c0d 0a20 2020 2020 2020 2020  ty=2,..         
+00006b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b80: 2020 2020 2020 2073 7461 7274 7365 6373         startsecs
+00006b90: 3d2e 3031 290d 0a20 2020 2020 2020 2073  =.01)..        s
+00006ba0: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
+00006bb0: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
+00006bc0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
+00006bd0: 666f 6f27 2c20 7063 6f6e 6669 6731 2c0d  foo', pconfig1,.
+00006be0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c10: 7063 6f6e 6669 6732 290d 0a20 2020 2020  pconfig2)..     
+00006c20: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00006c30: 6f72 2e70 726f 6365 7373 2069 6d70 6f72  or.process impor
+00006c40: 7420 5072 6f63 6573 7353 7461 7465 730d  t ProcessStates.
+00006c50: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00006c60: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
+00006c70: 7228 2770 726f 6365 7373 3127 2c20 2773  r('process1', 's
+00006c80: 7461 7465 272c 2050 726f 6365 7373 5374  tate', ProcessSt
+00006c90: 6174 6573 2e53 544f 5050 4544 290d 0a20  ates.STOPPED).. 
+00006ca0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00006cb0: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
+00006cc0: 2770 726f 6365 7373 3227 2c20 2773 7461  'process2', 'sta
+00006cd0: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
+00006ce0: 6573 2e53 544f 5050 4544 290d 0a20 2020  es.STOPPED)..   
+00006cf0: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00006d00: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+00006d10: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+00006d20: 2020 2020 2063 616c 6c62 6163 6b20 3d20       callback = 
+00006d30: 696e 7465 7266 6163 652e 7374 6172 7441  interface.startA
+00006d40: 6c6c 5072 6f63 6573 7365 7328 7761 6974  llProcesses(wait
+00006d50: 3d46 616c 7365 290d 0a20 2020 2020 2020  =False)..       
+00006d60: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00006d70: 2e78 6d6c 7270 6320 696d 706f 7274 2046  .xmlrpc import F
+00006d80: 6175 6c74 730d 0a0d 0a20 2020 2020 2020  aults....       
+00006d90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00006da0: 6c28 0d0a 2020 2020 2020 2020 2020 2020  l(..            
+00006db0: 6361 6c6c 6261 636b 2829 2c0d 0a20 2020  callback(),..   
+00006dc0: 2020 2020 2020 2020 205b 7b27 6772 6f75           [{'grou
+00006dd0: 7027 3a20 2766 6f6f 272c 0d0a 2020 2020  p': 'foo',..    
+00006de0: 2020 2020 2020 2020 2020 2773 7461 7475            'statu
+00006df0: 7327 3a20 4661 756c 7473 2e53 5543 4345  s': Faults.SUCCE
+00006e00: 5353 2c0d 0a20 2020 2020 2020 2020 2020  SS,..           
+00006e10: 2020 2027 6465 7363 7269 7074 696f 6e27     'description'
+00006e20: 3a20 274f 4b27 2c0d 0a20 2020 2020 2020  : 'OK',..       
+00006e30: 2020 2020 2020 2027 6e61 6d65 273a 2027         'name': '
+00006e40: 7072 6f63 6573 7331 277d 2c0d 0a20 2020  process1'},..   
+00006e50: 2020 2020 2020 2020 2020 7b27 6772 6f75            {'grou
+00006e60: 7027 3a20 2766 6f6f 272c 0d0a 2020 2020  p': 'foo',..    
+00006e70: 2020 2020 2020 2020 2020 2773 7461 7475            'statu
+00006e80: 7327 3a20 4661 756c 7473 2e53 5543 4345  s': Faults.SUCCE
+00006e90: 5353 2c0d 0a20 2020 2020 2020 2020 2020  SS,..           
+00006ea0: 2020 2027 6465 7363 7269 7074 696f 6e27     'description'
+00006eb0: 3a20 274f 4b27 2c0d 0a20 2020 2020 2020  : 'OK',..       
+00006ec0: 2020 2020 2020 2027 6e61 6d65 273a 2027         'name': '
+00006ed0: 7072 6f63 6573 7332 277d 0d0a 2020 2020  process2'}..    
+00006ee0: 2020 2020 2020 2020 205d 0d0a 2020 2020           ]..    
+00006ef0: 2020 2020 290d 0a0d 0a20 2020 2064 6566      )....    def
+00006f00: 2074 6573 745f 7374 6f70 5072 6f63 6573   test_stopProces
+00006f10: 7328 7365 6c66 293a 0d0a 2020 2020 2020  s(self):..      
+00006f20: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
+00006f30: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
+00006f40: 2020 2020 7063 6f6e 6669 6720 3d20 4475      pconfig = Du
+00006f50: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
+00006f60: 6e73 2c20 2766 6f6f 272c 2027 2f62 696e  ns, 'foo', '/bin
+00006f70: 2f66 6f6f 2729 0d0a 2020 2020 2020 2020  /foo')..        
+00006f80: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
+00006f90: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
+00006fa0: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
+00006fb0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00006fc0: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+00006fd0: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+00006fe0: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+00006ff0: 6e66 6967 290d 0a20 2020 2020 2020 2073  nfig)..        s
+00007000: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+00007010: 726f 6361 7474 7228 2766 6f6f 272c 2027  rocattr('foo', '
+00007020: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
+00007030: 7461 7465 732e 5255 4e4e 494e 4729 0d0a  tates.RUNNING)..
+00007040: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00007050: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00007060: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+00007070: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00007080: 2069 6e74 6572 6661 6365 2e73 746f 7050   interface.stopP
+00007090: 726f 6365 7373 2827 666f 6f27 290d 0a20  rocess('foo').. 
+000070a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000070b0: 7274 5472 7565 2872 6573 756c 7429 0d0a  rtTrue(result)..
+000070c0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000070d0: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
+000070e0: 6365 2e75 7064 6174 655f 7465 7874 2c20  ce.update_text, 
+000070f0: 2773 746f 7050 726f 6365 7373 2729 0d0a  'stopProcess')..
+00007100: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+00007110: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+00007120: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+00007130: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
+00007140: 6f6f 275d 0d0a 2020 2020 2020 2020 7365  oo']..        se
+00007150: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
+00007160: 726f 6365 7373 2e62 6163 6b6f 6666 2c20  rocess.backoff, 
+00007170: 3029 0d0a 2020 2020 2020 2020 7365 6c66  0)..        self
+00007180: 2e61 7373 6572 7445 7175 616c 2870 726f  .assertEqual(pro
+00007190: 6365 7373 2e64 656c 6179 2c20 3029 0d0a  cess.delay, 0)..
+000071a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000071b0: 6572 7446 616c 7365 2870 726f 6365 7373  ertFalse(process
+000071c0: 2e6b 696c 6c69 6e67 290d 0a20 2020 2020  .killing)..     
+000071d0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000071e0: 7561 6c28 7072 6f63 6573 732e 7374 6174  ual(process.stat
+000071f0: 652c 2050 726f 6365 7373 5374 6174 6573  e, ProcessStates
+00007200: 2e53 544f 5050 4544 290d 0a20 2020 2020  .STOPPED)..     
+00007210: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00007220: 7565 2870 726f 6365 7373 2e73 746f 705f  ue(process.stop_
+00007230: 7265 706f 7274 5f63 616c 6c65 6429 0d0a  report_called)..
+00007240: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00007250: 6572 7445 7175 616c 286c 656e 2873 7570  ertEqual(len(sup
+00007260: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
+00007270: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
+00007280: 726f 6365 7373 6573 292c 2031 290d 0a20  rocesses), 1).. 
+00007290: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000072a0: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+000072b0: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+000072c0: 7374 6f70 5072 6f63 6573 7327 290d 0a0d  stopProcess')...
+000072d0: 0a20 2020 2064 6566 2074 6573 745f 7374  .    def test_st
+000072e0: 6f70 5072 6f63 6573 735f 6e6f 7761 6974  opProcess_nowait
+000072f0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00007300: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+00007310: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
+00007320: 2020 2070 636f 6e66 6967 203d 2044 756d     pconfig = Dum
+00007330: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+00007340: 732c 2027 666f 6f27 2c20 5f5f 6669 6c65  s, 'foo', __file
+00007350: 5f5f 290d 0a20 2020 2020 2020 2066 726f  __)..        fro
+00007360: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
+00007370: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
+00007380: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
+00007390: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
+000073a0: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
+000073b0: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
+000073c0: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
+000073d0: 6729 0d0a 2020 2020 2020 2020 7375 7065  g)..        supe
+000073e0: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
+000073f0: 6174 7472 2827 666f 6f27 2c20 2773 7461  attr('foo', 'sta
+00007400: 7465 272c 2050 726f 6365 7373 5374 6174  te', ProcessStat
+00007410: 6573 2e52 554e 4e49 4e47 290d 0a20 2020  es.RUNNING)..   
+00007420: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00007430: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+00007440: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+00007450: 2020 2020 2072 6573 756c 7420 3d20 696e       result = in
+00007460: 7465 7266 6163 652e 7374 6f70 5072 6f63  terface.stopProc
+00007470: 6573 7328 2766 6f6f 272c 2077 6169 743d  ess('foo', wait=
+00007480: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+00007490: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000074a0: 2872 6573 756c 742c 2054 7275 6529 0d0a  (result, True)..
+000074b0: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+000074c0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+000074d0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+000074e0: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
+000074f0: 6f6f 275d 0d0a 2020 2020 2020 2020 7365  oo']..        se
+00007500: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
+00007510: 726f 6365 7373 2e73 746f 705f 6361 6c6c  rocess.stop_call
+00007520: 6564 2c20 5472 7565 290d 0a20 2020 2020  ed, True)..     
+00007530: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00007540: 7565 2870 726f 6365 7373 2e73 746f 705f  ue(process.stop_
+00007550: 7265 706f 7274 5f63 616c 6c65 6429 0d0a  report_called)..
+00007560: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00007570: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
+00007580: 6365 2e75 7064 6174 655f 7465 7874 2c20  ce.update_text, 
+00007590: 2773 746f 7050 726f 6365 7373 2729 0d0a  'stopProcess')..
+000075a0: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+000075b0: 746f 7050 726f 6365 7373 5f73 7563 6365  topProcess_succe
+000075c0: 7373 5f69 6e5f 6f6e 7761 6974 2873 656c  ss_in_onwait(sel
+000075d0: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
+000075e0: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+000075f0: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+00007600: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+00007610: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00007620: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
+00007630: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
+00007640: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
+00007650: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
+00007660: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
+00007670: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
+00007680: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
+00007690: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
+000076a0: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
+000076b0: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+000076c0: 7320 3d20 7375 7065 7276 6973 6f72 642e  s = supervisord.
+000076d0: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+000076e0: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+000076f0: 2766 6f6f 275d 0d0a 2020 2020 2020 2020  'foo']..        
+00007700: 4c20 3d20 5b50 726f 6365 7373 5374 6174  L = [ProcessStat
+00007710: 6573 2e52 554e 4e49 4e47 2c0d 0a20 2020  es.RUNNING,..   
+00007720: 2020 2020 2020 2020 2020 5072 6f63 6573            Proces
+00007730: 7353 7461 7465 732e 5354 4f50 5049 4e47  sStates.STOPPING
+00007740: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00007750: 5072 6f63 6573 7353 7461 7465 732e 5354  ProcessStates.ST
+00007760: 4f50 5045 445d 0d0a 0d0a 2020 2020 2020  OPPED]....      
+00007770: 2020 6465 6620 6765 745f 7374 6174 6528    def get_state(
+00007780: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00007790: 7265 7475 726e 204c 2e70 6f70 2830 290d  return L.pop(0).
+000077a0: 0a0d 0a20 2020 2020 2020 2070 726f 6365  ...        proce
+000077b0: 7373 2e67 6574 5f73 7461 7465 203d 2067  ss.get_state = g
+000077c0: 6574 5f73 7461 7465 0d0a 2020 2020 2020  et_state..      
+000077d0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+000077e0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+000077f0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+00007800: 2020 6361 6c6c 6261 636b 203d 2069 6e74    callback = int
+00007810: 6572 6661 6365 2e73 746f 7050 726f 6365  erface.stopProce
+00007820: 7373 2827 666f 6f27 290d 0a20 2020 2020  ss('foo')..     
+00007830: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00007840: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
+00007850: 6461 7465 5f74 6578 742c 2027 7374 6f70  date_text, 'stop
+00007860: 5072 6f63 6573 7327 290d 0a20 2020 2020  Process')..     
+00007870: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00007880: 7565 2863 616c 6c62 6163 6b28 2929 0d0a  ue(callback())..
+00007890: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+000078a0: 746f 7050 726f 6365 7373 5f4e 4459 5f69  topProcess_NDY_i
+000078b0: 6e5f 6f6e 7761 6974 2873 656c 6629 3a0d  n_onwait(self):.
+000078c0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+000078d0: 7065 7276 6973 6f72 2e68 7474 7020 696d  pervisor.http im
+000078e0: 706f 7274 204e 4f54 5f44 4f4e 455f 5945  port NOT_DONE_YE
+000078f0: 540d 0a20 2020 2020 2020 206f 7074 696f  T..        optio
+00007900: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00007910: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+00007920: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
+00007930: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
+00007940: 6f27 2c20 272f 6269 6e2f 666f 6f27 290d  o', '/bin/foo').
+00007950: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00007960: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
+00007970: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
+00007980: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
+00007990: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
+000079a0: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
+000079b0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
+000079c0: 666f 6f27 2c20 7063 6f6e 6669 6729 0d0a  foo', pconfig)..
+000079d0: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+000079e0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+000079f0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+00007a00: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
+00007a10: 6f6f 275d 0d0a 2020 2020 2020 2020 4c20  oo']..        L 
+00007a20: 3d20 5b50 726f 6365 7373 5374 6174 6573  = [ProcessStates
+00007a30: 2e52 554e 4e49 4e47 2c0d 0a20 2020 2020  .RUNNING,..     
+00007a40: 2020 2020 2020 2020 5072 6f63 6573 7353          ProcessS
+00007a50: 7461 7465 732e 5354 4f50 5049 4e47 2c0d  tates.STOPPING,.
+00007a60: 0a20 2020 2020 2020 2020 2020 2020 5072  .             Pr
+00007a70: 6f63 6573 7353 7461 7465 732e 5354 4f50  ocessStates.STOP
+00007a80: 5049 4e47 5d0d 0a0d 0a20 2020 2020 2020  PING]....       
+00007a90: 2064 6566 2067 6574 5f73 7461 7465 2829   def get_state()
+00007aa0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00007ab0: 6574 7572 6e20 4c2e 706f 7028 3029 0d0a  eturn L.pop(0)..
+00007ac0: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+00007ad0: 732e 6765 745f 7374 6174 6520 3d20 6765  s.get_state = ge
+00007ae0: 745f 7374 6174 650d 0a20 2020 2020 2020  t_state..       
+00007af0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+00007b00: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+00007b10: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00007b20: 2063 616c 6c62 6163 6b20 3d20 696e 7465   callback = inte
+00007b30: 7266 6163 652e 7374 6f70 5072 6f63 6573  rface.stopProces
+00007b40: 7328 2766 6f6f 2729 0d0a 2020 2020 2020  s('foo')..      
+00007b50: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00007b60: 616c 2863 616c 6c62 6163 6b28 292c 204e  al(callback(), N
+00007b70: 4f54 5f44 4f4e 455f 5945 5429 0d0a 2020  OT_DONE_YET)..  
+00007b80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00007b90: 7445 7175 616c 2869 6e74 6572 6661 6365  tEqual(interface
+00007ba0: 2e75 7064 6174 655f 7465 7874 2c20 2773  .update_text, 's
+00007bb0: 746f 7050 726f 6365 7373 2729 0d0a 0d0a  topProcess')....
+00007bc0: 2020 2020 6465 6620 7465 7374 5f73 746f      def test_sto
+00007bd0: 7050 726f 6365 7373 5f62 6164 5f6e 616d  pProcess_bad_nam
+00007be0: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
+00007bf0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+00007c00: 722e 786d 6c72 7063 2069 6d70 6f72 7420  r.xmlrpc import 
+00007c10: 4661 756c 7473 0d0a 2020 2020 2020 2020  Faults..        
+00007c20: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
+00007c30: 6d6d 7953 7570 6572 7669 736f 7228 290d  mmySupervisor().
+00007c40: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+00007c50: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+00007c60: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+00007c70: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
+00007c80: 7373 6572 7452 5043 4572 726f 7228 4661  ssertRPCError(Fa
+00007c90: 756c 7473 2e42 4144 5f4e 414d 452c 0d0a  ults.BAD_NAME,..
+00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007cb0: 2020 2020 2020 2020 2020 2020 2069 6e74               int
+00007cc0: 6572 6661 6365 2e73 746f 7050 726f 6365  erface.stopProce
+00007cd0: 7373 2c20 2766 6f6f 2729 0d0a 0d0a 2020  ss, 'foo')....  
+00007ce0: 2020 6465 6620 7465 7374 5f73 746f 7050    def test_stopP
+00007cf0: 726f 6365 7373 5f6e 6f74 5f72 756e 6e69  rocess_not_runni
+00007d00: 6e67 2873 656c 6629 3a0d 0a20 2020 2020  ng(self):..     
+00007d10: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00007d20: 6f72 2e73 7461 7465 7320 696d 706f 7274  or.states import
+00007d30: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
+00007d40: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00007d50: 6572 7669 736f 722e 786d 6c72 7063 2069  ervisor.xmlrpc i
+00007d60: 6d70 6f72 7420 4661 756c 7473 0d0a 2020  mport Faults..  
+00007d70: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
+00007d80: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
+00007d90: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
+00007da0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
+00007db0: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
+00007dc0: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
+00007dd0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00007de0: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+00007df0: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00007e00: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
+00007e10: 6967 290d 0a20 2020 2020 2020 2073 7570  ig)..        sup
+00007e20: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
+00007e30: 6361 7474 7228 2766 6f6f 272c 2027 7374  cattr('foo', 'st
+00007e40: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
+00007e50: 7465 732e 4558 4954 4544 290d 0a20 2020  tes.EXITED)..   
+00007e60: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00007e70: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+00007e80: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+00007e90: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
+00007ea0: 7452 5043 4572 726f 7228 4661 756c 7473  tRPCError(Faults
+00007eb0: 2e4e 4f54 5f52 554e 4e49 4e47 2c20 696e  .NOT_RUNNING, in
+00007ec0: 7465 7266 6163 652e 7374 6f70 5072 6f63  terface.stopProc
+00007ed0: 6573 732c 2027 666f 6f27 290d 0a0d 0a20  ess, 'foo').... 
+00007ee0: 2020 2064 6566 2074 6573 745f 7374 6f70     def test_stop
+00007ef0: 5072 6f63 6573 735f 6661 696c 6564 2873  Process_failed(s
+00007f00: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
+00007f10: 726f 6d20 7375 7065 7276 6973 6f72 2e78  rom supervisor.x
+00007f20: 6d6c 7270 6320 696d 706f 7274 2046 6175  mlrpc import Fau
+00007f30: 6c74 730d 0a20 2020 2020 2020 206f 7074  lts..        opt
+00007f40: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+00007f50: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+00007f60: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+00007f70: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00007f80: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
+00007f90: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+00007fa0: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+00007fb0: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+00007fc0: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
+00007fd0: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
+00007fe0: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+00007ff0: 7365 745f 7072 6f63 6174 7472 2827 666f  set_procattr('fo
+00008000: 6f27 2c20 2773 746f 7027 2c20 6c61 6d62  o', 'stop', lamb
+00008010: 6461 3a20 2775 6e73 746f 7070 6162 6c65  da: 'unstoppable
+00008020: 2729 0d0a 2020 2020 2020 2020 696e 7465  ')..        inte
+00008030: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
+00008040: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
+00008050: 6429 0d0a 2020 2020 2020 2020 7365 6c66  d)..        self
+00008060: 2e5f 6173 7365 7274 5250 4345 7272 6f72  ._assertRPCError
+00008070: 2846 6175 6c74 732e 4641 494c 4544 2c20  (Faults.FAILED, 
+00008080: 696e 7465 7266 6163 652e 7374 6f70 5072  interface.stopPr
+00008090: 6f63 6573 732c 2027 666f 6f27 290d 0a0d  ocess, 'foo')...
+000080a0: 0a20 2020 2064 6566 2074 6573 745f 7374  .    def test_st
+000080b0: 6f70 5072 6f63 6573 7347 726f 7570 2873  opProcessGroup(s
+000080c0: 656c 6629 3a0d 0a20 2020 2020 2020 206f  elf):..        o
+000080d0: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+000080e0: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+000080f0: 2070 636f 6e66 6967 3120 3d20 4475 6d6d   pconfig1 = Dumm
+00008100: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00008110: 2c20 2770 726f 6365 7373 3127 2c20 272f  , 'process1', '/
+00008120: 6269 6e2f 666f 6f27 2c20 7072 696f 7269  bin/foo', priori
+00008130: 7479 3d31 290d 0a20 2020 2020 2020 2070  ty=1)..        p
+00008140: 636f 6e66 6967 3220 3d20 4475 6d6d 7950  config2 = DummyP
+00008150: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
+00008160: 2770 726f 6365 7373 3227 2c20 272f 6269  'process2', '/bi
+00008170: 6e2f 666f 6f32 272c 2070 7269 6f72 6974  n/foo2', priorit
+00008180: 793d 3229 0d0a 2020 2020 2020 2020 6672  y=2)..        fr
+00008190: 6f6d 2073 7570 6572 7669 736f 722e 7072  om supervisor.pr
+000081a0: 6f63 6573 7320 696d 706f 7274 2050 726f  ocess import Pro
+000081b0: 6365 7373 5374 6174 6573 0d0a 2020 2020  cessStates..    
+000081c0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+000081d0: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+000081e0: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+000081f0: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
+00008200: 6967 312c 0d0a 2020 2020 2020 2020 2020  ig1,..          
+00008210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008230: 2020 2020 2070 636f 6e66 6967 3229 0d0a       pconfig2)..
+00008240: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00008250: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+00008260: 2827 7072 6f63 6573 7331 272c 2027 7374  ('process1', 'st
+00008270: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
+00008280: 7465 732e 5255 4e4e 494e 4729 0d0a 2020  tes.RUNNING)..  
+00008290: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+000082a0: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
+000082b0: 7072 6f63 6573 7332 272c 2027 7374 6174  process2', 'stat
+000082c0: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
+000082d0: 732e 5255 4e4e 494e 4729 0d0a 2020 2020  s.RUNNING)..    
+000082e0: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+000082f0: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+00008300: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
+00008310: 2020 2020 6361 6c6c 6261 636b 203d 2069      callback = i
+00008320: 6e74 6572 6661 6365 2e73 746f 7050 726f  nterface.stopPro
+00008330: 6365 7373 4772 6f75 7028 2766 6f6f 2729  cessGroup('foo')
+00008340: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00008350: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
+00008360: 6661 6365 2e75 7064 6174 655f 7465 7874  face.update_text
+00008370: 2c20 2773 746f 7050 726f 6365 7373 4772  , 'stopProcessGr
+00008380: 6f75 7027 290d 0a20 2020 2020 2020 2066  oup')..        f
+00008390: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
+000083a0: 6d70 6f72 7420 6874 7470 0d0a 2020 2020  mport http..    
+000083b0: 2020 2020 7661 6c75 6520 3d20 6874 7470      value = http
+000083c0: 2e4e 4f54 5f44 4f4e 455f 5945 540d 0a20  .NOT_DONE_YET.. 
+000083d0: 2020 2020 2020 2077 6869 6c65 2031 3a0d         while 1:.
+000083e0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
+000083f0: 7565 203d 2063 616c 6c62 6163 6b28 290d  ue = callback().
+00008400: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00008410: 7661 6c75 6520 6973 206e 6f74 2068 7474  value is not htt
+00008420: 702e 4e4f 545f 444f 4e45 5f59 4554 3a0d  p.NOT_DONE_YET:.
+00008430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008440: 2062 7265 616b 0d0a 0d0a 2020 2020 2020   break....      
+00008450: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+00008460: 722e 786d 6c72 7063 2069 6d70 6f72 7420  r.xmlrpc import 
+00008470: 4661 756c 7473 0d0a 2020 2020 2020 2020  Faults..        
+00008480: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00008490: 2876 616c 7565 2c20 5b0d 0a20 2020 2020  (value, [..     
+000084a0: 2020 2020 2020 207b 2773 7461 7475 7327         {'status'
+000084b0: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
+000084c0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000084d0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+000084e0: 0a20 2020 2020 2020 2020 2020 2020 276e  .             'n
+000084f0: 616d 6527 3a20 2770 726f 6365 7373 3127  ame': 'process1'
+00008500: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00008510: 2764 6573 6372 6970 7469 6f6e 273a 2027  'description': '
+00008520: 4f4b 277d 2c0d 0a0d 0a20 2020 2020 2020  OK'},....       
+00008530: 2020 2020 207b 2773 7461 7475 7327 3a20       {'status': 
+00008540: 4661 756c 7473 2e53 5543 4345 5353 2c0d  Faults.SUCCESS,.
+00008550: 0a20 2020 2020 2020 2020 2020 2020 2767  .             'g
+00008560: 726f 7570 273a 2027 666f 6f27 2c0d 0a20  roup': 'foo',.. 
+00008570: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+00008580: 6527 3a20 2770 726f 6365 7373 3227 2c0d  e': 'process2',.
+00008590: 0a20 2020 2020 2020 2020 2020 2020 2764  .             'd
+000085a0: 6573 6372 6970 7469 6f6e 273a 2027 4f4b  escription': 'OK
+000085b0: 277d 2c0d 0a20 2020 2020 2020 205d 290d  '},..        ]).
+000085c0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+000085d0: 3120 3d20 7375 7065 7276 6973 6f72 642e  1 = supervisord.
+000085e0: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+000085f0: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+00008600: 2770 726f 6365 7373 3127 5d0d 0a20 2020  'process1']..   
+00008610: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00008620: 4571 7561 6c28 7072 6f63 6573 7331 2e73  Equal(process1.s
+00008630: 746f 705f 6361 6c6c 6564 2c20 5472 7565  top_called, True
+00008640: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+00008650: 7373 3220 3d20 7375 7065 7276 6973 6f72  ss2 = supervisor
+00008660: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
+00008670: 5b27 666f 6f27 5d2e 7072 6f63 6573 7365  ['foo'].processe
+00008680: 735b 2770 726f 6365 7373 3227 5d0d 0a20  s['process2'].. 
+00008690: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000086a0: 7274 4571 7561 6c28 7072 6f63 6573 7332  rtEqual(process2
+000086b0: 2e73 746f 705f 6361 6c6c 6564 2c20 5472  .stop_called, Tr
+000086c0: 7565 290d 0a0d 0a20 2020 2064 6566 2074  ue)....    def t
+000086d0: 6573 745f 7374 6f70 5072 6f63 6573 7347  est_stopProcessG
+000086e0: 726f 7570 5f6e 6f77 6169 7428 7365 6c66  roup_nowait(self
+000086f0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
+00008700: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+00008710: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
+00008720: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
+00008730: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00008740: 7072 6f63 6573 7331 272c 205f 5f66 696c  process1', __fil
+00008750: 655f 5f2c 2070 7269 6f72 6974 793d 3129  e__, priority=1)
+00008760: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
+00008770: 6732 203d 2044 756d 6d79 5043 6f6e 6669  g2 = DummyPConfi
+00008780: 6728 6f70 7469 6f6e 732c 2027 7072 6f63  g(options, 'proc
+00008790: 6573 7332 272c 205f 5f66 696c 655f 5f2c  ess2', __file__,
+000087a0: 2070 7269 6f72 6974 793d 3229 0d0a 2020   priority=2)..  
+000087b0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+000087c0: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+000087d0: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+000087e0: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+000087f0: 6e66 6967 312c 0d0a 2020 2020 2020 2020  nfig1,..        
+00008800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008820: 2020 2020 2020 2070 636f 6e66 6967 3229         pconfig2)
+00008830: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00008840: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
+00008850: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
+00008860: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
+00008870: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+00008880: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
+00008890: 7331 272c 2027 7374 6174 6527 2c20 5072  s1', 'state', Pr
+000088a0: 6f63 6573 7353 7461 7465 732e 5255 4e4e  ocessStates.RUNN
+000088b0: 494e 4729 0d0a 2020 2020 2020 2020 7375  ING)..        su
+000088c0: 7065 7276 6973 6f72 642e 7365 745f 7072  pervisord.set_pr
+000088d0: 6f63 6174 7472 2827 7072 6f63 6573 7332  ocattr('process2
+000088e0: 272c 2027 7374 6174 6527 2c20 5072 6f63  ', 'state', Proc
+000088f0: 6573 7353 7461 7465 732e 5255 4e4e 494e  essStates.RUNNIN
+00008900: 4729 0d0a 2020 2020 2020 2020 696e 7465  G)..        inte
+00008910: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
+00008920: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
+00008930: 6429 0d0a 2020 2020 2020 2020 6361 6c6c  d)..        call
+00008940: 6261 636b 203d 2069 6e74 6572 6661 6365  back = interface
+00008950: 2e73 746f 7050 726f 6365 7373 4772 6f75  .stopProcessGrou
+00008960: 7028 2766 6f6f 272c 2077 6169 743d 4661  p('foo', wait=Fa
+00008970: 6c73 6529 0d0a 2020 2020 2020 2020 6672  lse)..        fr
+00008980: 6f6d 2073 7570 6572 7669 736f 722e 786d  om supervisor.xm
+00008990: 6c72 7063 2069 6d70 6f72 7420 4661 756c  lrpc import Faul
+000089a0: 7473 0d0a 0d0a 2020 2020 2020 2020 7365  ts....        se
+000089b0: 6c66 2e61 7373 6572 7445 7175 616c 280d  lf.assertEqual(.
+000089c0: 0a20 2020 2020 2020 2020 2020 2063 616c  .            cal
+000089d0: 6c62 6163 6b28 292c 0d0a 2020 2020 2020  lback(),..      
+000089e0: 2020 2020 2020 5b0d 0a20 2020 2020 2020        [..       
+000089f0: 2020 2020 2020 2020 207b 276e 616d 6527           {'name'
+00008a00: 3a20 2770 726f 6365 7373 3127 2c0d 0a20  : 'process1',.. 
+00008a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008a20: 2764 6573 6372 6970 7469 6f6e 273a 2027  'description': '
+00008a30: 4f4b 272c 0d0a 2020 2020 2020 2020 2020  OK',..          
+00008a40: 2020 2020 2020 2027 6772 6f75 7027 3a20         'group': 
+00008a50: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
+00008a60: 2020 2020 2020 2020 2027 7374 6174 7573           'status
+00008a70: 273a 2046 6175 6c74 732e 5355 4343 4553  ': Faults.SUCCES
+00008a80: 537d 2c0d 0a20 2020 2020 2020 2020 2020  S},..           
+00008a90: 2020 2020 207b 276e 616d 6527 3a20 2770       {'name': 'p
+00008aa0: 726f 6365 7373 3227 2c0d 0a20 2020 2020  rocess2',..     
+00008ab0: 2020 2020 2020 2020 2020 2020 2764 6573              'des
+00008ac0: 6372 6970 7469 6f6e 273a 2027 4f4b 272c  cription': 'OK',
+00008ad0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008ae0: 2020 2027 6772 6f75 7027 3a20 2766 6f6f     'group': 'foo
+00008af0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00008b00: 2020 2020 2027 7374 6174 7573 273a 2046       'status': F
+00008b10: 6175 6c74 732e 5355 4343 4553 537d 0d0a  aults.SUCCESS}..
+00008b20: 2020 2020 2020 2020 2020 2020 5d0d 0a20              ].. 
+00008b30: 2020 2020 2020 2029 0d0a 0d0a 2020 2020         )....    
+00008b40: 6465 6620 7465 7374 5f73 746f 7050 726f  def test_stopPro
+00008b50: 6365 7373 4772 6f75 705f 6261 646e 616d  cessGroup_badnam
+00008b60: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
+00008b70: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+00008b80: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
+00008b90: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00008ba0: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
+00008bb0: 7276 6973 6f72 2829 0d0a 2020 2020 2020  rvisor()..      
+00008bc0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+00008bd0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+00008be0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+00008bf0: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+00008c00: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
+00008c10: 756c 7473 2e42 4144 5f4e 414d 452c 0d0a  ults.BAD_NAME,..
+00008c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c30: 2020 2020 2020 2020 2020 2020 2069 6e74               int
+00008c40: 6572 6661 6365 2e73 746f 7050 726f 6365  erface.stopProce
+00008c50: 7373 4772 6f75 702c 2027 666f 6f27 290d  ssGroup, 'foo').
+00008c60: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+00008c70: 7374 6f70 5072 6f63 6573 735f 7370 6c61  stopProcess_spla
+00008c80: 745f 6361 6c6c 735f 7374 6f70 5072 6f63  t_calls_stopProc
+00008c90: 6573 7347 726f 7570 2873 656c 6629 3a0d  essGroup(self):.
+00008ca0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00008cb0: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+00008cc0: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+00008cd0: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
+00008ce0: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
+00008cf0: 6365 7373 3127 2c20 5f5f 6669 6c65 5f5f  cess1', __file__
+00008d00: 2c20 6175 746f 7374 6172 743d 4661 6c73  , autostart=Fals
+00008d10: 652c 0d0a 2020 2020 2020 2020 2020 2020  e,..            
+00008d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d30: 2020 2020 7374 6172 7473 6563 733d 2e30      startsecs=.0
+00008d40: 3129 0d0a 2020 2020 2020 2020 7063 6f6e  1)..        pcon
+00008d50: 6669 6732 203d 2044 756d 6d79 5043 6f6e  fig2 = DummyPCon
+00008d60: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
+00008d70: 6f63 6573 7332 272c 205f 5f66 696c 655f  ocess2', __file_
+00008d80: 5f2c 2070 7269 6f72 6974 793d 322c 0d0a  _, priority=2,..
+00008d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008db0: 7374 6172 7473 6563 733d 2e30 3129 0d0a  startsecs=.01)..
+00008dc0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00008dd0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+00008de0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+00008df0: 7074 696f 6e73 2c20 2766 6f6f 272c 0d0a  ptions, 'foo',..
+00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008e20: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00008e30: 636f 6e66 6967 312c 2070 636f 6e66 6967  config1, pconfig
+00008e40: 3229 0d0a 2020 2020 2020 2020 6672 6f6d  2)..        from
+00008e50: 2073 7570 6572 7669 736f 722e 7072 6f63   supervisor.proc
+00008e60: 6573 7320 696d 706f 7274 2050 726f 6365  ess import Proce
+00008e70: 7373 5374 6174 6573 0d0a 2020 2020 2020  ssStates..      
+00008e80: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
+00008e90: 745f 7072 6f63 6174 7472 2827 7072 6f63  t_procattr('proc
+00008ea0: 6573 7331 272c 2027 7374 6174 6527 2c20  ess1', 'state', 
+00008eb0: 5072 6f63 6573 7353 7461 7465 732e 5354  ProcessStates.ST
+00008ec0: 4f50 5045 4429 0d0a 2020 2020 2020 2020  OPPED)..        
+00008ed0: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+00008ee0: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
+00008ef0: 7332 272c 2027 7374 6174 6527 2c20 5072  s2', 'state', Pr
+00008f00: 6f63 6573 7353 7461 7465 732e 5354 4f50  ocessStates.STOP
+00008f10: 5045 4429 0d0a 2020 2020 2020 2020 696e  PED)..        in
+00008f20: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00008f30: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00008f40: 6f72 6429 0d0a 2020 2020 2020 2020 696e  ord)..        in
+00008f50: 7465 7266 6163 652e 7374 6f70 5072 6f63  terface.stopProc
+00008f60: 6573 7328 2766 6f6f 3a2a 2729 0d0a 2020  ess('foo:*')..  
+00008f70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00008f80: 7445 7175 616c 2869 6e74 6572 6661 6365  tEqual(interface
+00008f90: 2e75 7064 6174 655f 7465 7874 2c20 2773  .update_text, 's
+00008fa0: 746f 7050 726f 6365 7373 4772 6f75 7027  topProcessGroup'
+00008fb0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+00008fc0: 745f 7374 6f70 416c 6c50 726f 6365 7373  t_stopAllProcess
+00008fd0: 6573 2873 656c 6629 3a0d 0a20 2020 2020  es(self):..     
+00008fe0: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+00008ff0: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+00009000: 2020 2020 2070 636f 6e66 6967 3120 3d20       pconfig1 = 
+00009010: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+00009020: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
+00009030: 2c20 272f 6269 6e2f 666f 6f27 2c20 7072  , '/bin/foo', pr
+00009040: 696f 7269 7479 3d31 290d 0a20 2020 2020  iority=1)..     
+00009050: 2020 2070 636f 6e66 6967 3220 3d20 4475     pconfig2 = Du
+00009060: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
+00009070: 6e73 2c20 2770 726f 6365 7373 3227 2c20  ns, 'process2', 
+00009080: 272f 6269 6e2f 666f 6f32 272c 2070 7269  '/bin/foo2', pri
+00009090: 6f72 6974 793d 3229 0d0a 2020 2020 2020  ority=2)..      
+000090a0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+000090b0: 722e 7072 6f63 6573 7320 696d 706f 7274  r.process import
+000090c0: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
+000090d0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000090e0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+000090f0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+00009100: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
+00009110: 636f 6e66 6967 312c 0d0a 2020 2020 2020  config1,..      
+00009120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009140: 2020 2020 2020 2020 2070 636f 6e66 6967           pconfig
+00009150: 3229 0d0a 2020 2020 2020 2020 7375 7065  2)..        supe
+00009160: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
+00009170: 6174 7472 2827 7072 6f63 6573 7331 272c  attr('process1',
+00009180: 2027 7374 6174 6527 2c20 5072 6f63 6573   'state', Proces
+00009190: 7353 7461 7465 732e 5255 4e4e 494e 4729  sStates.RUNNING)
+000091a0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+000091b0: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
+000091c0: 7472 2827 7072 6f63 6573 7332 272c 2027  tr('process2', '
+000091d0: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
+000091e0: 7461 7465 732e 5255 4e4e 494e 4729 0d0a  tates.RUNNING)..
+000091f0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00009200: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00009210: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+00009220: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
+00009230: 203d 2069 6e74 6572 6661 6365 2e73 746f   = interface.sto
+00009240: 7041 6c6c 5072 6f63 6573 7365 7328 290d  pAllProcesses().
+00009250: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00009260: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
+00009270: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
+00009280: 2027 7374 6f70 416c 6c50 726f 6365 7373   'stopAllProcess
+00009290: 6573 2729 0d0a 2020 2020 2020 2020 6672  es')..        fr
+000092a0: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
+000092b0: 706f 7274 2068 7474 700d 0a20 2020 2020  port http..     
+000092c0: 2020 2076 616c 7565 203d 2068 7474 702e     value = http.
+000092d0: 4e4f 545f 444f 4e45 5f59 4554 0d0a 2020  NOT_DONE_YET..  
+000092e0: 2020 2020 2020 7768 696c 6520 313a 0d0a        while 1:..
+000092f0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00009300: 6520 3d20 6361 6c6c 6261 636b 2829 0d0a  e = callback()..
+00009310: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00009320: 616c 7565 2069 7320 6e6f 7420 6874 7470  alue is not http
+00009330: 2e4e 4f54 5f44 4f4e 455f 5945 543a 0d0a  .NOT_DONE_YET:..
+00009340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009350: 6272 6561 6b0d 0a0d 0a20 2020 2020 2020  break....       
+00009360: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00009370: 2e78 6d6c 7270 6320 696d 706f 7274 2046  .xmlrpc import F
+00009380: 6175 6c74 730d 0a20 2020 2020 2020 2073  aults..        s
+00009390: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000093a0: 7661 6c75 652c 205b 0d0a 2020 2020 2020  value, [..      
+000093b0: 2020 2020 2020 7b27 7374 6174 7573 273a        {'status':
+000093c0: 2046 6175 6c74 732e 5355 4343 4553 532c   Faults.SUCCESS,
+000093d0: 0d0a 2020 2020 2020 2020 2020 2020 2027  ..             '
+000093e0: 6772 6f75 7027 3a20 2766 6f6f 272c 0d0a  group': 'foo',..
+000093f0: 2020 2020 2020 2020 2020 2020 2027 6e61               'na
+00009400: 6d65 273a 2027 7072 6f63 6573 7331 272c  me': 'process1',
+00009410: 0d0a 2020 2020 2020 2020 2020 2020 2027  ..             '
+00009420: 6465 7363 7269 7074 696f 6e27 3a20 274f  description': 'O
+00009430: 4b27 7d2c 0d0a 0d0a 2020 2020 2020 2020  K'},....        
+00009440: 2020 2020 7b27 7374 6174 7573 273a 2046      {'status': F
+00009450: 6175 6c74 732e 5355 4343 4553 532c 0d0a  aults.SUCCESS,..
+00009460: 2020 2020 2020 2020 2020 2020 2027 6772               'gr
+00009470: 6f75 7027 3a20 2766 6f6f 272c 0d0a 2020  oup': 'foo',..  
+00009480: 2020 2020 2020 2020 2020 2027 6e61 6d65             'name
+00009490: 273a 2027 7072 6f63 6573 7332 272c 0d0a  ': 'process2',..
+000094a0: 2020 2020 2020 2020 2020 2020 2027 6465               'de
+000094b0: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
+000094c0: 7d2c 0d0a 2020 2020 2020 2020 5d29 0d0a  },..        ])..
+000094d0: 2020 2020 2020 2020 7072 6f63 6573 7331          process1
+000094e0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
+000094f0: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
+00009500: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
+00009510: 7072 6f63 6573 7331 275d 0d0a 2020 2020  process1']..    
+00009520: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00009530: 7175 616c 2870 726f 6365 7373 312e 7374  qual(process1.st
+00009540: 6f70 5f63 616c 6c65 642c 2054 7275 6529  op_called, True)
+00009550: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+00009560: 7332 203d 2073 7570 6572 7669 736f 7264  s2 = supervisord
+00009570: 2e70 726f 6365 7373 5f67 726f 7570 735b  .process_groups[
+00009580: 2766 6f6f 275d 2e70 726f 6365 7373 6573  'foo'].processes
+00009590: 5b27 7072 6f63 6573 7332 275d 0d0a 2020  ['process2']..  
+000095a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000095b0: 7445 7175 616c 2870 726f 6365 7373 322e  tEqual(process2.
+000095c0: 7374 6f70 5f63 616c 6c65 642c 2054 7275  stop_called, Tru
+000095d0: 6529 0d0a 0d0a 2020 2020 6465 6620 7465  e)....    def te
+000095e0: 7374 5f73 746f 7041 6c6c 5072 6f63 6573  st_stopAllProces
+000095f0: 7365 735f 6e6f 7761 6974 2873 656c 6629  ses_nowait(self)
+00009600: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
+00009610: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00009620: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+00009630: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
+00009640: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+00009650: 726f 6365 7373 3127 2c20 5f5f 6669 6c65  rocess1', __file
+00009660: 5f5f 2c20 7072 696f 7269 7479 3d31 290d  __, priority=1).
+00009670: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+00009680: 3220 3d20 4475 6d6d 7950 436f 6e66 6967  2 = DummyPConfig
+00009690: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+000096a0: 7373 3227 2c20 5f5f 6669 6c65 5f5f 2c20  ss2', __file__, 
+000096b0: 7072 696f 7269 7479 3d32 290d 0a20 2020  priority=2)..   
+000096c0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+000096d0: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
+000096e0: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+000096f0: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
+00009700: 6669 6731 2c0d 0a20 2020 2020 2020 2020  fig1,..         
+00009710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009730: 2020 2020 2020 7063 6f6e 6669 6732 290d        pconfig2).
+00009740: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+00009750: 7065 7276 6973 6f72 2e70 726f 6365 7373  pervisor.process
+00009760: 2069 6d70 6f72 7420 5072 6f63 6573 7353   import ProcessS
+00009770: 7461 7465 730d 0a20 2020 2020 2020 2073  tates..        s
+00009780: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+00009790: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
+000097a0: 3127 2c20 2773 7461 7465 272c 2050 726f  1', 'state', Pro
+000097b0: 6365 7373 5374 6174 6573 2e52 554e 4e49  cessStates.RUNNI
+000097c0: 4e47 290d 0a20 2020 2020 2020 2073 7570  NG)..        sup
+000097d0: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
+000097e0: 6361 7474 7228 2770 726f 6365 7373 3227  cattr('process2'
+000097f0: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
+00009800: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
+00009810: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
+00009820: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
+00009830: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
+00009840: 290d 0a20 2020 2020 2020 2063 616c 6c62  )..        callb
+00009850: 6163 6b20 3d20 696e 7465 7266 6163 652e  ack = interface.
+00009860: 7374 6f70 416c 6c50 726f 6365 7373 6573  stopAllProcesses
+00009870: 2877 6169 743d 4661 6c73 6529 0d0a 2020  (wait=False)..  
+00009880: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00009890: 7669 736f 722e 786d 6c72 7063 2069 6d70  visor.xmlrpc imp
+000098a0: 6f72 7420 4661 756c 7473 0d0a 0d0a 2020  ort Faults....  
+000098b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000098c0: 7445 7175 616c 280d 0a20 2020 2020 2020  tEqual(..       
+000098d0: 2020 2020 2063 616c 6c62 6163 6b28 292c       callback(),
+000098e0: 0d0a 2020 2020 2020 2020 2020 2020 5b7b  ..            [{
+000098f0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+00009900: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+00009910: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
+00009920: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
+00009930: 2020 2020 2020 2020 2764 6573 6372 6970          'descrip
+00009940: 7469 6f6e 273a 2027 4f4b 272c 0d0a 2020  tion': 'OK',..  
+00009950: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+00009960: 6527 3a20 2770 726f 6365 7373 3127 7d2c  e': 'process1'},
+00009970: 0d0a 2020 2020 2020 2020 2020 2020 207b  ..             {
+00009980: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+00009990: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+000099a0: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
+000099b0: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
+000099c0: 2020 2020 2020 2020 2764 6573 6372 6970          'descrip
+000099d0: 7469 6f6e 273a 2027 4f4b 272c 0d0a 2020  tion': 'OK',..  
+000099e0: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+000099f0: 6527 3a20 2770 726f 6365 7373 3227 7d0d  e': 'process2'}.
+00009a00: 0a20 2020 2020 2020 2020 2020 2020 5d0d  .             ].
+00009a10: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00009a20: 2020 6465 6620 7465 7374 5f73 6967 6e61    def test_signa
+00009a30: 6c50 726f 6365 7373 5f77 6974 685f 7369  lProcess_with_si
+00009a40: 676e 616c 5f6e 756d 6265 7228 7365 6c66  gnal_number(self
+00009a50: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
+00009a60: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+00009a70: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
+00009a80: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
+00009a90: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
+00009aa0: 6f6f 272c 2027 2f62 696e 2f66 6f6f 2729  oo', '/bin/foo')
+00009ab0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00009ac0: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
+00009ad0: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
+00009ae0: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
+00009af0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
+00009b00: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
+00009b10: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+00009b20: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
+00009b30: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00009b40: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
+00009b50: 7228 2766 6f6f 272c 2027 7374 6174 6527  r('foo', 'state'
+00009b60: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
+00009b70: 5255 4e4e 494e 4729 0d0a 0d0a 2020 2020  RUNNING)....    
+00009b80: 2020 2020 7369 6720 3d20 7369 676e 616c      sig = signal
+00009b90: 2e53 4947 4142 5254 0d0a 2020 2020 2020  .SIGABRT..      
+00009ba0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+00009bb0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+00009bc0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+00009bd0: 2020 7265 7375 6c74 203d 2069 6e74 6572    result = inter
+00009be0: 6661 6365 2e73 6967 6e61 6c50 726f 6365  face.signalProce
+00009bf0: 7373 2827 666f 6f27 2c20 7369 6729 0d0a  ss('foo', sig)..
+00009c00: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00009c10: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
+00009c20: 6661 6365 2e75 7064 6174 655f 7465 7874  face.update_text
+00009c30: 2c20 2773 6967 6e61 6c50 726f 6365 7373  , 'signalProcess
+00009c40: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+00009c50: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
+00009c60: 756c 742c 2054 7275 6529 0d0a 2020 2020  ult, True)..    
+00009c70: 2020 2020 7020 3d20 7375 7065 7276 6973      p = supervis
+00009c80: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
+00009c90: 7073 5b73 7570 6572 7669 736f 7264 2e67  ps[supervisord.g
+00009ca0: 726f 7570 5f6e 616d 655d 2e70 726f 6365  roup_name].proce
+00009cb0: 7373 6573 5b27 666f 6f27 5d0d 0a20 2020  sses['foo']..   
+00009cc0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00009cd0: 4571 7561 6c28 702e 7365 6e74 5f73 6967  Equal(p.sent_sig
+00009ce0: 6e61 6c2c 2073 6967 290d 0a0d 0a20 2020  nal, sig)....   
+00009cf0: 2064 6566 2074 6573 745f 7369 676e 616c   def test_signal
+00009d00: 5072 6f63 6573 735f 7769 7468 5f73 6967  Process_with_sig
+00009d10: 6e61 6c5f 6e61 6d65 2873 656c 6629 3a0d  nal_name(self):.
+00009d20: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00009d30: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+00009d40: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+00009d50: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
+00009d60: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
+00009d70: 2c20 272f 6269 6e2f 666f 6f27 290d 0a20  , '/bin/foo').. 
+00009d80: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+00009d90: 7276 6973 6f72 2e70 726f 6365 7373 2069  rvisor.process i
+00009da0: 6d70 6f72 7420 5072 6f63 6573 7353 7461  mport ProcessSta
+00009db0: 7465 730d 0a20 2020 2020 2020 2073 7570  tes..        sup
+00009dc0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
+00009dd0: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
+00009de0: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
+00009df0: 6f27 2c20 7063 6f6e 6669 6729 0d0a 2020  o', pconfig)..  
+00009e00: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00009e10: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
+00009e20: 666f 6f27 2c20 2773 7461 7465 272c 2050  foo', 'state', P
+00009e30: 726f 6365 7373 5374 6174 6573 2e52 554e  rocessStates.RUN
+00009e40: 4e49 4e47 290d 0a0d 0a20 2020 2020 2020  NING)....       
+00009e50: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00009e60: 2e64 6174 6174 7970 6573 2069 6d70 6f72  .datatypes impor
+00009e70: 7420 7369 676e 616c 5f6e 756d 6265 720d  t signal_number.
+00009e80: 0a20 2020 2020 2020 2073 6967 6e61 6d65  .        signame
+00009e90: 203d 2027 7465 726d 270d 0a20 2020 2020   = 'term'..     
+00009ea0: 2020 2073 6967 6e75 6d20 3d20 7369 676e     signum = sign
+00009eb0: 616c 5f6e 756d 6265 7228 7369 676e 616d  al_number(signam
+00009ec0: 6529 0d0a 0d0a 2020 2020 2020 2020 696e  e)....        in
+00009ed0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00009ee0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00009ef0: 6f72 6429 0d0a 2020 2020 2020 2020 7265  ord)..        re
+00009f00: 7375 6c74 203d 2069 6e74 6572 6661 6365  sult = interface
+00009f10: 2e73 6967 6e61 6c50 726f 6365 7373 2827  .signalProcess('
+00009f20: 666f 6f27 2c20 7369 676e 616d 6529 0d0a  foo', signame)..
+00009f30: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00009f40: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
+00009f50: 6661 6365 2e75 7064 6174 655f 7465 7874  face.update_text
+00009f60: 2c20 2773 6967 6e61 6c50 726f 6365 7373  , 'signalProcess
+00009f70: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+00009f80: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
+00009f90: 756c 742c 2054 7275 6529 0d0a 2020 2020  ult, True)..    
+00009fa0: 2020 2020 7020 3d20 7375 7065 7276 6973      p = supervis
+00009fb0: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
+00009fc0: 7073 5b73 7570 6572 7669 736f 7264 2e67  ps[supervisord.g
+00009fd0: 726f 7570 5f6e 616d 655d 2e70 726f 6365  roup_name].proce
+00009fe0: 7373 6573 5b27 666f 6f27 5d0d 0a20 2020  sses['foo']..   
+00009ff0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000a000: 4571 7561 6c28 702e 7365 6e74 5f73 6967  Equal(p.sent_sig
+0000a010: 6e61 6c2c 2073 6967 6e75 6d29 0d0a 0d0a  nal, signum)....
+0000a020: 2020 2020 6465 6620 7465 7374 5f73 6967      def test_sig
+0000a030: 6e61 6c50 726f 6365 7373 5f73 746f 7070  nalProcess_stopp
+0000a040: 696e 6728 7365 6c66 293a 0d0a 2020 2020  ing(self):..    
+0000a050: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+0000a060: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+0000a070: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
+0000a080: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+0000a090: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
+0000a0a0: 696e 2f66 6f6f 2729 0d0a 2020 2020 2020  in/foo')..      
+0000a0b0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+0000a0c0: 722e 7072 6f63 6573 7320 696d 706f 7274  r.process import
+0000a0d0: 2050 726f 6365 7373 5374 6174 6573 0d0a   ProcessStates..
+0000a0e0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000a0f0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+0000a100: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+0000a110: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
+0000a120: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+0000a130: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
+0000a140: 5f70 726f 6361 7474 7228 2766 6f6f 272c  _procattr('foo',
+0000a150: 2027 7374 6174 6527 2c20 5072 6f63 6573   'state', Proces
+0000a160: 7353 7461 7465 732e 5354 4f50 5049 4e47  sStates.STOPPING
+0000a170: 290d 0a0d 0a20 2020 2020 2020 2069 6e74  )....        int
+0000a180: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+0000a190: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+0000a1a0: 7264 290d 0a20 2020 2020 2020 2072 6573  rd)..        res
+0000a1b0: 756c 7420 3d20 696e 7465 7266 6163 652e  ult = interface.
+0000a1c0: 7369 676e 616c 5072 6f63 6573 7328 2766  signalProcess('f
+0000a1d0: 6f6f 272c 2073 6967 6e61 6c2e 5349 4742  oo', signal.SIGB
+0000a1e0: 5245 414b 290d 0a0d 0a20 2020 2020 2020  REAK)....       
+0000a1f0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000a200: 6c28 696e 7465 7266 6163 652e 7570 6461  l(interface.upda
+0000a210: 7465 5f74 6578 742c 2027 7369 676e 616c  te_text, 'signal
+0000a220: 5072 6f63 6573 7327 290d 0a20 2020 2020  Process')..     
+0000a230: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000a240: 7561 6c28 7265 7375 6c74 2c20 5472 7565  ual(result, True
+0000a250: 290d 0a20 2020 2020 2020 2070 203d 2073  )..        p = s
+0000a260: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
+0000a270: 7373 5f67 726f 7570 735b 7375 7065 7276  ss_groups[superv
+0000a280: 6973 6f72 642e 6772 6f75 705f 6e61 6d65  isord.group_name
+0000a290: 5d2e 7072 6f63 6573 7365 735b 2766 6f6f  ].processes['foo
+0000a2a0: 275d 0d0a 2020 2020 2020 2020 7365 6c66  ']..        self
+0000a2b0: 2e61 7373 6572 7445 7175 616c 2870 2e73  .assertEqual(p.s
+0000a2c0: 656e 745f 7369 676e 616c 2c20 7369 676e  ent_signal, sign
+0000a2d0: 616c 2e53 4947 4252 4541 4b29 0d0a 0d0a  al.SIGBREAK)....
+0000a2e0: 2020 2020 6465 6620 7465 7374 5f73 6967      def test_sig
+0000a2f0: 6e61 6c50 726f 6365 7373 5f62 6164 7369  nalProcess_badsi
+0000a300: 676e 616c 2873 656c 6629 3a0d 0a20 2020  gnal(self):..   
+0000a310: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+0000a320: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+0000a330: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
+0000a340: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
+0000a350: 7469 6f6e 732c 2027 666f 6f27 2c20 272f  tions, 'foo', '/
+0000a360: 6269 6e2f 666f 6f27 290d 0a20 2020 2020  bin/foo')..     
+0000a370: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+0000a380: 6f72 2e70 726f 6365 7373 2069 6d70 6f72  or.process impor
+0000a390: 7420 5072 6f63 6573 7353 7461 7465 730d  t ProcessStates.
+0000a3a0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+0000a3b0: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+0000a3c0: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+0000a3d0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
+0000a3e0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
+0000a3f0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+0000a400: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
+0000a410: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+0000a420: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
+0000a430: 7228 2766 6f6f 272c 2027 7374 6174 6527  r('foo', 'state'
+0000a440: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
+0000a450: 5255 4e4e 494e 4729 0d0a 2020 2020 2020  RUNNING)..      
+0000a460: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+0000a470: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+0000a480: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+0000a490: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+0000a4a0: 4345 7272 6f72 280d 0a20 2020 2020 2020  CError(..       
+0000a4b0: 2020 2020 2078 6d6c 7270 632e 4661 756c       xmlrpc.Faul
+0000a4c0: 7473 2e42 4144 5f53 4947 4e41 4c2c 2069  ts.BAD_SIGNAL, i
+0000a4d0: 6e74 6572 6661 6365 2e73 6967 6e61 6c50  nterface.signalP
+0000a4e0: 726f 6365 7373 2c20 2766 6f6f 272c 2031  rocess, 'foo', 1
+0000a4f0: 3535 0d0a 2020 2020 2020 2020 290d 0a0d  55..        )...
+0000a500: 0a20 2020 2064 6566 2074 6573 745f 7369  .    def test_si
+0000a510: 676e 616c 5072 6f63 6573 735f 6e6f 7472  gnalProcess_notr
+0000a520: 756e 6e69 6e67 2873 656c 6629 3a0d 0a20  unning(self):.. 
+0000a530: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+0000a540: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+0000a550: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+0000a560: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
+0000a570: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+0000a580: 272f 6269 6e2f 666f 6f27 290d 0a20 2020  '/bin/foo')..   
+0000a590: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
+0000a5a0: 6973 6f72 2e70 726f 6365 7373 2069 6d70  isor.process imp
+0000a5b0: 6f72 7420 5072 6f63 6573 7353 7461 7465  ort ProcessState
+0000a5c0: 730d 0a20 2020 2020 2020 2066 726f 6d20  s..        from 
+0000a5d0: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
+0000a5e0: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
+0000a5f0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
+0000a600: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
+0000a610: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
+0000a620: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
+0000a630: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0000a640: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
+0000a650: 7474 7228 2766 6f6f 272c 2027 7374 6174  ttr('foo', 'stat
+0000a660: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
+0000a670: 732e 5354 4f50 5045 4429 0d0a 2020 2020  s.STOPPED)..    
+0000a680: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+0000a690: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+0000a6a0: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
+0000a6b0: 2020 2020 7365 6c66 2e5f 6173 7365 7274      self._assert
+0000a6c0: 5250 4345 7272 6f72 280d 0a20 2020 2020  RPCError(..     
+0000a6d0: 2020 2020 2020 2078 6d6c 7270 632e 4661         xmlrpc.Fa
+0000a6e0: 756c 7473 2e4e 4f54 5f52 554e 4e49 4e47  ults.NOT_RUNNING
+0000a6f0: 2c20 696e 7465 7266 6163 652e 7369 676e  , interface.sign
+0000a700: 616c 5072 6f63 6573 732c 2027 666f 6f27  alProcess, 'foo'
+0000a710: 2c20 7369 676e 616c 2e53 4947 5445 524d  , signal.SIGTERM
+0000a720: 0d0a 2020 2020 2020 2020 290d 0a0d 0a0d  ..        ).....
+0000a730: 0a20 2020 2064 6566 2074 6573 745f 7369  .    def test_si
+0000a740: 676e 616c 5072 6f63 6573 735f 7369 676e  gnalProcess_sign
+0000a750: 616c 5f72 6574 7572 6e73 5f6d 6573 7361  al_returns_messa
+0000a760: 6765 2873 656c 6629 3a0d 0a20 2020 2020  ge(self):..     
+0000a770: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+0000a780: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+0000a790: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
+0000a7a0: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+0000a7b0: 6f6e 732c 2027 666f 6f27 2c20 272f 6269  ons, 'foo', '/bi
+0000a7c0: 6e2f 666f 6f27 290d 0a20 2020 2020 2020  n/foo')..       
+0000a7d0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+0000a7e0: 2e70 726f 6365 7373 2069 6d70 6f72 7420  .process import 
+0000a7f0: 5072 6f63 6573 7353 7461 7465 730d 0a20  ProcessStates.. 
+0000a800: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+0000a810: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
+0000a820: 6c72 7063 0d0a 2020 2020 2020 2020 7375  lrpc..        su
+0000a830: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
+0000a840: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
+0000a850: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
+0000a860: 6f6f 272c 2070 636f 6e66 6967 290d 0a20  oo', pconfig).. 
+0000a870: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+0000a880: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
+0000a890: 2766 6f6f 272c 2027 7374 6174 6527 2c20  'foo', 'state', 
+0000a8a0: 5072 6f63 6573 7353 7461 7465 732e 5255  ProcessStates.RU
+0000a8b0: 4e4e 494e 4729 0d0a 0d0a 2020 2020 2020  NNING)....      
+0000a8c0: 2020 6465 6620 7369 676e 616c 7265 7475    def signalretu
+0000a8d0: 726e 2873 6967 293a 0d0a 2020 2020 2020  rn(sig):..      
+0000a8e0: 2020 2020 2020 7265 7475 726e 2027 6d73        return 'ms
+0000a8f0: 6727 0d0a 0d0a 2020 2020 2020 2020 7067  g'....        pg
+0000a900: 726f 7570 203d 2073 7570 6572 7669 736f  roup = superviso
+0000a910: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
+0000a920: 735b 7375 7065 7276 6973 6f72 642e 6772  s[supervisord.gr
+0000a930: 6f75 705f 6e61 6d65 5d0d 0a20 2020 2020  oup_name]..     
+0000a940: 2020 2070 726f 6320 3d20 7067 726f 7570     proc = pgroup
+0000a950: 2e70 726f 6365 7373 6573 5b27 666f 6f27  .processes['foo'
+0000a960: 5d0d 0a20 2020 2020 2020 2070 726f 632e  ]..        proc.
+0000a970: 7369 676e 616c 203d 2073 6967 6e61 6c72  signal = signalr
+0000a980: 6574 7572 6e0d 0a20 2020 2020 2020 2069  eturn..        i
+0000a990: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+0000a9a0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+0000a9b0: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
+0000a9c0: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
+0000a9d0: 726f 7228 0d0a 2020 2020 2020 2020 2020  ror(..          
+0000a9e0: 2020 786d 6c72 7063 2e46 6175 6c74 732e    xmlrpc.Faults.
+0000a9f0: 4641 494c 4544 2c20 696e 7465 7266 6163  FAILED, interfac
+0000aa00: 652e 7369 676e 616c 5072 6f63 6573 732c  e.signalProcess,
+0000aa10: 2027 666f 6f27 2c20 7369 676e 616c 2e53   'foo', signal.S
+0000aa20: 4947 5445 524d 0d0a 2020 2020 2020 2020  IGTERM..        
+0000aa30: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+0000aa40: 745f 7369 676e 616c 5072 6f63 6573 735f  t_signalProcess_
+0000aa50: 7769 7468 6772 6f75 7028 7365 6c66 293a  withgroup(self):
+0000aa60: 0d0a 2020 2020 2020 2020 2222 2220 5465  ..        """ Te
+0000aa70: 7374 2074 6861 7420 7365 6e64 696e 6720  st that sending 
+0000aa80: 666f 6f3a 2a20 776f 726b 7320 2222 220d  foo:* works """.
+0000aa90: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+0000aaa0: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+0000aab0: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+0000aac0: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
+0000aad0: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
+0000aae0: 6365 7373 3127 2c20 272f 6269 6e2f 666f  cess1', '/bin/fo
+0000aaf0: 6f27 290d 0a20 2020 2020 2020 2070 636f  o')..        pco
+0000ab00: 6e66 6967 3220 3d20 4475 6d6d 7950 436f  nfig2 = DummyPCo
+0000ab10: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+0000ab20: 726f 6365 7373 3227 2c20 272f 6269 6e2f  rocess2', '/bin/
+0000ab30: 666f 6f32 2729 0d0a 2020 2020 2020 2020  foo2')..        
+0000ab40: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
+0000ab50: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
+0000ab60: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
+0000ab70: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+0000ab80: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+0000ab90: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+0000aba0: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+0000abb0: 6e66 6967 312c 0d0a 2020 2020 2020 2020  nfig1,..        
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000abe0: 2020 2020 2020 2070 636f 6e66 6967 3229         pconfig2)
+0000abf0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+0000ac00: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
+0000ac10: 7472 2827 7072 6f63 6573 7331 272c 2027  tr('process1', '
+0000ac20: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
+0000ac30: 7461 7465 732e 5255 4e4e 494e 4729 0d0a  tates.RUNNING)..
+0000ac40: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000ac50: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+0000ac60: 2827 7072 6f63 6573 7332 272c 2027 7374  ('process2', 'st
+0000ac70: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
+0000ac80: 7465 732e 5354 4f50 5049 4e47 290d 0a20  tes.STOPPING).. 
+0000ac90: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+0000aca0: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+0000acb0: 2873 7570 6572 7669 736f 7264 290d 0a0d  (supervisord)...
+0000acc0: 0a20 2020 2020 2020 2073 6967 203d 2073  .        sig = s
+0000acd0: 6967 6e61 6c2e 4354 524c 5f43 5f45 5645  ignal.CTRL_C_EVE
+0000ace0: 4e54 0d0a 2020 2020 2020 2020 7265 7375  NT..        resu
+0000acf0: 6c74 203d 2069 6e74 6572 6661 6365 2e73  lt = interface.s
+0000ad00: 6967 6e61 6c50 726f 6365 7373 2827 666f  ignalProcess('fo
+0000ad10: 6f3a 2a27 2c20 7369 6729 0d0a 2020 2020  o:*', sig)..    
+0000ad20: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000ad30: 7175 616c 2869 6e74 6572 6661 6365 2e75  qual(interface.u
+0000ad40: 7064 6174 655f 7465 7874 2c20 2773 6967  pdate_text, 'sig
+0000ad50: 6e61 6c50 726f 6365 7373 4772 6f75 7027  nalProcessGroup'
+0000ad60: 290d 0a0d 0a20 2020 2020 2020 2023 2053  )....        # S
+0000ad70: 6f72 7420 736f 2077 6520 6765 7420 6465  ort so we get de
+0000ad80: 7465 726d 696e 6973 7469 6320 7265 7375  terministic resu
+0000ad90: 6c74 7320 6465 7370 6974 6520 6861 7368  lts despite hash
+0000ada0: 2072 616e 646f 6d69 7a61 7469 6f6e 0d0a   randomization..
+0000adb0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+0000adc0: 2073 6f72 7465 6428 7265 7375 6c74 2c20   sorted(result, 
+0000add0: 6b65 793d 6f70 6572 6174 6f72 2e69 7465  key=operator.ite
+0000ade0: 6d67 6574 7465 7228 276e 616d 6527 2929  mgetter('name'))
+0000adf0: 0d0a 0d0a 2020 2020 2020 2020 6672 6f6d  ....        from
+0000ae00: 2073 7570 6572 7669 736f 722e 786d 6c72   supervisor.xmlr
+0000ae10: 7063 2069 6d70 6f72 7420 4661 756c 7473  pc import Faults
+0000ae20: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000ae30: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
+0000ae40: 742c 205b 0d0a 2020 2020 2020 2020 2020  t, [..          
+0000ae50: 2020 7b27 7374 6174 7573 273a 2046 6175    {'status': Fau
+0000ae60: 6c74 732e 5355 4343 4553 532c 0d0a 2020  lts.SUCCESS,..  
+0000ae70: 2020 2020 2020 2020 2020 2027 6772 6f75             'grou
+0000ae80: 7027 3a20 2766 6f6f 272c 0d0a 2020 2020  p': 'foo',..    
+0000ae90: 2020 2020 2020 2020 2027 6e61 6d65 273a           'name':
+0000aea0: 2027 7072 6f63 6573 7331 272c 0d0a 2020   'process1',..  
+0000aeb0: 2020 2020 2020 2020 2020 2027 6465 7363             'desc
+0000aec0: 7269 7074 696f 6e27 3a20 274f 4b27 7d2c  ription': 'OK'},
+0000aed0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000aee0: 7b27 7374 6174 7573 273a 2046 6175 6c74  {'status': Fault
+0000aef0: 732e 5355 4343 4553 532c 0d0a 2020 2020  s.SUCCESS,..    
+0000af00: 2020 2020 2020 2020 2027 6772 6f75 7027           'group'
+0000af10: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
+0000af20: 2020 2020 2020 2027 6e61 6d65 273a 2027         'name': '
+0000af30: 7072 6f63 6573 7332 272c 0d0a 2020 2020  process2',..    
+0000af40: 2020 2020 2020 2020 2027 6465 7363 7269           'descri
+0000af50: 7074 696f 6e27 3a20 274f 4b27 7d2c 0d0a  ption': 'OK'},..
+0000af60: 2020 2020 2020 2020 5d29 0d0a 2020 2020          ])..    
+0000af70: 2020 2020 7072 6f63 6573 7331 203d 2073      process1 = s
+0000af80: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
+0000af90: 7373 5f67 726f 7570 735b 2766 6f6f 275d  ss_groups['foo']
+0000afa0: 2e70 726f 6365 7373 6573 5b27 7072 6f63  .processes['proc
+0000afb0: 6573 7331 275d 0d0a 2020 2020 2020 2020  ess1']..        
+0000afc0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000afd0: 2870 726f 6365 7373 312e 7365 6e74 5f73  (process1.sent_s
+0000afe0: 6967 6e61 6c2c 2073 6967 290d 0a20 2020  ignal, sig)..   
+0000aff0: 2020 2020 2070 726f 6365 7373 3220 3d20       process2 = 
+0000b000: 7375 7065 7276 6973 6f72 642e 7072 6f63  supervisord.proc
+0000b010: 6573 735f 6772 6f75 7073 5b27 666f 6f27  ess_groups['foo'
+0000b020: 5d2e 7072 6f63 6573 7365 735b 2770 726f  ].processes['pro
+0000b030: 6365 7373 3227 5d0d 0a20 2020 2020 2020  cess2']..       
+0000b040: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000b050: 6c28 7072 6f63 6573 7332 2e73 656e 745f  l(process2.sent_
+0000b060: 7369 676e 616c 2c20 7369 6729 0d0a 0d0a  signal, sig)....
+0000b070: 2020 2020 6465 6620 7465 7374 5f73 6967      def test_sig
+0000b080: 6e61 6c50 726f 6365 7373 4772 6f75 705f  nalProcessGroup_
+0000b090: 7769 7468 5f73 6967 6e61 6c5f 6e75 6d62  with_signal_numb
+0000b0a0: 6572 2873 656c 6629 3a0d 0a20 2020 2020  er(self):..     
+0000b0b0: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+0000b0c0: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+0000b0d0: 2020 2020 2070 636f 6e66 6967 3120 3d20       pconfig1 = 
+0000b0e0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+0000b0f0: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
+0000b100: 2c20 272f 6269 6e2f 666f 6f27 290d 0a20  , '/bin/foo').. 
+0000b110: 2020 2020 2020 2070 636f 6e66 6967 3220         pconfig2 
+0000b120: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
+0000b130: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+0000b140: 3227 2c20 272f 6269 6e2f 666f 6f32 2729  2', '/bin/foo2')
+0000b150: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+0000b160: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
+0000b170: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
+0000b180: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
+0000b190: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
+0000b1a0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
+0000b1b0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+0000b1c0: 2766 6f6f 272c 2070 636f 6e66 6967 312c  'foo', pconfig1,
+0000b1d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b200: 2070 636f 6e66 6967 3229 0d0a 2020 2020   pconfig2)..    
+0000b210: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+0000b220: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
+0000b230: 6f63 6573 7331 272c 2027 7374 6174 6527  ocess1', 'state'
+0000b240: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
+0000b250: 5255 4e4e 494e 4729 0d0a 2020 2020 2020  RUNNING)..      
+0000b260: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
+0000b270: 745f 7072 6f63 6174 7472 2827 7072 6f63  t_procattr('proc
+0000b280: 6573 7332 272c 2027 7374 6174 6527 2c20  ess2', 'state', 
+0000b290: 5072 6f63 6573 7353 7461 7465 732e 5255  ProcessStates.RU
+0000b2a0: 4e4e 494e 4729 0d0a 2020 2020 2020 2020  NNING)..        
+0000b2b0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+0000b2c0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+0000b2d0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+0000b2e0: 7369 6720 3d20 7369 676e 616c 2e53 4947  sig = signal.SIG
+0000b2f0: 4142 5254 0d0a 2020 2020 2020 2020 7265  ABRT..        re
 0000b300: 7375 6c74 203d 2069 6e74 6572 6661 6365  sult = interface
 0000b310: 2e73 6967 6e61 6c50 726f 6365 7373 4772  .signalProcessGr
-0000b320: 6f75 7028 2766 6f6f 272c 2073 6967 6e61  oup('foo', signa
-0000b330: 6d65 290d 0a0d 0a20 2020 2020 2020 2073  me)....        s
-0000b340: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000b350: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
-0000b360: 5f74 6578 742c 2027 7369 676e 616c 5072  _text, 'signalPr
-0000b370: 6f63 6573 7347 726f 7570 2729 0d0a 2020  ocessGroup')..  
-0000b380: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-0000b390: 7669 736f 722e 786d 6c72 7063 2069 6d70  visor.xmlrpc imp
-0000b3a0: 6f72 7420 4661 756c 7473 0d0a 2020 2020  ort Faults..    
-0000b3b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000b3c0: 7175 616c 2872 6573 756c 742c 205b 0d0a  qual(result, [..
-0000b3d0: 2020 2020 2020 2020 2020 2020 7b27 7374              {'st
-0000b3e0: 6174 7573 273a 2046 6175 6c74 732e 5355  atus': Faults.SU
-0000b3f0: 4343 4553 532c 0d0a 2020 2020 2020 2020  CCESS,..        
-0000b400: 2020 2020 2027 6772 6f75 7027 3a20 2766       'group': 'f
-0000b410: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-0000b420: 2020 2027 6e61 6d65 273a 2027 7072 6f63     'name': 'proc
-0000b430: 6573 7331 272c 0d0a 2020 2020 2020 2020  ess1',..        
-0000b440: 2020 2020 2027 6465 7363 7269 7074 696f       'descriptio
-0000b450: 6e27 3a20 274f 4b27 7d2c 0d0a 2020 2020  n': 'OK'},..    
-0000b460: 2020 2020 5d29 0d0a 0d0a 2020 2020 2020      ])....      
-0000b470: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
-0000b480: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-0000b490: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-0000b4a0: 726f 6365 7373 6573 5b27 7072 6f63 6573  rocesses['proces
-0000b4b0: 7331 275d 0d0a 2020 2020 2020 2020 7365  s1']..        se
-0000b4c0: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-0000b4d0: 726f 6365 7373 312e 7365 6e74 5f73 6967  rocess1.sent_sig
-0000b4e0: 6e61 6c2c 2073 6967 6e75 6d29 0d0a 0d0a  nal, signum)....
-0000b4f0: 2020 2020 6465 6620 7465 7374 5f73 6967      def test_sig
-0000b500: 6e61 6c50 726f 6365 7373 4772 6f75 705f  nalProcessGroup_
-0000b510: 6e6f 7375 6368 6772 6f75 7028 7365 6c66  nosuchgroup(self
-0000b520: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
-0000b530: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
-0000b540: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
-0000b550: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
-0000b560: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
-0000b570: 2020 2020 2070 636f 6e66 6967 3120 3d20       pconfig1 = 
-0000b580: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-0000b590: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
-0000b5a0: 2c20 272f 6269 6e2f 666f 6f27 290d 0a20  , '/bin/foo').. 
-0000b5b0: 2020 2020 2020 2070 636f 6e66 6967 3220         pconfig2 
-0000b5c0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-0000b5d0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
-0000b5e0: 3227 2c20 272f 6269 6e2f 666f 6f32 2729  2', '/bin/foo2')
-0000b5f0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-0000b600: 7570 6572 7669 736f 722e 7072 6f63 6573  upervisor.proces
-0000b610: 7320 696d 706f 7274 2050 726f 6365 7373  s import Process
-0000b620: 5374 6174 6573 0d0a 2020 2020 2020 2020  States..        
-0000b630: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-0000b640: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-0000b650: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-0000b660: 2766 6f6f 272c 2070 636f 6e66 6967 312c  'foo', pconfig1,
-0000b670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b6a0: 2070 636f 6e66 6967 3229 0d0a 2020 2020   pconfig2)..    
-0000b6b0: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
-0000b6c0: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
-0000b6d0: 6f63 6573 7331 272c 2027 7374 6174 6527  ocess1', 'state'
-0000b6e0: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
-0000b6f0: 5255 4e4e 494e 4729 0d0a 2020 2020 2020  RUNNING)..      
-0000b700: 2020 7375 7065 7276 6973 6f72 642e 7365    supervisord.se
-0000b710: 745f 7072 6f63 6174 7472 2827 7072 6f63  t_procattr('proc
-0000b720: 6573 7332 272c 2027 7374 6174 6527 2c20  ess2', 'state', 
-0000b730: 5072 6f63 6573 7353 7461 7465 732e 5255  ProcessStates.RU
-0000b740: 4e4e 494e 4729 0d0a 2020 2020 2020 2020  NNING)..        
-0000b750: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
-0000b760: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
-0000b770: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
-0000b780: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
-0000b790: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
-0000b7a0: 7473 2e42 4144 5f4e 414d 452c 0d0a 2020  ts.BAD_NAME,..  
-0000b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7c0: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
-0000b7d0: 6661 6365 2e73 6967 6e61 6c50 726f 6365  face.signalProce
-0000b7e0: 7373 4772 6f75 702c 2027 6261 7227 2c20  ssGroup, 'bar', 
-0000b7f0: 3130 0d0a 2020 2020 2020 2020 2020 2020  10..            
-0000b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b810: 2029 0d0a 0d0a 2020 2020 6465 6620 7465   )....    def te
-0000b820: 7374 5f73 6967 6e61 6c41 6c6c 5072 6f63  st_signalAllProc
-0000b830: 6573 7365 735f 7769 7468 5f73 6967 6e61  esses_with_signa
-0000b840: 6c5f 6e75 6d62 6572 2873 656c 6629 3a0d  l_number(self):.
-0000b850: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-0000b860: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-0000b870: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-0000b880: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
-0000b890: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-0000b8a0: 6365 7373 3127 2c20 272f 6269 6e2f 666f  cess1', '/bin/fo
-0000b8b0: 6f27 290d 0a20 2020 2020 2020 2070 636f  o')..        pco
-0000b8c0: 6e66 6967 3220 3d20 4475 6d6d 7950 436f  nfig2 = DummyPCo
-0000b8d0: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
-0000b8e0: 726f 6365 7373 3227 2c20 272f 6269 6e2f  rocess2', '/bin/
-0000b8f0: 666f 6f32 2729 0d0a 2020 2020 2020 2020  foo2')..        
-0000b900: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
-0000b910: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
-0000b920: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
-0000b930: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-0000b940: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
-0000b950: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-0000b960: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
-0000b970: 6e66 6967 312c 0d0a 2020 2020 2020 2020  nfig1,..        
-0000b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9a0: 2020 2020 2020 2070 636f 6e66 6967 3229         pconfig2)
-0000b9b0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-0000b9c0: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
-0000b9d0: 7472 2827 7072 6f63 6573 7331 272c 2027  tr('process1', '
-0000b9e0: 7374 6174 6527 2c20 5072 6f63 6573 7353  state', ProcessS
-0000b9f0: 7461 7465 732e 5255 4e4e 494e 4729 0d0a  tates.RUNNING)..
-0000ba00: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-0000ba10: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-0000ba20: 2827 7072 6f63 6573 7332 272c 2027 7374  ('process2', 'st
-0000ba30: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
-0000ba40: 7465 732e 5255 4e4e 494e 4729 0d0a 2020  tes.RUNNING)..  
-0000ba50: 2020 2020 2020 7369 675f 7365 6e74 203d        sig_sent =
-0000ba60: 2073 6967 6e61 6c2e 5349 4754 4552 4d0d   signal.SIGTERM.
-0000ba70: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-0000ba80: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-0000ba90: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-0000baa0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-0000bab0: 3d20 696e 7465 7266 6163 652e 7369 676e  = interface.sign
-0000bac0: 616c 416c 6c50 726f 6365 7373 6573 2873  alAllProcesses(s
-0000bad0: 6967 5f73 656e 7429 0d0a 2020 2020 2020  ig_sent)..      
-0000bae0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000baf0: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
-0000bb00: 6174 655f 7465 7874 2c20 2773 6967 6e61  ate_text, 'signa
-0000bb10: 6c41 6c6c 5072 6f63 6573 7365 7327 290d  lAllProcesses').
-0000bb20: 0a0d 0a20 2020 2020 2020 2023 2053 6f72  ...        # Sor
-0000bb30: 7420 736f 2077 6520 6765 7420 6465 7465  t so we get dete
-0000bb40: 726d 696e 6973 7469 6320 7265 7375 6c74  rministic result
-0000bb50: 7320 6465 7370 6974 6520 6861 7368 2072  s despite hash r
-0000bb60: 616e 646f 6d69 7a61 7469 6f6e 0d0a 2020  andomization..  
-0000bb70: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0000bb80: 6f72 7465 6428 7265 7375 6c74 2c20 6b65  orted(result, ke
-0000bb90: 793d 6f70 6572 6174 6f72 2e69 7465 6d67  y=operator.itemg
-0000bba0: 6574 7465 7228 276e 616d 6527 2929 0d0a  etter('name'))..
-0000bbb0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-0000bbc0: 7570 6572 7669 736f 722e 786d 6c72 7063  upervisor.xmlrpc
-0000bbd0: 2069 6d70 6f72 7420 4661 756c 7473 0d0a   import Faults..
-0000bbe0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000bbf0: 6572 7445 7175 616c 2872 6573 756c 742c  ertEqual(result,
-0000bc00: 205b 0d0a 2020 2020 2020 2020 2020 2020   [..            
-0000bc10: 7b27 7374 6174 7573 273a 2046 6175 6c74  {'status': Fault
-0000bc20: 732e 5355 4343 4553 532c 0d0a 2020 2020  s.SUCCESS,..    
-0000bc30: 2020 2020 2020 2020 2027 6772 6f75 7027           'group'
-0000bc40: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-0000bc50: 2020 2020 2020 2027 6e61 6d65 273a 2027         'name': '
-0000bc60: 7072 6f63 6573 7331 272c 0d0a 2020 2020  process1',..    
-0000bc70: 2020 2020 2020 2020 2027 6465 7363 7269           'descri
-0000bc80: 7074 696f 6e27 3a20 274f 4b27 7d2c 0d0a  ption': 'OK'},..
-0000bc90: 0d0a 2020 2020 2020 2020 2020 2020 7b27  ..            {'
-0000bca0: 7374 6174 7573 273a 2046 6175 6c74 732e  status': Faults.
-0000bcb0: 5355 4343 4553 532c 0d0a 2020 2020 2020  SUCCESS,..      
-0000bcc0: 2020 2020 2020 2027 6772 6f75 7027 3a20         'group': 
-0000bcd0: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
-0000bce0: 2020 2020 2027 6e61 6d65 273a 2027 7072       'name': 'pr
-0000bcf0: 6f63 6573 7332 272c 0d0a 2020 2020 2020  ocess2',..      
-0000bd00: 2020 2020 2020 2027 6465 7363 7269 7074         'descript
-0000bd10: 696f 6e27 3a20 274f 4b27 7d2c 0d0a 2020  ion': 'OK'},..  
-0000bd20: 2020 2020 2020 5d29 0d0a 2020 2020 2020        ])..      
-0000bd30: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
-0000bd40: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-0000bd50: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-0000bd60: 726f 6365 7373 6573 5b27 7072 6f63 6573  rocesses['proces
-0000bd70: 7331 275d 0d0a 2020 2020 2020 2020 7365  s1']..        se
-0000bd80: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-0000bd90: 726f 6365 7373 312e 7365 6e74 5f73 6967  rocess1.sent_sig
-0000bda0: 6e61 6c2c 2073 6967 5f73 656e 7429 0d0a  nal, sig_sent)..
-0000bdb0: 2020 2020 2020 2020 7072 6f63 6573 7332          process2
-0000bdc0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
-0000bdd0: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
-0000bde0: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
-0000bdf0: 7072 6f63 6573 7332 275d 0d0a 2020 2020  process2']..    
-0000be00: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000be10: 7175 616c 2870 726f 6365 7373 322e 7365  qual(process2.se
-0000be20: 6e74 5f73 6967 6e61 6c2c 2073 6967 5f73  nt_signal, sig_s
-0000be30: 656e 7429 0d0a 0d0a 2020 2020 6465 6620  ent)....    def 
-0000be40: 7465 7374 5f73 6967 6e61 6c41 6c6c 5072  test_signalAllPr
-0000be50: 6f63 6573 7365 735f 7769 7468 5f73 6967  ocesses_with_sig
-0000be60: 6e61 6c5f 6e61 6d65 2873 656c 6629 3a0d  nal_name(self):.
-0000be70: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-0000be80: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-0000be90: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-0000bea0: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
-0000beb0: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-0000bec0: 6365 7373 3127 2c20 272f 6269 6e2f 666f  cess1', '/bin/fo
-0000bed0: 6f27 290d 0a20 2020 2020 2020 2066 726f  o')..        fro
-0000bee0: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
-0000bef0: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
-0000bf00: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
-0000bf10: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-0000bf20: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
-0000bf30: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
-0000bf40: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
-0000bf50: 6731 290d 0a20 2020 2020 2020 2073 7570  g1)..        sup
-0000bf60: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
-0000bf70: 6361 7474 7228 2770 726f 6365 7373 3127  cattr('process1'
-0000bf80: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
-0000bf90: 7373 5374 6174 6573 2e52 554e 4e49 4e47  ssStates.RUNNING
-0000bfa0: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-0000bfb0: 6d20 7375 7065 7276 6973 6f72 2e64 6174  m supervisor.dat
-0000bfc0: 6174 7970 6573 2069 6d70 6f72 7420 7369  atypes import si
-0000bfd0: 676e 616c 5f6e 756d 6265 720d 0a0d 0a20  gnal_number.... 
-0000bfe0: 2020 2020 2020 2073 6967 6e61 6d65 203d         signame =
-0000bff0: 2027 6162 7274 270d 0a20 2020 2020 2020   'abrt'..       
-0000c000: 2073 6967 6e75 6d20 3d20 7369 676e 616c   signum = signal
-0000c010: 5f6e 756d 6265 7228 7369 676e 616d 6529  _number(signame)
-0000c020: 0d0a 0d0a 2020 2020 2020 2020 696e 7465  ....        inte
-0000c030: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-0000c040: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-0000c050: 6429 0d0a 2020 2020 2020 2020 7265 7375  d)..        resu
-0000c060: 6c74 203d 2069 6e74 6572 6661 6365 2e73  lt = interface.s
-0000c070: 6967 6e61 6c41 6c6c 5072 6f63 6573 7365  ignalAllProcesse
-0000c080: 7328 7369 676e 616d 6529 0d0a 2020 2020  s(signame)..    
-0000c090: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000c0a0: 7175 616c 2869 6e74 6572 6661 6365 2e75  qual(interface.u
-0000c0b0: 7064 6174 655f 7465 7874 2c20 2773 6967  pdate_text, 'sig
-0000c0c0: 6e61 6c41 6c6c 5072 6f63 6573 7365 7327  nalAllProcesses'
-0000c0d0: 290d 0a0d 0a20 2020 2020 2020 2066 726f  )....        fro
-0000c0e0: 6d20 7375 7065 7276 6973 6f72 2e78 6d6c  m supervisor.xml
-0000c0f0: 7270 6320 696d 706f 7274 2046 6175 6c74  rpc import Fault
-0000c100: 730d 0a20 2020 2020 2020 2073 656c 662e  s..        self.
-0000c110: 6173 7365 7274 4571 7561 6c28 7265 7375  assertEqual(resu
-0000c120: 6c74 2c20 5b0d 0a20 2020 2020 2020 2020  lt, [..         
-0000c130: 2020 207b 2773 7461 7475 7327 3a20 4661     {'status': Fa
-0000c140: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
-0000c150: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
-0000c160: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
-0000c170: 2020 2020 2020 2020 2020 276e 616d 6527            'name'
-0000c180: 3a20 2770 726f 6365 7373 3127 2c0d 0a20  : 'process1',.. 
-0000c190: 2020 2020 2020 2020 2020 2020 2764 6573              'des
-0000c1a0: 6372 6970 7469 6f6e 273a 2027 4f4b 277d  cription': 'OK'}
-0000c1b0: 2c0d 0a20 2020 2020 2020 205d 290d 0a20  ,..        ]).. 
-0000c1c0: 2020 2020 2020 2070 726f 6365 7373 3120         process1 
-0000c1d0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
-0000c1e0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
-0000c1f0: 6f27 5d2e 7072 6f63 6573 7365 735b 2770  o'].processes['p
-0000c200: 726f 6365 7373 3127 5d0d 0a20 2020 2020  rocess1']..     
-0000c210: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000c220: 7561 6c28 7072 6f63 6573 7331 2e73 656e  ual(process1.sen
-0000c230: 745f 7369 676e 616c 2c20 7369 676e 756d  t_signal, signum
-0000c240: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-0000c250: 745f 6765 7441 6c6c 436f 6e66 6967 496e  t_getAllConfigIn
-0000c260: 666f 2873 656c 6629 3a0d 0a20 2020 2020  fo(self):..     
-0000c270: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
-0000c280: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
-0000c290: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-0000c2a0: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
-0000c2b0: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
-0000c2c0: 2729 0d0a 0d0a 2020 2020 2020 2020 7063  ')....        pc
-0000c2d0: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
-0000c2e0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-0000c2f0: 7072 6f63 6573 7331 272c 205f 5f66 696c  process1', __fil
-0000c300: 655f 5f2c 0d0a 2020 2020 2020 2020 2020  e__,..          
-0000c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c320: 2020 2020 2020 7374 646f 7574 5f6c 6f67        stdout_log
-0000c330: 6669 6c65 3d41 7574 6f6d 6174 6963 2c0d  file=Automatic,.
-0000c340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c360: 2073 7464 6572 725f 6c6f 6766 696c 653d   stderr_logfile=
-0000c370: 4175 746f 6d61 7469 632c 0d0a 2020 2020  Automatic,..    
-0000c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c390: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-0000c3a0: 2020 2020 2020 2070 636f 6e66 6967 3220         pconfig2 
-0000c3b0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-0000c3c0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
-0000c3d0: 3227 2c20 5f5f 6669 6c65 5f5f 2c0d 0a20  2', __file__,.. 
-0000c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c3f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000c400: 7464 6f75 745f 6c6f 6766 696c 653d 4e6f  tdout_logfile=No
-0000c410: 6e65 2c0d 0a20 2020 2020 2020 2020 2020  ne,..           
-0000c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c430: 2020 2020 2073 7464 6572 725f 6c6f 6766       stderr_logf
-0000c440: 696c 653d 4e6f 6e65 2c0d 0a20 2020 2020  ile=None,..     
-0000c450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c460: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
-0000c470: 2020 2020 2020 6763 6f6e 6669 6720 3d20        gconfig = 
-0000c480: 4475 6d6d 7950 4772 6f75 7043 6f6e 6669  DummyPGroupConfi
-0000c490: 6728 6f70 7469 6f6e 732c 2027 6772 6f75  g(options, 'grou
-0000c4a0: 7031 272c 2070 636f 6e66 6967 733d 5b70  p1', pconfigs=[p
-0000c4b0: 636f 6e66 6967 312c 2070 636f 6e66 6967  config1, pconfig
-0000c4c0: 325d 290d 0a20 2020 2020 2020 2073 7570  2])..        sup
-0000c4d0: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-0000c4e0: 5f67 726f 7570 7320 3d20 7b27 6772 6f75  _groups = {'grou
-0000c4f0: 7031 273a 2044 756d 6d79 5072 6f63 6573  p1': DummyProces
-0000c500: 7347 726f 7570 2867 636f 6e66 6967 297d  sGroup(gconfig)}
-0000c510: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-0000c520: 6973 6f72 642e 6f70 7469 6f6e 732e 7072  isord.options.pr
-0000c530: 6f63 6573 735f 6772 6f75 705f 636f 6e66  ocess_group_conf
-0000c540: 6967 7320 3d20 5b67 636f 6e66 6967 5d0d  igs = [gconfig].
-0000c550: 0a0d 0a20 2020 2020 2020 2069 6e74 6572  ...        inter
-0000c560: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-0000c570: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-0000c580: 290d 0a20 2020 2020 2020 2063 6f6e 6669  )..        confi
-0000c590: 6773 203d 2069 6e74 6572 6661 6365 2e67  gs = interface.g
-0000c5a0: 6574 416c 6c43 6f6e 6669 6749 6e66 6f28  etAllConfigInfo(
-0000c5b0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000c5c0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000c5d0: 6967 735b 305d 5b27 6175 746f 7374 6172  igs[0]['autostar
-0000c5e0: 7427 5d2c 2054 7275 6529 0d0a 2020 2020  t'], True)..    
-0000c5f0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000c600: 7175 616c 2863 6f6e 6669 6773 5b30 5d5b  qual(configs[0][
-0000c610: 2773 746f 7077 6169 7473 6563 7327 5d2c  'stopwaitsecs'],
-0000c620: 2031 3029 0d0a 2020 2020 2020 2020 7365   10)..        se
-0000c630: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000c640: 6f6e 6669 6773 5b30 5d5b 2773 7464 6f75  onfigs[0]['stdou
-0000c650: 745f 6576 656e 7473 5f65 6e61 626c 6564  t_events_enabled
-0000c660: 275d 2c20 4661 6c73 6529 0d0a 2020 2020  '], False)..    
-0000c670: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000c680: 7175 616c 2863 6f6e 6669 6773 5b30 5d5b  qual(configs[0][
-0000c690: 2773 7464 6572 725f 6576 656e 7473 5f65  'stderr_events_e
-0000c6a0: 6e61 626c 6564 275d 2c20 4661 6c73 6529  nabled'], False)
-0000c6b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000c6c0: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000c6d0: 6773 5b30 5d5b 2767 726f 7570 275d 2c20  gs[0]['group'], 
-0000c6e0: 2767 726f 7570 3127 290d 0a20 2020 2020  'group1')..     
-0000c6f0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000c700: 7561 6c28 636f 6e66 6967 735b 305d 5b27  ual(configs[0]['
-0000c710: 7374 646f 7574 5f63 6170 7475 7265 5f6d  stdout_capture_m
-0000c720: 6178 6279 7465 7327 5d2c 2030 290d 0a20  axbytes'], 0).. 
-0000c730: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000c740: 7274 4571 7561 6c28 636f 6e66 6967 735b  rtEqual(configs[
-0000c750: 305d 5b27 6e61 6d65 275d 2c20 2770 726f  0]['name'], 'pro
-0000c760: 6365 7373 3127 290d 0a20 2020 2020 2020  cess1')..       
-0000c770: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000c780: 6c28 636f 6e66 6967 735b 305d 5b27 7374  l(configs[0]['st
-0000c790: 6f70 7369 676e 616c 275d 2c20 3135 290d  opsignal'], 15).
-0000c7a0: 0a20 2020 2020 2020 2023 7365 6c66 2e61  .        #self.a
-0000c7b0: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000c7c0: 6773 5b30 5d5b 2773 7464 6572 725f 7379  gs[0]['stderr_sy
-0000c7d0: 736c 6f67 275d 2c20 4661 6c73 6529 0d0a  slog'], False)..
-0000c7e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000c7f0: 6572 7445 7175 616c 2863 6f6e 6669 6773  ertEqual(configs
-0000c800: 5b30 5d5b 2773 7464 6f75 745f 6c6f 6766  [0]['stdout_logf
-0000c810: 696c 655f 6d61 7862 7974 6573 275d 2c20  ile_maxbytes'], 
-0000c820: 3029 0d0a 2020 2020 2020 2020 7365 6c66  0)..        self
-0000c830: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
-0000c840: 6669 6773 5b30 5d5b 2767 726f 7570 5f70  figs[0]['group_p
-0000c850: 7269 6f27 5d2c 2039 3939 290d 0a20 2020  rio'], 999)..   
-0000c860: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000c870: 4571 7561 6c28 636f 6e66 6967 735b 305d  Equal(configs[0]
-0000c880: 5b27 6b69 6c6c 6173 6772 6f75 7027 5d2c  ['killasgroup'],
-0000c890: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-0000c8a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000c8b0: 6c28 636f 6e66 6967 735b 305d 5b27 7072  l(configs[0]['pr
-0000c8c0: 6f63 6573 735f 7072 696f 275d 2c20 3939  ocess_prio'], 99
-0000c8d0: 3929 0d0a 2020 2020 2020 2020 2373 656c  9)..        #sel
-0000c8e0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
-0000c8f0: 6e66 6967 735b 305d 5b27 7374 646f 7574  nfigs[0]['stdout
-0000c900: 5f73 7973 6c6f 6727 5d2c 2046 616c 7365  _syslog'], False
-0000c910: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000c920: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000c930: 6967 735b 305d 5b27 7374 6465 7272 5f6c  igs[0]['stderr_l
-0000c940: 6f67 6669 6c65 5f6d 6178 6279 7465 7327  ogfile_maxbytes'
-0000c950: 5d2c 2030 290d 0a20 2020 2020 2020 2073  ], 0)..        s
-0000c960: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000c970: 636f 6e66 6967 735b 305d 5b27 7374 6172  configs[0]['star
-0000c980: 7473 6563 7327 5d2c 2031 3029 0d0a 2020  tsecs'], 10)..  
-0000c990: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000c9a0: 7445 7175 616c 2863 6f6e 6669 6773 5b30  tEqual(configs[0
-0000c9b0: 5d5b 2772 6564 6972 6563 745f 7374 6465  ]['redirect_stde
-0000c9c0: 7272 275d 2c20 4661 6c73 6529 0d0a 2020  rr'], False)..  
-0000c9d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000c9e0: 7445 7175 616c 2863 6f6e 6669 6773 5b30  tEqual(configs[0
-0000c9f0: 5d5b 2773 7464 6f75 745f 6c6f 6766 696c  ]['stdout_logfil
-0000ca00: 6527 5d2c 2027 6175 746f 2729 0d0a 2020  e'], 'auto')..  
-0000ca10: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000ca20: 7445 7175 616c 2863 6f6e 6669 6773 5b30  tEqual(configs[0
-0000ca30: 5d5b 2765 7869 7463 6f64 6573 275d 2c20  ]['exitcodes'], 
-0000ca40: 2830 2c29 290d 0a20 2020 2020 2020 2073  (0,))..        s
-0000ca50: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000ca60: 636f 6e66 6967 735b 305d 5b27 7374 6465  configs[0]['stde
-0000ca70: 7272 5f63 6170 7475 7265 5f6d 6178 6279  rr_capture_maxby
-0000ca80: 7465 7327 5d2c 2030 290d 0a20 2020 2020  tes'], 0)..     
-0000ca90: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000caa0: 7561 6c28 636f 6e66 6967 735b 305d 5b27  ual(configs[0]['
-0000cab0: 7374 6172 7472 6574 7269 6573 275d 2c20  startretries'], 
-0000cac0: 3939 3929 0d0a 2020 2020 2020 2020 7365  999)..        se
-0000cad0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000cae0: 6f6e 6669 6773 5b30 5d5b 2773 7464 6572  onfigs[0]['stder
-0000caf0: 725f 6c6f 6766 696c 655f 6d61 7862 7974  r_logfile_maxbyt
-0000cb00: 6573 275d 2c20 3029 0d0a 2020 2020 2020  es'], 0)..      
-0000cb10: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000cb20: 616c 2863 6f6e 6669 6773 5b30 5d5b 2769  al(configs[0]['i
-0000cb30: 6e75 7365 275d 2c20 5472 7565 290d 0a20  nuse'], True).. 
-0000cb40: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000cb50: 7274 4571 7561 6c28 636f 6e66 6967 735b  rtEqual(configs[
-0000cb60: 305d 5b27 7374 6465 7272 5f6c 6f67 6669  0]['stderr_logfi
-0000cb70: 6c65 275d 2c20 2761 7574 6f27 290d 0a20  le'], 'auto').. 
-0000cb80: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000cb90: 7274 4571 7561 6c28 636f 6e66 6967 735b  rtEqual(configs[
-0000cba0: 305d 5b27 7374 646f 7574 5f6c 6f67 6669  0]['stdout_logfi
-0000cbb0: 6c65 5f62 6163 6b75 7073 275d 2c20 3029  le_backups'], 0)
-0000cbc0: 0d0a 2020 2020 2020 2020 6173 7365 7274  ..        assert
-0000cbd0: 2027 7465 7374 5f72 7063 696e 7465 7266   'test_rpcinterf
-0000cbe0: 6163 6573 2e70 7927 2069 6e20 636f 6e66  aces.py' in conf
-0000cbf0: 6967 735b 305d 5b27 636f 6d6d 616e 6427  igs[0]['command'
-0000cc00: 5d0d 0a0d 0a20 2020 2020 2020 2073 656c  ]....        sel
-0000cc10: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
-0000cc20: 6e66 6967 735b 315d 5b27 6175 746f 7374  nfigs[1]['autost
-0000cc30: 6172 7427 5d2c 2054 7275 6529 0d0a 2020  art'], True)..  
-0000cc40: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000cc50: 7445 7175 616c 2863 6f6e 6669 6773 5b31  tEqual(configs[1
-0000cc60: 5d5b 2773 746f 7077 6169 7473 6563 7327  ]['stopwaitsecs'
-0000cc70: 5d2c 2031 3029 0d0a 2020 2020 2020 2020  ], 10)..        
-0000cc80: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000cc90: 2863 6f6e 6669 6773 5b31 5d5b 2773 7464  (configs[1]['std
-0000cca0: 6f75 745f 6576 656e 7473 5f65 6e61 626c  out_events_enabl
-0000ccb0: 6564 275d 2c20 4661 6c73 6529 0d0a 2020  ed'], False)..  
-0000ccc0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000ccd0: 7445 7175 616c 2863 6f6e 6669 6773 5b31  tEqual(configs[1
-0000cce0: 5d5b 2773 7464 6572 725f 6576 656e 7473  ]['stderr_events
-0000ccf0: 5f65 6e61 626c 6564 275d 2c20 4661 6c73  _enabled'], Fals
-0000cd00: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
-0000cd10: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
-0000cd20: 6669 6773 5b31 5d5b 2767 726f 7570 275d  figs[1]['group']
-0000cd30: 2c20 2767 726f 7570 3127 290d 0a20 2020  , 'group1')..   
-0000cd40: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000cd50: 4571 7561 6c28 636f 6e66 6967 735b 315d  Equal(configs[1]
-0000cd60: 5b27 7374 646f 7574 5f63 6170 7475 7265  ['stdout_capture
-0000cd70: 5f6d 6178 6279 7465 7327 5d2c 2030 290d  _maxbytes'], 0).
-0000cd80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000cd90: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
-0000cda0: 735b 315d 5b27 6e61 6d65 275d 2c20 2770  s[1]['name'], 'p
-0000cdb0: 726f 6365 7373 3227 290d 0a20 2020 2020  rocess2')..     
-0000cdc0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000cdd0: 7561 6c28 636f 6e66 6967 735b 315d 5b27  ual(configs[1]['
-0000cde0: 7374 6f70 7369 676e 616c 275d 2c20 3135  stopsignal'], 15
-0000cdf0: 290d 0a20 2020 2020 2020 2023 2073 656c  )..        # sel
-0000ce00: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
-0000ce10: 6e66 6967 735b 315d 5b27 7374 6465 7272  nfigs[1]['stderr
-0000ce20: 5f73 7973 6c6f 6727 5d2c 2046 616c 7365  _syslog'], False
-0000ce30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000ce40: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000ce50: 6967 735b 315d 5b27 7374 646f 7574 5f6c  igs[1]['stdout_l
-0000ce60: 6f67 6669 6c65 5f6d 6178 6279 7465 7327  ogfile_maxbytes'
-0000ce70: 5d2c 2030 290d 0a20 2020 2020 2020 2073  ], 0)..        s
-0000ce80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000ce90: 636f 6e66 6967 735b 315d 5b27 6772 6f75  configs[1]['grou
-0000cea0: 705f 7072 696f 275d 2c20 3939 3929 0d0a  p_prio'], 999)..
-0000ceb0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000cec0: 6572 7445 7175 616c 2863 6f6e 6669 6773  ertEqual(configs
-0000ced0: 5b31 5d5b 276b 696c 6c61 7367 726f 7570  [1]['killasgroup
-0000cee0: 275d 2c20 4661 6c73 6529 0d0a 2020 2020  '], False)..    
-0000cef0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000cf00: 7175 616c 2863 6f6e 6669 6773 5b31 5d5b  qual(configs[1][
-0000cf10: 2770 726f 6365 7373 5f70 7269 6f27 5d2c  'process_prio'],
-0000cf20: 2039 3939 290d 0a20 2020 2020 2020 2023   999)..        #
-0000cf30: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000cf40: 6c28 636f 6e66 6967 735b 315d 5b27 7374  l(configs[1]['st
-0000cf50: 646f 7574 5f73 7973 6c6f 6727 5d2c 2046  dout_syslog'], F
-0000cf60: 616c 7365 290d 0a20 2020 2020 2020 2073  alse)..        s
-0000cf70: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000cf80: 636f 6e66 6967 735b 315d 5b27 7374 6465  configs[1]['stde
-0000cf90: 7272 5f6c 6f67 6669 6c65 5f6d 6178 6279  rr_logfile_maxby
-0000cfa0: 7465 7327 5d2c 2030 290d 0a20 2020 2020  tes'], 0)..     
-0000cfb0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000cfc0: 7561 6c28 636f 6e66 6967 735b 315d 5b27  ual(configs[1]['
-0000cfd0: 7374 6172 7473 6563 7327 5d2c 2031 3029  startsecs'], 10)
-0000cfe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000cff0: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000d000: 6773 5b31 5d5b 2772 6564 6972 6563 745f  gs[1]['redirect_
-0000d010: 7374 6465 7272 275d 2c20 4661 6c73 6529  stderr'], False)
-0000d020: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000d030: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000d040: 6773 5b31 5d5b 2773 7464 6f75 745f 6c6f  gs[1]['stdout_lo
-0000d050: 6766 696c 6527 5d2c 2027 6e6f 6e65 2729  gfile'], 'none')
-0000d060: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000d070: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000d080: 6773 5b31 5d5b 2765 7869 7463 6f64 6573  gs[1]['exitcodes
-0000d090: 275d 2c20 2830 2c29 290d 0a20 2020 2020  '], (0,))..     
-0000d0a0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000d0b0: 7561 6c28 636f 6e66 6967 735b 315d 5b27  ual(configs[1]['
-0000d0c0: 7374 6465 7272 5f63 6170 7475 7265 5f6d  stderr_capture_m
-0000d0d0: 6178 6279 7465 7327 5d2c 2030 290d 0a20  axbytes'], 0).. 
-0000d0e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000d0f0: 7274 4571 7561 6c28 636f 6e66 6967 735b  rtEqual(configs[
-0000d100: 315d 5b27 7374 6172 7472 6574 7269 6573  1]['startretries
-0000d110: 275d 2c20 3939 3929 0d0a 2020 2020 2020  '], 999)..      
-0000d120: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000d130: 616c 2863 6f6e 6669 6773 5b31 5d5b 2773  al(configs[1]['s
-0000d140: 7464 6572 725f 6c6f 6766 696c 655f 6d61  tderr_logfile_ma
-0000d150: 7862 7974 6573 275d 2c20 3029 0d0a 2020  xbytes'], 0)..  
-0000d160: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000d170: 7445 7175 616c 2863 6f6e 6669 6773 5b31  tEqual(configs[1
-0000d180: 5d5b 2769 6e75 7365 275d 2c20 5472 7565  ]['inuse'], True
-0000d190: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000d1a0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000d1b0: 6967 735b 315d 5b27 7374 6465 7272 5f6c  igs[1]['stderr_l
-0000d1c0: 6f67 6669 6c65 275d 2c20 276e 6f6e 6527  ogfile'], 'none'
-0000d1d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000d1e0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000d1f0: 6967 735b 315d 5b27 7374 646f 7574 5f6c  igs[1]['stdout_l
-0000d200: 6f67 6669 6c65 5f62 6163 6b75 7073 275d  ogfile_backups']
-0000d210: 2c20 3029 0d0a 2020 2020 2020 2020 6173  , 0)..        as
-0000d220: 7365 7274 2027 7465 7374 5f72 7063 696e  sert 'test_rpcin
-0000d230: 7465 7266 6163 6573 2e70 7927 2069 6e20  terfaces.py' in 
-0000d240: 636f 6e66 6967 735b 305d 5b27 636f 6d6d  configs[0]['comm
-0000d250: 616e 6427 5d0d 0a0d 0a20 2020 2064 6566  and']....    def
-0000d260: 2074 6573 745f 6765 7441 6c6c 436f 6e66   test_getAllConf
-0000d270: 6967 496e 666f 5f66 696c 7465 7273 5f74  igInfo_filters_t
-0000d280: 7970 6573 5f6e 6f74 5f63 6f6d 7061 7469  ypes_not_compati
-0000d290: 626c 655f 7769 7468 5f78 6d6c 7270 6328  ble_with_xmlrpc(
-0000d2a0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0000d2b0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-0000d2c0: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-0000d2d0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-0000d2e0: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-0000d2f0: 6f70 7469 6f6e 732c 2027 666f 6f27 290d  options, 'foo').
-0000d300: 0a0d 0a20 2020 2020 2020 2070 636f 6e66  ...        pconf
-0000d310: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
-0000d320: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-0000d330: 6365 7373 3127 2c20 5f5f 6669 6c65 5f5f  cess1', __file__
-0000d340: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-0000d350: 6967 3220 3d20 4475 6d6d 7950 436f 6e66  ig2 = DummyPConf
-0000d360: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-0000d370: 6365 7373 3227 2c20 5f5f 6669 6c65 5f5f  cess2', __file__
-0000d380: 290d 0a20 2020 2020 2020 2067 636f 6e66  )..        gconf
-0000d390: 6967 203d 2044 756d 6d79 5047 726f 7570  ig = DummyPGroup
-0000d3a0: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
-0000d3b0: 2767 726f 7570 3127 2c20 7063 6f6e 6669  'group1', pconfi
-0000d3c0: 6773 3d5b 7063 6f6e 6669 6731 2c20 7063  gs=[pconfig1, pc
-0000d3d0: 6f6e 6669 6732 5d29 0d0a 2020 2020 2020  onfig2])..      
-0000d3e0: 2020 7375 7065 7276 6973 6f72 642e 7072    supervisord.pr
-0000d3f0: 6f63 6573 735f 6772 6f75 7073 203d 207b  ocess_groups = {
-0000d400: 2767 726f 7570 3127 3a20 4475 6d6d 7950  'group1': DummyP
-0000d410: 726f 6365 7373 4772 6f75 7028 6763 6f6e  rocessGroup(gcon
-0000d420: 6669 6729 7d0d 0a20 2020 2020 2020 2073  fig)}..        s
-0000d430: 7570 6572 7669 736f 7264 2e6f 7074 696f  upervisord.optio
-0000d440: 6e73 2e70 726f 6365 7373 5f67 726f 7570  ns.process_group
-0000d450: 5f63 6f6e 6669 6773 203d 205b 6763 6f6e  _configs = [gcon
-0000d460: 6669 675d 0d0a 2020 2020 2020 2020 696e  fig]..        in
-0000d470: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-0000d480: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-0000d490: 6f72 6429 0d0a 0d0a 2020 2020 2020 2020  ord)....        
-0000d4a0: 756e 6d61 7273 6861 6c6c 6162 6c65 7320  unmarshallables 
-0000d4b0: 3d20 5b74 7970 6528 4e6f 6e65 295d 0d0a  = [type(None)]..
-0000d4c0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-0000d4d0: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
-0000d4e0: 2065 6e75 6d20 696d 706f 7274 2045 6e75   enum import Enu
-0000d4f0: 6d0d 0a20 2020 2020 2020 2020 2020 2075  m..            u
-0000d500: 6e6d 6172 7368 616c 6c61 626c 6573 2e61  nmarshallables.a
-0000d510: 7070 656e 6428 456e 756d 290d 0a20 2020  ppend(Enum)..   
-0000d520: 2020 2020 2065 7863 6570 7420 496d 706f       except Impo
-0000d530: 7274 4572 726f 723a 2023 2070 7974 686f  rtError: # pytho
-0000d540: 6e20 320d 0a20 2020 2020 2020 2020 2020  n 2..           
-0000d550: 2070 6173 730d 0a0d 0a20 2020 2020 2020   pass....       
-0000d560: 2066 6f72 2074 7970 2069 6e20 756e 6d61   for typ in unma
-0000d570: 7273 6861 6c6c 6162 6c65 733a 0d0a 2020  rshallables:..  
-0000d580: 2020 2020 2020 2020 2020 666f 7220 636f            for co
-0000d590: 6e66 6967 2069 6e20 696e 7465 7266 6163  nfig in interfac
-0000d5a0: 652e 6765 7441 6c6c 436f 6e66 6967 496e  e.getAllConfigIn
-0000d5b0: 666f 2829 3a0d 0a20 2020 2020 2020 2020  fo():..         
-0000d5c0: 2020 2020 2020 2066 6f72 206b 2c20 7620         for k, v 
-0000d5d0: 696e 2063 6f6e 6669 672e 6974 656d 7328  in config.items(
-0000d5e0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000d5f0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000d600: 6572 7446 616c 7365 2869 7369 6e73 7461  ertFalse(isinsta
-0000d610: 6e63 6528 762c 2074 7970 292c 206b 290d  nce(v, typ), k).
-0000d620: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-0000d630: 5f69 6e74 6572 7072 6574 5072 6f63 6573  _interpretProces
-0000d640: 7349 6e66 6f28 7365 6c66 293a 0d0a 2020  sInfo(self):..  
-0000d650: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-0000d660: 6420 3d20 4475 6d6d 7953 7570 6572 7669  d = DummySupervi
-0000d670: 736f 7228 290d 0a20 2020 2020 2020 2069  sor()..        i
-0000d680: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-0000d690: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-0000d6a0: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
-0000d6b0: 7461 7274 203d 205f 4e4f 5720 2d20 3130  tart = _NOW - 10
-0000d6c0: 300d 0a20 2020 2020 2020 2073 746f 7020  0..        stop 
-0000d6d0: 3d20 5f4e 4f57 202d 2031 0d0a 2020 2020  = _NOW - 1..    
-0000d6e0: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-0000d6f0: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
-0000d700: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
-0000d710: 0d0a 2020 2020 2020 2020 7275 6e6e 696e  ..        runnin
-0000d720: 6720 3d20 7b27 6e61 6d65 273a 2027 7275  g = {'name': 'ru
-0000d730: 6e6e 696e 6727 2c0d 0a20 2020 2020 2020  nning',..       
-0000d740: 2020 2020 2020 2020 2020 2020 2770 6964              'pid
-0000d750: 273a 2031 2c0d 0a20 2020 2020 2020 2020  ': 1,..         
-0000d760: 2020 2020 2020 2020 2020 2773 7461 7465            'state
-0000d770: 273a 2050 726f 6365 7373 5374 6174 6573  ': ProcessStates
-0000d780: 2e52 554e 4e49 4e47 2c0d 0a20 2020 2020  .RUNNING,..     
-0000d790: 2020 2020 2020 2020 2020 2020 2020 2773                's
-0000d7a0: 7461 7274 273a 2073 7461 7274 2c0d 0a20  tart': start,.. 
-0000d7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d7c0: 2020 2773 746f 7027 3a20 7374 6f70 2c0d    'stop': stop,.
-0000d7d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d7e0: 2020 2020 276e 6f77 273a 205f 4e4f 577d      'now': _NOW}
-0000d7f0: 0d0a 0d0a 2020 2020 2020 2020 6465 7363  ....        desc
-0000d800: 7269 7074 696f 6e20 3d20 696e 7465 7266  ription = interf
-0000d810: 6163 652e 5f69 6e74 6572 7072 6574 5072  ace._interpretPr
-0000d820: 6f63 6573 7349 6e66 6f28 7275 6e6e 696e  ocessInfo(runnin
-0000d830: 6729 0d0a 2020 2020 2020 2020 7365 6c66  g)..        self
-0000d840: 2e61 7373 6572 7445 7175 616c 2864 6573  .assertEqual(des
-0000d850: 6372 6970 7469 6f6e 2c20 2770 6964 2031  cription, 'pid 1
-0000d860: 2c20 7570 7469 6d65 2030 3a30 313a 3430  , uptime 0:01:40
-0000d870: 2729 0d0a 0d0a 2020 2020 2020 2020 6661  ')....        fa
-0000d880: 7461 6c20 3d20 7b27 6e61 6d65 273a 2027  tal = {'name': '
-0000d890: 6661 7461 6c27 2c0d 0a20 2020 2020 2020  fatal',..       
-0000d8a0: 2020 2020 2020 2020 2020 2770 6964 273a            'pid':
-0000d8b0: 2032 2c0d 0a20 2020 2020 2020 2020 2020   2,..           
-0000d8c0: 2020 2020 2020 2773 7461 7465 273a 2050        'state': P
-0000d8d0: 726f 6365 7373 5374 6174 6573 2e46 4154  rocessStates.FAT
-0000d8e0: 414c 2c0d 0a20 2020 2020 2020 2020 2020  AL,..           
-0000d8f0: 2020 2020 2020 2773 7461 7274 273a 2073        'start': s
-0000d900: 7461 7274 2c0d 0a20 2020 2020 2020 2020  tart,..         
-0000d910: 2020 2020 2020 2020 2773 746f 7027 3a20          'stop': 
-0000d920: 7374 6f70 2c0d 0a20 2020 2020 2020 2020  stop,..         
-0000d930: 2020 2020 2020 2020 276e 6f77 273a 205f          'now': _
-0000d940: 4e4f 572c 0d0a 2020 2020 2020 2020 2020  NOW,..          
-0000d950: 2020 2020 2020 2027 7370 6177 6e65 7272         'spawnerr
-0000d960: 273a 2027 486f 7365 6427 7d0d 0a0d 0a20  ': 'Hosed'}.... 
-0000d970: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0000d980: 6f6e 203d 2069 6e74 6572 6661 6365 2e5f  on = interface._
-0000d990: 696e 7465 7270 7265 7450 726f 6365 7373  interpretProcess
-0000d9a0: 496e 666f 2866 6174 616c 290d 0a20 2020  Info(fatal)..   
-0000d9b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000d9c0: 4571 7561 6c28 6465 7363 7269 7074 696f  Equal(descriptio
-0000d9d0: 6e2c 2027 486f 7365 6427 290d 0a0d 0a20  n, 'Hosed').... 
-0000d9e0: 2020 2020 2020 2066 6174 616c 3220 3d20         fatal2 = 
-0000d9f0: 7b27 6e61 6d65 273a 2027 6661 7461 6c27  {'name': 'fatal'
-0000da00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000da10: 2020 2020 2027 7069 6427 3a20 322c 0d0a       'pid': 2,..
-0000da20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000da30: 2020 2773 7461 7465 273a 2050 726f 6365    'state': Proce
-0000da40: 7373 5374 6174 6573 2e46 4154 414c 2c0d  ssStates.FATAL,.
-0000da50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000da60: 2020 2027 7374 6172 7427 3a20 7374 6172     'start': star
-0000da70: 742c 0d0a 2020 2020 2020 2020 2020 2020  t,..            
-0000da80: 2020 2020 2020 2773 746f 7027 3a20 7374        'stop': st
-0000da90: 6f70 2c0d 0a20 2020 2020 2020 2020 2020  op,..           
-0000daa0: 2020 2020 2020 2027 6e6f 7727 3a20 5f4e         'now': _N
-0000dab0: 4f57 2c0d 0a20 2020 2020 2020 2020 2020  OW,..           
-0000dac0: 2020 2020 2020 2027 7370 6177 6e65 7272         'spawnerr
-0000dad0: 273a 2027 272c 207d 0d0a 0d0a 2020 2020  ': '', }....    
-0000dae0: 2020 2020 6465 7363 7269 7074 696f 6e20      description 
-0000daf0: 3d20 696e 7465 7266 6163 652e 5f69 6e74  = interface._int
-0000db00: 6572 7072 6574 5072 6f63 6573 7349 6e66  erpretProcessInf
-0000db10: 6f28 6661 7461 6c32 290d 0a20 2020 2020  o(fatal2)..     
-0000db20: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000db30: 7561 6c28 6465 7363 7269 7074 696f 6e2c  ual(description,
-0000db40: 2027 756e 6b6e 6f77 6e20 6572 726f 7220   'unknown error 
-0000db50: 2874 7279 2022 7461 696c 2066 6174 616c  (try "tail fatal
-0000db60: 2229 2729 0d0a 0d0a 2020 2020 2020 2020  ")')....        
-0000db70: 7374 6f70 7065 6420 3d20 7b27 6e61 6d65  stopped = {'name
-0000db80: 273a 2027 7374 6f70 7065 6427 2c0d 0a20  ': 'stopped',.. 
-0000db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dba0: 2020 2770 6964 273a 2033 2c0d 0a20 2020    'pid': 3,..   
-0000dbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dbc0: 2773 7461 7465 273a 2050 726f 6365 7373  'state': Process
-0000dbd0: 5374 6174 6573 2e53 544f 5050 4544 2c0d  States.STOPPED,.
-0000dbe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000dbf0: 2020 2020 2773 7461 7274 273a 2073 7461      'start': sta
-0000dc00: 7274 2c0d 0a20 2020 2020 2020 2020 2020  rt,..           
-0000dc10: 2020 2020 2020 2020 2773 746f 7027 3a20          'stop': 
-0000dc20: 7374 6f70 2c0d 0a20 2020 2020 2020 2020  stop,..         
-0000dc30: 2020 2020 2020 2020 2020 276e 6f77 273a            'now':
-0000dc40: 205f 4e4f 572c 0d0a 2020 2020 2020 2020   _NOW,..        
-0000dc50: 2020 2020 2020 2020 2020 2027 7370 6177             'spaw
-0000dc60: 6e65 7272 273a 2027 272c 207d 0d0a 0d0a  nerr': '', }....
-0000dc70: 2020 2020 2020 2020 6465 7363 7269 7074          descript
-0000dc80: 696f 6e20 3d20 696e 7465 7266 6163 652e  ion = interface.
-0000dc90: 5f69 6e74 6572 7072 6574 5072 6f63 6573  _interpretProces
-0000dca0: 7349 6e66 6f28 7374 6f70 7065 6429 0d0a  sInfo(stopped)..
-0000dcb0: 2020 2020 2020 2020 6672 6f6d 2064 6174          from dat
-0000dcc0: 6574 696d 6520 696d 706f 7274 2064 6174  etime import dat
-0000dcd0: 6574 696d 650d 0a20 2020 2020 2020 2073  etime..        s
-0000dce0: 746f 7074 696d 6520 3d20 6461 7465 7469  toptime = dateti
-0000dcf0: 6d65 282a 7469 6d65 2e6c 6f63 616c 7469  me(*time.localti
-0000dd00: 6d65 2873 746f 7029 5b3a 375d 290d 0a20  me(stop)[:7]).. 
-0000dd10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000dd20: 7274 4571 7561 6c28 6465 7363 7269 7074  rtEqual(descript
-0000dd30: 696f 6e2c 2073 746f 7074 696d 652e 7374  ion, stoptime.st
-0000dd40: 7266 7469 6d65 285f 5449 4d45 464f 524d  rftime(_TIMEFORM
-0000dd50: 4154 2929 0d0a 0d0a 2020 2020 2020 2020  AT))....        
-0000dd60: 7374 6f70 7065 6432 203d 207b 276e 616d  stopped2 = {'nam
-0000dd70: 6527 3a20 2773 746f 7070 6564 272c 0d0a  e': 'stopped',..
-0000dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dd90: 2020 2020 2770 6964 273a 2033 2c0d 0a20      'pid': 3,.. 
-0000dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ddb0: 2020 2027 7374 6174 6527 3a20 5072 6f63     'state': Proc
-0000ddc0: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
-0000ddd0: 442c 0d0a 2020 2020 2020 2020 2020 2020  D,..            
-0000dde0: 2020 2020 2020 2020 2773 7461 7274 273a          'start':
-0000ddf0: 2030 2c0d 0a20 2020 2020 2020 2020 2020   0,..           
-0000de00: 2020 2020 2020 2020 2027 7374 6f70 273a           'stop':
-0000de10: 2073 746f 702c 0d0a 2020 2020 2020 2020   stop,..        
-0000de20: 2020 2020 2020 2020 2020 2020 276e 6f77              'now
-0000de30: 273a 205f 4e4f 572c 0d0a 2020 2020 2020  ': _NOW,..      
-0000de40: 2020 2020 2020 2020 2020 2020 2020 2773                's
-0000de50: 7061 776e 6572 7227 3a20 2727 2c20 7d0d  pawnerr': '', }.
-0000de60: 0a0d 0a20 2020 2020 2020 2064 6573 6372  ...        descr
-0000de70: 6970 7469 6f6e 203d 2069 6e74 6572 6661  iption = interfa
-0000de80: 6365 2e5f 696e 7465 7270 7265 7450 726f  ce._interpretPro
-0000de90: 6365 7373 496e 666f 2873 746f 7070 6564  cessInfo(stopped
-0000dea0: 3229 0d0a 2020 2020 2020 2020 7365 6c66  2)..        self
-0000deb0: 2e61 7373 6572 7445 7175 616c 2864 6573  .assertEqual(des
-0000dec0: 6372 6970 7469 6f6e 2c20 274e 6f74 2073  cription, 'Not s
-0000ded0: 7461 7274 6564 2729 0d0a 0d0a 2020 2020  tarted')....    
-0000dee0: 6465 6620 7465 7374 5f5f 696e 7465 7270  def test__interp
-0000def0: 7265 7450 726f 6365 7373 496e 666f 5f64  retProcessInfo_d
-0000df00: 6f65 736e 745f 7265 706f 7274 5f6e 6567  oesnt_report_neg
-0000df10: 6174 6976 655f 7570 7469 6d65 2873 656c  ative_uptime(sel
-0000df20: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
-0000df30: 6572 7669 736f 7264 203d 2044 756d 6d79  ervisord = Dummy
-0000df40: 5375 7065 7276 6973 6f72 2829 0d0a 2020  Supervisor()..  
-0000df50: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-0000df60: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-0000df70: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-0000df80: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-0000df90: 7669 736f 722e 7072 6f63 6573 7320 696d  visor.process im
-0000dfa0: 706f 7274 2050 726f 6365 7373 5374 6174  port ProcessStat
-0000dfb0: 6573 0d0a 2020 2020 2020 2020 7275 6e6e  es..        runn
-0000dfc0: 696e 6720 3d20 7b27 6e61 6d65 273a 2027  ing = {'name': '
-0000dfd0: 7275 6e6e 696e 6727 2c0d 0a20 2020 2020  running',..     
-0000dfe0: 2020 2020 2020 2020 2020 2020 2020 2770                'p
-0000dff0: 6964 273a 2034 322c 0d0a 2020 2020 2020  id': 42,..      
-0000e000: 2020 2020 2020 2020 2020 2020 2027 7374               'st
-0000e010: 6174 6527 3a20 5072 6f63 6573 7353 7461  ate': ProcessSta
-0000e020: 7465 732e 5255 4e4e 494e 472c 0d0a 2020  tes.RUNNING,..  
-0000e030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e040: 2027 7374 6172 7427 3a20 5f4e 4f57 202b   'start': _NOW +
-0000e050: 2031 302c 2023 2073 7461 7274 6564 2069   10, # started i
-0000e060: 6e20 7468 6520 6675 7475 7265 0d0a 2020  n the future..  
-0000e070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e080: 2027 7374 6f70 273a 204e 6f6e 652c 0d0a   'stop': None,..
-0000e090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e0a0: 2020 2027 6e6f 7727 3a20 5f4e 4f57 7d0d     'now': _NOW}.
-0000e0b0: 0a20 2020 2020 2020 2064 6573 6372 6970  .        descrip
-0000e0c0: 7469 6f6e 203d 2069 6e74 6572 6661 6365  tion = interface
-0000e0d0: 2e5f 696e 7465 7270 7265 7450 726f 6365  ._interpretProce
-0000e0e0: 7373 496e 666f 2872 756e 6e69 6e67 290d  ssInfo(running).
-0000e0f0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000e100: 7365 7274 4571 7561 6c28 6465 7363 7269  sertEqual(descri
-0000e110: 7074 696f 6e2c 2027 7069 6420 3432 2c20  ption, 'pid 42, 
-0000e120: 7570 7469 6d65 2030 3a30 303a 3030 2729  uptime 0:00:00')
-0000e130: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
-0000e140: 5f67 6574 5072 6f63 6573 7349 6e66 6f28  _getProcessInfo(
-0000e150: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0000e160: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
-0000e170: 7072 6f63 6573 7320 696d 706f 7274 2050  process import P
-0000e180: 726f 6365 7373 5374 6174 6573 0d0a 0d0a  rocessStates....
-0000e190: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-0000e1a0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-0000e1b0: 0d0a 2020 2020 2020 2020 636f 6e66 6967  ..        config
-0000e1c0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
-0000e1d0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-0000e1e0: 272f 6269 6e2f 666f 6f27 2c0d 0a20 2020  '/bin/foo',..   
+0000b320: 6f75 7028 2766 6f6f 272c 2073 6967 290d  oup('foo', sig).
+0000b330: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000b340: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
+0000b350: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
+0000b360: 2027 7369 676e 616c 5072 6f63 6573 7347   'signalProcessG
+0000b370: 726f 7570 2729 0d0a 2020 2020 2020 2020  roup')..        
+0000b380: 2320 536f 7274 2073 6f20 7765 2067 6574  # Sort so we get
+0000b390: 2064 6574 6572 6d69 6e69 7374 6963 2072   deterministic r
+0000b3a0: 6573 756c 7473 2064 6573 7069 7465 2068  esults despite h
+0000b3b0: 6173 6820 7261 6e64 6f6d 697a 6174 696f  ash randomizatio
+0000b3c0: 6e0d 0a20 2020 2020 2020 2072 6573 756c  n..        resul
+0000b3d0: 7420 3d20 736f 7274 6564 2872 6573 756c  t = sorted(resul
+0000b3e0: 742c 206b 6579 3d6f 7065 7261 746f 722e  t, key=operator.
+0000b3f0: 6974 656d 6765 7474 6572 2827 6e61 6d65  itemgetter('name
+0000b400: 2729 290d 0a0d 0a20 2020 2020 2020 2066  '))....        f
+0000b410: 726f 6d20 7375 7065 7276 6973 6f72 2e78  rom supervisor.x
+0000b420: 6d6c 7270 6320 696d 706f 7274 2046 6175  mlrpc import Fau
+0000b430: 6c74 730d 0a20 2020 2020 2020 2073 656c  lts..        sel
+0000b440: 662e 6173 7365 7274 4571 7561 6c28 7265  f.assertEqual(re
+0000b450: 7375 6c74 2c20 5b0d 0a20 2020 2020 2020  sult, [..       
+0000b460: 2020 2020 207b 2773 7461 7475 7327 3a20       {'status': 
+0000b470: 4661 756c 7473 2e53 5543 4345 5353 2c0d  Faults.SUCCESS,.
+0000b480: 0a20 2020 2020 2020 2020 2020 2020 2767  .             'g
+0000b490: 726f 7570 273a 2027 666f 6f27 2c0d 0a20  roup': 'foo',.. 
+0000b4a0: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+0000b4b0: 6527 3a20 2770 726f 6365 7373 3127 2c0d  e': 'process1',.
+0000b4c0: 0a20 2020 2020 2020 2020 2020 2020 2764  .             'd
+0000b4d0: 6573 6372 6970 7469 6f6e 273a 2027 4f4b  escription': 'OK
+0000b4e0: 277d 2c0d 0a0d 0a20 2020 2020 2020 2020  '},....         
+0000b4f0: 2020 207b 2773 7461 7475 7327 3a20 4661     {'status': Fa
+0000b500: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
+0000b510: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
+0000b520: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+0000b530: 2020 2020 2020 2020 2020 276e 616d 6527            'name'
+0000b540: 3a20 2770 726f 6365 7373 3227 2c0d 0a20  : 'process2',.. 
+0000b550: 2020 2020 2020 2020 2020 2020 2764 6573              'des
+0000b560: 6372 6970 7469 6f6e 273a 2027 4f4b 277d  cription': 'OK'}
+0000b570: 2c0d 0a20 2020 2020 2020 205d 290d 0a20  ,..        ]).. 
+0000b580: 2020 2020 2020 2070 726f 6365 7373 3120         process1 
+0000b590: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+0000b5a0: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
+0000b5b0: 6f27 5d2e 7072 6f63 6573 7365 735b 2770  o'].processes['p
+0000b5c0: 726f 6365 7373 3127 5d0d 0a20 2020 2020  rocess1']..     
+0000b5d0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000b5e0: 7561 6c28 7072 6f63 6573 7331 2e73 656e  ual(process1.sen
+0000b5f0: 745f 7369 676e 616c 2c20 7369 6729 0d0a  t_signal, sig)..
+0000b600: 2020 2020 2020 2020 7072 6f63 6573 7332          process2
+0000b610: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
+0000b620: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
+0000b630: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
+0000b640: 7072 6f63 6573 7332 275d 0d0a 2020 2020  process2']..    
+0000b650: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000b660: 7175 616c 2870 726f 6365 7373 322e 7365  qual(process2.se
+0000b670: 6e74 5f73 6967 6e61 6c2c 2073 6967 290d  nt_signal, sig).
+0000b680: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+0000b690: 7369 676e 616c 5072 6f63 6573 7347 726f  signalProcessGro
+0000b6a0: 7570 5f77 6974 685f 7369 676e 616c 5f6e  up_with_signal_n
+0000b6b0: 616d 6528 7365 6c66 293a 0d0a 2020 2020  ame(self):..    
+0000b6c0: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+0000b6d0: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+0000b6e0: 2020 2020 2020 7063 6f6e 6669 6731 203d        pconfig1 =
+0000b6f0: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
+0000b700: 7469 6f6e 732c 2027 7072 6f63 6573 7331  tions, 'process1
+0000b710: 272c 2027 2f62 696e 2f66 6f6f 2729 0d0a  ', '/bin/foo')..
+0000b720: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+0000b730: 6572 7669 736f 722e 7072 6f63 6573 7320  ervisor.process 
+0000b740: 696d 706f 7274 2050 726f 6365 7373 5374  import ProcessSt
+0000b750: 6174 6573 0d0a 2020 2020 2020 2020 7375  ates..        su
+0000b760: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
+0000b770: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
+0000b780: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
+0000b790: 6f6f 272c 2070 636f 6e66 6967 3129 0d0a  oo', pconfig1)..
+0000b7a0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000b7b0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+0000b7c0: 2827 7072 6f63 6573 7331 272c 2027 7374  ('process1', 'st
+0000b7d0: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
+0000b7e0: 7465 732e 5255 4e4e 494e 4729 0d0a 0d0a  tes.RUNNING)....
+0000b7f0: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+0000b800: 6572 7669 736f 722e 6461 7461 7479 7065  ervisor.datatype
+0000b810: 7320 696d 706f 7274 2073 6967 6e61 6c5f  s import signal_
+0000b820: 6e75 6d62 6572 0d0a 2020 2020 2020 2020  number..        
+0000b830: 7369 676e 616d 6520 3d20 2774 6572 6d27  signame = 'term'
+0000b840: 0d0a 2020 2020 2020 2020 7369 676e 756d  ..        signum
+0000b850: 203d 2073 6967 6e61 6c5f 6e75 6d62 6572   = signal_number
+0000b860: 2873 6967 6e61 6d65 290d 0a0d 0a20 2020  (signame)....   
+0000b870: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+0000b880: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+0000b890: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+0000b8a0: 2020 2020 2072 6573 756c 7420 3d20 696e       result = in
+0000b8b0: 7465 7266 6163 652e 7369 676e 616c 5072  terface.signalPr
+0000b8c0: 6f63 6573 7347 726f 7570 2827 666f 6f27  ocessGroup('foo'
+0000b8d0: 2c20 7369 676e 616d 6529 0d0a 0d0a 2020  , signame)....  
+0000b8e0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000b8f0: 7445 7175 616c 2869 6e74 6572 6661 6365  tEqual(interface
+0000b900: 2e75 7064 6174 655f 7465 7874 2c20 2773  .update_text, 's
+0000b910: 6967 6e61 6c50 726f 6365 7373 4772 6f75  ignalProcessGrou
+0000b920: 7027 290d 0a20 2020 2020 2020 2066 726f  p')..        fro
+0000b930: 6d20 7375 7065 7276 6973 6f72 2e78 6d6c  m supervisor.xml
+0000b940: 7270 6320 696d 706f 7274 2046 6175 6c74  rpc import Fault
+0000b950: 730d 0a20 2020 2020 2020 2073 656c 662e  s..        self.
+0000b960: 6173 7365 7274 4571 7561 6c28 7265 7375  assertEqual(resu
+0000b970: 6c74 2c20 5b0d 0a20 2020 2020 2020 2020  lt, [..         
+0000b980: 2020 207b 2773 7461 7475 7327 3a20 4661     {'status': Fa
+0000b990: 756c 7473 2e53 5543 4345 5353 2c0d 0a20  ults.SUCCESS,.. 
+0000b9a0: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
+0000b9b0: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
+0000b9c0: 2020 2020 2020 2020 2020 276e 616d 6527            'name'
+0000b9d0: 3a20 2770 726f 6365 7373 3127 2c0d 0a20  : 'process1',.. 
+0000b9e0: 2020 2020 2020 2020 2020 2020 2764 6573              'des
+0000b9f0: 6372 6970 7469 6f6e 273a 2027 4f4b 277d  cription': 'OK'}
+0000ba00: 2c0d 0a20 2020 2020 2020 205d 290d 0a0d  ,..        ])...
+0000ba10: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0000ba20: 3120 3d20 7375 7065 7276 6973 6f72 642e  1 = supervisord.
+0000ba30: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+0000ba40: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+0000ba50: 2770 726f 6365 7373 3127 5d0d 0a20 2020  'process1']..   
+0000ba60: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000ba70: 4571 7561 6c28 7072 6f63 6573 7331 2e73  Equal(process1.s
+0000ba80: 656e 745f 7369 676e 616c 2c20 7369 676e  ent_signal, sign
+0000ba90: 756d 290d 0a0d 0a20 2020 2064 6566 2074  um)....    def t
+0000baa0: 6573 745f 7369 676e 616c 5072 6f63 6573  est_signalProces
+0000bab0: 7347 726f 7570 5f6e 6f73 7563 6867 726f  sGroup_nosuchgro
+0000bac0: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
+0000bad0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+0000bae0: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
+0000baf0: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+0000bb00: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+0000bb10: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
+0000bb20: 6669 6731 203d 2044 756d 6d79 5043 6f6e  fig1 = DummyPCon
+0000bb30: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
+0000bb40: 6f63 6573 7331 272c 2027 2f62 696e 2f66  ocess1', '/bin/f
+0000bb50: 6f6f 2729 0d0a 2020 2020 2020 2020 7063  oo')..        pc
+0000bb60: 6f6e 6669 6732 203d 2044 756d 6d79 5043  onfig2 = DummyPC
+0000bb70: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+0000bb80: 7072 6f63 6573 7332 272c 2027 2f62 696e  process2', '/bin
+0000bb90: 2f66 6f6f 3227 290d 0a20 2020 2020 2020  /foo2')..       
+0000bba0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+0000bbb0: 2e70 726f 6365 7373 2069 6d70 6f72 7420  .process import 
+0000bbc0: 5072 6f63 6573 7353 7461 7465 730d 0a20  ProcessStates.. 
+0000bbd0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+0000bbe0: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
+0000bbf0: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
+0000bc00: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
+0000bc10: 6f6e 6669 6731 2c0d 0a20 2020 2020 2020  onfig1,..       
+0000bc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bc40: 2020 2020 2020 2020 7063 6f6e 6669 6732          pconfig2
+0000bc50: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0000bc60: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
+0000bc70: 7474 7228 2770 726f 6365 7373 3127 2c20  ttr('process1', 
+0000bc80: 2773 7461 7465 272c 2050 726f 6365 7373  'state', Process
+0000bc90: 5374 6174 6573 2e52 554e 4e49 4e47 290d  States.RUNNING).
+0000bca0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+0000bcb0: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
+0000bcc0: 7228 2770 726f 6365 7373 3227 2c20 2773  r('process2', 's
+0000bcd0: 7461 7465 272c 2050 726f 6365 7373 5374  tate', ProcessSt
+0000bce0: 6174 6573 2e52 554e 4e49 4e47 290d 0a20  ates.RUNNING).. 
+0000bcf0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+0000bd00: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+0000bd10: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
+0000bd20: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
+0000bd30: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
+0000bd40: 7063 2e46 6175 6c74 732e 4241 445f 4e41  pc.Faults.BAD_NA
+0000bd50: 4d45 2c0d 0a20 2020 2020 2020 2020 2020  ME,..           
+0000bd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd70: 2020 696e 7465 7266 6163 652e 7369 676e    interface.sign
+0000bd80: 616c 5072 6f63 6573 7347 726f 7570 2c20  alProcessGroup, 
+0000bd90: 2762 6172 272c 2031 300d 0a20 2020 2020  'bar', 10..     
+0000bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bdb0: 2020 2020 2020 2020 290d 0a0d 0a20 2020          )....   
+0000bdc0: 2064 6566 2074 6573 745f 7369 676e 616c   def test_signal
+0000bdd0: 416c 6c50 726f 6365 7373 6573 5f77 6974  AllProcesses_wit
+0000bde0: 685f 7369 676e 616c 5f6e 756d 6265 7228  h_signal_number(
+0000bdf0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0000be00: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+0000be10: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+0000be20: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
+0000be30: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+0000be40: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
+0000be50: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
+0000be60: 2020 2020 7063 6f6e 6669 6732 203d 2044      pconfig2 = D
+0000be70: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+0000be80: 6f6e 732c 2027 7072 6f63 6573 7332 272c  ons, 'process2',
+0000be90: 2027 2f62 696e 2f66 6f6f 3227 290d 0a20   '/bin/foo2').. 
+0000bea0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+0000beb0: 7276 6973 6f72 2e70 726f 6365 7373 2069  rvisor.process i
+0000bec0: 6d70 6f72 7420 5072 6f63 6573 7353 7461  mport ProcessSta
+0000bed0: 7465 730d 0a20 2020 2020 2020 2073 7570  tes..        sup
+0000bee0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
+0000bef0: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
+0000bf00: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
+0000bf10: 6f27 2c20 7063 6f6e 6669 6731 2c0d 0a20  o', pconfig1,.. 
+0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf40: 2020 2020 2020 2020 2020 2020 2020 7063                pc
+0000bf50: 6f6e 6669 6732 290d 0a20 2020 2020 2020  onfig2)..       
+0000bf60: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
+0000bf70: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
+0000bf80: 7373 3127 2c20 2773 7461 7465 272c 2050  ss1', 'state', P
+0000bf90: 726f 6365 7373 5374 6174 6573 2e52 554e  rocessStates.RUN
+0000bfa0: 4e49 4e47 290d 0a20 2020 2020 2020 2073  NING)..        s
+0000bfb0: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+0000bfc0: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
+0000bfd0: 3227 2c20 2773 7461 7465 272c 2050 726f  2', 'state', Pro
+0000bfe0: 6365 7373 5374 6174 6573 2e52 554e 4e49  cessStates.RUNNI
+0000bff0: 4e47 290d 0a20 2020 2020 2020 2073 6967  NG)..        sig
+0000c000: 5f73 656e 7420 3d20 7369 676e 616c 2e53  _sent = signal.S
+0000c010: 4947 5445 524d 0d0a 2020 2020 2020 2020  IGTERM..        
+0000c020: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+0000c030: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+0000c040: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+0000c050: 7265 7375 6c74 203d 2069 6e74 6572 6661  result = interfa
+0000c060: 6365 2e73 6967 6e61 6c41 6c6c 5072 6f63  ce.signalAllProc
+0000c070: 6573 7365 7328 7369 675f 7365 6e74 290d  esses(sig_sent).
+0000c080: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000c090: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
+0000c0a0: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
+0000c0b0: 2027 7369 676e 616c 416c 6c50 726f 6365   'signalAllProce
+0000c0c0: 7373 6573 2729 0d0a 0d0a 2020 2020 2020  sses')....      
+0000c0d0: 2020 2320 536f 7274 2073 6f20 7765 2067    # Sort so we g
+0000c0e0: 6574 2064 6574 6572 6d69 6e69 7374 6963  et deterministic
+0000c0f0: 2072 6573 756c 7473 2064 6573 7069 7465   results despite
+0000c100: 2068 6173 6820 7261 6e64 6f6d 697a 6174   hash randomizat
+0000c110: 696f 6e0d 0a20 2020 2020 2020 2072 6573  ion..        res
+0000c120: 756c 7420 3d20 736f 7274 6564 2872 6573  ult = sorted(res
+0000c130: 756c 742c 206b 6579 3d6f 7065 7261 746f  ult, key=operato
+0000c140: 722e 6974 656d 6765 7474 6572 2827 6e61  r.itemgetter('na
+0000c150: 6d65 2729 290d 0a0d 0a20 2020 2020 2020  me'))....       
+0000c160: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+0000c170: 2e78 6d6c 7270 6320 696d 706f 7274 2046  .xmlrpc import F
+0000c180: 6175 6c74 730d 0a20 2020 2020 2020 2073  aults..        s
+0000c190: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000c1a0: 7265 7375 6c74 2c20 5b0d 0a20 2020 2020  result, [..     
+0000c1b0: 2020 2020 2020 207b 2773 7461 7475 7327         {'status'
+0000c1c0: 3a20 4661 756c 7473 2e53 5543 4345 5353  : Faults.SUCCESS
+0000c1d0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000c1e0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+0000c1f0: 0a20 2020 2020 2020 2020 2020 2020 276e  .             'n
+0000c200: 616d 6527 3a20 2770 726f 6365 7373 3127  ame': 'process1'
+0000c210: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000c220: 2764 6573 6372 6970 7469 6f6e 273a 2027  'description': '
+0000c230: 4f4b 277d 2c0d 0a0d 0a20 2020 2020 2020  OK'},....       
+0000c240: 2020 2020 207b 2773 7461 7475 7327 3a20       {'status': 
+0000c250: 4661 756c 7473 2e53 5543 4345 5353 2c0d  Faults.SUCCESS,.
+0000c260: 0a20 2020 2020 2020 2020 2020 2020 2767  .             'g
+0000c270: 726f 7570 273a 2027 666f 6f27 2c0d 0a20  roup': 'foo',.. 
+0000c280: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+0000c290: 6527 3a20 2770 726f 6365 7373 3227 2c0d  e': 'process2',.
+0000c2a0: 0a20 2020 2020 2020 2020 2020 2020 2764  .             'd
+0000c2b0: 6573 6372 6970 7469 6f6e 273a 2027 4f4b  escription': 'OK
+0000c2c0: 277d 2c0d 0a20 2020 2020 2020 205d 290d  '},..        ]).
+0000c2d0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0000c2e0: 3120 3d20 7375 7065 7276 6973 6f72 642e  1 = supervisord.
+0000c2f0: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+0000c300: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+0000c310: 2770 726f 6365 7373 3127 5d0d 0a20 2020  'process1']..   
+0000c320: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000c330: 4571 7561 6c28 7072 6f63 6573 7331 2e73  Equal(process1.s
+0000c340: 656e 745f 7369 676e 616c 2c20 7369 675f  ent_signal, sig_
+0000c350: 7365 6e74 290d 0a20 2020 2020 2020 2070  sent)..        p
+0000c360: 726f 6365 7373 3220 3d20 7375 7065 7276  rocess2 = superv
+0000c370: 6973 6f72 642e 7072 6f63 6573 735f 6772  isord.process_gr
+0000c380: 6f75 7073 5b27 666f 6f27 5d2e 7072 6f63  oups['foo'].proc
+0000c390: 6573 7365 735b 2770 726f 6365 7373 3227  esses['process2'
+0000c3a0: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
+0000c3b0: 6173 7365 7274 4571 7561 6c28 7072 6f63  assertEqual(proc
+0000c3c0: 6573 7332 2e73 656e 745f 7369 676e 616c  ess2.sent_signal
+0000c3d0: 2c20 7369 675f 7365 6e74 290d 0a0d 0a20  , sig_sent).... 
+0000c3e0: 2020 2064 6566 2074 6573 745f 7369 676e     def test_sign
+0000c3f0: 616c 416c 6c50 726f 6365 7373 6573 5f77  alAllProcesses_w
+0000c400: 6974 685f 7369 676e 616c 5f6e 616d 6528  ith_signal_name(
+0000c410: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+0000c420: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+0000c430: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+0000c440: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
+0000c450: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+0000c460: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
+0000c470: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
+0000c480: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+0000c490: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
+0000c4a0: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
+0000c4b0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+0000c4c0: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
+0000c4d0: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
+0000c4e0: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+0000c4f0: 2070 636f 6e66 6967 3129 0d0a 2020 2020   pconfig1)..    
+0000c500: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+0000c510: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
+0000c520: 6f63 6573 7331 272c 2027 7374 6174 6527  ocess1', 'state'
+0000c530: 2c20 5072 6f63 6573 7353 7461 7465 732e  , ProcessStates.
+0000c540: 5255 4e4e 494e 4729 0d0a 0d0a 2020 2020  RUNNING)....    
+0000c550: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+0000c560: 736f 722e 6461 7461 7479 7065 7320 696d  sor.datatypes im
+0000c570: 706f 7274 2073 6967 6e61 6c5f 6e75 6d62  port signal_numb
+0000c580: 6572 0d0a 0d0a 2020 2020 2020 2020 7369  er....        si
+0000c590: 676e 616d 6520 3d20 2761 6272 7427 0d0a  gname = 'abrt'..
+0000c5a0: 2020 2020 2020 2020 7369 676e 756d 203d          signum =
+0000c5b0: 2073 6967 6e61 6c5f 6e75 6d62 6572 2873   signal_number(s
+0000c5c0: 6967 6e61 6d65 290d 0a0d 0a20 2020 2020  igname)....     
+0000c5d0: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+0000c5e0: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+0000c5f0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+0000c600: 2020 2072 6573 756c 7420 3d20 696e 7465     result = inte
+0000c610: 7266 6163 652e 7369 676e 616c 416c 6c50  rface.signalAllP
+0000c620: 726f 6365 7373 6573 2873 6967 6e61 6d65  rocesses(signame
+0000c630: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000c640: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
+0000c650: 7266 6163 652e 7570 6461 7465 5f74 6578  rface.update_tex
+0000c660: 742c 2027 7369 676e 616c 416c 6c50 726f  t, 'signalAllPro
+0000c670: 6365 7373 6573 2729 0d0a 0d0a 2020 2020  cesses')....    
+0000c680: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+0000c690: 736f 722e 786d 6c72 7063 2069 6d70 6f72  sor.xmlrpc impor
+0000c6a0: 7420 4661 756c 7473 0d0a 2020 2020 2020  t Faults..      
+0000c6b0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000c6c0: 616c 2872 6573 756c 742c 205b 0d0a 2020  al(result, [..  
+0000c6d0: 2020 2020 2020 2020 2020 7b27 7374 6174            {'stat
+0000c6e0: 7573 273a 2046 6175 6c74 732e 5355 4343  us': Faults.SUCC
+0000c6f0: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
+0000c700: 2020 2027 6772 6f75 7027 3a20 2766 6f6f     'group': 'foo
+0000c710: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0000c720: 2027 6e61 6d65 273a 2027 7072 6f63 6573   'name': 'proces
+0000c730: 7331 272c 0d0a 2020 2020 2020 2020 2020  s1',..          
+0000c740: 2020 2027 6465 7363 7269 7074 696f 6e27     'description'
+0000c750: 3a20 274f 4b27 7d2c 0d0a 2020 2020 2020  : 'OK'},..      
+0000c760: 2020 5d29 0d0a 2020 2020 2020 2020 7072    ])..        pr
+0000c770: 6f63 6573 7331 203d 2073 7570 6572 7669  ocess1 = supervi
+0000c780: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
+0000c790: 7570 735b 2766 6f6f 275d 2e70 726f 6365  ups['foo'].proce
+0000c7a0: 7373 6573 5b27 7072 6f63 6573 7331 275d  sses['process1']
+0000c7b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000c7c0: 7373 6572 7445 7175 616c 2870 726f 6365  ssertEqual(proce
+0000c7d0: 7373 312e 7365 6e74 5f73 6967 6e61 6c2c  ss1.sent_signal,
+0000c7e0: 2073 6967 6e75 6d29 0d0a 0d0a 2020 2020   signum)....    
+0000c7f0: 6465 6620 7465 7374 5f67 6574 416c 6c43  def test_getAllC
+0000c800: 6f6e 6669 6749 6e66 6f28 7365 6c66 293a  onfigInfo(self):
+0000c810: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+0000c820: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+0000c830: 2829 0d0a 2020 2020 2020 2020 7375 7065  ()..        supe
+0000c840: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
+0000c850: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
+0000c860: 732c 2027 666f 6f27 290d 0a0d 0a20 2020  s, 'foo')....   
+0000c870: 2020 2020 2070 636f 6e66 6967 3120 3d20       pconfig1 = 
+0000c880: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+0000c890: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
+0000c8a0: 2c20 5f5f 6669 6c65 5f5f 2c0d 0a20 2020  , __file__,..   
+0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8c0: 2020 2020 2020 2020 2020 2020 2073 7464               std
+0000c8d0: 6f75 745f 6c6f 6766 696c 653d 4175 746f  out_logfile=Auto
+0000c8e0: 6d61 7469 632c 0d0a 2020 2020 2020 2020  matic,..        
+0000c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c900: 2020 2020 2020 2020 7374 6465 7272 5f6c          stderr_l
+0000c910: 6f67 6669 6c65 3d41 7574 6f6d 6174 6963  ogfile=Automatic
+0000c920: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0000c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c940: 2020 2029 0d0a 2020 2020 2020 2020 7063     )..        pc
+0000c950: 6f6e 6669 6732 203d 2044 756d 6d79 5043  onfig2 = DummyPC
+0000c960: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+0000c970: 7072 6f63 6573 7332 272c 205f 5f66 696c  process2', __fil
+0000c980: 655f 5f2c 0d0a 2020 2020 2020 2020 2020  e__,..          
+0000c990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c9a0: 2020 2020 2020 7374 646f 7574 5f6c 6f67        stdout_log
+0000c9b0: 6669 6c65 3d4e 6f6e 652c 0d0a 2020 2020  file=None,..    
+0000c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c9d0: 2020 2020 2020 2020 2020 2020 7374 6465              stde
+0000c9e0: 7272 5f6c 6f67 6669 6c65 3d4e 6f6e 652c  rr_logfile=None,
+0000c9f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ca10: 2020 290d 0a20 2020 2020 2020 2067 636f    )..        gco
+0000ca20: 6e66 6967 203d 2044 756d 6d79 5047 726f  nfig = DummyPGro
+0000ca30: 7570 436f 6e66 6967 286f 7074 696f 6e73  upConfig(options
+0000ca40: 2c20 2767 726f 7570 3127 2c20 7063 6f6e  , 'group1', pcon
+0000ca50: 6669 6773 3d5b 7063 6f6e 6669 6731 2c20  figs=[pconfig1, 
+0000ca60: 7063 6f6e 6669 6732 5d29 0d0a 2020 2020  pconfig2])..    
+0000ca70: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+0000ca80: 7072 6f63 6573 735f 6772 6f75 7073 203d  process_groups =
+0000ca90: 207b 2767 726f 7570 3127 3a20 4475 6d6d   {'group1': Dumm
+0000caa0: 7950 726f 6365 7373 4772 6f75 7028 6763  yProcessGroup(gc
+0000cab0: 6f6e 6669 6729 7d0d 0a20 2020 2020 2020  onfig)}..       
+0000cac0: 2073 7570 6572 7669 736f 7264 2e6f 7074   supervisord.opt
+0000cad0: 696f 6e73 2e70 726f 6365 7373 5f67 726f  ions.process_gro
+0000cae0: 7570 5f63 6f6e 6669 6773 203d 205b 6763  up_configs = [gc
+0000caf0: 6f6e 6669 675d 0d0a 0d0a 2020 2020 2020  onfig]....      
+0000cb00: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+0000cb10: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+0000cb20: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+0000cb30: 2020 636f 6e66 6967 7320 3d20 696e 7465    configs = inte
+0000cb40: 7266 6163 652e 6765 7441 6c6c 436f 6e66  rface.getAllConf
+0000cb50: 6967 496e 666f 2829 0d0a 2020 2020 2020  igInfo()..      
+0000cb60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000cb70: 616c 2863 6f6e 6669 6773 5b30 5d5b 2761  al(configs[0]['a
+0000cb80: 7574 6f73 7461 7274 275d 2c20 5472 7565  utostart'], True
+0000cb90: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000cba0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
+0000cbb0: 6967 735b 305d 5b27 7374 6f70 7761 6974  igs[0]['stopwait
+0000cbc0: 7365 6373 275d 2c20 3130 290d 0a20 2020  secs'], 10)..   
+0000cbd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000cbe0: 4571 7561 6c28 636f 6e66 6967 735b 305d  Equal(configs[0]
+0000cbf0: 5b27 7374 646f 7574 5f65 7665 6e74 735f  ['stdout_events_
+0000cc00: 656e 6162 6c65 6427 5d2c 2046 616c 7365  enabled'], False
+0000cc10: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000cc20: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
+0000cc30: 6967 735b 305d 5b27 7374 6465 7272 5f65  igs[0]['stderr_e
+0000cc40: 7665 6e74 735f 656e 6162 6c65 6427 5d2c  vents_enabled'],
+0000cc50: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+0000cc60: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000cc70: 6c28 636f 6e66 6967 735b 305d 5b27 6772  l(configs[0]['gr
+0000cc80: 6f75 7027 5d2c 2027 6772 6f75 7031 2729  oup'], 'group1')
+0000cc90: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000cca0: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000ccb0: 6773 5b30 5d5b 2773 7464 6f75 745f 6361  gs[0]['stdout_ca
+0000ccc0: 7074 7572 655f 6d61 7862 7974 6573 275d  pture_maxbytes']
+0000ccd0: 2c20 3029 0d0a 2020 2020 2020 2020 7365  , 0)..        se
+0000cce0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000ccf0: 6f6e 6669 6773 5b30 5d5b 276e 616d 6527  onfigs[0]['name'
+0000cd00: 5d2c 2027 7072 6f63 6573 7331 2729 0d0a  ], 'process1')..
+0000cd10: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000cd20: 6572 7445 7175 616c 2863 6f6e 6669 6773  ertEqual(configs
+0000cd30: 5b30 5d5b 2773 746f 7073 6967 6e61 6c27  [0]['stopsignal'
+0000cd40: 5d2c 2031 3529 0d0a 2020 2020 2020 2020  ], 15)..        
+0000cd50: 2373 656c 662e 6173 7365 7274 4571 7561  #self.assertEqua
+0000cd60: 6c28 636f 6e66 6967 735b 305d 5b27 7374  l(configs[0]['st
+0000cd70: 6465 7272 5f73 7973 6c6f 6727 5d2c 2046  derr_syslog'], F
+0000cd80: 616c 7365 290d 0a20 2020 2020 2020 2073  alse)..        s
+0000cd90: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000cda0: 636f 6e66 6967 735b 305d 5b27 7374 646f  configs[0]['stdo
+0000cdb0: 7574 5f6c 6f67 6669 6c65 5f6d 6178 6279  ut_logfile_maxby
+0000cdc0: 7465 7327 5d2c 2030 290d 0a20 2020 2020  tes'], 0)..     
+0000cdd0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000cde0: 7561 6c28 636f 6e66 6967 735b 305d 5b27  ual(configs[0]['
+0000cdf0: 6772 6f75 705f 7072 696f 275d 2c20 3939  group_prio'], 99
+0000ce00: 3929 0d0a 2020 2020 2020 2020 7365 6c66  9)..        self
+0000ce10: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
+0000ce20: 6669 6773 5b30 5d5b 276b 696c 6c61 7367  figs[0]['killasg
+0000ce30: 726f 7570 275d 2c20 4661 6c73 6529 0d0a  roup'], False)..
+0000ce40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000ce50: 6572 7445 7175 616c 2863 6f6e 6669 6773  ertEqual(configs
+0000ce60: 5b30 5d5b 2770 726f 6365 7373 5f70 7269  [0]['process_pri
+0000ce70: 6f27 5d2c 2039 3939 290d 0a20 2020 2020  o'], 999)..     
+0000ce80: 2020 2023 7365 6c66 2e61 7373 6572 7445     #self.assertE
+0000ce90: 7175 616c 2863 6f6e 6669 6773 5b30 5d5b  qual(configs[0][
+0000cea0: 2773 7464 6f75 745f 7379 736c 6f67 275d  'stdout_syslog']
+0000ceb0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+0000cec0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000ced0: 616c 2863 6f6e 6669 6773 5b30 5d5b 2773  al(configs[0]['s
+0000cee0: 7464 6572 725f 6c6f 6766 696c 655f 6d61  tderr_logfile_ma
+0000cef0: 7862 7974 6573 275d 2c20 3029 0d0a 2020  xbytes'], 0)..  
+0000cf00: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000cf10: 7445 7175 616c 2863 6f6e 6669 6773 5b30  tEqual(configs[0
+0000cf20: 5d5b 2773 7461 7274 7365 6373 275d 2c20  ]['startsecs'], 
+0000cf30: 3130 290d 0a20 2020 2020 2020 2073 656c  10)..        sel
+0000cf40: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000cf50: 6e66 6967 735b 305d 5b27 7265 6469 7265  nfigs[0]['redire
+0000cf60: 6374 5f73 7464 6572 7227 5d2c 2046 616c  ct_stderr'], Fal
+0000cf70: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
+0000cf80: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000cf90: 6e66 6967 735b 305d 5b27 7374 646f 7574  nfigs[0]['stdout
+0000cfa0: 5f6c 6f67 6669 6c65 275d 2c20 2761 7574  _logfile'], 'aut
+0000cfb0: 6f27 290d 0a20 2020 2020 2020 2073 656c  o')..        sel
+0000cfc0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000cfd0: 6e66 6967 735b 305d 5b27 6578 6974 636f  nfigs[0]['exitco
+0000cfe0: 6465 7327 5d2c 2028 302c 2929 0d0a 2020  des'], (0,))..  
+0000cff0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000d000: 7445 7175 616c 2863 6f6e 6669 6773 5b30  tEqual(configs[0
+0000d010: 5d5b 2773 7464 6572 725f 6361 7074 7572  ]['stderr_captur
+0000d020: 655f 6d61 7862 7974 6573 275d 2c20 3029  e_maxbytes'], 0)
+0000d030: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000d040: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000d050: 6773 5b30 5d5b 2773 7461 7274 7265 7472  gs[0]['startretr
+0000d060: 6965 7327 5d2c 2039 3939 290d 0a20 2020  ies'], 999)..   
+0000d070: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000d080: 4571 7561 6c28 636f 6e66 6967 735b 305d  Equal(configs[0]
+0000d090: 5b27 7374 6465 7272 5f6c 6f67 6669 6c65  ['stderr_logfile
+0000d0a0: 5f6d 6178 6279 7465 7327 5d2c 2030 290d  _maxbytes'], 0).
+0000d0b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000d0c0: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
+0000d0d0: 735b 305d 5b27 696e 7573 6527 5d2c 2054  s[0]['inuse'], T
+0000d0e0: 7275 6529 0d0a 2020 2020 2020 2020 7365  rue)..        se
+0000d0f0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000d100: 6f6e 6669 6773 5b30 5d5b 2773 7464 6572  onfigs[0]['stder
+0000d110: 725f 6c6f 6766 696c 6527 5d2c 2027 6175  r_logfile'], 'au
+0000d120: 746f 2729 0d0a 2020 2020 2020 2020 7365  to')..        se
+0000d130: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000d140: 6f6e 6669 6773 5b30 5d5b 2773 7464 6f75  onfigs[0]['stdou
+0000d150: 745f 6c6f 6766 696c 655f 6261 636b 7570  t_logfile_backup
+0000d160: 7327 5d2c 2030 290d 0a20 2020 2020 2020  s'], 0)..       
+0000d170: 2061 7373 6572 7420 2774 6573 745f 7270   assert 'test_rp
+0000d180: 6369 6e74 6572 6661 6365 732e 7079 2720  cinterfaces.py' 
+0000d190: 696e 2063 6f6e 6669 6773 5b30 5d5b 2763  in configs[0]['c
+0000d1a0: 6f6d 6d61 6e64 275d 0d0a 0d0a 2020 2020  ommand']....    
+0000d1b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000d1c0: 7175 616c 2863 6f6e 6669 6773 5b31 5d5b  qual(configs[1][
+0000d1d0: 2761 7574 6f73 7461 7274 275d 2c20 5472  'autostart'], Tr
+0000d1e0: 7565 290d 0a20 2020 2020 2020 2073 656c  ue)..        sel
+0000d1f0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000d200: 6e66 6967 735b 315d 5b27 7374 6f70 7761  nfigs[1]['stopwa
+0000d210: 6974 7365 6373 275d 2c20 3130 290d 0a20  itsecs'], 10).. 
+0000d220: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000d230: 7274 4571 7561 6c28 636f 6e66 6967 735b  rtEqual(configs[
+0000d240: 315d 5b27 7374 646f 7574 5f65 7665 6e74  1]['stdout_event
+0000d250: 735f 656e 6162 6c65 6427 5d2c 2046 616c  s_enabled'], Fal
+0000d260: 7365 290d 0a20 2020 2020 2020 2073 656c  se)..        sel
+0000d270: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000d280: 6e66 6967 735b 315d 5b27 7374 6465 7272  nfigs[1]['stderr
+0000d290: 5f65 7665 6e74 735f 656e 6162 6c65 6427  _events_enabled'
+0000d2a0: 5d2c 2046 616c 7365 290d 0a20 2020 2020  ], False)..     
+0000d2b0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000d2c0: 7561 6c28 636f 6e66 6967 735b 315d 5b27  ual(configs[1]['
+0000d2d0: 6772 6f75 7027 5d2c 2027 6772 6f75 7031  group'], 'group1
+0000d2e0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+0000d2f0: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
+0000d300: 6669 6773 5b31 5d5b 2773 7464 6f75 745f  figs[1]['stdout_
+0000d310: 6361 7074 7572 655f 6d61 7862 7974 6573  capture_maxbytes
+0000d320: 275d 2c20 3029 0d0a 2020 2020 2020 2020  '], 0)..        
+0000d330: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000d340: 2863 6f6e 6669 6773 5b31 5d5b 276e 616d  (configs[1]['nam
+0000d350: 6527 5d2c 2027 7072 6f63 6573 7332 2729  e'], 'process2')
+0000d360: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000d370: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000d380: 6773 5b31 5d5b 2773 746f 7073 6967 6e61  gs[1]['stopsigna
+0000d390: 6c27 5d2c 2031 3529 0d0a 2020 2020 2020  l'], 15)..      
+0000d3a0: 2020 2320 7365 6c66 2e61 7373 6572 7445    # self.assertE
+0000d3b0: 7175 616c 2863 6f6e 6669 6773 5b31 5d5b  qual(configs[1][
+0000d3c0: 2773 7464 6572 725f 7379 736c 6f67 275d  'stderr_syslog']
+0000d3d0: 2c20 4661 6c73 6529 0d0a 2020 2020 2020  , False)..      
+0000d3e0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000d3f0: 616c 2863 6f6e 6669 6773 5b31 5d5b 2773  al(configs[1]['s
+0000d400: 7464 6f75 745f 6c6f 6766 696c 655f 6d61  tdout_logfile_ma
+0000d410: 7862 7974 6573 275d 2c20 3029 0d0a 2020  xbytes'], 0)..  
+0000d420: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000d430: 7445 7175 616c 2863 6f6e 6669 6773 5b31  tEqual(configs[1
+0000d440: 5d5b 2767 726f 7570 5f70 7269 6f27 5d2c  ]['group_prio'],
+0000d450: 2039 3939 290d 0a20 2020 2020 2020 2073   999)..        s
+0000d460: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000d470: 636f 6e66 6967 735b 315d 5b27 6b69 6c6c  configs[1]['kill
+0000d480: 6173 6772 6f75 7027 5d2c 2046 616c 7365  asgroup'], False
+0000d490: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000d4a0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
+0000d4b0: 6967 735b 315d 5b27 7072 6f63 6573 735f  igs[1]['process_
+0000d4c0: 7072 696f 275d 2c20 3939 3929 0d0a 2020  prio'], 999)..  
+0000d4d0: 2020 2020 2020 2320 7365 6c66 2e61 7373        # self.ass
+0000d4e0: 6572 7445 7175 616c 2863 6f6e 6669 6773  ertEqual(configs
+0000d4f0: 5b31 5d5b 2773 7464 6f75 745f 7379 736c  [1]['stdout_sysl
+0000d500: 6f67 275d 2c20 4661 6c73 6529 0d0a 2020  og'], False)..  
+0000d510: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000d520: 7445 7175 616c 2863 6f6e 6669 6773 5b31  tEqual(configs[1
+0000d530: 5d5b 2773 7464 6572 725f 6c6f 6766 696c  ]['stderr_logfil
+0000d540: 655f 6d61 7862 7974 6573 275d 2c20 3029  e_maxbytes'], 0)
+0000d550: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000d560: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000d570: 6773 5b31 5d5b 2773 7461 7274 7365 6373  gs[1]['startsecs
+0000d580: 275d 2c20 3130 290d 0a20 2020 2020 2020  '], 10)..       
+0000d590: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d5a0: 6c28 636f 6e66 6967 735b 315d 5b27 7265  l(configs[1]['re
+0000d5b0: 6469 7265 6374 5f73 7464 6572 7227 5d2c  direct_stderr'],
+0000d5c0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
+0000d5d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d5e0: 6c28 636f 6e66 6967 735b 315d 5b27 7374  l(configs[1]['st
+0000d5f0: 646f 7574 5f6c 6f67 6669 6c65 275d 2c20  dout_logfile'], 
+0000d600: 276e 6f6e 6527 290d 0a20 2020 2020 2020  'none')..       
+0000d610: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d620: 6c28 636f 6e66 6967 735b 315d 5b27 6578  l(configs[1]['ex
+0000d630: 6974 636f 6465 7327 5d2c 2028 302c 2929  itcodes'], (0,))
+0000d640: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000d650: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000d660: 6773 5b31 5d5b 2773 7464 6572 725f 6361  gs[1]['stderr_ca
+0000d670: 7074 7572 655f 6d61 7862 7974 6573 275d  pture_maxbytes']
+0000d680: 2c20 3029 0d0a 2020 2020 2020 2020 7365  , 0)..        se
+0000d690: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000d6a0: 6f6e 6669 6773 5b31 5d5b 2773 7461 7274  onfigs[1]['start
+0000d6b0: 7265 7472 6965 7327 5d2c 2039 3939 290d  retries'], 999).
+0000d6c0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000d6d0: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
+0000d6e0: 735b 315d 5b27 7374 6465 7272 5f6c 6f67  s[1]['stderr_log
+0000d6f0: 6669 6c65 5f6d 6178 6279 7465 7327 5d2c  file_maxbytes'],
+0000d700: 2030 290d 0a20 2020 2020 2020 2073 656c   0)..        sel
+0000d710: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000d720: 6e66 6967 735b 315d 5b27 696e 7573 6527  nfigs[1]['inuse'
+0000d730: 5d2c 2054 7275 6529 0d0a 2020 2020 2020  ], True)..      
+0000d740: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000d750: 616c 2863 6f6e 6669 6773 5b31 5d5b 2773  al(configs[1]['s
+0000d760: 7464 6572 725f 6c6f 6766 696c 6527 5d2c  tderr_logfile'],
+0000d770: 2027 6e6f 6e65 2729 0d0a 2020 2020 2020   'none')..      
+0000d780: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000d790: 616c 2863 6f6e 6669 6773 5b31 5d5b 2773  al(configs[1]['s
+0000d7a0: 7464 6f75 745f 6c6f 6766 696c 655f 6261  tdout_logfile_ba
+0000d7b0: 636b 7570 7327 5d2c 2030 290d 0a20 2020  ckups'], 0)..   
+0000d7c0: 2020 2020 2061 7373 6572 7420 2774 6573       assert 'tes
+0000d7d0: 745f 7270 6369 6e74 6572 6661 6365 732e  t_rpcinterfaces.
+0000d7e0: 7079 2720 696e 2063 6f6e 6669 6773 5b30  py' in configs[0
+0000d7f0: 5d5b 2763 6f6d 6d61 6e64 275d 0d0a 0d0a  ]['command']....
+0000d800: 2020 2020 6465 6620 7465 7374 5f67 6574      def test_get
+0000d810: 416c 6c43 6f6e 6669 6749 6e66 6f5f 6669  AllConfigInfo_fi
+0000d820: 6c74 6572 735f 7479 7065 735f 6e6f 745f  lters_types_not_
+0000d830: 636f 6d70 6174 6962 6c65 5f77 6974 685f  compatible_with_
+0000d840: 786d 6c72 7063 2873 656c 6629 3a0d 0a20  xmlrpc(self):.. 
+0000d850: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+0000d860: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+0000d870: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+0000d880: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
+0000d890: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+0000d8a0: 2766 6f6f 2729 0d0a 0d0a 2020 2020 2020  'foo')....      
+0000d8b0: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
+0000d8c0: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+0000d8d0: 732c 2027 7072 6f63 6573 7331 272c 205f  s, 'process1', _
+0000d8e0: 5f66 696c 655f 5f29 0d0a 2020 2020 2020  _file__)..      
+0000d8f0: 2020 7063 6f6e 6669 6732 203d 2044 756d    pconfig2 = Dum
+0000d900: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+0000d910: 732c 2027 7072 6f63 6573 7332 272c 205f  s, 'process2', _
+0000d920: 5f66 696c 655f 5f29 0d0a 2020 2020 2020  _file__)..      
+0000d930: 2020 6763 6f6e 6669 6720 3d20 4475 6d6d    gconfig = Dumm
+0000d940: 7950 4772 6f75 7043 6f6e 6669 6728 6f70  yPGroupConfig(op
+0000d950: 7469 6f6e 732c 2027 6772 6f75 7031 272c  tions, 'group1',
+0000d960: 2070 636f 6e66 6967 733d 5b70 636f 6e66   pconfigs=[pconf
+0000d970: 6967 312c 2070 636f 6e66 6967 325d 290d  ig1, pconfig2]).
+0000d980: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+0000d990: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
+0000d9a0: 7570 7320 3d20 7b27 6772 6f75 7031 273a  ups = {'group1':
+0000d9b0: 2044 756d 6d79 5072 6f63 6573 7347 726f   DummyProcessGro
+0000d9c0: 7570 2867 636f 6e66 6967 297d 0d0a 2020  up(gconfig)}..  
+0000d9d0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+0000d9e0: 642e 6f70 7469 6f6e 732e 7072 6f63 6573  d.options.proces
+0000d9f0: 735f 6772 6f75 705f 636f 6e66 6967 7320  s_group_configs 
+0000da00: 3d20 5b67 636f 6e66 6967 5d0d 0a20 2020  = [gconfig]..   
+0000da10: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+0000da20: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+0000da30: 7570 6572 7669 736f 7264 290d 0a0d 0a20  upervisord).... 
+0000da40: 2020 2020 2020 2075 6e6d 6172 7368 616c         unmarshal
+0000da50: 6c61 626c 6573 203d 205b 7479 7065 284e  lables = [type(N
+0000da60: 6f6e 6529 5d0d 0a0d 0a20 2020 2020 2020  one)]....       
+0000da70: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0000da80: 2020 2066 726f 6d20 656e 756d 2069 6d70     from enum imp
+0000da90: 6f72 7420 456e 756d 0d0a 2020 2020 2020  ort Enum..      
+0000daa0: 2020 2020 2020 756e 6d61 7273 6861 6c6c        unmarshall
+0000dab0: 6162 6c65 732e 6170 7065 6e64 2845 6e75  ables.append(Enu
+0000dac0: 6d29 0d0a 2020 2020 2020 2020 6578 6365  m)..        exce
+0000dad0: 7074 2049 6d70 6f72 7445 7272 6f72 3a20  pt ImportError: 
+0000dae0: 2320 7079 7468 6f6e 2032 0d0a 2020 2020  # python 2..    
+0000daf0: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+0000db00: 2020 2020 2020 2020 666f 7220 7479 7020          for typ 
+0000db10: 696e 2075 6e6d 6172 7368 616c 6c61 626c  in unmarshallabl
+0000db20: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0000db30: 2066 6f72 2063 6f6e 6669 6720 696e 2069   for config in i
+0000db40: 6e74 6572 6661 6365 2e67 6574 416c 6c43  nterface.getAllC
+0000db50: 6f6e 6669 6749 6e66 6f28 293a 0d0a 2020  onfigInfo():..  
+0000db60: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0000db70: 7220 6b2c 2076 2069 6e20 636f 6e66 6967  r k, v in config
+0000db80: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+0000db90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000dba0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+0000dbb0: 6973 696e 7374 616e 6365 2876 2c20 7479  isinstance(v, ty
+0000dbc0: 7029 2c20 6b29 0d0a 0d0a 2020 2020 6465  p), k)....    de
+0000dbd0: 6620 7465 7374 5f5f 696e 7465 7270 7265  f test__interpre
+0000dbe0: 7450 726f 6365 7373 496e 666f 2873 656c  tProcessInfo(sel
+0000dbf0: 6629 3a0d 0a20 2020 2020 2020 2073 7570  f):..        sup
+0000dc00: 6572 7669 736f 7264 203d 2044 756d 6d79  ervisord = Dummy
+0000dc10: 5375 7065 7276 6973 6f72 2829 0d0a 2020  Supervisor()..  
+0000dc20: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+0000dc30: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+0000dc40: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+0000dc50: 2020 2020 2020 7374 6172 7420 3d20 5f4e        start = _N
+0000dc60: 4f57 202d 2031 3030 0d0a 2020 2020 2020  OW - 100..      
+0000dc70: 2020 7374 6f70 203d 205f 4e4f 5720 2d20    stop = _NOW - 
+0000dc80: 310d 0a20 2020 2020 2020 2066 726f 6d20  1..        from 
+0000dc90: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
+0000dca0: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
+0000dcb0: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
+0000dcc0: 2072 756e 6e69 6e67 203d 207b 276e 616d   running = {'nam
+0000dcd0: 6527 3a20 2772 756e 6e69 6e67 272c 0d0a  e': 'running',..
+0000dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dcf0: 2020 2027 7069 6427 3a20 312c 0d0a 2020     'pid': 1,..  
+0000dd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dd10: 2027 7374 6174 6527 3a20 5072 6f63 6573   'state': Proces
+0000dd20: 7353 7461 7465 732e 5255 4e4e 494e 472c  sStates.RUNNING,
+0000dd30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000dd40: 2020 2020 2027 7374 6172 7427 3a20 7374       'start': st
+0000dd50: 6172 742c 0d0a 2020 2020 2020 2020 2020  art,..          
+0000dd60: 2020 2020 2020 2020 2027 7374 6f70 273a           'stop':
+0000dd70: 2073 746f 702c 0d0a 2020 2020 2020 2020   stop,..        
+0000dd80: 2020 2020 2020 2020 2020 2027 6e6f 7727             'now'
+0000dd90: 3a20 5f4e 4f57 7d0d 0a0d 0a20 2020 2020  : _NOW}....     
+0000dda0: 2020 2064 6573 6372 6970 7469 6f6e 203d     description =
+0000ddb0: 2069 6e74 6572 6661 6365 2e5f 696e 7465   interface._inte
+0000ddc0: 7270 7265 7450 726f 6365 7373 496e 666f  rpretProcessInfo
+0000ddd0: 2872 756e 6e69 6e67 290d 0a20 2020 2020  (running)..     
+0000dde0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000ddf0: 7561 6c28 6465 7363 7269 7074 696f 6e2c  ual(description,
+0000de00: 2027 7069 6420 312c 2075 7074 696d 6520   'pid 1, uptime 
+0000de10: 303a 3031 3a34 3027 290d 0a0d 0a20 2020  0:01:40')....   
+0000de20: 2020 2020 2066 6174 616c 203d 207b 276e       fatal = {'n
+0000de30: 616d 6527 3a20 2766 6174 616c 272c 0d0a  ame': 'fatal',..
+0000de40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000de50: 2027 7069 6427 3a20 322c 0d0a 2020 2020   'pid': 2,..    
+0000de60: 2020 2020 2020 2020 2020 2020 2027 7374               'st
+0000de70: 6174 6527 3a20 5072 6f63 6573 7353 7461  ate': ProcessSta
+0000de80: 7465 732e 4641 5441 4c2c 0d0a 2020 2020  tes.FATAL,..    
+0000de90: 2020 2020 2020 2020 2020 2020 2027 7374               'st
+0000dea0: 6172 7427 3a20 7374 6172 742c 0d0a 2020  art': start,..  
+0000deb0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000dec0: 7374 6f70 273a 2073 746f 702c 0d0a 2020  stop': stop,..  
+0000ded0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000dee0: 6e6f 7727 3a20 5f4e 4f57 2c0d 0a20 2020  now': _NOW,..   
+0000def0: 2020 2020 2020 2020 2020 2020 2020 2773                's
+0000df00: 7061 776e 6572 7227 3a20 2748 6f73 6564  pawnerr': 'Hosed
+0000df10: 277d 0d0a 0d0a 2020 2020 2020 2020 6465  '}....        de
+0000df20: 7363 7269 7074 696f 6e20 3d20 696e 7465  scription = inte
+0000df30: 7266 6163 652e 5f69 6e74 6572 7072 6574  rface._interpret
+0000df40: 5072 6f63 6573 7349 6e66 6f28 6661 7461  ProcessInfo(fata
+0000df50: 6c29 0d0a 2020 2020 2020 2020 7365 6c66  l)..        self
+0000df60: 2e61 7373 6572 7445 7175 616c 2864 6573  .assertEqual(des
+0000df70: 6372 6970 7469 6f6e 2c20 2748 6f73 6564  cription, 'Hosed
+0000df80: 2729 0d0a 0d0a 2020 2020 2020 2020 6661  ')....        fa
+0000df90: 7461 6c32 203d 207b 276e 616d 6527 3a20  tal2 = {'name': 
+0000dfa0: 2766 6174 616c 272c 0d0a 2020 2020 2020  'fatal',..      
+0000dfb0: 2020 2020 2020 2020 2020 2020 2770 6964              'pid
+0000dfc0: 273a 2032 2c0d 0a20 2020 2020 2020 2020  ': 2,..         
+0000dfd0: 2020 2020 2020 2020 2027 7374 6174 6527           'state'
+0000dfe0: 3a20 5072 6f63 6573 7353 7461 7465 732e  : ProcessStates.
+0000dff0: 4641 5441 4c2c 0d0a 2020 2020 2020 2020  FATAL,..        
+0000e000: 2020 2020 2020 2020 2020 2773 7461 7274            'start
+0000e010: 273a 2073 7461 7274 2c0d 0a20 2020 2020  ': start,..     
+0000e020: 2020 2020 2020 2020 2020 2020 2027 7374               'st
+0000e030: 6f70 273a 2073 746f 702c 0d0a 2020 2020  op': stop,..    
+0000e040: 2020 2020 2020 2020 2020 2020 2020 276e                'n
+0000e050: 6f77 273a 205f 4e4f 572c 0d0a 2020 2020  ow': _NOW,..    
+0000e060: 2020 2020 2020 2020 2020 2020 2020 2773                's
+0000e070: 7061 776e 6572 7227 3a20 2727 2c20 7d0d  pawnerr': '', }.
+0000e080: 0a0d 0a20 2020 2020 2020 2064 6573 6372  ...        descr
+0000e090: 6970 7469 6f6e 203d 2069 6e74 6572 6661  iption = interfa
+0000e0a0: 6365 2e5f 696e 7465 7270 7265 7450 726f  ce._interpretPro
+0000e0b0: 6365 7373 496e 666f 2866 6174 616c 3229  cessInfo(fatal2)
+0000e0c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000e0d0: 7373 6572 7445 7175 616c 2864 6573 6372  ssertEqual(descr
+0000e0e0: 6970 7469 6f6e 2c20 2775 6e6b 6e6f 776e  iption, 'unknown
+0000e0f0: 2065 7272 6f72 2028 7472 7920 2274 6169   error (try "tai
+0000e100: 6c20 6661 7461 6c22 2927 290d 0a0d 0a20  l fatal")').... 
+0000e110: 2020 2020 2020 2073 746f 7070 6564 203d         stopped =
+0000e120: 207b 276e 616d 6527 3a20 2773 746f 7070   {'name': 'stopp
+0000e130: 6564 272c 0d0a 2020 2020 2020 2020 2020  ed',..          
+0000e140: 2020 2020 2020 2020 2027 7069 6427 3a20           'pid': 
+0000e150: 332c 0d0a 2020 2020 2020 2020 2020 2020  3,..            
+0000e160: 2020 2020 2020 2027 7374 6174 6527 3a20         'state': 
+0000e170: 5072 6f63 6573 7353 7461 7465 732e 5354  ProcessStates.ST
+0000e180: 4f50 5045 442c 0d0a 2020 2020 2020 2020  OPPED,..        
+0000e190: 2020 2020 2020 2020 2020 2027 7374 6172             'star
+0000e1a0: 7427 3a20 7374 6172 742c 0d0a 2020 2020  t': start,..    
+0000e1b0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000e1c0: 7374 6f70 273a 2073 746f 702c 0d0a 2020  stop': stop,..  
+0000e1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e1e0: 2027 6e6f 7727 3a20 5f4e 4f57 2c0d 0a20   'now': _NOW,.. 
 0000e1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e200: 2020 2020 2020 2020 2020 2073 7464 6f75             stdou
-0000e210: 745f 6c6f 6766 696c 653d 272f 746d 702f  t_logfile='/tmp/
-0000e220: 666c 6565 622e 6261 7227 290d 0a20 2020  fleeb.bar')..   
-0000e230: 2020 2020 2070 726f 6365 7373 203d 2044       process = D
-0000e240: 756d 6d79 5072 6f63 6573 7328 636f 6e66  ummyProcess(conf
-0000e250: 6967 290d 0a20 2020 2020 2020 2070 726f  ig)..        pro
-0000e260: 6365 7373 2e70 6964 203d 2031 3131 0d0a  cess.pid = 111..
-0000e270: 2020 2020 2020 2020 7072 6f63 6573 732e          process.
-0000e280: 6c61 7374 7374 6172 7420 3d20 3130 0d0a  laststart = 10..
-0000e290: 2020 2020 2020 2020 7072 6f63 6573 732e          process.
-0000e2a0: 6c61 7374 7374 6f70 203d 2031 310d 0a20  laststop = 11.. 
-0000e2b0: 2020 2020 2020 2070 6772 6f75 705f 636f         pgroup_co
-0000e2c0: 6e66 6967 203d 2044 756d 6d79 5047 726f  nfig = DummyPGro
-0000e2d0: 7570 436f 6e66 6967 286f 7074 696f 6e73  upConfig(options
-0000e2e0: 2c20 6e61 6d65 3d27 666f 6f27 290d 0a20  , name='foo').. 
-0000e2f0: 2020 2020 2020 2070 6772 6f75 7020 3d20         pgroup = 
-0000e300: 4475 6d6d 7950 726f 6365 7373 4772 6f75  DummyProcessGrou
-0000e310: 7028 7067 726f 7570 5f63 6f6e 6669 6729  p(pgroup_config)
-0000e320: 0d0a 2020 2020 2020 2020 7067 726f 7570  ..        pgroup
-0000e330: 2e70 726f 6365 7373 6573 203d 207b 2766  .processes = {'f
-0000e340: 6f6f 273a 2070 726f 6365 7373 7d0d 0a20  oo': process}.. 
-0000e350: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-0000e360: 7264 203d 2044 756d 6d79 5375 7065 7276  rd = DummySuperv
-0000e370: 6973 6f72 2870 726f 6365 7373 5f67 726f  isor(process_gro
-0000e380: 7570 733d 7b27 666f 6f27 3a20 7067 726f  ups={'foo': pgro
-0000e390: 7570 7d29 0d0a 2020 2020 2020 2020 696e  up})..        in
-0000e3a0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-0000e3b0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-0000e3c0: 6f72 6429 0d0a 2020 2020 2020 2020 6461  ord)..        da
-0000e3d0: 7461 203d 2069 6e74 6572 6661 6365 2e67  ta = interface.g
-0000e3e0: 6574 5072 6f63 6573 7349 6e66 6f28 2766  etProcessInfo('f
-0000e3f0: 6f6f 2729 0d0a 0d0a 2020 2020 2020 2020  oo')....        
-0000e400: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000e410: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-0000e420: 655f 7465 7874 2c20 2767 6574 5072 6f63  e_text, 'getProc
-0000e430: 6573 7349 6e66 6f27 290d 0a20 2020 2020  essInfo')..     
-0000e440: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000e450: 7561 6c28 6461 7461 5b27 6c6f 6766 696c  ual(data['logfil
-0000e460: 6527 5d2c 2027 2f74 6d70 2f66 6c65 6562  e'], '/tmp/fleeb
-0000e470: 2e62 6172 2729 0d0a 2020 2020 2020 2020  .bar')..        
-0000e480: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000e490: 2864 6174 615b 2773 7464 6f75 745f 6c6f  (data['stdout_lo
-0000e4a0: 6766 696c 6527 5d2c 2027 2f74 6d70 2f66  gfile'], '/tmp/f
-0000e4b0: 6c65 6562 2e62 6172 2729 0d0a 2020 2020  leeb.bar')..    
-0000e4c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000e4d0: 7175 616c 2864 6174 615b 2773 7464 6572  qual(data['stder
-0000e4e0: 725f 6c6f 6766 696c 6527 5d2c 2027 2729  r_logfile'], '')
-0000e4f0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000e500: 7373 6572 7445 7175 616c 2864 6174 615b  ssertEqual(data[
-0000e510: 276e 616d 6527 5d2c 2027 666f 6f27 290d  'name'], 'foo').
-0000e520: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000e530: 7365 7274 4571 7561 6c28 6461 7461 5b27  sertEqual(data['
-0000e540: 7069 6427 5d2c 2031 3131 290d 0a20 2020  pid'], 111)..   
-0000e550: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000e560: 4571 7561 6c28 6461 7461 5b27 7374 6172  Equal(data['star
-0000e570: 7427 5d2c 2031 3029 0d0a 2020 2020 2020  t'], 10)..      
-0000e580: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000e590: 616c 2864 6174 615b 2773 746f 7027 5d2c  al(data['stop'],
-0000e5a0: 2031 3129 0d0a 2020 2020 2020 2020 7365   11)..        se
-0000e5b0: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
-0000e5c0: 6174 615b 2773 7461 7465 275d 2c20 5072  ata['state'], Pr
-0000e5d0: 6f63 6573 7353 7461 7465 732e 5255 4e4e  ocessStates.RUNN
-0000e5e0: 494e 4729 0d0a 2020 2020 2020 2020 7365  ING)..        se
-0000e5f0: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
-0000e600: 6174 615b 2773 7461 7465 6e61 6d65 275d  ata['statename']
-0000e610: 2c20 2752 554e 4e49 4e47 2729 0d0a 2020  , 'RUNNING')..  
-0000e620: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000e630: 7445 7175 616c 2864 6174 615b 2765 7869  tEqual(data['exi
-0000e640: 7473 7461 7475 7327 5d2c 2030 290d 0a20  tstatus'], 0).. 
-0000e650: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000e660: 7274 4571 7561 6c28 6461 7461 5b27 7370  rtEqual(data['sp
-0000e670: 6177 6e65 7272 275d 2c20 2727 290d 0a20  awnerr'], '').. 
-0000e680: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000e690: 7274 5472 7565 2864 6174 615b 2764 6573  rtTrue(data['des
-0000e6a0: 6372 6970 7469 6f6e 275d 2e73 7461 7274  cription'].start
-0000e6b0: 7377 6974 6828 2770 6964 2031 3131 2729  swith('pid 111')
-0000e6c0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-0000e6d0: 745f 6765 7450 726f 6365 7373 496e 666f  t_getProcessInfo
-0000e6e0: 5f6c 6f67 6669 6c65 5f4e 4f4e 4528 7365  _logfile_NONE(se
-0000e6f0: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
-0000e700: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-0000e710: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-0000e720: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-0000e730: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-0000e740: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
-0000e750: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0000e760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e770: 2073 7464 6f75 745f 6c6f 6766 696c 653d   stdout_logfile=
-0000e780: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
-0000e790: 726f 6365 7373 203d 2044 756d 6d79 5072  rocess = DummyPr
-0000e7a0: 6f63 6573 7328 636f 6e66 6967 290d 0a20  ocess(config).. 
-0000e7b0: 2020 2020 2020 2070 726f 6365 7373 2e70         process.p
-0000e7c0: 6964 203d 2031 3131 0d0a 2020 2020 2020  id = 111..      
-0000e7d0: 2020 7072 6f63 6573 732e 6c61 7374 7374    process.lastst
-0000e7e0: 6172 7420 3d20 3130 0d0a 2020 2020 2020  art = 10..      
-0000e7f0: 2020 7072 6f63 6573 732e 6c61 7374 7374    process.lastst
-0000e800: 6f70 203d 2031 310d 0a20 2020 2020 2020  op = 11..       
-0000e810: 2070 6772 6f75 705f 636f 6e66 6967 203d   pgroup_config =
-0000e820: 2044 756d 6d79 5047 726f 7570 436f 6e66   DummyPGroupConf
-0000e830: 6967 286f 7074 696f 6e73 2c20 6e61 6d65  ig(options, name
-0000e840: 3d27 666f 6f27 290d 0a20 2020 2020 2020  ='foo')..       
-0000e850: 2070 6772 6f75 7020 3d20 4475 6d6d 7950   pgroup = DummyP
-0000e860: 726f 6365 7373 4772 6f75 7028 7067 726f  rocessGroup(pgro
-0000e870: 7570 5f63 6f6e 6669 6729 0d0a 2020 2020  up_config)..    
-0000e880: 2020 2020 7067 726f 7570 2e70 726f 6365      pgroup.proce
-0000e890: 7373 6573 203d 207b 2766 6f6f 273a 2070  sses = {'foo': p
-0000e8a0: 726f 6365 7373 7d0d 0a20 2020 2020 2020  rocess}..       
-0000e8b0: 2073 7570 6572 7669 736f 7264 203d 2044   supervisord = D
-0000e8c0: 756d 6d79 5375 7065 7276 6973 6f72 2870  ummySupervisor(p
-0000e8d0: 726f 6365 7373 5f67 726f 7570 733d 7b27  rocess_groups={'
-0000e8e0: 666f 6f27 3a20 7067 726f 7570 7d29 0d0a  foo': pgroup})..
-0000e8f0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-0000e900: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-0000e910: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-0000e920: 2020 2020 2020 2020 6461 7461 203d 2069          data = i
-0000e930: 6e74 6572 6661 6365 2e67 6574 5072 6f63  nterface.getProc
-0000e940: 6573 7349 6e66 6f28 2766 6f6f 2729 0d0a  essInfo('foo')..
-0000e950: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000e960: 6572 7445 7175 616c 2864 6174 615b 276c  ertEqual(data['l
-0000e970: 6f67 6669 6c65 275d 2c20 2727 290d 0a20  ogfile'], '').. 
-0000e980: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000e990: 7274 4571 7561 6c28 6461 7461 5b27 7374  rtEqual(data['st
-0000e9a0: 646f 7574 5f6c 6f67 6669 6c65 275d 2c20  dout_logfile'], 
-0000e9b0: 2727 290d 0a0d 0a20 2020 2064 6566 2074  '')....    def t
-0000e9c0: 6573 745f 6765 7450 726f 6365 7373 496e  est_getProcessIn
-0000e9d0: 666f 5f75 6e6b 6e6f 776e 5f73 7461 7465  fo_unknown_state
-0000e9e0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0000e9f0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-0000ea00: 2e73 7461 7465 7320 696d 706f 7274 2050  .states import P
-0000ea10: 726f 6365 7373 5374 6174 6573 0d0a 2020  rocessStates..  
-0000ea20: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-0000ea30: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-0000ea40: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-0000ea50: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-0000ea60: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
-0000ea70: 2f62 696e 2f66 6f6f 2729 0d0a 2020 2020  /bin/foo')..    
-0000ea80: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-0000ea90: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
-0000eaa0: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-0000eab0: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
-0000eac0: 6967 290d 0a20 2020 2020 2020 2073 7570  ig)..        sup
-0000ead0: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
-0000eae0: 6361 7474 7228 2766 6f6f 272c 2027 7374  cattr('foo', 'st
-0000eaf0: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
-0000eb00: 7465 732e 554e 4b4e 4f57 4e29 0d0a 2020  tes.UNKNOWN)..  
-0000eb10: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-0000eb20: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-0000eb30: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-0000eb40: 2020 2020 2020 6461 7461 203d 2069 6e74        data = int
-0000eb50: 6572 6661 6365 2e67 6574 5072 6f63 6573  erface.getProces
-0000eb60: 7349 6e66 6f28 2766 6f6f 2729 0d0a 2020  sInfo('foo')..  
-0000eb70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000eb80: 7445 7175 616c 2864 6174 615b 2773 7461  tEqual(data['sta
-0000eb90: 7465 6e61 6d65 275d 2c20 2755 4e4b 4e4f  tename'], 'UNKNO
-0000eba0: 574e 2729 0d0a 2020 2020 2020 2020 7365  WN')..        se
-0000ebb0: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
-0000ebc0: 6174 615b 2764 6573 6372 6970 7469 6f6e  ata['description
-0000ebd0: 275d 2c20 2727 290d 0a0d 0a20 2020 2064  '], '')....    d
-0000ebe0: 6566 2074 6573 745f 6765 7450 726f 6365  ef test_getProce
-0000ebf0: 7373 496e 666f 5f62 6164 5f6e 616d 655f  ssInfo_bad_name_
-0000ec00: 7768 656e 5f62 6164 5f70 726f 6365 7373  when_bad_process
-0000ec10: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-0000ec20: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-0000ec30: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
-0000ec40: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-0000ec50: 6f72 6420 3d20 4475 6d6d 7953 7570 6572  ord = DummySuper
-0000ec60: 7669 736f 7228 290d 0a20 2020 2020 2020  visor()..       
-0000ec70: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-0000ec80: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-0000ec90: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-0000eca0: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
-0000ecb0: 4572 726f 7228 786d 6c72 7063 2e46 6175  Error(xmlrpc.Fau
-0000ecc0: 6c74 732e 4241 445f 4e41 4d45 2c0d 0a20  lts.BAD_NAME,.. 
-0000ecd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ece0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
-0000ecf0: 7266 6163 652e 6765 7450 726f 6365 7373  rface.getProcess
-0000ed00: 496e 666f 2c20 276e 6f6e 6578 6973 7465  Info, 'nonexiste
-0000ed10: 6e74 2729 0d0a 0d0a 2020 2020 6465 6620  nt')....    def 
-0000ed20: 7465 7374 5f67 6574 5072 6f63 6573 7349  test_getProcessI
-0000ed30: 6e66 6f5f 6261 645f 6e61 6d65 5f77 6865  nfo_bad_name_whe
-0000ed40: 6e5f 6e6f 5f70 726f 6365 7373 2873 656c  n_no_process(sel
-0000ed50: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
-0000ed60: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
-0000ed70: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
-0000ed80: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-0000ed90: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-0000eda0: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
-0000edb0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-0000edc0: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
-0000edd0: 696e 2f66 6f6f 2729 0d0a 2020 2020 2020  in/foo')..      
-0000ede0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-0000edf0: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
-0000ee00: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
-0000ee10: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
-0000ee20: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-0000ee30: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-0000ee40: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-0000ee50: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000ee60: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-0000ee70: 786d 6c72 7063 2e46 6175 6c74 732e 4241  xmlrpc.Faults.BA
-0000ee80: 445f 4e41 4d45 2c0d 0a20 2020 2020 2020  D_NAME,..       
-0000ee90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eea0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-0000eeb0: 6765 7450 726f 6365 7373 496e 666f 2c20  getProcessInfo, 
-0000eec0: 2766 6f6f 3a27 290d 0a0d 0a20 2020 2064  'foo:')....    d
-0000eed0: 6566 2074 6573 745f 6765 7450 726f 6365  ef test_getProce
-0000eee0: 7373 496e 666f 5f63 6170 735f 7469 6d65  ssInfo_caps_time
-0000eef0: 7374 616d 7073 5f65 7863 6565 6469 6e67  stamps_exceeding
-0000ef00: 5f78 6d6c 7270 635f 6d61 7869 6e74 2873  _xmlrpc_maxint(s
-0000ef10: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
-0000ef20: 726f 6d20 7375 7065 7276 6973 6f72 2e63  rom supervisor.c
-0000ef30: 6f6d 7061 7420 696d 706f 7274 2078 6d6c  ompat import xml
-0000ef40: 7270 636c 6962 0d0a 2020 2020 2020 2020  rpclib..        
-0000ef50: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-0000ef60: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-0000ef70: 2020 636f 6e66 6967 203d 2044 756d 6d79    config = Dummy
-0000ef80: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-0000ef90: 2027 666f 6f27 2c20 272f 6269 6e2f 666f   'foo', '/bin/fo
-0000efa0: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-0000efb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000efc0: 2020 2073 7464 6f75 745f 6c6f 6766 696c     stdout_logfil
-0000efd0: 653d 4e6f 6e65 290d 0a20 2020 2020 2020  e=None)..       
-0000efe0: 2070 726f 6365 7373 203d 2044 756d 6d79   process = Dummy
-0000eff0: 5072 6f63 6573 7328 636f 6e66 6967 290d  Process(config).
-0000f000: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-0000f010: 2e6c 6173 7473 7461 7274 203d 2066 6c6f  .laststart = flo
-0000f020: 6174 2878 6d6c 7270 636c 6962 2e4d 4158  at(xmlrpclib.MAX
-0000f030: 494e 5420 2b20 3129 0d0a 2020 2020 2020  INT + 1)..      
-0000f040: 2020 7072 6f63 6573 732e 6c61 7374 7374    process.lastst
-0000f050: 6f70 203d 2066 6c6f 6174 2878 6d6c 7270  op = float(xmlrp
-0000f060: 636c 6962 2e4d 4158 494e 5420 2b20 3129  clib.MAXINT + 1)
-0000f070: 0d0a 2020 2020 2020 2020 7067 726f 7570  ..        pgroup
-0000f080: 5f63 6f6e 6669 6720 3d20 4475 6d6d 7950  _config = DummyP
-0000f090: 4772 6f75 7043 6f6e 6669 6728 6f70 7469  GroupConfig(opti
-0000f0a0: 6f6e 732c 206e 616d 653d 2766 6f6f 2729  ons, name='foo')
-0000f0b0: 0d0a 2020 2020 2020 2020 7067 726f 7570  ..        pgroup
-0000f0c0: 203d 2044 756d 6d79 5072 6f63 6573 7347   = DummyProcessG
-0000f0d0: 726f 7570 2870 6772 6f75 705f 636f 6e66  roup(pgroup_conf
-0000f0e0: 6967 290d 0a20 2020 2020 2020 2070 6772  ig)..        pgr
-0000f0f0: 6f75 702e 7072 6f63 6573 7365 7320 3d20  oup.processes = 
-0000f100: 7b27 666f 6f27 3a70 726f 6365 7373 7d0d  {'foo':process}.
-0000f110: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-0000f120: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
-0000f130: 7276 6973 6f72 2870 726f 6365 7373 5f67  rvisor(process_g
-0000f140: 726f 7570 733d 7b27 666f 6f27 3a70 6772  roups={'foo':pgr
-0000f150: 6f75 707d 290d 0a20 2020 2020 2020 2069  oup})..        i
-0000f160: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-0000f170: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-0000f180: 736f 7264 290d 0a20 2020 2020 2020 2069  sord)..        i
-0000f190: 6e74 6572 6661 6365 2e5f 6e6f 7720 3d20  nterface._now = 
-0000f1a0: 6c61 6d62 6461 3a20 666c 6f61 7428 786d  lambda: float(xm
-0000f1b0: 6c72 7063 6c69 622e 4d41 5849 4e54 202b  lrpclib.MAXINT +
-0000f1c0: 2031 290d 0a20 2020 2020 2020 2064 6174   1)..        dat
-0000f1d0: 6120 3d20 696e 7465 7266 6163 652e 6765  a = interface.ge
-0000f1e0: 7450 726f 6365 7373 496e 666f 2827 666f  tProcessInfo('fo
-0000f1f0: 6f27 290d 0a20 2020 2020 2020 2073 656c  o')..        sel
-0000f200: 662e 6173 7365 7274 4571 7561 6c28 6461  f.assertEqual(da
-0000f210: 7461 5b27 7374 6172 7427 5d2c 2078 6d6c  ta['start'], xml
-0000f220: 7270 636c 6962 2e4d 4158 494e 5429 0d0a  rpclib.MAXINT)..
-0000f230: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000f240: 6572 7445 7175 616c 2864 6174 615b 2773  ertEqual(data['s
-0000f250: 746f 7027 5d2c 2078 6d6c 7270 636c 6962  top'], xmlrpclib
-0000f260: 2e4d 4158 494e 5429 0d0a 2020 2020 2020  .MAXINT)..      
-0000f270: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000f280: 616c 2864 6174 615b 276e 6f77 275d 2c20  al(data['now'], 
-0000f290: 786d 6c72 7063 6c69 622e 4d41 5849 4e54  xmlrpclib.MAXINT
-0000f2a0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-0000f2b0: 745f 6765 7441 6c6c 5072 6f63 6573 7349  t_getAllProcessI
-0000f2c0: 6e66 6f28 7365 6c66 293a 0d0a 2020 2020  nfo(self):..    
-0000f2d0: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-0000f2e0: 736f 722e 7072 6f63 6573 7320 696d 706f  sor.process impo
-0000f2f0: 7274 2050 726f 6365 7373 5374 6174 6573  rt ProcessStates
-0000f300: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-0000f310: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-0000f320: 2829 0d0a 0d0a 2020 2020 2020 2020 7031  ()....        p1
-0000f330: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-0000f340: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-0000f350: 7072 6f63 6573 7331 272c 2027 2f62 696e  process1', '/bin
-0000f360: 2f70 726f 6365 7373 3127 2c0d 0a20 2020  /process1',..   
-0000f370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f380: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-0000f390: 6f72 6974 793d 312c 0d0a 2020 2020 2020  ority=1,..      
-0000f3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f3b0: 2020 2020 2020 2020 2020 7374 646f 7574            stdout
-0000f3c0: 5f6c 6f67 6669 6c65 3d27 2f74 6d70 2f70  _logfile='/tmp/p
-0000f3d0: 726f 6365 7373 312e 6c6f 6727 290d 0a0d  rocess1.log')...
-0000f3e0: 0a20 2020 2020 2020 2070 3263 6f6e 6669  .        p2confi
-0000f3f0: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
-0000f400: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-0000f410: 7373 3227 2c20 272f 6269 6e2f 7072 6f63  ss2', '/bin/proc
-0000f420: 6573 7332 272c 0d0a 2020 2020 2020 2020  ess2',..        
+0000e200: 2020 2773 7061 776e 6572 7227 3a20 2727    'spawnerr': ''
+0000e210: 2c20 7d0d 0a0d 0a20 2020 2020 2020 2064  , }....        d
+0000e220: 6573 6372 6970 7469 6f6e 203d 2069 6e74  escription = int
+0000e230: 6572 6661 6365 2e5f 696e 7465 7270 7265  erface._interpre
+0000e240: 7450 726f 6365 7373 496e 666f 2873 746f  tProcessInfo(sto
+0000e250: 7070 6564 290d 0a20 2020 2020 2020 2066  pped)..        f
+0000e260: 726f 6d20 6461 7465 7469 6d65 2069 6d70  rom datetime imp
+0000e270: 6f72 7420 6461 7465 7469 6d65 0d0a 2020  ort datetime..  
+0000e280: 2020 2020 2020 7374 6f70 7469 6d65 203d        stoptime =
+0000e290: 2064 6174 6574 696d 6528 2a74 696d 652e   datetime(*time.
+0000e2a0: 6c6f 6361 6c74 696d 6528 7374 6f70 295b  localtime(stop)[
+0000e2b0: 3a37 5d29 0d0a 2020 2020 2020 2020 7365  :7])..        se
+0000e2c0: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
+0000e2d0: 6573 6372 6970 7469 6f6e 2c20 7374 6f70  escription, stop
+0000e2e0: 7469 6d65 2e73 7472 6674 696d 6528 5f54  time.strftime(_T
+0000e2f0: 494d 4546 4f52 4d41 5429 290d 0a0d 0a20  IMEFORMAT)).... 
+0000e300: 2020 2020 2020 2073 746f 7070 6564 3220         stopped2 
+0000e310: 3d20 7b27 6e61 6d65 273a 2027 7374 6f70  = {'name': 'stop
+0000e320: 7065 6427 2c0d 0a20 2020 2020 2020 2020  ped',..         
+0000e330: 2020 2020 2020 2020 2020 2027 7069 6427             'pid'
+0000e340: 3a20 332c 0d0a 2020 2020 2020 2020 2020  : 3,..          
+0000e350: 2020 2020 2020 2020 2020 2773 7461 7465            'state
+0000e360: 273a 2050 726f 6365 7373 5374 6174 6573  ': ProcessStates
+0000e370: 2e53 544f 5050 4544 2c0d 0a20 2020 2020  .STOPPED,..     
+0000e380: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000e390: 7374 6172 7427 3a20 302c 0d0a 2020 2020  start': 0,..    
+0000e3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e3b0: 2773 746f 7027 3a20 7374 6f70 2c0d 0a20  'stop': stop,.. 
+0000e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e3d0: 2020 2027 6e6f 7727 3a20 5f4e 4f57 2c0d     'now': _NOW,.
+0000e3e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e3f0: 2020 2020 2027 7370 6177 6e65 7272 273a       'spawnerr':
+0000e400: 2027 272c 207d 0d0a 0d0a 2020 2020 2020   '', }....      
+0000e410: 2020 6465 7363 7269 7074 696f 6e20 3d20    description = 
+0000e420: 696e 7465 7266 6163 652e 5f69 6e74 6572  interface._inter
+0000e430: 7072 6574 5072 6f63 6573 7349 6e66 6f28  pretProcessInfo(
+0000e440: 7374 6f70 7065 6432 290d 0a20 2020 2020  stopped2)..     
+0000e450: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000e460: 7561 6c28 6465 7363 7269 7074 696f 6e2c  ual(description,
+0000e470: 2027 4e6f 7420 7374 6172 7465 6427 290d   'Not started').
+0000e480: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+0000e490: 5f69 6e74 6572 7072 6574 5072 6f63 6573  _interpretProces
+0000e4a0: 7349 6e66 6f5f 646f 6573 6e74 5f72 6570  sInfo_doesnt_rep
+0000e4b0: 6f72 745f 6e65 6761 7469 7665 5f75 7074  ort_negative_upt
+0000e4c0: 696d 6528 7365 6c66 293a 0d0a 2020 2020  ime(self):..    
+0000e4d0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+0000e4e0: 3d20 4475 6d6d 7953 7570 6572 7669 736f  = DummySuperviso
+0000e4f0: 7228 290d 0a20 2020 2020 2020 2069 6e74  r()..        int
+0000e500: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+0000e510: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+0000e520: 7264 290d 0a20 2020 2020 2020 2066 726f  rd)..        fro
+0000e530: 6d20 7375 7065 7276 6973 6f72 2e70 726f  m supervisor.pro
+0000e540: 6365 7373 2069 6d70 6f72 7420 5072 6f63  cess import Proc
+0000e550: 6573 7353 7461 7465 730d 0a20 2020 2020  essStates..     
+0000e560: 2020 2072 756e 6e69 6e67 203d 207b 276e     running = {'n
+0000e570: 616d 6527 3a20 2772 756e 6e69 6e67 272c  ame': 'running',
+0000e580: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000e590: 2020 2020 2027 7069 6427 3a20 3432 2c0d       'pid': 42,.
+0000e5a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e5b0: 2020 2020 2773 7461 7465 273a 2050 726f      'state': Pro
+0000e5c0: 6365 7373 5374 6174 6573 2e52 554e 4e49  cessStates.RUNNI
+0000e5d0: 4e47 2c0d 0a20 2020 2020 2020 2020 2020  NG,..           
+0000e5e0: 2020 2020 2020 2020 2773 7461 7274 273a          'start':
+0000e5f0: 205f 4e4f 5720 2b20 3130 2c20 2320 7374   _NOW + 10, # st
+0000e600: 6172 7465 6420 696e 2074 6865 2066 7574  arted in the fut
+0000e610: 7572 650d 0a20 2020 2020 2020 2020 2020  ure..           
+0000e620: 2020 2020 2020 2020 2773 746f 7027 3a20          'stop': 
+0000e630: 4e6f 6e65 2c0d 0a20 2020 2020 2020 2020  None,..         
+0000e640: 2020 2020 2020 2020 2020 276e 6f77 273a            'now':
+0000e650: 205f 4e4f 577d 0d0a 2020 2020 2020 2020   _NOW}..        
+0000e660: 6465 7363 7269 7074 696f 6e20 3d20 696e  description = in
+0000e670: 7465 7266 6163 652e 5f69 6e74 6572 7072  terface._interpr
+0000e680: 6574 5072 6f63 6573 7349 6e66 6f28 7275  etProcessInfo(ru
+0000e690: 6e6e 696e 6729 0d0a 2020 2020 2020 2020  nning)..        
+0000e6a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000e6b0: 2864 6573 6372 6970 7469 6f6e 2c20 2770  (description, 'p
+0000e6c0: 6964 2034 322c 2075 7074 696d 6520 303a  id 42, uptime 0:
+0000e6d0: 3030 3a30 3027 290d 0a0d 0a20 2020 2064  00:00')....    d
+0000e6e0: 6566 2074 6573 745f 6765 7450 726f 6365  ef test_getProce
+0000e6f0: 7373 496e 666f 2873 656c 6629 3a0d 0a20  ssInfo(self):.. 
+0000e700: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+0000e710: 7276 6973 6f72 2e70 726f 6365 7373 2069  rvisor.process i
+0000e720: 6d70 6f72 7420 5072 6f63 6573 7353 7461  mport ProcessSta
+0000e730: 7465 730d 0a0d 0a20 2020 2020 2020 206f  tes....        o
+0000e740: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+0000e750: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+0000e760: 2063 6f6e 6669 6720 3d20 4475 6d6d 7950   config = DummyP
+0000e770: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
+0000e780: 2766 6f6f 272c 2027 2f62 696e 2f66 6f6f  'foo', '/bin/foo
+0000e790: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0000e7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e7b0: 2020 7374 646f 7574 5f6c 6f67 6669 6c65    stdout_logfile
+0000e7c0: 3d27 2f74 6d70 2f66 6c65 6562 2e62 6172  ='/tmp/fleeb.bar
+0000e7d0: 2729 0d0a 2020 2020 2020 2020 7072 6f63  ')..        proc
+0000e7e0: 6573 7320 3d20 4475 6d6d 7950 726f 6365  ess = DummyProce
+0000e7f0: 7373 2863 6f6e 6669 6729 0d0a 2020 2020  ss(config)..    
+0000e800: 2020 2020 7072 6f63 6573 732e 7069 6420      process.pid 
+0000e810: 3d20 3131 310d 0a20 2020 2020 2020 2070  = 111..        p
+0000e820: 726f 6365 7373 2e6c 6173 7473 7461 7274  rocess.laststart
+0000e830: 203d 2031 300d 0a20 2020 2020 2020 2070   = 10..        p
+0000e840: 726f 6365 7373 2e6c 6173 7473 746f 7020  rocess.laststop 
+0000e850: 3d20 3131 0d0a 2020 2020 2020 2020 7067  = 11..        pg
+0000e860: 726f 7570 5f63 6f6e 6669 6720 3d20 4475  roup_config = Du
+0000e870: 6d6d 7950 4772 6f75 7043 6f6e 6669 6728  mmyPGroupConfig(
+0000e880: 6f70 7469 6f6e 732c 206e 616d 653d 2766  options, name='f
+0000e890: 6f6f 2729 0d0a 2020 2020 2020 2020 7067  oo')..        pg
+0000e8a0: 726f 7570 203d 2044 756d 6d79 5072 6f63  roup = DummyProc
+0000e8b0: 6573 7347 726f 7570 2870 6772 6f75 705f  essGroup(pgroup_
+0000e8c0: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+0000e8d0: 2070 6772 6f75 702e 7072 6f63 6573 7365   pgroup.processe
+0000e8e0: 7320 3d20 7b27 666f 6f27 3a20 7072 6f63  s = {'foo': proc
+0000e8f0: 6573 737d 0d0a 2020 2020 2020 2020 7375  ess}..        su
+0000e900: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+0000e910: 7953 7570 6572 7669 736f 7228 7072 6f63  ySupervisor(proc
+0000e920: 6573 735f 6772 6f75 7073 3d7b 2766 6f6f  ess_groups={'foo
+0000e930: 273a 2070 6772 6f75 707d 290d 0a20 2020  ': pgroup})..   
+0000e940: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+0000e950: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+0000e960: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+0000e970: 2020 2020 2064 6174 6120 3d20 696e 7465       data = inte
+0000e980: 7266 6163 652e 6765 7450 726f 6365 7373  rface.getProcess
+0000e990: 496e 666f 2827 666f 6f27 290d 0a0d 0a20  Info('foo').... 
+0000e9a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000e9b0: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+0000e9c0: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+0000e9d0: 6765 7450 726f 6365 7373 496e 666f 2729  getProcessInfo')
+0000e9e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000e9f0: 7373 6572 7445 7175 616c 2864 6174 615b  ssertEqual(data[
+0000ea00: 276c 6f67 6669 6c65 275d 2c20 272f 746d  'logfile'], '/tm
+0000ea10: 702f 666c 6565 622e 6261 7227 290d 0a20  p/fleeb.bar').. 
+0000ea20: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000ea30: 7274 4571 7561 6c28 6461 7461 5b27 7374  rtEqual(data['st
+0000ea40: 646f 7574 5f6c 6f67 6669 6c65 275d 2c20  dout_logfile'], 
+0000ea50: 272f 746d 702f 666c 6565 622e 6261 7227  '/tmp/fleeb.bar'
+0000ea60: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000ea70: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
+0000ea80: 5b27 7374 6465 7272 5f6c 6f67 6669 6c65  ['stderr_logfile
+0000ea90: 275d 2c20 2727 290d 0a20 2020 2020 2020  '], '')..       
+0000eaa0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000eab0: 6c28 6461 7461 5b27 6e61 6d65 275d 2c20  l(data['name'], 
+0000eac0: 2766 6f6f 2729 0d0a 2020 2020 2020 2020  'foo')..        
+0000ead0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000eae0: 2864 6174 615b 2770 6964 275d 2c20 3131  (data['pid'], 11
+0000eaf0: 3129 0d0a 2020 2020 2020 2020 7365 6c66  1)..        self
+0000eb00: 2e61 7373 6572 7445 7175 616c 2864 6174  .assertEqual(dat
+0000eb10: 615b 2773 7461 7274 275d 2c20 3130 290d  a['start'], 10).
+0000eb20: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000eb30: 7365 7274 4571 7561 6c28 6461 7461 5b27  sertEqual(data['
+0000eb40: 7374 6f70 275d 2c20 3131 290d 0a20 2020  stop'], 11)..   
+0000eb50: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000eb60: 4571 7561 6c28 6461 7461 5b27 7374 6174  Equal(data['stat
+0000eb70: 6527 5d2c 2050 726f 6365 7373 5374 6174  e'], ProcessStat
+0000eb80: 6573 2e52 554e 4e49 4e47 290d 0a20 2020  es.RUNNING)..   
+0000eb90: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000eba0: 4571 7561 6c28 6461 7461 5b27 7374 6174  Equal(data['stat
+0000ebb0: 656e 616d 6527 5d2c 2027 5255 4e4e 494e  ename'], 'RUNNIN
+0000ebc0: 4727 290d 0a20 2020 2020 2020 2073 656c  G')..        sel
+0000ebd0: 662e 6173 7365 7274 4571 7561 6c28 6461  f.assertEqual(da
+0000ebe0: 7461 5b27 6578 6974 7374 6174 7573 275d  ta['exitstatus']
+0000ebf0: 2c20 3029 0d0a 2020 2020 2020 2020 7365  , 0)..        se
+0000ec00: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
+0000ec10: 6174 615b 2773 7061 776e 6572 7227 5d2c  ata['spawnerr'],
+0000ec20: 2027 2729 0d0a 2020 2020 2020 2020 7365   '')..        se
+0000ec30: 6c66 2e61 7373 6572 7454 7275 6528 6461  lf.assertTrue(da
+0000ec40: 7461 5b27 6465 7363 7269 7074 696f 6e27  ta['description'
+0000ec50: 5d2e 7374 6172 7473 7769 7468 2827 7069  ].startswith('pi
+0000ec60: 6420 3131 3127 2929 0d0a 0d0a 2020 2020  d 111'))....    
+0000ec70: 6465 6620 7465 7374 5f67 6574 5072 6f63  def test_getProc
+0000ec80: 6573 7349 6e66 6f5f 6c6f 6766 696c 655f  essInfo_logfile_
+0000ec90: 4e4f 4e45 2873 656c 6629 3a0d 0a20 2020  NONE(self):..   
+0000eca0: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+0000ecb0: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+0000ecc0: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
+0000ecd0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+0000ece0: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
+0000ecf0: 696e 2f66 6f6f 272c 0d0a 2020 2020 2020  in/foo',..      
+0000ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ed10: 2020 2020 2020 2020 7374 646f 7574 5f6c          stdout_l
+0000ed20: 6f67 6669 6c65 3d4e 6f6e 6529 0d0a 2020  ogfile=None)..  
+0000ed30: 2020 2020 2020 7072 6f63 6573 7320 3d20        process = 
+0000ed40: 4475 6d6d 7950 726f 6365 7373 2863 6f6e  DummyProcess(con
+0000ed50: 6669 6729 0d0a 2020 2020 2020 2020 7072  fig)..        pr
+0000ed60: 6f63 6573 732e 7069 6420 3d20 3131 310d  ocess.pid = 111.
+0000ed70: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0000ed80: 2e6c 6173 7473 7461 7274 203d 2031 300d  .laststart = 10.
+0000ed90: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0000eda0: 2e6c 6173 7473 746f 7020 3d20 3131 0d0a  .laststop = 11..
+0000edb0: 2020 2020 2020 2020 7067 726f 7570 5f63          pgroup_c
+0000edc0: 6f6e 6669 6720 3d20 4475 6d6d 7950 4772  onfig = DummyPGr
+0000edd0: 6f75 7043 6f6e 6669 6728 6f70 7469 6f6e  oupConfig(option
+0000ede0: 732c 206e 616d 653d 2766 6f6f 2729 0d0a  s, name='foo')..
+0000edf0: 2020 2020 2020 2020 7067 726f 7570 203d          pgroup =
+0000ee00: 2044 756d 6d79 5072 6f63 6573 7347 726f   DummyProcessGro
+0000ee10: 7570 2870 6772 6f75 705f 636f 6e66 6967  up(pgroup_config
+0000ee20: 290d 0a20 2020 2020 2020 2070 6772 6f75  )..        pgrou
+0000ee30: 702e 7072 6f63 6573 7365 7320 3d20 7b27  p.processes = {'
+0000ee40: 666f 6f27 3a20 7072 6f63 6573 737d 0d0a  foo': process}..
+0000ee50: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000ee60: 6f72 6420 3d20 4475 6d6d 7953 7570 6572  ord = DummySuper
+0000ee70: 7669 736f 7228 7072 6f63 6573 735f 6772  visor(process_gr
+0000ee80: 6f75 7073 3d7b 2766 6f6f 273a 2070 6772  oups={'foo': pgr
+0000ee90: 6f75 707d 290d 0a20 2020 2020 2020 2069  oup})..        i
+0000eea0: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+0000eeb0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+0000eec0: 736f 7264 290d 0a20 2020 2020 2020 2064  sord)..        d
+0000eed0: 6174 6120 3d20 696e 7465 7266 6163 652e  ata = interface.
+0000eee0: 6765 7450 726f 6365 7373 496e 666f 2827  getProcessInfo('
+0000eef0: 666f 6f27 290d 0a20 2020 2020 2020 2073  foo')..        s
+0000ef00: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000ef10: 6461 7461 5b27 6c6f 6766 696c 6527 5d2c  data['logfile'],
+0000ef20: 2027 2729 0d0a 2020 2020 2020 2020 7365   '')..        se
+0000ef30: 6c66 2e61 7373 6572 7445 7175 616c 2864  lf.assertEqual(d
+0000ef40: 6174 615b 2773 7464 6f75 745f 6c6f 6766  ata['stdout_logf
+0000ef50: 696c 6527 5d2c 2027 2729 0d0a 0d0a 2020  ile'], '')....  
+0000ef60: 2020 6465 6620 7465 7374 5f67 6574 5072    def test_getPr
+0000ef70: 6f63 6573 7349 6e66 6f5f 756e 6b6e 6f77  ocessInfo_unknow
+0000ef80: 6e5f 7374 6174 6528 7365 6c66 293a 0d0a  n_state(self):..
+0000ef90: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+0000efa0: 6572 7669 736f 722e 7374 6174 6573 2069  ervisor.states i
+0000efb0: 6d70 6f72 7420 5072 6f63 6573 7353 7461  mport ProcessSta
+0000efc0: 7465 730d 0a20 2020 2020 2020 206f 7074  tes..        opt
+0000efd0: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+0000efe0: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+0000eff0: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+0000f000: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+0000f010: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
+0000f020: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0000f030: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+0000f040: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+0000f050: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
+0000f060: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
+0000f070: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
+0000f080: 7365 745f 7072 6f63 6174 7472 2827 666f  set_procattr('fo
+0000f090: 6f27 2c20 2773 7461 7465 272c 2050 726f  o', 'state', Pro
+0000f0a0: 6365 7373 5374 6174 6573 2e55 4e4b 4e4f  cessStates.UNKNO
+0000f0b0: 574e 290d 0a20 2020 2020 2020 2069 6e74  WN)..        int
+0000f0c0: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+0000f0d0: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+0000f0e0: 7264 290d 0a20 2020 2020 2020 2064 6174  rd)..        dat
+0000f0f0: 6120 3d20 696e 7465 7266 6163 652e 6765  a = interface.ge
+0000f100: 7450 726f 6365 7373 496e 666f 2827 666f  tProcessInfo('fo
+0000f110: 6f27 290d 0a20 2020 2020 2020 2073 656c  o')..        sel
+0000f120: 662e 6173 7365 7274 4571 7561 6c28 6461  f.assertEqual(da
+0000f130: 7461 5b27 7374 6174 656e 616d 6527 5d2c  ta['statename'],
+0000f140: 2027 554e 4b4e 4f57 4e27 290d 0a20 2020   'UNKNOWN')..   
+0000f150: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000f160: 4571 7561 6c28 6461 7461 5b27 6465 7363  Equal(data['desc
+0000f170: 7269 7074 696f 6e27 5d2c 2027 2729 0d0a  ription'], '')..
+0000f180: 0d0a 2020 2020 6465 6620 7465 7374 5f67  ..    def test_g
+0000f190: 6574 5072 6f63 6573 7349 6e66 6f5f 6261  etProcessInfo_ba
+0000f1a0: 645f 6e61 6d65 5f77 6865 6e5f 6261 645f  d_name_when_bad_
+0000f1b0: 7072 6f63 6573 7328 7365 6c66 293a 0d0a  process(self):..
+0000f1c0: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+0000f1d0: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
+0000f1e0: 6d6c 7270 630d 0a20 2020 2020 2020 2073  mlrpc..        s
+0000f1f0: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
+0000f200: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
+0000f210: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+0000f220: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+0000f230: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+0000f240: 2020 2020 2020 2020 7365 6c66 2e5f 6173          self._as
+0000f250: 7365 7274 5250 4345 7272 6f72 2878 6d6c  sertRPCError(xml
+0000f260: 7270 632e 4661 756c 7473 2e42 4144 5f4e  rpc.Faults.BAD_N
+0000f270: 414d 452c 0d0a 2020 2020 2020 2020 2020  AME,..          
+0000f280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f290: 2020 2069 6e74 6572 6661 6365 2e67 6574     interface.get
+0000f2a0: 5072 6f63 6573 7349 6e66 6f2c 2027 6e6f  ProcessInfo, 'no
+0000f2b0: 6e65 7869 7374 656e 7427 290d 0a0d 0a20  nexistent').... 
+0000f2c0: 2020 2064 6566 2074 6573 745f 6765 7450     def test_getP
+0000f2d0: 726f 6365 7373 496e 666f 5f62 6164 5f6e  rocessInfo_bad_n
+0000f2e0: 616d 655f 7768 656e 5f6e 6f5f 7072 6f63  ame_when_no_proc
+0000f2f0: 6573 7328 7365 6c66 293a 0d0a 2020 2020  ess(self):..    
+0000f300: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+0000f310: 736f 7220 696d 706f 7274 2078 6d6c 7270  sor import xmlrp
+0000f320: 630d 0a20 2020 2020 2020 206f 7074 696f  c..        optio
+0000f330: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+0000f340: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+0000f350: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
+0000f360: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
+0000f370: 6f27 2c20 272f 6269 6e2f 666f 6f27 290d  o', '/bin/foo').
+0000f380: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+0000f390: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
+0000f3a0: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
+0000f3b0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+0000f3c0: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
+0000f3d0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+0000f3e0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+0000f3f0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+0000f400: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+0000f410: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
+0000f420: 756c 7473 2e42 4144 5f4e 414d 452c 0d0a  ults.BAD_NAME,..
 0000f430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f440: 2020 2020 2020 2020 7072 696f 7269 7479          priority
-0000f450: 3d32 2c0d 0a20 2020 2020 2020 2020 2020  =2,..           
-0000f460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f470: 2020 2020 2073 7464 6f75 745f 6c6f 6766       stdout_logf
-0000f480: 696c 653d 272f 746d 702f 7072 6f63 6573  ile='/tmp/proces
-0000f490: 7332 2e6c 6f67 2729 0d0a 0d0a 2020 2020  s2.log')....    
-0000f4a0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-0000f4b0: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
-0000f4c0: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-0000f4d0: 6e73 2c20 2767 6e61 6d65 272c 2070 3163  ns, 'gname', p1c
-0000f4e0: 6f6e 6669 672c 0d0a 2020 2020 2020 2020  onfig,..        
-0000f4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f510: 2020 2020 2020 2070 3263 6f6e 6669 6729         p2config)
-0000f520: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-0000f530: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
-0000f540: 7472 2827 7072 6f63 6573 7331 272c 2027  tr('process1', '
-0000f550: 7069 6427 2c20 3131 3129 0d0a 2020 2020  pid', 111)..    
-0000f560: 2020 2020 7375 7065 7276 6973 6f72 642e      supervisord.
-0000f570: 7365 745f 7072 6f63 6174 7472 2827 7072  set_procattr('pr
-0000f580: 6f63 6573 7331 272c 2027 6c61 7374 7374  ocess1', 'lastst
-0000f590: 6172 7427 2c20 3130 290d 0a20 2020 2020  art', 10)..     
-0000f5a0: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
-0000f5b0: 6574 5f70 726f 6361 7474 7228 2770 726f  et_procattr('pro
-0000f5c0: 6365 7373 3127 2c20 276c 6173 7473 746f  cess1', 'laststo
-0000f5d0: 7027 2c20 3131 290d 0a20 2020 2020 2020  p', 11)..       
-0000f5e0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-0000f5f0: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-0000f600: 7373 3127 2c20 2773 7461 7465 272c 2050  ss1', 'state', P
-0000f610: 726f 6365 7373 5374 6174 6573 2e52 554e  rocessStates.RUN
-0000f620: 4e49 4e47 290d 0a0d 0a20 2020 2020 2020  NING)....       
-0000f630: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-0000f640: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-0000f650: 7373 3227 2c20 2770 6964 272c 2030 290d  ss2', 'pid', 0).
-0000f660: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-0000f670: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
-0000f680: 7228 2770 726f 6365 7373 3227 2c20 276c  r('process2', 'l
-0000f690: 6173 7473 7461 7274 272c 2032 3029 0d0a  aststart', 20)..
-0000f6a0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-0000f6b0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-0000f6c0: 2827 7072 6f63 6573 7332 272c 2027 6c61  ('process2', 'la
-0000f6d0: 7374 7374 6f70 272c 2031 3129 0d0a 2020  ststop', 11)..  
-0000f6e0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-0000f6f0: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
-0000f700: 7072 6f63 6573 7332 272c 2027 7374 6174  process2', 'stat
-0000f710: 6527 2c20 5072 6f63 6573 7353 7461 7465  e', ProcessState
-0000f720: 732e 5354 4f50 5045 4429 0d0a 0d0a 2020  s.STOPPED)....  
-0000f730: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-0000f740: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-0000f750: 7375 7065 7276 6973 6f72 6429 0d0a 0d0a  supervisord)....
-0000f760: 2020 2020 2020 2020 696e 666f 203d 2069          info = i
-0000f770: 6e74 6572 6661 6365 2e67 6574 416c 6c50  nterface.getAllP
-0000f780: 726f 6365 7373 496e 666f 2829 0d0a 0d0a  rocessInfo()....
-0000f790: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000f7a0: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
-0000f7b0: 6365 2e75 7064 6174 655f 7465 7874 2c20  ce.update_text, 
-0000f7c0: 2767 6574 5072 6f63 6573 7349 6e66 6f27  'getProcessInfo'
-0000f7d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000f7e0: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
-0000f7f0: 696e 666f 292c 2032 290d 0a0d 0a20 2020  info), 2)....   
-0000f800: 2020 2020 2070 3169 6e66 6f20 3d20 696e       p1info = in
-0000f810: 666f 5b30 5d0d 0a20 2020 2020 2020 2073  fo[0]..        s
-0000f820: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000f830: 7031 696e 666f 5b27 6c6f 6766 696c 6527  p1info['logfile'
-0000f840: 5d2c 2027 2f74 6d70 2f70 726f 6365 7373  ], '/tmp/process
-0000f850: 312e 6c6f 6727 290d 0a20 2020 2020 2020  1.log')..       
-0000f860: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000f870: 6c28 7031 696e 666f 5b27 7374 646f 7574  l(p1info['stdout
-0000f880: 5f6c 6f67 6669 6c65 275d 2c20 272f 746d  _logfile'], '/tm
-0000f890: 702f 7072 6f63 6573 7331 2e6c 6f67 2729  p/process1.log')
-0000f8a0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000f8b0: 7373 6572 7445 7175 616c 2870 3169 6e66  ssertEqual(p1inf
-0000f8c0: 6f5b 2773 7464 6572 725f 6c6f 6766 696c  o['stderr_logfil
-0000f8d0: 6527 5d2c 2027 2729 0d0a 2020 2020 2020  e'], '')..      
-0000f8e0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000f8f0: 616c 2870 3169 6e66 6f5b 276e 616d 6527  al(p1info['name'
-0000f900: 5d2c 2027 7072 6f63 6573 7331 2729 0d0a  ], 'process1')..
-0000f910: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000f920: 6572 7445 7175 616c 2870 3169 6e66 6f5b  ertEqual(p1info[
-0000f930: 2770 6964 275d 2c20 3131 3129 0d0a 2020  'pid'], 111)..  
-0000f940: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000f950: 7445 7175 616c 2870 3169 6e66 6f5b 2773  tEqual(p1info['s
-0000f960: 7461 7274 275d 2c20 3130 290d 0a20 2020  tart'], 10)..   
-0000f970: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000f980: 4571 7561 6c28 7031 696e 666f 5b27 7374  Equal(p1info['st
-0000f990: 6f70 275d 2c20 3131 290d 0a20 2020 2020  op'], 11)..     
-0000f9a0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000f9b0: 7561 6c28 7031 696e 666f 5b27 7374 6174  ual(p1info['stat
-0000f9c0: 6527 5d2c 2050 726f 6365 7373 5374 6174  e'], ProcessStat
-0000f9d0: 6573 2e52 554e 4e49 4e47 290d 0a20 2020  es.RUNNING)..   
-0000f9e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000f9f0: 4571 7561 6c28 7031 696e 666f 5b27 7374  Equal(p1info['st
-0000fa00: 6174 656e 616d 6527 5d2c 2027 5255 4e4e  atename'], 'RUNN
-0000fa10: 494e 4727 290d 0a20 2020 2020 2020 2073  ING')..        s
-0000fa20: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000fa30: 7031 696e 666f 5b27 6578 6974 7374 6174  p1info['exitstat
-0000fa40: 7573 275d 2c20 3029 0d0a 2020 2020 2020  us'], 0)..      
-0000fa50: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000fa60: 616c 2870 3169 6e66 6f5b 2773 7061 776e  al(p1info['spawn
-0000fa70: 6572 7227 5d2c 2027 2729 0d0a 2020 2020  err'], '')..    
-0000fa80: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000fa90: 7175 616c 2870 3169 6e66 6f5b 2767 726f  qual(p1info['gro
-0000faa0: 7570 275d 2c20 2767 6e61 6d65 2729 0d0a  up'], 'gname')..
-0000fab0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000fac0: 6572 7454 7275 6528 7031 696e 666f 5b27  ertTrue(p1info['
-0000fad0: 6465 7363 7269 7074 696f 6e27 5d2e 7374  description'].st
-0000fae0: 6172 7473 7769 7468 2827 7069 6420 3131  artswith('pid 11
-0000faf0: 3127 2929 0d0a 0d0a 2020 2020 2020 2020  1'))....        
-0000fb00: 7032 696e 666f 203d 2069 6e66 6f5b 315d  p2info = info[1]
-0000fb10: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
-0000fb20: 7332 203d 2073 7570 6572 7669 736f 7264  s2 = supervisord
-0000fb30: 2e70 726f 6365 7373 5f67 726f 7570 735b  .process_groups[
-0000fb40: 2767 6e61 6d65 275d 2e70 726f 6365 7373  'gname'].process
-0000fb50: 6573 5b27 7072 6f63 6573 7332 275d 0d0a  es['process2']..
-0000fb60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000fb70: 6572 7445 7175 616c 2870 3269 6e66 6f5b  ertEqual(p2info[
-0000fb80: 276c 6f67 6669 6c65 275d 2c20 272f 746d  'logfile'], '/tm
-0000fb90: 702f 7072 6f63 6573 7332 2e6c 6f67 2729  p/process2.log')
-0000fba0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000fbb0: 7373 6572 7445 7175 616c 2870 3269 6e66  ssertEqual(p2inf
-0000fbc0: 6f5b 2773 7464 6f75 745f 6c6f 6766 696c  o['stdout_logfil
-0000fbd0: 6527 5d2c 2027 2f74 6d70 2f70 726f 6365  e'], '/tmp/proce
-0000fbe0: 7373 322e 6c6f 6727 290d 0a20 2020 2020  ss2.log')..     
-0000fbf0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000fc00: 7561 6c28 7031 696e 666f 5b27 7374 6465  ual(p1info['stde
-0000fc10: 7272 5f6c 6f67 6669 6c65 275d 2c20 2727  rr_logfile'], ''
-0000fc20: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000fc30: 6173 7365 7274 4571 7561 6c28 7032 696e  assertEqual(p2in
-0000fc40: 666f 5b27 6e61 6d65 275d 2c20 2770 726f  fo['name'], 'pro
-0000fc50: 6365 7373 3227 290d 0a20 2020 2020 2020  cess2')..       
-0000fc60: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000fc70: 6c28 7032 696e 666f 5b27 7069 6427 5d2c  l(p2info['pid'],
-0000fc80: 2030 290d 0a20 2020 2020 2020 2073 656c   0)..        sel
-0000fc90: 662e 6173 7365 7274 4571 7561 6c28 7032  f.assertEqual(p2
-0000fca0: 696e 666f 5b27 7374 6172 7427 5d2c 2070  info['start'], p
-0000fcb0: 726f 6365 7373 322e 6c61 7374 7374 6172  rocess2.laststar
-0000fcc0: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-0000fcd0: 2e61 7373 6572 7445 7175 616c 2870 3269  .assertEqual(p2i
-0000fce0: 6e66 6f5b 2773 746f 7027 5d2c 2031 3129  nfo['stop'], 11)
-0000fcf0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000fd00: 7373 6572 7445 7175 616c 2870 3269 6e66  ssertEqual(p2inf
-0000fd10: 6f5b 2773 7461 7465 275d 2c20 5072 6f63  o['state'], Proc
-0000fd20: 6573 7353 7461 7465 732e 5354 4f50 5045  essStates.STOPPE
-0000fd30: 4429 0d0a 2020 2020 2020 2020 7365 6c66  D)..        self
-0000fd40: 2e61 7373 6572 7445 7175 616c 2870 3269  .assertEqual(p2i
-0000fd50: 6e66 6f5b 2773 7461 7465 6e61 6d65 275d  nfo['statename']
-0000fd60: 2c20 2753 544f 5050 4544 2729 0d0a 2020  , 'STOPPED')..  
-0000fd70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000fd80: 7445 7175 616c 2870 3269 6e66 6f5b 2765  tEqual(p2info['e
-0000fd90: 7869 7473 7461 7475 7327 5d2c 2030 290d  xitstatus'], 0).
-0000fda0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000fdb0: 7365 7274 4571 7561 6c28 7032 696e 666f  sertEqual(p2info
-0000fdc0: 5b27 7370 6177 6e65 7272 275d 2c20 2727  ['spawnerr'], ''
-0000fdd0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000fde0: 6173 7365 7274 4571 7561 6c28 7031 696e  assertEqual(p1in
-0000fdf0: 666f 5b27 6772 6f75 7027 5d2c 2027 676e  fo['group'], 'gn
-0000fe00: 616d 6527 290d 0a0d 0a20 2020 2020 2020  ame')....       
-0000fe10: 2066 726f 6d20 6461 7465 7469 6d65 2069   from datetime i
-0000fe20: 6d70 6f72 7420 6461 7465 7469 6d65 0d0a  mport datetime..
-0000fe30: 2020 2020 2020 2020 7374 6172 7474 696d          starttim
-0000fe40: 6520 3d20 6461 7465 7469 6d65 282a 7469  e = datetime(*ti
-0000fe50: 6d65 2e6c 6f63 616c 7469 6d65 2870 726f  me.localtime(pro
-0000fe60: 6365 7373 322e 6c61 7374 7374 6172 7429  cess2.laststart)
-0000fe70: 5b3a 375d 290d 0a20 2020 2020 2020 2073  [:7])..        s
-0000fe80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000fe90: 7032 696e 666f 5b27 6465 7363 7269 7074  p2info['descript
-0000fea0: 696f 6e27 5d2c 0d0a 2020 2020 2020 2020  ion'],..        
-0000feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fec0: 2073 7461 7274 7469 6d65 2e73 7472 6674   starttime.strft
-0000fed0: 696d 6528 5f54 494d 4546 4f52 4d41 5429  ime(_TIMEFORMAT)
-0000fee0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-0000fef0: 745f 7265 6164 5072 6f63 6573 7353 7464  t_readProcessStd
-0000ff00: 6f75 744c 6f67 5f75 6e72 6561 6461 626c  outLog_unreadabl
-0000ff10: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-0000ff20: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-0000ff30: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-0000ff40: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-0000ff50: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-0000ff60: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-0000ff70: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
-0000ff80: 6728 6f70 7469 6f6e 732c 2027 7072 6f63  g(options, 'proc
-0000ff90: 6573 7331 272c 2027 2f62 696e 2f70 726f  ess1', '/bin/pro
-0000ffa0: 6365 7373 3127 2c20 7072 696f 7269 7479  cess1', priority
-0000ffb0: 3d31 2c0d 0a20 2020 2020 2020 2020 2020  =1,..           
-0000ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ffd0: 2020 2020 7374 646f 7574 5f6c 6f67 6669      stdout_logfi
-0000ffe0: 6c65 3d27 2f74 6d70 2f70 726f 6365 7373  le='/tmp/process
-0000fff0: 312e 6c6f 6727 290d 0a20 2020 2020 2020  1.log')..       
-00010000: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00010010: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00010020: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00010030: 2027 7072 6f63 6573 7331 272c 2070 636f   'process1', pco
-00010040: 6e66 6967 290d 0a20 2020 2020 2020 2069  nfig)..        i
-00010050: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00010060: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00010070: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
-00010080: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
-00010090: 726f 7228 786d 6c72 7063 2e46 6175 6c74  ror(xmlrpc.Fault
-000100a0: 732e 4e4f 5f46 494c 452c 0d0a 2020 2020  s.NO_FILE,..    
-000100b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000100c0: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
-000100d0: 6365 2e72 6561 6450 726f 6365 7373 5374  ce.readProcessSt
-000100e0: 646f 7574 4c6f 672c 0d0a 2020 2020 2020  doutLog,..      
-000100f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010100: 2020 2020 2020 2027 7072 6f63 6573 7331         'process1
-00010110: 272c 206f 6666 7365 743d 302c 206c 656e  ', offset=0, len
-00010120: 6774 683d 3129 0d0a 0d0a 2020 2020 6465  gth=1)....    de
-00010130: 6620 7465 7374 5f72 6561 6450 726f 6365  f test_readProce
-00010140: 7373 5374 646f 7574 4c6f 675f 6261 6461  ssStdoutLog_bada
-00010150: 7267 7328 7365 6c66 293a 0d0a 2020 2020  rgs(self):..    
-00010160: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-00010170: 736f 7220 696d 706f 7274 2078 6d6c 7270  sor import xmlrp
-00010180: 630d 0a20 2020 2020 2020 206f 7074 696f  c..        optio
-00010190: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
-000101a0: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
-000101b0: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
-000101c0: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
-000101d0: 6f63 6573 7331 272c 2027 2f62 696e 2f70  ocess1', '/bin/p
-000101e0: 726f 6365 7373 3127 2c20 7072 696f 7269  rocess1', priori
-000101f0: 7479 3d31 2c0d 0a20 2020 2020 2020 2020  ty=1,..         
-00010200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010210: 2020 2020 2020 7374 646f 7574 5f6c 6f67        stdout_log
-00010220: 6669 6c65 3d54 656d 7046 696c 654f 7065  file=TempFileOpe
-00010230: 6e2e 6d61 6b65 5f70 6174 6828 2770 726f  n.make_path('pro
-00010240: 6365 7373 312e 6c6f 6727 2929 0d0a 2020  cess1.log'))..  
-00010250: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00010260: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
-00010270: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-00010280: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
-00010290: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
-000102a0: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-000102b0: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
-000102c0: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
-000102d0: 2020 2020 7072 6f63 6573 7320 3d20 7375      process = su
-000102e0: 7065 7276 6973 6f72 642e 7072 6f63 6573  pervisord.proces
-000102f0: 735f 6772 6f75 7073 5b27 7072 6f63 6573  s_groups['proces
-00010300: 7331 275d 2e70 726f 6365 7373 6573 5b27  s1'].processes['
-00010310: 7072 6f63 6573 7331 275d 0d0a 2020 2020  process1']..    
-00010320: 2020 2020 6c6f 6766 696c 6520 3d20 7072      logfile = pr
-00010330: 6f63 6573 732e 636f 6e66 6967 2e73 7464  ocess.config.std
-00010340: 6f75 745f 6c6f 6766 696c 650d 0a0d 0a20  out_logfile.... 
-00010350: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00010360: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-00010370: 656e 286c 6f67 6669 6c65 2c20 2777 2b27  en(logfile, 'w+'
-00010380: 2920 6173 2066 3a0d 0a20 2020 2020 2020  ) as f:..       
-00010390: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-000103a0: 2827 7827 202a 2032 3034 3829 0d0a 2020  ('x' * 2048)..  
-000103b0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
-000103c0: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
-000103d0: 6d6c 7270 632e 4661 756c 7473 2e42 4144  mlrpc.Faults.BAD
-000103e0: 5f41 5247 554d 454e 5453 2c0d 0a20 2020  _ARGUMENTS,..   
-000103f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010400: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00010410: 7465 7266 6163 652e 7265 6164 5072 6f63  terface.readProc
-00010420: 6573 7353 7464 6f75 744c 6f67 2c0d 0a20  essStdoutLog,.. 
-00010430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010450: 2770 726f 6365 7373 3127 2c20 6f66 6673  'process1', offs
-00010460: 6574 3d2d 312c 206c 656e 6774 683d 3129  et=-1, length=1)
-00010470: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00010480: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00010490: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-000104a0: 2e42 4144 5f41 5247 554d 454e 5453 2c0d  .BAD_ARGUMENTS,.
-000104b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000104c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000104d0: 2020 696e 7465 7266 6163 652e 7265 6164    interface.read
-000104e0: 5072 6f63 6573 7353 7464 6f75 744c 6f67  ProcessStdoutLog
-000104f0: 2c20 2770 726f 6365 7373 3127 2c0d 0a20  , 'process1',.. 
-00010500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010520: 6f66 6673 6574 3d2d 312c 206c 656e 6774  offset=-1, lengt
-00010530: 683d 2d31 290d 0a20 2020 2020 2020 2066  h=-1)..        f
-00010540: 696e 616c 6c79 3a0d 0a20 2020 2020 2020  inally:..       
-00010550: 2020 2020 206f 732e 7265 6d6f 7665 286c       os.remove(l
-00010560: 6f67 6669 6c65 290d 0a0d 0a20 2020 2064  ogfile)....    d
-00010570: 6566 2074 6573 745f 7265 6164 5072 6f63  ef test_readProc
-00010580: 6573 7353 7464 6f75 744c 6f67 5f62 6164  essStdoutLog_bad
-00010590: 5f6e 616d 655f 6e6f 5f70 726f 6365 7373  _name_no_process
-000105a0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-000105b0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-000105c0: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
-000105d0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-000105e0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-000105f0: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-00010600: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
-00010610: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00010620: 7373 3127 2c20 272f 6269 6e2f 7072 6f63  ss1', '/bin/proc
-00010630: 6573 7331 272c 2070 7269 6f72 6974 793d  ess1', priority=
-00010640: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00010650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010660: 2020 2073 7464 6f75 745f 6c6f 6766 696c     stdout_logfil
-00010670: 653d 272f 746d 702f 7072 6f63 6573 7331  e='/tmp/process1
-00010680: 2e6c 6f67 2729 0d0a 2020 2020 2020 2020  .log')..        
-00010690: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-000106a0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-000106b0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-000106c0: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
-000106d0: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-000106e0: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-000106f0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-00010700: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-00010710: 7373 6572 7452 5043 4572 726f 7228 786d  ssertRPCError(xm
-00010720: 6c72 7063 2e46 6175 6c74 732e 4241 445f  lrpc.Faults.BAD_
-00010730: 4e41 4d45 2c0d 0a20 2020 2020 2020 2020  NAME,..         
-00010740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010750: 2020 2020 696e 7465 7266 6163 652e 7265      interface.re
-00010760: 6164 5072 6f63 6573 7353 7464 6f75 744c  adProcessStdoutL
-00010770: 6f67 2c0d 0a20 2020 2020 2020 2020 2020  og,..           
-00010780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010790: 2020 2766 6f6f 3a2a 272c 206f 6666 7365    'foo:*', offse
-000107a0: 743d 302c 206c 656e 6774 683d 3129 0d0a  t=0, length=1)..
-000107b0: 0d0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
-000107c0: 6561 6450 726f 6365 7373 5374 646f 7574  eadProcessStdout
-000107d0: 4c6f 6728 7365 6c66 293a 0d0a 2020 2020  Log(self):..    
-000107e0: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-000107f0: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-00010800: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
-00010810: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-00010820: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
-00010830: 696e 2f66 6f6f 272c 0d0a 2020 2020 2020  in/foo',..      
-00010840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010850: 2020 2020 2020 2020 2073 7464 6f75 745f           stdout_
-00010860: 6c6f 6766 696c 653d 5465 6d70 4669 6c65  logfile=TempFile
-00010870: 4f70 656e 2e6d 616b 655f 7061 7468 2822  Open.make_path("
-00010880: 7374 646f 7574 2d6c 6f67 6669 6c65 2e6c  stdout-logfile.l
-00010890: 6f67 2229 290d 0a20 2020 2020 2020 2073  og"))..        s
-000108a0: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-000108b0: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-000108c0: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-000108d0: 666f 6f27 2c20 7063 6f6e 6669 6729 0d0a  foo', pconfig)..
-000108e0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-000108f0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00010900: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00010910: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
-00010920: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
-00010930: 6f63 6573 735f 6772 6f75 7073 5b27 666f  ocess_groups['fo
-00010940: 6f27 5d2e 7072 6f63 6573 7365 735b 2766  o'].processes['f
-00010950: 6f6f 275d 0d0a 2020 2020 2020 2020 6c6f  oo']..        lo
-00010960: 6766 696c 6520 3d20 7072 6f63 6573 732e  gfile = process.
-00010970: 636f 6e66 6967 2e73 7464 6f75 745f 6c6f  config.stdout_lo
-00010980: 6766 696c 650d 0a20 2020 2020 2020 2074  gfile..        t
-00010990: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-000109a0: 2077 6974 6820 6f70 656e 286c 6f67 6669   with open(logfi
-000109b0: 6c65 2c20 2777 2b27 2920 6173 2066 3a0d  le, 'w+') as f:.
-000109c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000109d0: 2066 2e77 7269 7465 2827 7827 202a 2032   f.write('x' * 2
-000109e0: 3034 3829 0d0a 2020 2020 2020 2020 2020  048)..          
-000109f0: 2020 2020 2020 662e 7772 6974 6528 2779        f.write('y
-00010a00: 2720 2a20 3230 3438 290d 0a20 2020 2020  ' * 2048)..     
-00010a10: 2020 2020 2020 2064 6174 6120 3d20 696e         data = in
-00010a20: 7465 7266 6163 652e 7265 6164 5072 6f63  terface.readProc
-00010a30: 6573 7353 7464 6f75 744c 6f67 2827 666f  essStdoutLog('fo
-00010a40: 6f27 2c20 6f66 6673 6574 3d30 2c20 6c65  o', offset=0, le
-00010a50: 6e67 7468 3d30 290d 0a20 2020 2020 2020  ngth=0)..       
-00010a60: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00010a70: 4571 7561 6c28 696e 7465 7266 6163 652e  Equal(interface.
-00010a80: 7570 6461 7465 5f74 6578 742c 2027 7265  update_text, 're
-00010a90: 6164 5072 6f63 6573 7353 7464 6f75 744c  adProcessStdoutL
-00010aa0: 6f67 2729 0d0a 2020 2020 2020 2020 2020  og')..          
-00010ab0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00010ac0: 616c 2864 6174 612c 2028 2778 2720 2a20  al(data, ('x' * 
-00010ad0: 3230 3438 2920 2b20 2827 7927 202a 2032  2048) + ('y' * 2
-00010ae0: 3034 3829 290d 0a20 2020 2020 2020 2020  048))..         
-00010af0: 2020 2064 6174 6120 3d20 696e 7465 7266     data = interf
-00010b00: 6163 652e 7265 6164 5072 6f63 6573 7353  ace.readProcessS
-00010b10: 7464 6f75 744c 6f67 2827 666f 6f27 2c20  tdoutLog('foo', 
-00010b20: 6f66 6673 6574 3d32 3034 382c 206c 656e  offset=2048, len
-00010b30: 6774 683d 3029 0d0a 2020 2020 2020 2020  gth=0)..        
-00010b40: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00010b50: 7175 616c 2864 6174 612c 2027 7927 202a  qual(data, 'y' *
-00010b60: 2032 3034 3829 0d0a 2020 2020 2020 2020   2048)..        
-00010b70: 2020 2020 6461 7461 203d 2069 6e74 6572      data = inter
-00010b80: 6661 6365 2e72 6561 6450 726f 6365 7373  face.readProcess
-00010b90: 5374 646f 7574 4c6f 6728 2766 6f6f 272c  StdoutLog('foo',
-00010ba0: 206f 6666 7365 743d 302c 206c 656e 6774   offset=0, lengt
-00010bb0: 683d 3230 3438 290d 0a20 2020 2020 2020  h=2048)..       
-00010bc0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00010bd0: 4571 7561 6c28 6461 7461 2c20 2778 2720  Equal(data, 'x' 
-00010be0: 2a20 3230 3438 290d 0a20 2020 2020 2020  * 2048)..       
-00010bf0: 2020 2020 2064 6174 6120 3d20 696e 7465       data = inte
-00010c00: 7266 6163 652e 7265 6164 5072 6f63 6573  rface.readProces
-00010c10: 7353 7464 6f75 744c 6f67 2827 666f 6f27  sStdoutLog('foo'
-00010c20: 2c20 6f66 6673 6574 3d2d 342c 206c 656e  , offset=-4, len
-00010c30: 6774 683d 3029 0d0a 2020 2020 2020 2020  gth=0)..        
-00010c40: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00010c50: 7175 616c 2864 6174 612c 2027 7927 202a  qual(data, 'y' *
-00010c60: 2034 290d 0a20 2020 2020 2020 2066 696e   4)..        fin
-00010c70: 616c 6c79 3a0d 0a20 2020 2020 2020 2020  ally:..         
-00010c80: 2020 206f 732e 7265 6d6f 7665 286c 6f67     os.remove(log
-00010c90: 6669 6c65 290d 0a0d 0a20 2020 2064 6566  file)....    def
-00010ca0: 2074 6573 745f 7265 6164 5072 6f63 6573   test_readProces
-00010cb0: 734c 6f67 416c 6961 7365 6454 6f5f 7265  sLogAliasedTo_re
-00010cc0: 6164 5072 6f63 6573 7353 7464 6f75 744c  adProcessStdoutL
-00010cd0: 6f67 2873 656c 6629 3a0d 0a20 2020 2020  og(self):..     
-00010ce0: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
-00010cf0: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
-00010d00: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
-00010d10: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
-00010d20: 6f6e 732c 2027 666f 6f27 2c20 272f 6269  ons, 'foo', '/bi
-00010d30: 6e2f 666f 6f27 290d 0a20 2020 2020 2020  n/foo')..       
-00010d40: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-00010d50: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00010d60: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00010d70: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
-00010d80: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00010d90: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00010da0: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00010db0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00010dc0: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
-00010dd0: 6661 6365 2e72 6561 6450 726f 6365 7373  face.readProcess
-00010de0: 4c6f 672c 0d0a 2020 2020 2020 2020 2020  Log,..          
-00010df0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00010e00: 6e74 6572 6661 6365 2e72 6561 6450 726f  nterface.readPro
-00010e10: 6365 7373 5374 646f 7574 4c6f 6729 0d0a  cessStdoutLog)..
-00010e20: 0d0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
-00010e30: 6561 6450 726f 6365 7373 5374 6465 7272  eadProcessStderr
-00010e40: 4c6f 675f 756e 7265 6164 6162 6c65 2873  Log_unreadable(s
-00010e50: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
-00010e60: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-00010e70: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-00010e80: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-00010e90: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-00010ea0: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-00010eb0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00010ec0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
-00010ed0: 3127 2c20 272f 6269 6e2f 7072 6f63 6573  1', '/bin/proces
-00010ee0: 7331 272c 2070 7269 6f72 6974 793d 312c  s1', priority=1,
-00010ef0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f10: 2073 7464 6572 725f 6c6f 6766 696c 653d   stderr_logfile=
-00010f20: 272f 746d 702f 7072 6f63 6573 7331 2e6c  '/tmp/process1.l
-00010f30: 6f67 2729 0d0a 2020 2020 2020 2020 7375  og')..        su
-00010f40: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
-00010f50: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
-00010f60: 6973 6f72 286f 7074 696f 6e73 2c20 2770  isor(options, 'p
-00010f70: 726f 6365 7373 3127 2c20 7063 6f6e 6669  rocess1', pconfi
-00010f80: 6729 0d0a 2020 2020 2020 2020 696e 7465  g)..        inte
-00010f90: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00010fa0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00010fb0: 6429 0d0a 2020 2020 2020 2020 7365 6c66  d)..        self
-00010fc0: 2e5f 6173 7365 7274 5250 4345 7272 6f72  ._assertRPCError
-00010fd0: 2878 6d6c 7270 632e 4661 756c 7473 2e4e  (xmlrpc.Faults.N
-00010fe0: 4f5f 4649 4c45 2c0d 0a20 2020 2020 2020  O_FILE,..       
-00010ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011000: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-00011010: 7265 6164 5072 6f63 6573 7353 7464 6572  readProcessStder
-00011020: 724c 6f67 2c0d 0a20 2020 2020 2020 2020  rLog,..         
-00011030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011040: 2020 2020 2770 726f 6365 7373 3127 2c20      'process1', 
-00011050: 6f66 6673 6574 3d30 2c20 6c65 6e67 7468  offset=0, length
-00011060: 3d31 290d 0a0d 0a20 2020 2064 6566 2074  =1)....    def t
-00011070: 6573 745f 7265 6164 5072 6f63 6573 7353  est_readProcessS
-00011080: 7464 6572 724c 6f67 5f62 6164 6172 6773  tderrLog_badargs
-00011090: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-000110a0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-000110b0: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
-000110c0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-000110d0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
-000110e0: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
-000110f0: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
-00011100: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00011110: 7373 3127 2c20 272f 6269 6e2f 7072 6f63  ss1', '/bin/proc
-00011120: 6573 7331 272c 2070 7269 6f72 6974 793d  ess1', priority=
-00011130: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
-00011140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011150: 2020 2073 7464 6572 725f 6c6f 6766 696c     stderr_logfil
-00011160: 653d 5465 6d70 4669 6c65 4f70 656e 2e6d  e=TempFileOpen.m
-00011170: 616b 655f 7061 7468 2827 7072 6f63 6573  ake_path('proces
-00011180: 7331 2e6c 6f67 2729 290d 0a20 2020 2020  s1.log'))..     
-00011190: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-000111a0: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
-000111b0: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
-000111c0: 732c 2027 7072 6f63 6573 7331 272c 2070  s, 'process1', p
-000111d0: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
-000111e0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-000111f0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00011200: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00011210: 2070 726f 6365 7373 203d 2073 7570 6572   process = super
-00011220: 7669 736f 7264 2e70 726f 6365 7373 5f67  visord.process_g
-00011230: 726f 7570 735b 2770 726f 6365 7373 3127  roups['process1'
-00011240: 5d2e 7072 6f63 6573 7365 735b 2770 726f  ].processes['pro
-00011250: 6365 7373 3127 5d0d 0a20 2020 2020 2020  cess1']..       
-00011260: 206c 6f67 6669 6c65 203d 2070 726f 6365   logfile = proce
-00011270: 7373 2e63 6f6e 6669 672e 7374 6465 7272  ss.config.stderr
-00011280: 5f6c 6f67 6669 6c65 0d0a 0d0a 2020 2020  _logfile....    
-00011290: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-000112a0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-000112b0: 6c6f 6766 696c 652c 2027 772b 2729 2061  logfile, 'w+') a
-000112c0: 7320 663a 0d0a 2020 2020 2020 2020 2020  s f:..          
-000112d0: 2020 2020 2020 662e 7772 6974 6528 2778        f.write('x
-000112e0: 2720 2a20 3230 3438 290d 0a20 2020 2020  ' * 2048)..     
-000112f0: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
-00011300: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
-00011310: 7063 2e46 6175 6c74 732e 4241 445f 4152  pc.Faults.BAD_AR
-00011320: 4755 4d45 4e54 532c 0d0a 2020 2020 2020  GUMENTS,..      
-00011330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011340: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
-00011350: 6661 6365 2e72 6561 6450 726f 6365 7373  face.readProcess
-00011360: 5374 6465 7272 4c6f 672c 0d0a 2020 2020  StderrLog,..    
-00011370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011380: 2020 2020 2020 2020 2020 2020 2027 7072               'pr
-00011390: 6f63 6573 7331 272c 206f 6666 7365 743d  ocess1', offset=
-000113a0: 2d31 2c20 6c65 6e67 7468 3d31 290d 0a20  -1, length=1).. 
-000113b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000113c0: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-000113d0: 786d 6c72 7063 2e46 6175 6c74 732e 4241  xmlrpc.Faults.BA
-000113e0: 445f 4152 4755 4d45 4e54 532c 0d0a 2020  D_ARGUMENTS,..  
-000113f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011400: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00011410: 6e74 6572 6661 6365 2e72 6561 6450 726f  nterface.readPro
-00011420: 6365 7373 5374 6465 7272 4c6f 672c 2027  cessStderrLog, '
-00011430: 7072 6f63 6573 7331 272c 0d0a 2020 2020  process1',..    
-00011440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011450: 2020 2020 2020 2020 2020 2020 206f 6666               off
-00011460: 7365 743d 2d31 2c20 6c65 6e67 7468 3d2d  set=-1, length=-
-00011470: 3129 0d0a 2020 2020 2020 2020 6669 6e61  1)..        fina
-00011480: 6c6c 793a 0d0a 2020 2020 2020 2020 2020  lly:..          
-00011490: 2020 6f73 2e72 656d 6f76 6528 6c6f 6766    os.remove(logf
-000114a0: 696c 6529 0d0a 0d0a 2020 2020 6465 6620  ile)....    def 
-000114b0: 7465 7374 5f72 6561 6450 726f 6365 7373  test_readProcess
-000114c0: 5374 6465 7272 4c6f 675f 6261 645f 6e61  StderrLog_bad_na
-000114d0: 6d65 5f6e 6f5f 7072 6f63 6573 7328 7365  me_no_process(se
-000114e0: 6c66 293a 0d0a 2020 2020 2020 2020 6672  lf):..        fr
-000114f0: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
-00011500: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
-00011510: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
-00011520: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
-00011530: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
-00011540: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
-00011550: 7469 6f6e 732c 2027 7072 6f63 6573 7331  tions, 'process1
-00011560: 272c 2027 2f62 696e 2f70 726f 6365 7373  ', '/bin/process
-00011570: 3127 2c20 7072 696f 7269 7479 3d31 2c0d  1', priority=1,.
-00011580: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f440: 2020 2020 2020 2020 2020 2020 2069 6e74               int
+0000f450: 6572 6661 6365 2e67 6574 5072 6f63 6573  erface.getProces
+0000f460: 7349 6e66 6f2c 2027 666f 6f3a 2729 0d0a  sInfo, 'foo:')..
+0000f470: 0d0a 2020 2020 6465 6620 7465 7374 5f67  ..    def test_g
+0000f480: 6574 5072 6f63 6573 7349 6e66 6f5f 6361  etProcessInfo_ca
+0000f490: 7073 5f74 696d 6573 7461 6d70 735f 6578  ps_timestamps_ex
+0000f4a0: 6365 6564 696e 675f 786d 6c72 7063 5f6d  ceeding_xmlrpc_m
+0000f4b0: 6178 696e 7428 7365 6c66 293a 0d0a 2020  axint(self):..  
+0000f4c0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+0000f4d0: 7669 736f 722e 636f 6d70 6174 2069 6d70  visor.compat imp
+0000f4e0: 6f72 7420 786d 6c72 7063 6c69 620d 0a20  ort xmlrpclib.. 
+0000f4f0: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+0000f500: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+0000f510: 0a20 2020 2020 2020 2063 6f6e 6669 6720  .        config 
+0000f520: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
+0000f530: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
+0000f540: 2f62 696e 2f66 6f6f 272c 0d0a 2020 2020  /bin/foo',..    
+0000f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f560: 2020 2020 2020 2020 2020 7374 646f 7574            stdout
+0000f570: 5f6c 6f67 6669 6c65 3d4e 6f6e 6529 0d0a  _logfile=None)..
+0000f580: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+0000f590: 3d20 4475 6d6d 7950 726f 6365 7373 2863  = DummyProcess(c
+0000f5a0: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+0000f5b0: 7072 6f63 6573 732e 6c61 7374 7374 6172  process.laststar
+0000f5c0: 7420 3d20 666c 6f61 7428 786d 6c72 7063  t = float(xmlrpc
+0000f5d0: 6c69 622e 4d41 5849 4e54 202b 2031 290d  lib.MAXINT + 1).
+0000f5e0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0000f5f0: 2e6c 6173 7473 746f 7020 3d20 666c 6f61  .laststop = floa
+0000f600: 7428 786d 6c72 7063 6c69 622e 4d41 5849  t(xmlrpclib.MAXI
+0000f610: 4e54 202b 2031 290d 0a20 2020 2020 2020  NT + 1)..       
+0000f620: 2070 6772 6f75 705f 636f 6e66 6967 203d   pgroup_config =
+0000f630: 2044 756d 6d79 5047 726f 7570 436f 6e66   DummyPGroupConf
+0000f640: 6967 286f 7074 696f 6e73 2c20 6e61 6d65  ig(options, name
+0000f650: 3d27 666f 6f27 290d 0a20 2020 2020 2020  ='foo')..       
+0000f660: 2070 6772 6f75 7020 3d20 4475 6d6d 7950   pgroup = DummyP
+0000f670: 726f 6365 7373 4772 6f75 7028 7067 726f  rocessGroup(pgro
+0000f680: 7570 5f63 6f6e 6669 6729 0d0a 2020 2020  up_config)..    
+0000f690: 2020 2020 7067 726f 7570 2e70 726f 6365      pgroup.proce
+0000f6a0: 7373 6573 203d 207b 2766 6f6f 273a 7072  sses = {'foo':pr
+0000f6b0: 6f63 6573 737d 0d0a 2020 2020 2020 2020  ocess}..        
+0000f6c0: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
+0000f6d0: 6d6d 7953 7570 6572 7669 736f 7228 7072  mmySupervisor(pr
+0000f6e0: 6f63 6573 735f 6772 6f75 7073 3d7b 2766  ocess_groups={'f
+0000f6f0: 6f6f 273a 7067 726f 7570 7d29 0d0a 2020  oo':pgroup})..  
+0000f700: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+0000f710: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+0000f720: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+0000f730: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
+0000f740: 5f6e 6f77 203d 206c 616d 6264 613a 2066  _now = lambda: f
+0000f750: 6c6f 6174 2878 6d6c 7270 636c 6962 2e4d  loat(xmlrpclib.M
+0000f760: 4158 494e 5420 2b20 3129 0d0a 2020 2020  AXINT + 1)..    
+0000f770: 2020 2020 6461 7461 203d 2069 6e74 6572      data = inter
+0000f780: 6661 6365 2e67 6574 5072 6f63 6573 7349  face.getProcessI
+0000f790: 6e66 6f28 2766 6f6f 2729 0d0a 2020 2020  nfo('foo')..    
+0000f7a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000f7b0: 7175 616c 2864 6174 615b 2773 7461 7274  qual(data['start
+0000f7c0: 275d 2c20 786d 6c72 7063 6c69 622e 4d41  '], xmlrpclib.MA
+0000f7d0: 5849 4e54 290d 0a20 2020 2020 2020 2073  XINT)..        s
+0000f7e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000f7f0: 6461 7461 5b27 7374 6f70 275d 2c20 786d  data['stop'], xm
+0000f800: 6c72 7063 6c69 622e 4d41 5849 4e54 290d  lrpclib.MAXINT).
+0000f810: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000f820: 7365 7274 4571 7561 6c28 6461 7461 5b27  sertEqual(data['
+0000f830: 6e6f 7727 5d2c 2078 6d6c 7270 636c 6962  now'], xmlrpclib
+0000f840: 2e4d 4158 494e 5429 0d0a 0d0a 2020 2020  .MAXINT)....    
+0000f850: 6465 6620 7465 7374 5f67 6574 416c 6c50  def test_getAllP
+0000f860: 726f 6365 7373 496e 666f 2873 656c 6629  rocessInfo(self)
+0000f870: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
+0000f880: 7375 7065 7276 6973 6f72 2e70 726f 6365  supervisor.proce
+0000f890: 7373 2069 6d70 6f72 7420 5072 6f63 6573  ss import Proces
+0000f8a0: 7353 7461 7465 730d 0a20 2020 2020 2020  sStates..       
+0000f8b0: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+0000f8c0: 4f70 7469 6f6e 7328 290d 0a0d 0a20 2020  Options()....   
+0000f8d0: 2020 2020 2070 3163 6f6e 6669 6720 3d20       p1config = 
+0000f8e0: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+0000f8f0: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
+0000f900: 2c20 272f 6269 6e2f 7072 6f63 6573 7331  , '/bin/process1
+0000f910: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+0000f920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f930: 2020 2020 7072 696f 7269 7479 3d31 2c0d      priority=1,.
+0000f940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f960: 2073 7464 6f75 745f 6c6f 6766 696c 653d   stdout_logfile=
+0000f970: 272f 746d 702f 7072 6f63 6573 7331 2e6c  '/tmp/process1.l
+0000f980: 6f67 2729 0d0a 0d0a 2020 2020 2020 2020  og')....        
+0000f990: 7032 636f 6e66 6967 203d 2044 756d 6d79  p2config = Dummy
+0000f9a0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+0000f9b0: 2027 7072 6f63 6573 7332 272c 2027 2f62   'process2', '/b
+0000f9c0: 696e 2f70 726f 6365 7373 3227 2c0d 0a20  in/process2',.. 
+0000f9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f9e0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000f9f0: 7269 6f72 6974 793d 322c 0d0a 2020 2020  riority=2,..    
+0000fa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fa10: 2020 2020 2020 2020 2020 2020 7374 646f              stdo
+0000fa20: 7574 5f6c 6f67 6669 6c65 3d27 2f74 6d70  ut_logfile='/tmp
+0000fa30: 2f70 726f 6365 7373 322e 6c6f 6727 290d  /process2.log').
+0000fa40: 0a0d 0a20 2020 2020 2020 2073 7570 6572  ...        super
+0000fa50: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+0000fa60: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+0000fa70: 7228 6f70 7469 6f6e 732c 2027 676e 616d  r(options, 'gnam
+0000fa80: 6527 2c20 7031 636f 6e66 6967 2c0d 0a20  e', p1config,.. 
+0000fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000faa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fab0: 2020 2020 2020 2020 2020 2020 2020 7032                p2
+0000fac0: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+0000fad0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
+0000fae0: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
+0000faf0: 7373 3127 2c20 2770 6964 272c 2031 3131  ss1', 'pid', 111
+0000fb00: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0000fb10: 7669 736f 7264 2e73 6574 5f70 726f 6361  visord.set_proca
+0000fb20: 7474 7228 2770 726f 6365 7373 3127 2c20  ttr('process1', 
+0000fb30: 276c 6173 7473 7461 7274 272c 2031 3029  'laststart', 10)
+0000fb40: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+0000fb50: 6973 6f72 642e 7365 745f 7072 6f63 6174  isord.set_procat
+0000fb60: 7472 2827 7072 6f63 6573 7331 272c 2027  tr('process1', '
+0000fb70: 6c61 7374 7374 6f70 272c 2031 3129 0d0a  laststop', 11)..
+0000fb80: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000fb90: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+0000fba0: 2827 7072 6f63 6573 7331 272c 2027 7374  ('process1', 'st
+0000fbb0: 6174 6527 2c20 5072 6f63 6573 7353 7461  ate', ProcessSta
+0000fbc0: 7465 732e 5255 4e4e 494e 4729 0d0a 0d0a  tes.RUNNING)....
+0000fbd0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+0000fbe0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+0000fbf0: 2827 7072 6f63 6573 7332 272c 2027 7069  ('process2', 'pi
+0000fc00: 6427 2c20 3029 0d0a 2020 2020 2020 2020  d', 0)..        
+0000fc10: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+0000fc20: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
+0000fc30: 7332 272c 2027 6c61 7374 7374 6172 7427  s2', 'laststart'
+0000fc40: 2c20 3230 290d 0a20 2020 2020 2020 2073  , 20)..        s
+0000fc50: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+0000fc60: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
+0000fc70: 3227 2c20 276c 6173 7473 746f 7027 2c20  2', 'laststop', 
+0000fc80: 3131 290d 0a20 2020 2020 2020 2073 7570  11)..        sup
+0000fc90: 6572 7669 736f 7264 2e73 6574 5f70 726f  ervisord.set_pro
+0000fca0: 6361 7474 7228 2770 726f 6365 7373 3227  cattr('process2'
+0000fcb0: 2c20 2773 7461 7465 272c 2050 726f 6365  , 'state', Proce
+0000fcc0: 7373 5374 6174 6573 2e53 544f 5050 4544  ssStates.STOPPED
+0000fcd0: 290d 0a0d 0a20 2020 2020 2020 2069 6e74  )....        int
+0000fce0: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+0000fcf0: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+0000fd00: 7264 290d 0a0d 0a20 2020 2020 2020 2069  rd)....        i
+0000fd10: 6e66 6f20 3d20 696e 7465 7266 6163 652e  nfo = interface.
+0000fd20: 6765 7441 6c6c 5072 6f63 6573 7349 6e66  getAllProcessInf
+0000fd30: 6f28 290d 0a0d 0a20 2020 2020 2020 2073  o()....        s
+0000fd40: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000fd50: 696e 7465 7266 6163 652e 7570 6461 7465  interface.update
+0000fd60: 5f74 6578 742c 2027 6765 7450 726f 6365  _text, 'getProce
+0000fd70: 7373 496e 666f 2729 0d0a 2020 2020 2020  ssInfo')..      
+0000fd80: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000fd90: 616c 286c 656e 2869 6e66 6f29 2c20 3229  al(len(info), 2)
+0000fda0: 0d0a 0d0a 2020 2020 2020 2020 7031 696e  ....        p1in
+0000fdb0: 666f 203d 2069 6e66 6f5b 305d 0d0a 2020  fo = info[0]..  
+0000fdc0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000fdd0: 7445 7175 616c 2870 3169 6e66 6f5b 276c  tEqual(p1info['l
+0000fde0: 6f67 6669 6c65 275d 2c20 272f 746d 702f  ogfile'], '/tmp/
+0000fdf0: 7072 6f63 6573 7331 2e6c 6f67 2729 0d0a  process1.log')..
+0000fe00: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000fe10: 6572 7445 7175 616c 2870 3169 6e66 6f5b  ertEqual(p1info[
+0000fe20: 2773 7464 6f75 745f 6c6f 6766 696c 6527  'stdout_logfile'
+0000fe30: 5d2c 2027 2f74 6d70 2f70 726f 6365 7373  ], '/tmp/process
+0000fe40: 312e 6c6f 6727 290d 0a20 2020 2020 2020  1.log')..       
+0000fe50: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000fe60: 6c28 7031 696e 666f 5b27 7374 6465 7272  l(p1info['stderr
+0000fe70: 5f6c 6f67 6669 6c65 275d 2c20 2727 290d  _logfile'], '').
+0000fe80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000fe90: 7365 7274 4571 7561 6c28 7031 696e 666f  sertEqual(p1info
+0000fea0: 5b27 6e61 6d65 275d 2c20 2770 726f 6365  ['name'], 'proce
+0000feb0: 7373 3127 290d 0a20 2020 2020 2020 2073  ss1')..        s
+0000fec0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000fed0: 7031 696e 666f 5b27 7069 6427 5d2c 2031  p1info['pid'], 1
+0000fee0: 3131 290d 0a20 2020 2020 2020 2073 656c  11)..        sel
+0000fef0: 662e 6173 7365 7274 4571 7561 6c28 7031  f.assertEqual(p1
+0000ff00: 696e 666f 5b27 7374 6172 7427 5d2c 2031  info['start'], 1
+0000ff10: 3029 0d0a 2020 2020 2020 2020 7365 6c66  0)..        self
+0000ff20: 2e61 7373 6572 7445 7175 616c 2870 3169  .assertEqual(p1i
+0000ff30: 6e66 6f5b 2773 746f 7027 5d2c 2031 3129  nfo['stop'], 11)
+0000ff40: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+0000ff50: 7373 6572 7445 7175 616c 2870 3169 6e66  ssertEqual(p1inf
+0000ff60: 6f5b 2773 7461 7465 275d 2c20 5072 6f63  o['state'], Proc
+0000ff70: 6573 7353 7461 7465 732e 5255 4e4e 494e  essStates.RUNNIN
+0000ff80: 4729 0d0a 2020 2020 2020 2020 7365 6c66  G)..        self
+0000ff90: 2e61 7373 6572 7445 7175 616c 2870 3169  .assertEqual(p1i
+0000ffa0: 6e66 6f5b 2773 7461 7465 6e61 6d65 275d  nfo['statename']
+0000ffb0: 2c20 2752 554e 4e49 4e47 2729 0d0a 2020  , 'RUNNING')..  
+0000ffc0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000ffd0: 7445 7175 616c 2870 3169 6e66 6f5b 2765  tEqual(p1info['e
+0000ffe0: 7869 7473 7461 7475 7327 5d2c 2030 290d  xitstatus'], 0).
+0000fff0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00010000: 7365 7274 4571 7561 6c28 7031 696e 666f  sertEqual(p1info
+00010010: 5b27 7370 6177 6e65 7272 275d 2c20 2727  ['spawnerr'], ''
+00010020: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00010030: 6173 7365 7274 4571 7561 6c28 7031 696e  assertEqual(p1in
+00010040: 666f 5b27 6772 6f75 7027 5d2c 2027 676e  fo['group'], 'gn
+00010050: 616d 6527 290d 0a20 2020 2020 2020 2073  ame')..        s
+00010060: 656c 662e 6173 7365 7274 5472 7565 2870  elf.assertTrue(p
+00010070: 3169 6e66 6f5b 2764 6573 6372 6970 7469  1info['descripti
+00010080: 6f6e 275d 2e73 7461 7274 7377 6974 6828  on'].startswith(
+00010090: 2770 6964 2031 3131 2729 290d 0a0d 0a20  'pid 111')).... 
+000100a0: 2020 2020 2020 2070 3269 6e66 6f20 3d20         p2info = 
+000100b0: 696e 666f 5b31 5d0d 0a20 2020 2020 2020  info[1]..       
+000100c0: 2070 726f 6365 7373 3220 3d20 7375 7065   process2 = supe
+000100d0: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
+000100e0: 6772 6f75 7073 5b27 676e 616d 6527 5d2e  groups['gname'].
+000100f0: 7072 6f63 6573 7365 735b 2770 726f 6365  processes['proce
+00010100: 7373 3227 5d0d 0a20 2020 2020 2020 2073  ss2']..        s
+00010110: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00010120: 7032 696e 666f 5b27 6c6f 6766 696c 6527  p2info['logfile'
+00010130: 5d2c 2027 2f74 6d70 2f70 726f 6365 7373  ], '/tmp/process
+00010140: 322e 6c6f 6727 290d 0a20 2020 2020 2020  2.log')..       
+00010150: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00010160: 6c28 7032 696e 666f 5b27 7374 646f 7574  l(p2info['stdout
+00010170: 5f6c 6f67 6669 6c65 275d 2c20 272f 746d  _logfile'], '/tm
+00010180: 702f 7072 6f63 6573 7332 2e6c 6f67 2729  p/process2.log')
+00010190: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000101a0: 7373 6572 7445 7175 616c 2870 3169 6e66  ssertEqual(p1inf
+000101b0: 6f5b 2773 7464 6572 725f 6c6f 6766 696c  o['stderr_logfil
+000101c0: 6527 5d2c 2027 2729 0d0a 2020 2020 2020  e'], '')..      
+000101d0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+000101e0: 616c 2870 3269 6e66 6f5b 276e 616d 6527  al(p2info['name'
+000101f0: 5d2c 2027 7072 6f63 6573 7332 2729 0d0a  ], 'process2')..
+00010200: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00010210: 6572 7445 7175 616c 2870 3269 6e66 6f5b  ertEqual(p2info[
+00010220: 2770 6964 275d 2c20 3029 0d0a 2020 2020  'pid'], 0)..    
+00010230: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00010240: 7175 616c 2870 3269 6e66 6f5b 2773 7461  qual(p2info['sta
+00010250: 7274 275d 2c20 7072 6f63 6573 7332 2e6c  rt'], process2.l
+00010260: 6173 7473 7461 7274 290d 0a20 2020 2020  aststart)..     
+00010270: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00010280: 7561 6c28 7032 696e 666f 5b27 7374 6f70  ual(p2info['stop
+00010290: 275d 2c20 3131 290d 0a20 2020 2020 2020  '], 11)..       
+000102a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000102b0: 6c28 7032 696e 666f 5b27 7374 6174 6527  l(p2info['state'
+000102c0: 5d2c 2050 726f 6365 7373 5374 6174 6573  ], ProcessStates
+000102d0: 2e53 544f 5050 4544 290d 0a20 2020 2020  .STOPPED)..     
+000102e0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000102f0: 7561 6c28 7032 696e 666f 5b27 7374 6174  ual(p2info['stat
+00010300: 656e 616d 6527 5d2c 2027 5354 4f50 5045  ename'], 'STOPPE
+00010310: 4427 290d 0a20 2020 2020 2020 2073 656c  D')..        sel
+00010320: 662e 6173 7365 7274 4571 7561 6c28 7032  f.assertEqual(p2
+00010330: 696e 666f 5b27 6578 6974 7374 6174 7573  info['exitstatus
+00010340: 275d 2c20 3029 0d0a 2020 2020 2020 2020  '], 0)..        
+00010350: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00010360: 2870 3269 6e66 6f5b 2773 7061 776e 6572  (p2info['spawner
+00010370: 7227 5d2c 2027 2729 0d0a 2020 2020 2020  r'], '')..      
+00010380: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00010390: 616c 2870 3169 6e66 6f5b 2767 726f 7570  al(p1info['group
+000103a0: 275d 2c20 2767 6e61 6d65 2729 0d0a 0d0a  '], 'gname')....
+000103b0: 2020 2020 2020 2020 6672 6f6d 2064 6174          from dat
+000103c0: 6574 696d 6520 696d 706f 7274 2064 6174  etime import dat
+000103d0: 6574 696d 650d 0a20 2020 2020 2020 2073  etime..        s
+000103e0: 7461 7274 7469 6d65 203d 2064 6174 6574  tarttime = datet
+000103f0: 696d 6528 2a74 696d 652e 6c6f 6361 6c74  ime(*time.localt
+00010400: 696d 6528 7072 6f63 6573 7332 2e6c 6173  ime(process2.las
+00010410: 7473 7461 7274 295b 3a37 5d29 0d0a 2020  tstart)[:7])..  
+00010420: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00010430: 7445 7175 616c 2870 3269 6e66 6f5b 2764  tEqual(p2info['d
+00010440: 6573 6372 6970 7469 6f6e 275d 2c0d 0a20  escription'],.. 
+00010450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010460: 2020 2020 2020 2020 7374 6172 7474 696d          starttim
+00010470: 652e 7374 7266 7469 6d65 285f 5449 4d45  e.strftime(_TIME
+00010480: 464f 524d 4154 2929 0d0a 0d0a 2020 2020  FORMAT))....    
+00010490: 6465 6620 7465 7374 5f72 6561 6450 726f  def test_readPro
+000104a0: 6365 7373 5374 646f 7574 4c6f 675f 756e  cessStdoutLog_un
+000104b0: 7265 6164 6162 6c65 2873 656c 6629 3a0d  readable(self):.
+000104c0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+000104d0: 7065 7276 6973 6f72 2069 6d70 6f72 7420  pervisor import 
+000104e0: 786d 6c72 7063 0d0a 2020 2020 2020 2020  xmlrpc..        
+000104f0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00010500: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00010510: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
+00010520: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00010530: 2c20 2770 726f 6365 7373 3127 2c20 272f  , 'process1', '/
+00010540: 6269 6e2f 7072 6f63 6573 7331 272c 2070  bin/process1', p
+00010550: 7269 6f72 6974 793d 312c 0d0a 2020 2020  riority=1,..    
+00010560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010570: 2020 2020 2020 2020 2020 2073 7464 6f75             stdou
+00010580: 745f 6c6f 6766 696c 653d 272f 746d 702f  t_logfile='/tmp/
+00010590: 7072 6f63 6573 7331 2e6c 6f67 2729 0d0a  process1.log')..
+000105a0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000105b0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+000105c0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+000105d0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+000105e0: 3127 2c20 7063 6f6e 6669 6729 0d0a 2020  1', pconfig)..  
+000105f0: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00010600: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00010610: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+00010620: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
+00010630: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
+00010640: 632e 4661 756c 7473 2e4e 4f5f 4649 4c45  c.Faults.NO_FILE
+00010650: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00010660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010670: 696e 7465 7266 6163 652e 7265 6164 5072  interface.readPr
+00010680: 6f63 6573 7353 7464 6f75 744c 6f67 2c0d  ocessStdoutLog,.
+00010690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000106a0: 2020 2020 2020 2020 2020 2020 2020 2770                'p
+000106b0: 726f 6365 7373 3127 2c20 6f66 6673 6574  rocess1', offset
+000106c0: 3d30 2c20 6c65 6e67 7468 3d31 290d 0a0d  =0, length=1)...
+000106d0: 0a20 2020 2064 6566 2074 6573 745f 7265  .    def test_re
+000106e0: 6164 5072 6f63 6573 7353 7464 6f75 744c  adProcessStdoutL
+000106f0: 6f67 5f62 6164 6172 6773 2873 656c 6629  og_badargs(self)
+00010700: 3a0d 0a20 2020 2020 2020 2066 726f 6d20  :..        from 
+00010710: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
+00010720: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
+00010730: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
+00010740: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
+00010750: 2020 2020 7063 6f6e 6669 6720 3d20 4475      pconfig = Du
+00010760: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
+00010770: 6e73 2c20 2770 726f 6365 7373 3127 2c20  ns, 'process1', 
+00010780: 272f 6269 6e2f 7072 6f63 6573 7331 272c  '/bin/process1',
+00010790: 2070 7269 6f72 6974 793d 312c 0d0a 2020   priority=1,..  
+000107a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000107b0: 2020 2020 2020 2020 2020 2020 2073 7464               std
+000107c0: 6f75 745f 6c6f 6766 696c 653d 5465 6d70  out_logfile=Temp
+000107d0: 4669 6c65 4f70 656e 2e6d 616b 655f 7061  FileOpen.make_pa
+000107e0: 7468 2827 7072 6f63 6573 7331 2e6c 6f67  th('process1.log
+000107f0: 2729 290d 0a20 2020 2020 2020 2073 7570  '))..        sup
+00010800: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
+00010810: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
+00010820: 736f 7228 6f70 7469 6f6e 732c 2027 7072  sor(options, 'pr
+00010830: 6f63 6573 7331 272c 2070 636f 6e66 6967  ocess1', pconfig
+00010840: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
+00010850: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
+00010860: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
+00010870: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+00010880: 7373 203d 2073 7570 6572 7669 736f 7264  ss = supervisord
+00010890: 2e70 726f 6365 7373 5f67 726f 7570 735b  .process_groups[
+000108a0: 2770 726f 6365 7373 3127 5d2e 7072 6f63  'process1'].proc
+000108b0: 6573 7365 735b 2770 726f 6365 7373 3127  esses['process1'
+000108c0: 5d0d 0a20 2020 2020 2020 206c 6f67 6669  ]..        logfi
+000108d0: 6c65 203d 2070 726f 6365 7373 2e63 6f6e  le = process.con
+000108e0: 6669 672e 7374 646f 7574 5f6c 6f67 6669  fig.stdout_logfi
+000108f0: 6c65 0d0a 0d0a 2020 2020 2020 2020 7472  le....        tr
+00010900: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00010910: 7769 7468 206f 7065 6e28 6c6f 6766 696c  with open(logfil
+00010920: 652c 2027 772b 2729 2061 7320 663a 0d0a  e, 'w+') as f:..
+00010930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010940: 662e 7772 6974 6528 2778 2720 2a20 3230  f.write('x' * 20
+00010950: 3438 290d 0a20 2020 2020 2020 2020 2020  48)..           
+00010960: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+00010970: 4572 726f 7228 786d 6c72 7063 2e46 6175  Error(xmlrpc.Fau
+00010980: 6c74 732e 4241 445f 4152 4755 4d45 4e54  lts.BAD_ARGUMENT
+00010990: 532c 0d0a 2020 2020 2020 2020 2020 2020  S,..            
+000109a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000109b0: 2020 2020 2069 6e74 6572 6661 6365 2e72       interface.r
+000109c0: 6561 6450 726f 6365 7373 5374 646f 7574  eadProcessStdout
+000109d0: 4c6f 672c 0d0a 2020 2020 2020 2020 2020  Log,..          
+000109e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000109f0: 2020 2020 2020 2027 7072 6f63 6573 7331         'process1
+00010a00: 272c 206f 6666 7365 743d 2d31 2c20 6c65  ', offset=-1, le
+00010a10: 6e67 7468 3d31 290d 0a20 2020 2020 2020  ngth=1)..       
+00010a20: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
+00010a30: 7452 5043 4572 726f 7228 786d 6c72 7063  tRPCError(xmlrpc
+00010a40: 2e46 6175 6c74 732e 4241 445f 4152 4755  .Faults.BAD_ARGU
+00010a50: 4d45 4e54 532c 0d0a 2020 2020 2020 2020  MENTS,..        
+00010a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010a70: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
+00010a80: 6365 2e72 6561 6450 726f 6365 7373 5374  ce.readProcessSt
+00010a90: 646f 7574 4c6f 672c 2027 7072 6f63 6573  doutLog, 'proces
+00010aa0: 7331 272c 0d0a 2020 2020 2020 2020 2020  s1',..          
+00010ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010ac0: 2020 2020 2020 206f 6666 7365 743d 2d31         offset=-1
+00010ad0: 2c20 6c65 6e67 7468 3d2d 3129 0d0a 2020  , length=-1)..  
+00010ae0: 2020 2020 2020 6669 6e61 6c6c 793a 0d0a        finally:..
+00010af0: 2020 2020 2020 2020 2020 2020 6f73 2e72              os.r
+00010b00: 656d 6f76 6528 6c6f 6766 696c 6529 0d0a  emove(logfile)..
+00010b10: 0d0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
+00010b20: 6561 6450 726f 6365 7373 5374 646f 7574  eadProcessStdout
+00010b30: 4c6f 675f 6261 645f 6e61 6d65 5f6e 6f5f  Log_bad_name_no_
+00010b40: 7072 6f63 6573 7328 7365 6c66 293a 0d0a  process(self):..
+00010b50: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00010b60: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
+00010b70: 6d6c 7270 630d 0a20 2020 2020 2020 206f  mlrpc..        o
+00010b80: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+00010b90: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+00010ba0: 2070 636f 6e66 6967 203d 2044 756d 6d79   pconfig = Dummy
+00010bb0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+00010bc0: 2027 7072 6f63 6573 7331 272c 2027 2f62   'process1', '/b
+00010bd0: 696e 2f70 726f 6365 7373 3127 2c20 7072  in/process1', pr
+00010be0: 696f 7269 7479 3d31 2c0d 0a20 2020 2020  iority=1,..     
+00010bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010c00: 2020 2020 2020 2020 2020 7374 646f 7574            stdout
+00010c10: 5f6c 6f67 6669 6c65 3d27 2f74 6d70 2f70  _logfile='/tmp/p
+00010c20: 726f 6365 7373 312e 6c6f 6727 290d 0a20  rocess1.log').. 
+00010c30: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00010c40: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
+00010c50: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
+00010c60: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
+00010c70: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+00010c80: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00010c90: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00010ca0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00010cb0: 7365 6c66 2e5f 6173 7365 7274 5250 4345  self._assertRPCE
+00010cc0: 7272 6f72 2878 6d6c 7270 632e 4661 756c  rror(xmlrpc.Faul
+00010cd0: 7473 2e42 4144 5f4e 414d 452c 0d0a 2020  ts.BAD_NAME,..  
+00010ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010cf0: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
+00010d00: 6661 6365 2e72 6561 6450 726f 6365 7373  face.readProcess
+00010d10: 5374 646f 7574 4c6f 672c 0d0a 2020 2020  StdoutLog,..    
+00010d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010d30: 2020 2020 2020 2020 2027 666f 6f3a 2a27           'foo:*'
+00010d40: 2c20 6f66 6673 6574 3d30 2c20 6c65 6e67  , offset=0, leng
+00010d50: 7468 3d31 290d 0a0d 0a20 2020 2064 6566  th=1)....    def
+00010d60: 2074 6573 745f 7265 6164 5072 6f63 6573   test_readProces
+00010d70: 7353 7464 6f75 744c 6f67 2873 656c 6629  sStdoutLog(self)
+00010d80: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
+00010d90: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00010da0: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+00010db0: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
+00010dc0: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
+00010dd0: 6f27 2c20 272f 6269 6e2f 666f 6f27 2c0d  o', '/bin/foo',.
+00010de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010e00: 7374 646f 7574 5f6c 6f67 6669 6c65 3d54  stdout_logfile=T
+00010e10: 656d 7046 696c 654f 7065 6e2e 6d61 6b65  empFileOpen.make
+00010e20: 5f70 6174 6828 2273 7464 6f75 742d 6c6f  _path("stdout-lo
+00010e30: 6766 696c 652e 6c6f 6722 2929 0d0a 2020  gfile.log"))..  
+00010e40: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00010e50: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+00010e60: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+00010e70: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+00010e80: 6e66 6967 290d 0a20 2020 2020 2020 2069  nfig)..        i
+00010e90: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00010ea0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00010eb0: 736f 7264 290d 0a20 2020 2020 2020 2070  sord)..        p
+00010ec0: 726f 6365 7373 203d 2073 7570 6572 7669  rocess = supervi
+00010ed0: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
+00010ee0: 7570 735b 2766 6f6f 275d 2e70 726f 6365  ups['foo'].proce
+00010ef0: 7373 6573 5b27 666f 6f27 5d0d 0a20 2020  sses['foo']..   
+00010f00: 2020 2020 206c 6f67 6669 6c65 203d 2070       logfile = p
+00010f10: 726f 6365 7373 2e63 6f6e 6669 672e 7374  rocess.config.st
+00010f20: 646f 7574 5f6c 6f67 6669 6c65 0d0a 2020  dout_logfile..  
+00010f30: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00010f40: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00010f50: 6e28 6c6f 6766 696c 652c 2027 772b 2729  n(logfile, 'w+')
+00010f60: 2061 7320 663a 0d0a 2020 2020 2020 2020   as f:..        
+00010f70: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+00010f80: 2778 2720 2a20 3230 3438 290d 0a20 2020  'x' * 2048)..   
+00010f90: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+00010fa0: 7269 7465 2827 7927 202a 2032 3034 3829  rite('y' * 2048)
+00010fb0: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
+00010fc0: 7461 203d 2069 6e74 6572 6661 6365 2e72  ta = interface.r
+00010fd0: 6561 6450 726f 6365 7373 5374 646f 7574  eadProcessStdout
+00010fe0: 4c6f 6728 2766 6f6f 272c 206f 6666 7365  Log('foo', offse
+00010ff0: 743d 302c 206c 656e 6774 683d 3029 0d0a  t=0, length=0)..
+00011000: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00011010: 2e61 7373 6572 7445 7175 616c 2869 6e74  .assertEqual(int
+00011020: 6572 6661 6365 2e75 7064 6174 655f 7465  erface.update_te
+00011030: 7874 2c20 2772 6561 6450 726f 6365 7373  xt, 'readProcess
+00011040: 5374 646f 7574 4c6f 6727 290d 0a20 2020  StdoutLog')..   
+00011050: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00011060: 7365 7274 4571 7561 6c28 6461 7461 2c20  sertEqual(data, 
+00011070: 2827 7827 202a 2032 3034 3829 202b 2028  ('x' * 2048) + (
+00011080: 2779 2720 2a20 3230 3438 2929 0d0a 2020  'y' * 2048))..  
+00011090: 2020 2020 2020 2020 2020 6461 7461 203d            data =
+000110a0: 2069 6e74 6572 6661 6365 2e72 6561 6450   interface.readP
+000110b0: 726f 6365 7373 5374 646f 7574 4c6f 6728  rocessStdoutLog(
+000110c0: 2766 6f6f 272c 206f 6666 7365 743d 3230  'foo', offset=20
+000110d0: 3438 2c20 6c65 6e67 7468 3d30 290d 0a20  48, length=0).. 
+000110e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000110f0: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
+00011100: 2c20 2779 2720 2a20 3230 3438 290d 0a20  , 'y' * 2048).. 
+00011110: 2020 2020 2020 2020 2020 2064 6174 6120             data 
+00011120: 3d20 696e 7465 7266 6163 652e 7265 6164  = interface.read
+00011130: 5072 6f63 6573 7353 7464 6f75 744c 6f67  ProcessStdoutLog
+00011140: 2827 666f 6f27 2c20 6f66 6673 6574 3d30  ('foo', offset=0
+00011150: 2c20 6c65 6e67 7468 3d32 3034 3829 0d0a  , length=2048)..
+00011160: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00011170: 2e61 7373 6572 7445 7175 616c 2864 6174  .assertEqual(dat
+00011180: 612c 2027 7827 202a 2032 3034 3829 0d0a  a, 'x' * 2048)..
+00011190: 2020 2020 2020 2020 2020 2020 6461 7461              data
+000111a0: 203d 2069 6e74 6572 6661 6365 2e72 6561   = interface.rea
+000111b0: 6450 726f 6365 7373 5374 646f 7574 4c6f  dProcessStdoutLo
+000111c0: 6728 2766 6f6f 272c 206f 6666 7365 743d  g('foo', offset=
+000111d0: 2d34 2c20 6c65 6e67 7468 3d30 290d 0a20  -4, length=0).. 
+000111e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000111f0: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
+00011200: 2c20 2779 2720 2a20 3429 0d0a 2020 2020  , 'y' * 4)..    
+00011210: 2020 2020 6669 6e61 6c6c 793a 0d0a 2020      finally:..  
+00011220: 2020 2020 2020 2020 2020 6f73 2e72 656d            os.rem
+00011230: 6f76 6528 6c6f 6766 696c 6529 0d0a 0d0a  ove(logfile)....
+00011240: 2020 2020 6465 6620 7465 7374 5f72 6561      def test_rea
+00011250: 6450 726f 6365 7373 4c6f 6741 6c69 6173  dProcessLogAlias
+00011260: 6564 546f 5f72 6561 6450 726f 6365 7373  edTo_readProcess
+00011270: 5374 646f 7574 4c6f 6728 7365 6c66 293a  StdoutLog(self):
+00011280: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+00011290: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+000112a0: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
+000112b0: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
+000112c0: 6967 286f 7074 696f 6e73 2c20 2766 6f6f  ig(options, 'foo
+000112d0: 272c 2027 2f62 696e 2f66 6f6f 2729 0d0a  ', '/bin/foo')..
+000112e0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000112f0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+00011300: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+00011310: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
+00011320: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+00011330: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+00011340: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+00011350: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00011360: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00011370: 6c28 696e 7465 7266 6163 652e 7265 6164  l(interface.read
+00011380: 5072 6f63 6573 734c 6f67 2c0d 0a20 2020  ProcessLog,..   
+00011390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000113a0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
+000113b0: 7265 6164 5072 6f63 6573 7353 7464 6f75  readProcessStdou
+000113c0: 744c 6f67 290d 0a0d 0a20 2020 2064 6566  tLog)....    def
+000113d0: 2074 6573 745f 7265 6164 5072 6f63 6573   test_readProces
+000113e0: 7353 7464 6572 724c 6f67 5f75 6e72 6561  sStderrLog_unrea
+000113f0: 6461 626c 6528 7365 6c66 293a 0d0a 2020  dable(self):..  
+00011400: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00011410: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
+00011420: 7270 630d 0a20 2020 2020 2020 206f 7074  rpc..        opt
+00011430: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+00011440: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+00011450: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+00011460: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00011470: 7072 6f63 6573 7331 272c 2027 2f62 696e  process1', '/bin
+00011480: 2f70 726f 6365 7373 3127 2c20 7072 696f  /process1', prio
+00011490: 7269 7479 3d31 2c0d 0a20 2020 2020 2020  rity=1,..       
+000114a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000114b0: 2020 2020 2020 2020 7374 6465 7272 5f6c          stderr_l
+000114c0: 6f67 6669 6c65 3d27 2f74 6d70 2f70 726f  ogfile='/tmp/pro
+000114d0: 6365 7373 312e 6c6f 6727 290d 0a20 2020  cess1.log')..   
+000114e0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+000114f0: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
+00011500: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+00011510: 6f6e 732c 2027 7072 6f63 6573 7331 272c  ons, 'process1',
+00011520: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
+00011530: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00011540: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+00011550: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+00011560: 2020 2073 656c 662e 5f61 7373 6572 7452     self._assertR
+00011570: 5043 4572 726f 7228 786d 6c72 7063 2e46  PCError(xmlrpc.F
+00011580: 6175 6c74 732e 4e4f 5f46 494c 452c 0d0a  aults.NO_FILE,..
 00011590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115a0: 7374 646f 7574 5f6c 6f67 6669 6c65 3d27  stdout_logfile='
-000115b0: 2f74 6d70 2f70 726f 6365 7373 312e 6c6f  /tmp/process1.lo
-000115c0: 6727 290d 0a20 2020 2020 2020 2073 7570  g')..        sup
-000115d0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
-000115e0: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
-000115f0: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
-00011600: 6f27 2c20 7063 6f6e 6669 6729 0d0a 2020  o', pconfig)..  
-00011610: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-00011620: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-00011630: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-00011640: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
-00011650: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
-00011660: 632e 4661 756c 7473 2e42 4144 5f4e 414d  c.Faults.BAD_NAM
-00011670: 452c 0d0a 2020 2020 2020 2020 2020 2020  E,..            
-00011680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011690: 2069 6e74 6572 6661 6365 2e72 6561 6450   interface.readP
-000116a0: 726f 6365 7373 5374 6465 7272 4c6f 672c  rocessStderrLog,
-000116b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000116c0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-000116d0: 666f 6f3a 2a27 2c20 6f66 6673 6574 3d30  foo:*', offset=0
-000116e0: 2c20 6c65 6e67 7468 3d31 290d 0a0d 0a20  , length=1).... 
-000116f0: 2020 2064 6566 2074 6573 745f 7265 6164     def test_read
-00011700: 5072 6f63 6573 7353 7464 6572 724c 6f67  ProcessStderrLog
-00011710: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00011720: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
-00011730: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
-00011740: 2020 2070 636f 6e66 6967 203d 2044 756d     pconfig = Dum
-00011750: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00011760: 732c 2027 666f 6f27 2c20 272f 6269 6e2f  s, 'foo', '/bin/
-00011770: 666f 6f27 2c0d 0a20 2020 2020 2020 2020  foo',..         
-00011780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011790: 2020 2020 2020 7374 6465 7272 5f6c 6f67        stderr_log
-000117a0: 6669 6c65 3d6f 732e 7061 7468 2e6a 6f69  file=os.path.joi
-000117b0: 6e28 7465 6d70 6669 6c65 2e67 6574 7465  n(tempfile.gette
-000117c0: 6d70 6469 7228 292c 2027 7374 6465 7272  mpdir(), 'stderr
-000117d0: 2d72 6564 6972 6563 742e 6c6f 6727 2929  -redirect.log'))
-000117e0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-000117f0: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
-00011800: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
-00011810: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
-00011820: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
-00011830: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
-00011840: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
-00011850: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
-00011860: 2020 2070 726f 6365 7373 203d 2073 7570     process = sup
-00011870: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-00011880: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
-00011890: 726f 6365 7373 6573 5b27 666f 6f27 5d0d  rocesses['foo'].
-000118a0: 0a20 2020 2020 2020 206c 6f67 6669 6c65  .        logfile
-000118b0: 203d 2070 726f 6365 7373 2e63 6f6e 6669   = process.confi
-000118c0: 672e 7374 6465 7272 5f6c 6f67 6669 6c65  g.stderr_logfile
-000118d0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-000118e0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-000118f0: 206f 7065 6e28 6c6f 6766 696c 652c 2027   open(logfile, '
-00011900: 772b 2729 2061 7320 663a 0d0a 2020 2020  w+') as f:..    
-00011910: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-00011920: 6974 6528 2778 2720 2a20 3230 3438 290d  ite('x' * 2048).
-00011930: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011940: 2066 2e77 7269 7465 2827 7927 202a 2032   f.write('y' * 2
-00011950: 3034 3829 0d0a 2020 2020 2020 2020 2020  048)..          
-00011960: 2020 6461 7461 203d 2069 6e74 6572 6661    data = interfa
-00011970: 6365 2e72 6561 6450 726f 6365 7373 5374  ce.readProcessSt
-00011980: 6465 7272 4c6f 6728 2766 6f6f 272c 206f  derrLog('foo', o
-00011990: 6666 7365 743d 302c 206c 656e 6774 683d  ffset=0, length=
-000119a0: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-000119b0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000119c0: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-000119d0: 655f 7465 7874 2c20 2772 6561 6450 726f  e_text, 'readPro
-000119e0: 6365 7373 5374 6465 7272 4c6f 6727 290d  cessStderrLog').
-000119f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00011a00: 662e 6173 7365 7274 4571 7561 6c28 6461  f.assertEqual(da
-00011a10: 7461 2c20 2827 7827 202a 2032 3034 3829  ta, ('x' * 2048)
-00011a20: 202b 2028 2779 2720 2a20 3230 3438 2929   + ('y' * 2048))
-00011a30: 0d0a 2020 2020 2020 2020 2020 2020 6461  ..            da
-00011a40: 7461 203d 2069 6e74 6572 6661 6365 2e72  ta = interface.r
-00011a50: 6561 6450 726f 6365 7373 5374 6465 7272  eadProcessStderr
-00011a60: 4c6f 6728 2766 6f6f 272c 206f 6666 7365  Log('foo', offse
-00011a70: 743d 3230 3438 2c20 6c65 6e67 7468 3d30  t=2048, length=0
-00011a80: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00011a90: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00011aa0: 6461 7461 2c20 2779 2720 2a20 3230 3438  data, 'y' * 2048
-00011ab0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
-00011ac0: 6174 6120 3d20 696e 7465 7266 6163 652e  ata = interface.
-00011ad0: 7265 6164 5072 6f63 6573 7353 7464 6572  readProcessStder
-00011ae0: 724c 6f67 2827 666f 6f27 2c20 6f66 6673  rLog('foo', offs
-00011af0: 6574 3d30 2c20 6c65 6e67 7468 3d32 3034  et=0, length=204
-00011b00: 3829 0d0a 2020 2020 2020 2020 2020 2020  8)..            
-00011b10: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00011b20: 2864 6174 612c 2027 7827 202a 2032 3034  (data, 'x' * 204
-00011b30: 3829 0d0a 2020 2020 2020 2020 2020 2020  8)..            
-00011b40: 6461 7461 203d 2069 6e74 6572 6661 6365  data = interface
-00011b50: 2e72 6561 6450 726f 6365 7373 5374 6465  .readProcessStde
-00011b60: 7272 4c6f 6728 2766 6f6f 272c 206f 6666  rrLog('foo', off
-00011b70: 7365 743d 2d34 2c20 6c65 6e67 7468 3d30  set=-4, length=0
-00011b80: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00011b90: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00011ba0: 6461 7461 2c20 2779 2720 2a20 3429 0d0a  data, 'y' * 4)..
-00011bb0: 2020 2020 2020 2020 6669 6e61 6c6c 793a          finally:
-00011bc0: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00011bd0: 2e72 656d 6f76 6528 6c6f 6766 696c 6529  .remove(logfile)
-00011be0: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
-00011bf0: 5f74 6169 6c50 726f 6365 7373 5374 646f  _tailProcessStdo
-00011c00: 7574 4c6f 675f 6261 645f 6e61 6d65 2873  utLog_bad_name(s
-00011c10: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
-00011c20: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-00011c30: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-00011c40: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-00011c50: 6420 3d20 4475 6d6d 7953 7570 6572 7669  d = DummySupervi
-00011c60: 736f 7228 290d 0a20 2020 2020 2020 2069  sor()..        i
-00011c70: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00011c80: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00011c90: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
-00011ca0: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
-00011cb0: 726f 7228 786d 6c72 7063 2e46 6175 6c74  ror(xmlrpc.Fault
-00011cc0: 732e 4241 445f 4e41 4d45 2c0d 0a20 2020  s.BAD_NAME,..   
-00011cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ce0: 2020 2020 2020 2020 2020 696e 7465 7266            interf
-00011cf0: 6163 652e 7461 696c 5072 6f63 6573 7353  ace.tailProcessS
-00011d00: 7464 6f75 744c 6f67 2c20 2742 4144 5f4e  tdoutLog, 'BAD_N
-00011d10: 414d 4527 2c20 302c 2031 3029 0d0a 0d0a  AME', 0, 10)....
-00011d20: 2020 2020 6465 6620 7465 7374 5f74 6169      def test_tai
-00011d30: 6c50 726f 6365 7373 5374 646f 7574 4c6f  lProcessStdoutLo
-00011d40: 675f 6261 645f 6e61 6d65 5f6e 6f5f 7072  g_bad_name_no_pr
-00011d50: 6f63 6573 7328 7365 6c66 293a 0d0a 2020  ocess(self):..  
-00011d60: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-00011d70: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
-00011d80: 7270 630d 0a20 2020 2020 2020 206f 7074  rpc..        opt
-00011d90: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-00011da0: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
-00011db0: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
-00011dc0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00011dd0: 7072 6f63 6573 7331 272c 2027 2f62 696e  process1', '/bin
-00011de0: 2f70 726f 6365 7373 3127 2c20 7072 696f  /process1', prio
-00011df0: 7269 7479 3d31 2c0d 0a20 2020 2020 2020  rity=1,..       
-00011e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e10: 2020 2020 2020 2020 7374 646f 7574 5f6c          stdout_l
-00011e20: 6f67 6669 6c65 3d27 2f74 6d70 2f70 726f  ogfile='/tmp/pro
-00011e30: 6365 7373 312e 6c6f 6727 290d 0a20 2020  cess1.log')..   
-00011e40: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00011e50: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
-00011e60: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
-00011e70: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
-00011e80: 6669 6729 0d0a 2020 2020 2020 2020 696e  fig)..        in
-00011e90: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
-00011ea0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
-00011eb0: 6f72 6429 0d0a 2020 2020 2020 2020 7365  ord)..        se
-00011ec0: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00011ed0: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-00011ee0: 2e42 4144 5f4e 414d 452c 0d0a 2020 2020  .BAD_NAME,..    
-00011ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011f00: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
-00011f10: 6365 2e74 6169 6c50 726f 6365 7373 5374  ce.tailProcessSt
-00011f20: 646f 7574 4c6f 672c 2027 666f 6f3a 2a27  doutLog, 'foo:*'
-00011f30: 2c20 302c 2031 3029 0d0a 0d0a 2020 2020  , 0, 10)....    
-00011f40: 6465 6620 7465 7374 5f74 6169 6c50 726f  def test_tailPro
-00011f50: 6365 7373 5374 646f 7574 4c6f 675f 616c  cessStdoutLog_al
-00011f60: 6c28 7365 6c66 293a 0d0a 2020 2020 2020  l(self):..      
-00011f70: 2020 2320 7465 7374 2065 6e74 6972 6520    # test entire 
-00011f80: 6c6f 6720 6973 2072 6574 7572 6e65 6420  log is returned 
-00011f90: 7768 656e 206f 6666 7365 743d 3d30 2061  when offset==0 a
-00011fa0: 6e64 206c 6f67 7369 7a65 203c 206c 656e  nd logsize < len
-00011fb0: 6774 680d 0a20 2020 2020 2020 2066 726f  gth..        fro
-00011fc0: 6d20 7375 7065 7276 6973 6f72 2e63 6f6d  m supervisor.com
-00011fd0: 7061 7420 696d 706f 7274 206c 6574 7465  pat import lette
-00011fe0: 7273 0d0a 2020 2020 2020 2020 6f70 7469  rs..        opti
-00011ff0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-00012000: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-00012010: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
-00012020: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
-00012030: 6f6f 272c 2027 2f62 696e 2f66 6f6f 272c  oo', '/bin/foo',
-00012040: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00012050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012060: 2073 7464 6f75 745f 6c6f 6766 696c 653d   stdout_logfile=
-00012070: 5465 6d70 4669 6c65 4f70 656e 2e6d 616b  TempFileOpen.mak
-00012080: 655f 7061 7468 2827 7374 646f 7574 2d6c  e_path('stdout-l
-00012090: 6f67 6669 6c65 2d34 2e6c 6f67 2729 290d  ogfile-4.log')).
-000120a0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-000120b0: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-000120c0: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-000120d0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-000120e0: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
-000120f0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
-00012100: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
-00012110: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
-00012120: 2020 7072 6f63 6573 7320 3d20 7375 7065    process = supe
-00012130: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
-00012140: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
-00012150: 6f63 6573 7365 735b 2766 6f6f 275d 0d0a  ocesses['foo']..
-00012160: 2020 2020 2020 2020 6c6f 6766 696c 6520          logfile 
-00012170: 3d20 7072 6f63 6573 732e 636f 6e66 6967  = process.config
-00012180: 2e73 7464 6f75 745f 6c6f 6766 696c 650d  .stdout_logfile.
-00012190: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-000121a0: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-000121b0: 6f70 656e 286c 6f67 6669 6c65 2c20 2777  open(logfile, 'w
-000121c0: 2b27 2920 6173 2066 3a0d 0a20 2020 2020  +') as f:..     
-000121d0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
-000121e0: 7465 286c 6574 7465 7273 290d 0a0d 0a20  te(letters).... 
-000121f0: 2020 2020 2020 2020 2020 2064 6174 612c             data,
-00012200: 206f 6666 7365 742c 206f 7665 7266 6c6f   offset, overflo
-00012210: 7720 3d20 696e 7465 7266 6163 652e 7461  w = interface.ta
-00012220: 696c 5072 6f63 6573 7353 7464 6f75 744c  ilProcessStdoutL
-00012230: 6f67 2827 666f 6f27 2c0d 0a20 2020 2020  og('foo',..     
-00012240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012270: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00012280: 6666 7365 743d 302c 0d0a 2020 2020 2020  ffset=0,..      
-00012290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000122c0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
-000122d0: 6e67 7468 3d6c 656e 286c 6574 7465 7273  ngth=len(letters
-000122e0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000122f0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00012300: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-00012310: 655f 7465 7874 2c20 2774 6169 6c50 726f  e_text, 'tailPro
-00012320: 6365 7373 5374 646f 7574 4c6f 6727 290d  cessStdoutLog').
-00012330: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00012340: 662e 6173 7365 7274 4571 7561 6c28 6f76  f.assertEqual(ov
-00012350: 6572 666c 6f77 2c20 4661 6c73 6529 0d0a  erflow, False)..
-00012360: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00012370: 2e61 7373 6572 7445 7175 616c 286f 6666  .assertEqual(off
-00012380: 7365 742c 206c 656e 286c 6574 7465 7273  set, len(letters
-00012390: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000123a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000123b0: 2864 6174 612c 206c 6574 7465 7273 290d  (data, letters).
-000123c0: 0a20 2020 2020 2020 2066 696e 616c 6c79  .        finally
-000123d0: 3a0d 0a20 2020 2020 2020 2020 2020 206f  :..            o
-000123e0: 732e 7265 6d6f 7665 286c 6f67 6669 6c65  s.remove(logfile
-000123f0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00012400: 745f 7461 696c 5072 6f63 6573 7353 7464  t_tailProcessStd
-00012410: 6f75 744c 6f67 5f6e 6f6e 6528 7365 6c66  outLog_none(self
-00012420: 293a 0d0a 2020 2020 2020 2020 2320 7465  ):..        # te
-00012430: 7374 206e 6f74 6869 6e67 2069 7320 7265  st nothing is re
-00012440: 7475 726e 6564 2077 6865 6e20 6f66 6673  turned when offs
-00012450: 6574 203c 3d20 6c6f 6773 697a 650d 0a20  et <= logsize.. 
-00012460: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00012470: 7276 6973 6f72 2e63 6f6d 7061 7420 696d  rvisor.compat im
-00012480: 706f 7274 206c 6574 7465 7273 0d0a 2020  port letters..  
-00012490: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-000124a0: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-000124b0: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-000124c0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-000124d0: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
-000124e0: 2f62 696e 2f66 6f6f 272c 0d0a 2020 2020  /bin/foo',..    
-000124f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012500: 2020 2020 2020 2020 2020 2073 7464 6f75             stdou
-00012510: 745f 6c6f 6766 696c 653d 5465 6d70 4669  t_logfile=TempFi
-00012520: 6c65 4f70 656e 2e6d 616b 655f 7061 7468  leOpen.make_path
-00012530: 2827 7374 646f 7574 2d6c 6f67 6669 6c65  ('stdout-logfile
-00012540: 2d36 2e6c 6f67 2729 290d 0a20 2020 2020  -6.log'))..     
-00012550: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00012560: 2050 6f70 756c 6174 6564 4475 6d6d 7953   PopulatedDummyS
-00012570: 7570 6572 7669 736f 7228 6f70 7469 6f6e  upervisor(option
-00012580: 732c 2027 666f 6f27 2c20 7063 6f6e 6669  s, 'foo', pconfi
-00012590: 6729 0d0a 2020 2020 2020 2020 696e 7465  g)..        inte
-000125a0: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-000125b0: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-000125c0: 6429 0d0a 2020 2020 2020 2020 7072 6f63  d)..        proc
-000125d0: 6573 7320 3d20 7375 7065 7276 6973 6f72  ess = supervisor
-000125e0: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
-000125f0: 5b27 666f 6f27 5d2e 7072 6f63 6573 7365  ['foo'].processe
-00012600: 735b 2766 6f6f 275d 0d0a 2020 2020 2020  s['foo']..      
-00012610: 2020 6c6f 6766 696c 6520 3d20 7072 6f63    logfile = proc
-00012620: 6573 732e 636f 6e66 6967 2e73 7464 6f75  ess.config.stdou
-00012630: 745f 6c6f 6766 696c 650d 0a20 2020 2020  t_logfile..     
-00012640: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00012650: 2020 2020 2077 6974 6820 6f70 656e 286c       with open(l
-00012660: 6f67 6669 6c65 2c20 2777 2b27 2920 6173  ogfile, 'w+') as
-00012670: 2066 3a0d 0a20 2020 2020 2020 2020 2020   f:..           
-00012680: 2020 2020 2066 2e77 7269 7465 286c 6574       f.write(let
-00012690: 7465 7273 290d 0a0d 0a20 2020 2020 2020  ters)....       
-000126a0: 2020 2020 2023 206f 6666 7365 743d 3d6c       # offset==l
-000126b0: 6f67 7369 7a65 0d0a 2020 2020 2020 2020  ogsize..        
-000126c0: 2020 2020 6461 7461 2c20 6f66 6673 6574      data, offset
-000126d0: 2c20 6f76 6572 666c 6f77 203d 2069 6e74  , overflow = int
-000126e0: 6572 6661 6365 2e74 6169 6c50 726f 6365  erface.tailProce
-000126f0: 7373 5374 646f 7574 4c6f 6728 2766 6f6f  ssStdoutLog('foo
-00012700: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00012710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012740: 2020 2020 2020 2020 6f66 6673 6574 3d6c          offset=l
-00012750: 656e 286c 6574 7465 7273 292c 0d0a 2020  en(letters),..  
-00012760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127a0: 2020 6c65 6e67 7468 3d31 3030 290d 0a20    length=100).. 
-000127b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000127c0: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
-000127d0: 7266 6163 652e 7570 6461 7465 5f74 6578  rface.update_tex
-000127e0: 742c 2027 7461 696c 5072 6f63 6573 7353  t, 'tailProcessS
-000127f0: 7464 6f75 744c 6f67 2729 0d0a 2020 2020  tdoutLog')..    
-00012800: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00012810: 6572 7445 7175 616c 286f 7665 7266 6c6f  ertEqual(overflo
-00012820: 772c 2046 616c 7365 290d 0a20 2020 2020  w, False)..     
-00012830: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00012840: 7274 4571 7561 6c28 6f66 6673 6574 2c20  rtEqual(offset, 
-00012850: 6c65 6e28 6c65 7474 6572 7329 290d 0a20  len(letters)).. 
-00012860: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012870: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
-00012880: 2c20 2727 290d 0a0d 0a20 2020 2020 2020  , '')....       
-00012890: 2020 2020 2023 206f 6666 7365 7420 3e20       # offset > 
-000128a0: 6c6f 6773 697a 650d 0a20 2020 2020 2020  logsize..       
-000128b0: 2020 2020 2064 6174 612c 206f 6666 7365       data, offse
-000128c0: 742c 206f 7665 7266 6c6f 7720 3d20 696e  t, overflow = in
-000128d0: 7465 7266 6163 652e 7461 696c 5072 6f63  terface.tailProc
-000128e0: 6573 7353 7464 6f75 744c 6f67 2827 666f  essStdoutLog('fo
-000128f0: 6f27 2c0d 0a20 2020 2020 2020 2020 2020  o',..           
-00012900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012930: 2020 2020 2020 2020 206f 6666 7365 743d           offset=
-00012940: 6c65 6e28 6c65 7474 6572 7329 202b 2035  len(letters) + 5
-00012950: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00012960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012990: 2020 2020 2020 206c 656e 6774 683d 3130         length=10
-000129a0: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
-000129b0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000129c0: 2869 6e74 6572 6661 6365 2e75 7064 6174  (interface.updat
-000129d0: 655f 7465 7874 2c20 2774 6169 6c50 726f  e_text, 'tailPro
-000129e0: 6365 7373 5374 646f 7574 4c6f 6727 290d  cessStdoutLog').
-000129f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00012a00: 662e 6173 7365 7274 4571 7561 6c28 6f76  f.assertEqual(ov
-00012a10: 6572 666c 6f77 2c20 4661 6c73 6529 0d0a  erflow, False)..
-00012a20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00012a30: 2e61 7373 6572 7445 7175 616c 286f 6666  .assertEqual(off
-00012a40: 7365 742c 206c 656e 286c 6574 7465 7273  set, len(letters
-00012a50: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-00012a60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00012a70: 2864 6174 612c 2027 2729 0d0a 2020 2020  (data, '')..    
-00012a80: 2020 2020 6669 6e61 6c6c 793a 0d0a 2020      finally:..  
-00012a90: 2020 2020 2020 2020 2020 6f73 2e72 656d            os.rem
-00012aa0: 6f76 6528 6c6f 6766 696c 6529 0d0a 0d0a  ove(logfile)....
-00012ab0: 2020 2020 6465 6620 7465 7374 5f74 6169      def test_tai
-00012ac0: 6c50 726f 6365 7373 5374 646f 7574 4c6f  lProcessStdoutLo
-00012ad0: 675f 6f76 6572 666c 6f77 2873 656c 6629  g_overflow(self)
-00012ae0: 3a0d 0a20 2020 2020 2020 2023 2074 6573  :..        # tes
-00012af0: 7420 6275 6666 6572 206f 7665 7266 6c6f  t buffer overflo
-00012b00: 7720 6f63 6375 7273 2077 6865 6e20 6c6f  w occurs when lo
-00012b10: 6773 697a 6520 3e20 6f66 6673 6574 2b6c  gsize > offset+l
-00012b20: 656e 6774 680d 0a20 2020 2020 2020 2066  ength..        f
-00012b30: 726f 6d20 7375 7065 7276 6973 6f72 2e63  rom supervisor.c
-00012b40: 6f6d 7061 7420 696d 706f 7274 206c 6574  ompat import let
-00012b50: 7465 7273 0d0a 2020 2020 2020 2020 6f70  ters..        op
-00012b60: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-00012b70: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-00012b80: 7063 6f6e 6669 6720 3d20 4475 6d6d 7950  pconfig = DummyP
-00012b90: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
-00012ba0: 2766 6f6f 272c 2027 2f62 696e 2f66 6f6f  'foo', '/bin/foo
-00012bb0: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00012bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012bd0: 2020 2073 7464 6f75 745f 6c6f 6766 696c     stdout_logfil
-00012be0: 653d 5465 6d70 4669 6c65 4f70 656e 2e6d  e=TempFileOpen.m
-00012bf0: 616b 655f 7061 7468 2827 7374 646f 7574  ake_path('stdout
-00012c00: 2d6c 6f67 6669 6c65 2d37 2e6c 6f67 2729  -logfile-7.log')
-00012c10: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
-00012c20: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
-00012c30: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
-00012c40: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
-00012c50: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
-00012c60: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00012c70: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
-00012c80: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
-00012c90: 2020 2020 7072 6f63 6573 7320 3d20 7375      process = su
-00012ca0: 7065 7276 6973 6f72 642e 7072 6f63 6573  pervisord.proces
-00012cb0: 735f 6772 6f75 7073 5b27 666f 6f27 5d2e  s_groups['foo'].
-00012cc0: 7072 6f63 6573 7365 735b 2766 6f6f 275d  processes['foo']
-00012cd0: 0d0a 2020 2020 2020 2020 6c6f 6766 696c  ..        logfil
-00012ce0: 6520 3d20 7072 6f63 6573 732e 636f 6e66  e = process.conf
-00012cf0: 6967 2e73 7464 6f75 745f 6c6f 6766 696c  ig.stdout_logfil
-00012d00: 650d 0a20 2020 2020 2020 2074 7279 3a0d  e..        try:.
-00012d10: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
-00012d20: 6820 6f70 656e 286c 6f67 6669 6c65 2c20  h open(logfile, 
-00012d30: 2777 2b27 2920 6173 2066 3a0d 0a20 2020  'w+') as f:..   
-00012d40: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
-00012d50: 7269 7465 286c 6574 7465 7273 290d 0a0d  rite(letters)...
-00012d60: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-00012d70: 612c 206f 6666 7365 742c 206f 7665 7266  a, offset, overf
-00012d80: 6c6f 7720 3d20 696e 7465 7266 6163 652e  low = interface.
-00012d90: 7461 696c 5072 6f63 6573 7353 7464 6f75  tailProcessStdou
-00012da0: 744c 6f67 2827 666f 6f27 2c0d 0a20 2020  tLog('foo',..   
-00012db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012df0: 206f 6666 7365 743d 302c 206c 656e 6774   offset=0, lengt
-00012e00: 683d 3529 0d0a 2020 2020 2020 2020 2020  h=5)..          
+000115a0: 2020 2020 2020 2020 2020 2020 2069 6e74               int
+000115b0: 6572 6661 6365 2e72 6561 6450 726f 6365  erface.readProce
+000115c0: 7373 5374 6465 7272 4c6f 672c 0d0a 2020  ssStderrLog,..  
+000115d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000115e0: 2020 2020 2020 2020 2020 2027 7072 6f63             'proc
+000115f0: 6573 7331 272c 206f 6666 7365 743d 302c  ess1', offset=0,
+00011600: 206c 656e 6774 683d 3129 0d0a 0d0a 2020   length=1)....  
+00011610: 2020 6465 6620 7465 7374 5f72 6561 6450    def test_readP
+00011620: 726f 6365 7373 5374 6465 7272 4c6f 675f  rocessStderrLog_
+00011630: 6261 6461 7267 7328 7365 6c66 293a 0d0a  badargs(self):..
+00011640: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
+00011650: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
+00011660: 6d6c 7270 630d 0a20 2020 2020 2020 206f  mlrpc..        o
+00011670: 7074 696f 6e73 203d 2044 756d 6d79 4f70  ptions = DummyOp
+00011680: 7469 6f6e 7328 290d 0a20 2020 2020 2020  tions()..       
+00011690: 2070 636f 6e66 6967 203d 2044 756d 6d79   pconfig = Dummy
+000116a0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+000116b0: 2027 7072 6f63 6573 7331 272c 2027 2f62   'process1', '/b
+000116c0: 696e 2f70 726f 6365 7373 3127 2c20 7072  in/process1', pr
+000116d0: 696f 7269 7479 3d31 2c0d 0a20 2020 2020  iority=1,..     
+000116e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116f0: 2020 2020 2020 2020 2020 7374 6465 7272            stderr
+00011700: 5f6c 6f67 6669 6c65 3d54 656d 7046 696c  _logfile=TempFil
+00011710: 654f 7065 6e2e 6d61 6b65 5f70 6174 6828  eOpen.make_path(
+00011720: 2770 726f 6365 7373 312e 6c6f 6727 2929  'process1.log'))
+00011730: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+00011740: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
+00011750: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
+00011760: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+00011770: 7373 3127 2c20 7063 6f6e 6669 6729 0d0a  ss1', pconfig)..
+00011780: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00011790: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+000117a0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+000117b0: 2020 2020 2020 2020 7072 6f63 6573 7320          process 
+000117c0: 3d20 7375 7065 7276 6973 6f72 642e 7072  = supervisord.pr
+000117d0: 6f63 6573 735f 6772 6f75 7073 5b27 7072  ocess_groups['pr
+000117e0: 6f63 6573 7331 275d 2e70 726f 6365 7373  ocess1'].process
+000117f0: 6573 5b27 7072 6f63 6573 7331 275d 0d0a  es['process1']..
+00011800: 2020 2020 2020 2020 6c6f 6766 696c 6520          logfile 
+00011810: 3d20 7072 6f63 6573 732e 636f 6e66 6967  = process.config
+00011820: 2e73 7464 6572 725f 6c6f 6766 696c 650d  .stderr_logfile.
+00011830: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+00011840: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
+00011850: 6820 6f70 656e 286c 6f67 6669 6c65 2c20  h open(logfile, 
+00011860: 2777 2b27 2920 6173 2066 3a0d 0a20 2020  'w+') as f:..   
+00011870: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+00011880: 7269 7465 2827 7827 202a 2032 3034 3829  rite('x' * 2048)
+00011890: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+000118a0: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
+000118b0: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
+000118c0: 2e42 4144 5f41 5247 554d 454e 5453 2c0d  .BAD_ARGUMENTS,.
+000118d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000118e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000118f0: 2020 696e 7465 7266 6163 652e 7265 6164    interface.read
+00011900: 5072 6f63 6573 7353 7464 6572 724c 6f67  ProcessStderrLog
+00011910: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00011920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011930: 2020 2020 2770 726f 6365 7373 3127 2c20      'process1', 
+00011940: 6f66 6673 6574 3d2d 312c 206c 656e 6774  offset=-1, lengt
+00011950: 683d 3129 0d0a 2020 2020 2020 2020 2020  h=1)..          
+00011960: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+00011970: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
+00011980: 756c 7473 2e42 4144 5f41 5247 554d 454e  ults.BAD_ARGUMEN
+00011990: 5453 2c0d 0a20 2020 2020 2020 2020 2020  TS,..           
+000119a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119b0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
+000119c0: 7265 6164 5072 6f63 6573 7353 7464 6572  readProcessStder
+000119d0: 724c 6f67 2c20 2770 726f 6365 7373 3127  rLog, 'process1'
+000119e0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a00: 2020 2020 6f66 6673 6574 3d2d 312c 206c      offset=-1, l
+00011a10: 656e 6774 683d 2d31 290d 0a20 2020 2020  ength=-1)..     
+00011a20: 2020 2066 696e 616c 6c79 3a0d 0a20 2020     finally:..   
+00011a30: 2020 2020 2020 2020 206f 732e 7265 6d6f           os.remo
+00011a40: 7665 286c 6f67 6669 6c65 290d 0a0d 0a20  ve(logfile).... 
+00011a50: 2020 2064 6566 2074 6573 745f 7265 6164     def test_read
+00011a60: 5072 6f63 6573 7353 7464 6572 724c 6f67  ProcessStderrLog
+00011a70: 5f62 6164 5f6e 616d 655f 6e6f 5f70 726f  _bad_name_no_pro
+00011a80: 6365 7373 2873 656c 6629 3a0d 0a20 2020  cess(self):..   
+00011a90: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
+00011aa0: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
+00011ab0: 7063 0d0a 2020 2020 2020 2020 6f70 7469  pc..        opti
+00011ac0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+00011ad0: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
+00011ae0: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
+00011af0: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+00011b00: 726f 6365 7373 3127 2c20 272f 6269 6e2f  rocess1', '/bin/
+00011b10: 7072 6f63 6573 7331 272c 2070 7269 6f72  process1', prior
+00011b20: 6974 793d 312c 0d0a 2020 2020 2020 2020  ity=1,..        
+00011b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b40: 2020 2020 2020 2073 7464 6f75 745f 6c6f         stdout_lo
+00011b50: 6766 696c 653d 272f 746d 702f 7072 6f63  gfile='/tmp/proc
+00011b60: 6573 7331 2e6c 6f67 2729 0d0a 2020 2020  ess1.log')..    
+00011b70: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00011b80: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+00011b90: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00011ba0: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
+00011bb0: 6967 290d 0a20 2020 2020 2020 2069 6e74  ig)..        int
+00011bc0: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+00011bd0: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+00011be0: 7264 290d 0a20 2020 2020 2020 2073 656c  rd)..        sel
+00011bf0: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00011c00: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+00011c10: 4241 445f 4e41 4d45 2c0d 0a20 2020 2020  BAD_NAME,..     
+00011c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c30: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00011c40: 652e 7265 6164 5072 6f63 6573 7353 7464  e.readProcessStd
+00011c50: 6572 724c 6f67 2c0d 0a20 2020 2020 2020  errLog,..       
+00011c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c70: 2020 2020 2020 2766 6f6f 3a2a 272c 206f        'foo:*', o
+00011c80: 6666 7365 743d 302c 206c 656e 6774 683d  ffset=0, length=
+00011c90: 3129 0d0a 0d0a 2020 2020 6465 6620 7465  1)....    def te
+00011ca0: 7374 5f72 6561 6450 726f 6365 7373 5374  st_readProcessSt
+00011cb0: 6465 7272 4c6f 6728 7365 6c66 293a 0d0a  derrLog(self):..
+00011cc0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
+00011cd0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
+00011ce0: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
+00011cf0: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
+00011d00: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+00011d10: 2027 2f62 696e 2f66 6f6f 272c 0d0a 2020   '/bin/foo',..  
+00011d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d30: 2020 2020 2020 2020 2020 2020 2073 7464               std
+00011d40: 6572 725f 6c6f 6766 696c 653d 6f73 2e70  err_logfile=os.p
+00011d50: 6174 682e 6a6f 696e 2874 656d 7066 696c  ath.join(tempfil
+00011d60: 652e 6765 7474 656d 7064 6972 2829 2c20  e.gettempdir(), 
+00011d70: 2773 7464 6572 722d 7265 6469 7265 6374  'stderr-redirect
+00011d80: 2e6c 6f67 2729 290d 0a20 2020 2020 2020  .log'))..       
+00011d90: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
+00011da0: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
+00011db0: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
+00011dc0: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
+00011dd0: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
+00011de0: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
+00011df0: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
+00011e00: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+00011e10: 7320 3d20 7375 7065 7276 6973 6f72 642e  s = supervisord.
+00011e20: 7072 6f63 6573 735f 6772 6f75 7073 5b27  process_groups['
+00011e30: 666f 6f27 5d2e 7072 6f63 6573 7365 735b  foo'].processes[
+00011e40: 2766 6f6f 275d 0d0a 2020 2020 2020 2020  'foo']..        
+00011e50: 6c6f 6766 696c 6520 3d20 7072 6f63 6573  logfile = proces
+00011e60: 732e 636f 6e66 6967 2e73 7464 6572 725f  s.config.stderr_
+00011e70: 6c6f 6766 696c 650d 0a20 2020 2020 2020  logfile..       
+00011e80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00011e90: 2020 2077 6974 6820 6f70 656e 286c 6f67     with open(log
+00011ea0: 6669 6c65 2c20 2777 2b27 2920 6173 2066  file, 'w+') as f
+00011eb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00011ec0: 2020 2066 2e77 7269 7465 2827 7827 202a     f.write('x' *
+00011ed0: 2032 3034 3829 0d0a 2020 2020 2020 2020   2048)..        
+00011ee0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+00011ef0: 2779 2720 2a20 3230 3438 290d 0a20 2020  'y' * 2048)..   
+00011f00: 2020 2020 2020 2020 2064 6174 6120 3d20           data = 
+00011f10: 696e 7465 7266 6163 652e 7265 6164 5072  interface.readPr
+00011f20: 6f63 6573 7353 7464 6572 724c 6f67 2827  ocessStderrLog('
+00011f30: 666f 6f27 2c20 6f66 6673 6574 3d30 2c20  foo', offset=0, 
+00011f40: 6c65 6e67 7468 3d30 290d 0a20 2020 2020  length=0)..     
+00011f50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00011f60: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+00011f70: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+00011f80: 7265 6164 5072 6f63 6573 7353 7464 6572  readProcessStder
+00011f90: 724c 6f67 2729 0d0a 2020 2020 2020 2020  rLog')..        
+00011fa0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00011fb0: 7175 616c 2864 6174 612c 2028 2778 2720  qual(data, ('x' 
+00011fc0: 2a20 3230 3438 2920 2b20 2827 7927 202a  * 2048) + ('y' *
+00011fd0: 2032 3034 3829 290d 0a20 2020 2020 2020   2048))..       
+00011fe0: 2020 2020 2064 6174 6120 3d20 696e 7465       data = inte
+00011ff0: 7266 6163 652e 7265 6164 5072 6f63 6573  rface.readProces
+00012000: 7353 7464 6572 724c 6f67 2827 666f 6f27  sStderrLog('foo'
+00012010: 2c20 6f66 6673 6574 3d32 3034 382c 206c  , offset=2048, l
+00012020: 656e 6774 683d 3029 0d0a 2020 2020 2020  ength=0)..      
+00012030: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00012040: 7445 7175 616c 2864 6174 612c 2027 7927  tEqual(data, 'y'
+00012050: 202a 2032 3034 3829 0d0a 2020 2020 2020   * 2048)..      
+00012060: 2020 2020 2020 6461 7461 203d 2069 6e74        data = int
+00012070: 6572 6661 6365 2e72 6561 6450 726f 6365  erface.readProce
+00012080: 7373 5374 6465 7272 4c6f 6728 2766 6f6f  ssStderrLog('foo
+00012090: 272c 206f 6666 7365 743d 302c 206c 656e  ', offset=0, len
+000120a0: 6774 683d 3230 3438 290d 0a20 2020 2020  gth=2048)..     
+000120b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000120c0: 7274 4571 7561 6c28 6461 7461 2c20 2778  rtEqual(data, 'x
+000120d0: 2720 2a20 3230 3438 290d 0a20 2020 2020  ' * 2048)..     
+000120e0: 2020 2020 2020 2064 6174 6120 3d20 696e         data = in
+000120f0: 7465 7266 6163 652e 7265 6164 5072 6f63  terface.readProc
+00012100: 6573 7353 7464 6572 724c 6f67 2827 666f  essStderrLog('fo
+00012110: 6f27 2c20 6f66 6673 6574 3d2d 342c 206c  o', offset=-4, l
+00012120: 656e 6774 683d 3029 0d0a 2020 2020 2020  ength=0)..      
+00012130: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00012140: 7445 7175 616c 2864 6174 612c 2027 7927  tEqual(data, 'y'
+00012150: 202a 2034 290d 0a20 2020 2020 2020 2066   * 4)..        f
+00012160: 696e 616c 6c79 3a0d 0a20 2020 2020 2020  inally:..       
+00012170: 2020 2020 206f 732e 7265 6d6f 7665 286c       os.remove(l
+00012180: 6f67 6669 6c65 290d 0a0d 0a20 2020 2064  ogfile)....    d
+00012190: 6566 2074 6573 745f 7461 696c 5072 6f63  ef test_tailProc
+000121a0: 6573 7353 7464 6f75 744c 6f67 5f62 6164  essStdoutLog_bad
+000121b0: 5f6e 616d 6528 7365 6c66 293a 0d0a 2020  _name(self):..  
+000121c0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+000121d0: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
+000121e0: 7270 630d 0a20 2020 2020 2020 2073 7570  rpc..        sup
+000121f0: 6572 7669 736f 7264 203d 2044 756d 6d79  ervisord = Dummy
+00012200: 5375 7065 7276 6973 6f72 2829 0d0a 2020  Supervisor()..  
+00012210: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00012220: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00012230: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+00012240: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
+00012250: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
+00012260: 632e 4661 756c 7473 2e42 4144 5f4e 414d  c.Faults.BAD_NAM
+00012270: 452c 0d0a 2020 2020 2020 2020 2020 2020  E,..            
+00012280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012290: 2069 6e74 6572 6661 6365 2e74 6169 6c50   interface.tailP
+000122a0: 726f 6365 7373 5374 646f 7574 4c6f 672c  rocessStdoutLog,
+000122b0: 2027 4241 445f 4e41 4d45 272c 2030 2c20   'BAD_NAME', 0, 
+000122c0: 3130 290d 0a0d 0a20 2020 2064 6566 2074  10)....    def t
+000122d0: 6573 745f 7461 696c 5072 6f63 6573 7353  est_tailProcessS
+000122e0: 7464 6f75 744c 6f67 5f62 6164 5f6e 616d  tdoutLog_bad_nam
+000122f0: 655f 6e6f 5f70 726f 6365 7373 2873 656c  e_no_process(sel
+00012300: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+00012310: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+00012320: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
+00012330: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
+00012340: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
+00012350: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
+00012360: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
+00012370: 696f 6e73 2c20 2770 726f 6365 7373 3127  ions, 'process1'
+00012380: 2c20 272f 6269 6e2f 7072 6f63 6573 7331  , '/bin/process1
+00012390: 272c 2070 7269 6f72 6974 793d 312c 0d0a  ', priority=1,..
+000123a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000123b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000123c0: 7464 6f75 745f 6c6f 6766 696c 653d 272f  tdout_logfile='/
+000123d0: 746d 702f 7072 6f63 6573 7331 2e6c 6f67  tmp/process1.log
+000123e0: 2729 0d0a 2020 2020 2020 2020 7375 7065  ')..        supe
+000123f0: 7276 6973 6f72 6420 3d20 506f 7075 6c61  rvisord = Popula
+00012400: 7465 6444 756d 6d79 5375 7065 7276 6973  tedDummySupervis
+00012410: 6f72 286f 7074 696f 6e73 2c20 2766 6f6f  or(options, 'foo
+00012420: 272c 2070 636f 6e66 6967 290d 0a20 2020  ', pconfig)..   
+00012430: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00012440: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
+00012450: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
+00012460: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
+00012470: 7452 5043 4572 726f 7228 786d 6c72 7063  tRPCError(xmlrpc
+00012480: 2e46 6175 6c74 732e 4241 445f 4e41 4d45  .Faults.BAD_NAME
+00012490: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000124a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000124b0: 696e 7465 7266 6163 652e 7461 696c 5072  interface.tailPr
+000124c0: 6f63 6573 7353 7464 6f75 744c 6f67 2c20  ocessStdoutLog, 
+000124d0: 2766 6f6f 3a2a 272c 2030 2c20 3130 290d  'foo:*', 0, 10).
+000124e0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+000124f0: 7461 696c 5072 6f63 6573 7353 7464 6f75  tailProcessStdou
+00012500: 744c 6f67 5f61 6c6c 2873 656c 6629 3a0d  tLog_all(self):.
+00012510: 0a20 2020 2020 2020 2023 2074 6573 7420  .        # test 
+00012520: 656e 7469 7265 206c 6f67 2069 7320 7265  entire log is re
+00012530: 7475 726e 6564 2077 6865 6e20 6f66 6673  turned when offs
+00012540: 6574 3d3d 3020 616e 6420 6c6f 6773 697a  et==0 and logsiz
+00012550: 6520 3c20 6c65 6e67 7468 0d0a 2020 2020  e < length..    
+00012560: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
+00012570: 736f 722e 636f 6d70 6174 2069 6d70 6f72  sor.compat impor
+00012580: 7420 6c65 7474 6572 730d 0a20 2020 2020  t letters..     
+00012590: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+000125a0: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+000125b0: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
+000125c0: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+000125d0: 6f6e 732c 2027 666f 6f27 2c20 272f 6269  ons, 'foo', '/bi
+000125e0: 6e2f 666f 6f27 2c0d 0a20 2020 2020 2020  n/foo',..       
+000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012600: 2020 2020 2020 2020 7374 646f 7574 5f6c          stdout_l
+00012610: 6f67 6669 6c65 3d54 656d 7046 696c 654f  ogfile=TempFileO
+00012620: 7065 6e2e 6d61 6b65 5f70 6174 6828 2773  pen.make_path('s
+00012630: 7464 6f75 742d 6c6f 6766 696c 652d 342e  tdout-logfile-4.
+00012640: 6c6f 6727 2929 0d0a 2020 2020 2020 2020  log'))..        
+00012650: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
+00012660: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
+00012670: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+00012680: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
+00012690: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
+000126a0: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
+000126b0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
+000126c0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+000126d0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
+000126e0: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
+000126f0: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
+00012700: 666f 6f27 5d0d 0a20 2020 2020 2020 206c  foo']..        l
+00012710: 6f67 6669 6c65 203d 2070 726f 6365 7373  ogfile = process
+00012720: 2e63 6f6e 6669 672e 7374 646f 7574 5f6c  .config.stdout_l
+00012730: 6f67 6669 6c65 0d0a 2020 2020 2020 2020  ogfile..        
+00012740: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00012750: 2020 7769 7468 206f 7065 6e28 6c6f 6766    with open(logf
+00012760: 696c 652c 2027 772b 2729 2061 7320 663a  ile, 'w+') as f:
+00012770: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012780: 2020 662e 7772 6974 6528 6c65 7474 6572    f.write(letter
+00012790: 7329 0d0a 0d0a 2020 2020 2020 2020 2020  s)....          
+000127a0: 2020 6461 7461 2c20 6f66 6673 6574 2c20    data, offset, 
+000127b0: 6f76 6572 666c 6f77 203d 2069 6e74 6572  overflow = inter
+000127c0: 6661 6365 2e74 6169 6c50 726f 6365 7373  face.tailProcess
+000127d0: 5374 646f 7574 4c6f 6728 2766 6f6f 272c  StdoutLog('foo',
+000127e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000127f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012820: 2020 2020 2020 6f66 6673 6574 3d30 2c0d        offset=0,.
+00012830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012870: 2020 2020 206c 656e 6774 683d 6c65 6e28       length=len(
+00012880: 6c65 7474 6572 7329 290d 0a20 2020 2020  letters))..     
+00012890: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000128a0: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+000128b0: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+000128c0: 7461 696c 5072 6f63 6573 7353 7464 6f75  tailProcessStdou
+000128d0: 744c 6f67 2729 0d0a 2020 2020 2020 2020  tLog')..        
+000128e0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000128f0: 7175 616c 286f 7665 7266 6c6f 772c 2046  qual(overflow, F
+00012900: 616c 7365 290d 0a20 2020 2020 2020 2020  alse)..         
+00012910: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00012920: 7561 6c28 6f66 6673 6574 2c20 6c65 6e28  ual(offset, len(
+00012930: 6c65 7474 6572 7329 290d 0a20 2020 2020  letters))..     
+00012940: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00012950: 7274 4571 7561 6c28 6461 7461 2c20 6c65  rtEqual(data, le
+00012960: 7474 6572 7329 0d0a 2020 2020 2020 2020  tters)..        
+00012970: 6669 6e61 6c6c 793a 0d0a 2020 2020 2020  finally:..      
+00012980: 2020 2020 2020 6f73 2e72 656d 6f76 6528        os.remove(
+00012990: 6c6f 6766 696c 6529 0d0a 0d0a 2020 2020  logfile)....    
+000129a0: 6465 6620 7465 7374 5f74 6169 6c50 726f  def test_tailPro
+000129b0: 6365 7373 5374 646f 7574 4c6f 675f 6e6f  cessStdoutLog_no
+000129c0: 6e65 2873 656c 6629 3a0d 0a20 2020 2020  ne(self):..     
+000129d0: 2020 2023 2074 6573 7420 6e6f 7468 696e     # test nothin
+000129e0: 6720 6973 2072 6574 7572 6e65 6420 7768  g is returned wh
+000129f0: 656e 206f 6666 7365 7420 3c3d 206c 6f67  en offset <= log
+00012a00: 7369 7a65 0d0a 2020 2020 2020 2020 6672  size..        fr
+00012a10: 6f6d 2073 7570 6572 7669 736f 722e 636f  om supervisor.co
+00012a20: 6d70 6174 2069 6d70 6f72 7420 6c65 7474  mpat import lett
+00012a30: 6572 730d 0a20 2020 2020 2020 206f 7074  ers..        opt
+00012a40: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+00012a50: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+00012a60: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+00012a70: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00012a80: 666f 6f27 2c20 272f 6269 6e2f 666f 6f27  foo', '/bin/foo'
+00012a90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00012aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ab0: 2020 7374 646f 7574 5f6c 6f67 6669 6c65    stdout_logfile
+00012ac0: 3d54 656d 7046 696c 654f 7065 6e2e 6d61  =TempFileOpen.ma
+00012ad0: 6b65 5f70 6174 6828 2773 7464 6f75 742d  ke_path('stdout-
+00012ae0: 6c6f 6766 696c 652d 362e 6c6f 6727 2929  logfile-6.log'))
+00012af0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+00012b00: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
+00012b10: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
+00012b20: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+00012b30: 2070 636f 6e66 6967 290d 0a20 2020 2020   pconfig)..     
+00012b40: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00012b50: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+00012b60: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+00012b70: 2020 2070 726f 6365 7373 203d 2073 7570     process = sup
+00012b80: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
+00012b90: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
+00012ba0: 726f 6365 7373 6573 5b27 666f 6f27 5d0d  rocesses['foo'].
+00012bb0: 0a20 2020 2020 2020 206c 6f67 6669 6c65  .        logfile
+00012bc0: 203d 2070 726f 6365 7373 2e63 6f6e 6669   = process.confi
+00012bd0: 672e 7374 646f 7574 5f6c 6f67 6669 6c65  g.stdout_logfile
+00012be0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+00012bf0: 2020 2020 2020 2020 2020 2020 7769 7468              with
+00012c00: 206f 7065 6e28 6c6f 6766 696c 652c 2027   open(logfile, '
+00012c10: 772b 2729 2061 7320 663a 0d0a 2020 2020  w+') as f:..    
+00012c20: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+00012c30: 6974 6528 6c65 7474 6572 7329 0d0a 0d0a  ite(letters)....
+00012c40: 2020 2020 2020 2020 2020 2020 2320 6f66              # of
+00012c50: 6673 6574 3d3d 6c6f 6773 697a 650d 0a20  fset==logsize.. 
+00012c60: 2020 2020 2020 2020 2020 2064 6174 612c             data,
+00012c70: 206f 6666 7365 742c 206f 7665 7266 6c6f   offset, overflo
+00012c80: 7720 3d20 696e 7465 7266 6163 652e 7461  w = interface.ta
+00012c90: 696c 5072 6f63 6573 7353 7464 6f75 744c  ilProcessStdoutL
+00012ca0: 6f67 2827 666f 6f27 2c0d 0a20 2020 2020  og('foo',..     
+00012cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ce0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00012cf0: 6666 7365 743d 6c65 6e28 6c65 7474 6572  ffset=len(letter
+00012d00: 7329 2c0d 0a20 2020 2020 2020 2020 2020  s),..           
+00012d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012d40: 2020 2020 2020 2020 206c 656e 6774 683d           length=
+00012d50: 3130 3029 0d0a 2020 2020 2020 2020 2020  100)..          
+00012d60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00012d70: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
+00012d80: 6174 655f 7465 7874 2c20 2774 6169 6c50  ate_text, 'tailP
+00012d90: 726f 6365 7373 5374 646f 7574 4c6f 6727  rocessStdoutLog'
+00012da0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00012db0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00012dc0: 6f76 6572 666c 6f77 2c20 4661 6c73 6529  overflow, False)
+00012dd0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00012de0: 6c66 2e61 7373 6572 7445 7175 616c 286f  lf.assertEqual(o
+00012df0: 6666 7365 742c 206c 656e 286c 6574 7465  ffset, len(lette
+00012e00: 7273 2929 0d0a 2020 2020 2020 2020 2020  rs))..          
 00012e10: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00012e20: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
-00012e30: 6174 655f 7465 7874 2c20 2774 6169 6c50  ate_text, 'tailP
-00012e40: 726f 6365 7373 5374 646f 7574 4c6f 6727  rocessStdoutLog'
-00012e50: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00012e60: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00012e70: 6f76 6572 666c 6f77 2c20 5472 7565 290d  overflow, True).
-00012e80: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00012e90: 662e 6173 7365 7274 4571 7561 6c28 6f66  f.assertEqual(of
-00012ea0: 6673 6574 2c20 6c65 6e28 6c65 7474 6572  fset, len(letter
-00012eb0: 7329 290d 0a20 2020 2020 2020 2020 2020  s))..           
-00012ec0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00012ed0: 6c28 6461 7461 2c20 6c65 7474 6572 735b  l(data, letters[
-00012ee0: 2d35 3a5d 290d 0a20 2020 2020 2020 2066  -5:])..        f
-00012ef0: 696e 616c 6c79 3a0d 0a20 2020 2020 2020  inally:..       
-00012f00: 2020 2020 206f 732e 7265 6d6f 7665 286c       os.remove(l
-00012f10: 6f67 6669 6c65 290d 0a0d 0a20 2020 2064  ogfile)....    d
-00012f20: 6566 2074 6573 745f 7461 696c 5072 6f63  ef test_tailProc
-00012f30: 6573 7353 7464 6f75 744c 6f67 5f75 6e72  essStdoutLog_unr
-00012f40: 6561 6461 626c 6528 7365 6c66 293a 0d0a  eadable(self):..
-00012f50: 2020 2020 2020 2020 2320 7465 7374 206e          # test n
-00012f60: 6f74 6869 6e67 2069 7320 7265 7475 726e  othing is return
-00012f70: 6564 2069 6620 7468 6520 6c6f 6720 646f  ed if the log do
-00012f80: 6573 6e27 7420 6578 6973 7420 7965 740d  esn't exist yet.
-00012f90: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-00012fa0: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-00012fb0: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-00012fc0: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
-00012fd0: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
-00012fe0: 2c20 272f 6269 6e2f 666f 6f27 2c0d 0a20  , '/bin/foo',.. 
-00012ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013000: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00013010: 646f 7574 5f6c 6f67 6669 6c65 3d27 2f74  dout_logfile='/t
-00013020: 6d70 2f66 6f6f 6f6f 6f6f 6f27 290d 0a20  mp/fooooooo').. 
-00013030: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-00013040: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
-00013050: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
-00013060: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
-00013070: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
-00013080: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
-00013090: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
-000130a0: 6973 6f72 6429 0d0a 0d0a 2020 2020 2020  isord)....      
-000130b0: 2020 6461 7461 2c20 6f66 6673 6574 2c20    data, offset, 
-000130c0: 6f76 6572 666c 6f77 203d 2069 6e74 6572  overflow = inter
-000130d0: 6661 6365 2e74 6169 6c50 726f 6365 7373  face.tailProcess
-000130e0: 5374 646f 7574 4c6f 6728 2766 6f6f 272c  StdoutLog('foo',
-000130f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00013100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013130: 2020 6f66 6673 6574 3d30 2c20 6c65 6e67    offset=0, leng
-00013140: 7468 3d31 3030 290d 0a20 2020 2020 2020  th=100)..       
-00013150: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00013160: 6c28 696e 7465 7266 6163 652e 7570 6461  l(interface.upda
-00013170: 7465 5f74 6578 742c 2027 7461 696c 5072  te_text, 'tailPr
-00013180: 6f63 6573 7353 7464 6f75 744c 6f67 2729  ocessStdoutLog')
-00013190: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000131a0: 7373 6572 7445 7175 616c 286f 7665 7266  ssertEqual(overf
-000131b0: 6c6f 772c 2046 616c 7365 290d 0a20 2020  low, False)..   
-000131c0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000131d0: 4571 7561 6c28 6f66 6673 6574 2c20 3029  Equal(offset, 0)
-000131e0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-000131f0: 7373 6572 7445 7175 616c 2864 6174 612c  ssertEqual(data,
-00013200: 2027 2729 0d0a 0d0a 2020 2020 6465 6620   '')....    def 
-00013210: 7465 7374 5f74 6169 6c50 726f 6365 7373  test_tailProcess
-00013220: 4c6f 6741 6c69 6173 6564 546f 5f74 6169  LogAliasedTo_tai
-00013230: 6c50 726f 6365 7373 5374 646f 7574 4c6f  lProcessStdoutLo
-00013240: 6728 7365 6c66 293a 0d0a 2020 2020 2020  g(self):..      
-00013250: 2020 6f70 7469 6f6e 7320 3d20 4475 6d6d    options = Dumm
-00013260: 794f 7074 696f 6e73 2829 0d0a 2020 2020  yOptions()..    
-00013270: 2020 2020 7063 6f6e 6669 6720 3d20 4475      pconfig = Du
-00013280: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
-00013290: 6e73 2c20 2766 6f6f 272c 2027 2f62 696e  ns, 'foo', '/bin
-000132a0: 2f66 6f6f 2729 0d0a 2020 2020 2020 2020  /foo')..        
-000132b0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
-000132c0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
-000132d0: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
-000132e0: 2766 6f6f 272c 2070 636f 6e66 6967 290d  'foo', pconfig).
-000132f0: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00013300: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-00013310: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-00013320: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00013330: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
-00013340: 6163 652e 7461 696c 5072 6f63 6573 734c  ace.tailProcessL
-00013350: 6f67 2c0d 0a20 2020 2020 2020 2020 2020  og,..           
-00013360: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00013370: 7465 7266 6163 652e 7461 696c 5072 6f63  terface.tailProc
-00013380: 6573 7353 7464 6f75 744c 6f67 290d 0a0d  essStdoutLog)...
-00013390: 0a20 2020 2064 6566 2074 6573 745f 7461  .    def test_ta
-000133a0: 696c 5072 6f63 6573 7353 7464 6572 724c  ilProcessStderrL
-000133b0: 6f67 5f62 6164 5f6e 616d 6528 7365 6c66  og_bad_name(self
-000133c0: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
-000133d0: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
-000133e0: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
-000133f0: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00013400: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
-00013410: 2829 0d0a 2020 2020 2020 2020 696e 7465  ()..        inte
-00013420: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
-00013430: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
-00013440: 6429 0d0a 2020 2020 2020 2020 7365 6c66  d)..        self
-00013450: 2e5f 6173 7365 7274 5250 4345 7272 6f72  ._assertRPCError
-00013460: 2878 6d6c 7270 632e 4661 756c 7473 2e42  (xmlrpc.Faults.B
-00013470: 4144 5f4e 414d 452c 0d0a 2020 2020 2020  AD_NAME,..      
-00013480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013490: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-000134a0: 2e74 6169 6c50 726f 6365 7373 5374 6465  .tailProcessStde
-000134b0: 7272 4c6f 672c 2027 4241 445f 4e41 4d45  rrLog, 'BAD_NAME
-000134c0: 272c 2030 2c20 3130 290d 0a0d 0a20 2020  ', 0, 10)....   
-000134d0: 2064 6566 2074 6573 745f 7461 696c 5072   def test_tailPr
-000134e0: 6f63 6573 7353 7464 6572 724c 6f67 5f62  ocessStderrLog_b
-000134f0: 6164 5f6e 616d 655f 6e6f 5f70 726f 6365  ad_name_no_proce
-00013500: 7373 2873 656c 6629 3a0d 0a20 2020 2020  ss(self):..     
-00013510: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
-00013520: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
-00013530: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-00013540: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-00013550: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
-00013560: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
-00013570: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-00013580: 6365 7373 3127 2c20 272f 6269 6e2f 7072  cess1', '/bin/pr
-00013590: 6f63 6573 7331 272c 2070 7269 6f72 6974  ocess1', priorit
-000135a0: 793d 312c 0d0a 2020 2020 2020 2020 2020  y=1,..          
-000135b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000135c0: 2020 2020 2073 7464 6f75 745f 6c6f 6766       stdout_logf
-000135d0: 696c 653d 272f 746d 702f 7072 6f63 6573  ile='/tmp/proces
-000135e0: 7331 2e6c 6f67 2729 0d0a 2020 2020 2020  s1.log')..      
-000135f0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-00013600: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
-00013610: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
-00013620: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
-00013630: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00013640: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00013650: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00013660: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00013670: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-00013680: 786d 6c72 7063 2e46 6175 6c74 732e 4241  xmlrpc.Faults.BA
-00013690: 445f 4e41 4d45 2c0d 0a20 2020 2020 2020  D_NAME,..       
+00012e20: 616c 2864 6174 612c 2027 2729 0d0a 0d0a  al(data, '')....
+00012e30: 2020 2020 2020 2020 2020 2020 2320 6f66              # of
+00012e40: 6673 6574 203e 206c 6f67 7369 7a65 0d0a  fset > logsize..
+00012e50: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00012e60: 2c20 6f66 6673 6574 2c20 6f76 6572 666c  , offset, overfl
+00012e70: 6f77 203d 2069 6e74 6572 6661 6365 2e74  ow = interface.t
+00012e80: 6169 6c50 726f 6365 7373 5374 646f 7574  ailProcessStdout
+00012e90: 4c6f 6728 2766 6f6f 272c 0d0a 2020 2020  Log('foo',..    
+00012ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012ee0: 6f66 6673 6574 3d6c 656e 286c 6574 7465  offset=len(lette
+00012ef0: 7273 2920 2b20 352c 0d0a 2020 2020 2020  rs) + 5,..      
+00012f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012f30: 2020 2020 2020 2020 2020 2020 2020 6c65                le
+00012f40: 6e67 7468 3d31 3030 290d 0a20 2020 2020  ngth=100)..     
+00012f50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00012f60: 7274 4571 7561 6c28 696e 7465 7266 6163  rtEqual(interfac
+00012f70: 652e 7570 6461 7465 5f74 6578 742c 2027  e.update_text, '
+00012f80: 7461 696c 5072 6f63 6573 7353 7464 6f75  tailProcessStdou
+00012f90: 744c 6f67 2729 0d0a 2020 2020 2020 2020  tLog')..        
+00012fa0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00012fb0: 7175 616c 286f 7665 7266 6c6f 772c 2046  qual(overflow, F
+00012fc0: 616c 7365 290d 0a20 2020 2020 2020 2020  alse)..         
+00012fd0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00012fe0: 7561 6c28 6f66 6673 6574 2c20 6c65 6e28  ual(offset, len(
+00012ff0: 6c65 7474 6572 7329 290d 0a20 2020 2020  letters))..     
+00013000: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00013010: 7274 4571 7561 6c28 6461 7461 2c20 2727  rtEqual(data, ''
+00013020: 290d 0a20 2020 2020 2020 2066 696e 616c  )..        final
+00013030: 6c79 3a0d 0a20 2020 2020 2020 2020 2020  ly:..           
+00013040: 206f 732e 7265 6d6f 7665 286c 6f67 6669   os.remove(logfi
+00013050: 6c65 290d 0a0d 0a20 2020 2064 6566 2074  le)....    def t
+00013060: 6573 745f 7461 696c 5072 6f63 6573 7353  est_tailProcessS
+00013070: 7464 6f75 744c 6f67 5f6f 7665 7266 6c6f  tdoutLog_overflo
+00013080: 7728 7365 6c66 293a 0d0a 2020 2020 2020  w(self):..      
+00013090: 2020 2320 7465 7374 2062 7566 6665 7220    # test buffer 
+000130a0: 6f76 6572 666c 6f77 206f 6363 7572 7320  overflow occurs 
+000130b0: 7768 656e 206c 6f67 7369 7a65 203e 206f  when logsize > o
+000130c0: 6666 7365 742b 6c65 6e67 7468 0d0a 2020  ffset+length..  
+000130d0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+000130e0: 7669 736f 722e 636f 6d70 6174 2069 6d70  visor.compat imp
+000130f0: 6f72 7420 6c65 7474 6572 730d 0a20 2020  ort letters..   
+00013100: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+00013110: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+00013120: 2020 2020 2020 2070 636f 6e66 6967 203d         pconfig =
+00013130: 2044 756d 6d79 5043 6f6e 6669 6728 6f70   DummyPConfig(op
+00013140: 7469 6f6e 732c 2027 666f 6f27 2c20 272f  tions, 'foo', '/
+00013150: 6269 6e2f 666f 6f27 2c0d 0a20 2020 2020  bin/foo',..     
+00013160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013170: 2020 2020 2020 2020 2020 7374 646f 7574            stdout
+00013180: 5f6c 6f67 6669 6c65 3d54 656d 7046 696c  _logfile=TempFil
+00013190: 654f 7065 6e2e 6d61 6b65 5f70 6174 6828  eOpen.make_path(
+000131a0: 2773 7464 6f75 742d 6c6f 6766 696c 652d  'stdout-logfile-
+000131b0: 372e 6c6f 6727 2929 0d0a 2020 2020 2020  7.log'))..      
+000131c0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
+000131d0: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
+000131e0: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
+000131f0: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
+00013200: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
+00013210: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
+00013220: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
+00013230: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+00013240: 7373 203d 2073 7570 6572 7669 736f 7264  ss = supervisord
+00013250: 2e70 726f 6365 7373 5f67 726f 7570 735b  .process_groups[
+00013260: 2766 6f6f 275d 2e70 726f 6365 7373 6573  'foo'].processes
+00013270: 5b27 666f 6f27 5d0d 0a20 2020 2020 2020  ['foo']..       
+00013280: 206c 6f67 6669 6c65 203d 2070 726f 6365   logfile = proce
+00013290: 7373 2e63 6f6e 6669 672e 7374 646f 7574  ss.config.stdout
+000132a0: 5f6c 6f67 6669 6c65 0d0a 2020 2020 2020  _logfile..      
+000132b0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+000132c0: 2020 2020 7769 7468 206f 7065 6e28 6c6f      with open(lo
+000132d0: 6766 696c 652c 2027 772b 2729 2061 7320  gfile, 'w+') as 
+000132e0: 663a 0d0a 2020 2020 2020 2020 2020 2020  f:..            
+000132f0: 2020 2020 662e 7772 6974 6528 6c65 7474      f.write(lett
+00013300: 6572 7329 0d0a 0d0a 2020 2020 2020 2020  ers)....        
+00013310: 2020 2020 6461 7461 2c20 6f66 6673 6574      data, offset
+00013320: 2c20 6f76 6572 666c 6f77 203d 2069 6e74  , overflow = int
+00013330: 6572 6661 6365 2e74 6169 6c50 726f 6365  erface.tailProce
+00013340: 7373 5374 646f 7574 4c6f 6728 2766 6f6f  ssStdoutLog('foo
+00013350: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00013360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013390: 2020 2020 2020 2020 6f66 6673 6574 3d30          offset=0
+000133a0: 2c20 6c65 6e67 7468 3d35 290d 0a20 2020  , length=5)..   
+000133b0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+000133c0: 7365 7274 4571 7561 6c28 696e 7465 7266  sertEqual(interf
+000133d0: 6163 652e 7570 6461 7465 5f74 6578 742c  ace.update_text,
+000133e0: 2027 7461 696c 5072 6f63 6573 7353 7464   'tailProcessStd
+000133f0: 6f75 744c 6f67 2729 0d0a 2020 2020 2020  outLog')..      
+00013400: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00013410: 7445 7175 616c 286f 7665 7266 6c6f 772c  tEqual(overflow,
+00013420: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
+00013430: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00013440: 7175 616c 286f 6666 7365 742c 206c 656e  qual(offset, len
+00013450: 286c 6574 7465 7273 2929 0d0a 2020 2020  (letters))..    
+00013460: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00013470: 6572 7445 7175 616c 2864 6174 612c 206c  ertEqual(data, l
+00013480: 6574 7465 7273 5b2d 353a 5d29 0d0a 2020  etters[-5:])..  
+00013490: 2020 2020 2020 6669 6e61 6c6c 793a 0d0a        finally:..
+000134a0: 2020 2020 2020 2020 2020 2020 6f73 2e72              os.r
+000134b0: 656d 6f76 6528 6c6f 6766 696c 6529 0d0a  emove(logfile)..
+000134c0: 0d0a 2020 2020 6465 6620 7465 7374 5f74  ..    def test_t
+000134d0: 6169 6c50 726f 6365 7373 5374 646f 7574  ailProcessStdout
+000134e0: 4c6f 675f 756e 7265 6164 6162 6c65 2873  Log_unreadable(s
+000134f0: 656c 6629 3a0d 0a20 2020 2020 2020 2023  elf):..        #
+00013500: 2074 6573 7420 6e6f 7468 696e 6720 6973   test nothing is
+00013510: 2072 6574 7572 6e65 6420 6966 2074 6865   returned if the
+00013520: 206c 6f67 2064 6f65 736e 2774 2065 7869   log doesn't exi
+00013530: 7374 2079 6574 0d0a 2020 2020 2020 2020  st yet..        
+00013540: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00013550: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00013560: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
+00013570: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00013580: 2c20 2766 6f6f 272c 2027 2f62 696e 2f66  , 'foo', '/bin/f
+00013590: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
+000135a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000135b0: 2020 2020 2073 7464 6f75 745f 6c6f 6766       stdout_logf
+000135c0: 696c 653d 272f 746d 702f 666f 6f6f 6f6f  ile='/tmp/fooooo
+000135d0: 6f6f 2729 0d0a 2020 2020 2020 2020 7375  oo')..        su
+000135e0: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
+000135f0: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
+00013600: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
+00013610: 6f6f 272c 2070 636f 6e66 6967 290d 0a20  oo', pconfig).. 
+00013620: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00013630: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
+00013640: 2873 7570 6572 7669 736f 7264 290d 0a0d  (supervisord)...
+00013650: 0a20 2020 2020 2020 2064 6174 612c 206f  .        data, o
+00013660: 6666 7365 742c 206f 7665 7266 6c6f 7720  ffset, overflow 
+00013670: 3d20 696e 7465 7266 6163 652e 7461 696c  = interface.tail
+00013680: 5072 6f63 6573 7353 7464 6f75 744c 6f67  ProcessStdoutLog
+00013690: 2827 666f 6f27 2c0d 0a20 2020 2020 2020  ('foo',..       
 000136a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000136b0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-000136c0: 7461 696c 5072 6f63 6573 7353 7464 6572  tailProcessStder
-000136d0: 724c 6f67 2c20 2766 6f6f 3a2a 272c 2030  rLog, 'foo:*', 0
-000136e0: 2c20 3130 290d 0a0d 0a20 2020 2064 6566  , 10)....    def
-000136f0: 2074 6573 745f 7461 696c 5072 6f63 6573   test_tailProces
-00013700: 7353 7464 6572 724c 6f67 5f61 6c6c 2873  sStderrLog_all(s
-00013710: 656c 6629 3a0d 0a20 2020 2020 2020 2023  elf):..        #
-00013720: 2074 6573 7420 656e 7469 7265 206c 6f67   test entire log
-00013730: 2069 7320 7265 7475 726e 6564 2077 6865   is returned whe
-00013740: 6e20 6f66 6673 6574 3d3d 3020 616e 6420  n offset==0 and 
-00013750: 6c6f 6773 697a 6520 3c20 6c65 6e67 7468  logsize < length
-00013760: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-00013770: 7570 6572 7669 736f 722e 636f 6d70 6174  upervisor.compat
-00013780: 2069 6d70 6f72 7420 6c65 7474 6572 730d   import letters.
-00013790: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-000137a0: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-000137b0: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-000137c0: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
-000137d0: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
-000137e0: 2c20 272f 6269 6e2f 666f 6f27 2c0d 0a20  , '/bin/foo',.. 
-000137f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013800: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00013810: 6465 7272 5f6c 6f67 6669 6c65 3d54 656d  derr_logfile=Tem
-00013820: 7046 696c 654f 7065 6e2e 6d61 6b65 5f70  pFileOpen.make_p
-00013830: 6174 6828 2773 7464 6572 722d 6c6f 6766  ath('stderr-logf
-00013840: 696c 652e 6c6f 6727 2929 0d0a 2020 2020  ile.log'))..    
-00013850: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-00013860: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
-00013870: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-00013880: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
-00013890: 6967 290d 0a20 2020 2020 2020 2069 6e74  ig)..        int
-000138a0: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
-000138b0: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
-000138c0: 7264 290d 0a20 2020 2020 2020 2070 726f  rd)..        pro
-000138d0: 6365 7373 203d 2073 7570 6572 7669 736f  cess = superviso
-000138e0: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
-000138f0: 735b 2766 6f6f 275d 2e70 726f 6365 7373  s['foo'].process
-00013900: 6573 5b27 666f 6f27 5d0d 0a20 2020 2020  es['foo']..     
-00013910: 2020 206c 6f67 6669 6c65 203d 2070 726f     logfile = pro
-00013920: 6365 7373 2e63 6f6e 6669 672e 7374 6465  cess.config.stde
-00013930: 7272 5f6c 6f67 6669 6c65 0d0a 2020 2020  rr_logfile..    
-00013940: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00013950: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00013960: 6c6f 6766 696c 652c 2027 772b 2729 2061  logfile, 'w+') a
-00013970: 7320 663a 0d0a 2020 2020 2020 2020 2020  s f:..          
-00013980: 2020 2020 2020 662e 7772 6974 6528 6c65        f.write(le
-00013990: 7474 6572 7329 0d0a 0d0a 2020 2020 2020  tters)....      
-000139a0: 2020 2020 2020 6461 7461 2c20 6f66 6673        data, offs
-000139b0: 6574 2c20 6f76 6572 666c 6f77 203d 2069  et, overflow = i
-000139c0: 6e74 6572 6661 6365 2e74 6169 6c50 726f  nterface.tailPro
-000139d0: 6365 7373 5374 6465 7272 4c6f 6728 2766  cessStderrLog('f
-000139e0: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
-000139f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a20: 2020 2020 2020 2020 2020 6f66 6673 6574            offset
-00013a30: 3d30 2c0d 0a20 2020 2020 2020 2020 2020  =0,..           
-00013a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013a70: 2020 2020 2020 2020 206c 656e 6774 683d           length=
-00013a80: 6c65 6e28 6c65 7474 6572 7329 290d 0a20  len(letters)).. 
-00013a90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013aa0: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
-00013ab0: 7266 6163 652e 7570 6461 7465 5f74 6578  rface.update_tex
-00013ac0: 742c 2027 7461 696c 5072 6f63 6573 7353  t, 'tailProcessS
-00013ad0: 7464 6572 724c 6f67 2729 0d0a 2020 2020  tderrLog')..    
-00013ae0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00013af0: 6572 7445 7175 616c 286f 7665 7266 6c6f  ertEqual(overflo
-00013b00: 772c 2046 616c 7365 290d 0a20 2020 2020  w, False)..     
-00013b10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00013b20: 7274 4571 7561 6c28 6f66 6673 6574 2c20  rtEqual(offset, 
-00013b30: 6c65 6e28 6c65 7474 6572 7329 290d 0a20  len(letters)).. 
-00013b40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013b50: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
-00013b60: 2c20 6c65 7474 6572 7329 0d0a 2020 2020  , letters)..    
-00013b70: 2020 2020 6669 6e61 6c6c 793a 0d0a 2020      finally:..  
-00013b80: 2020 2020 2020 2020 2020 6f73 2e72 656d            os.rem
-00013b90: 6f76 6528 6c6f 6766 696c 6529 0d0a 0d0a  ove(logfile)....
-00013ba0: 2020 2020 6465 6620 7465 7374 5f74 6169      def test_tai
-00013bb0: 6c50 726f 6365 7373 5374 6465 7272 4c6f  lProcessStderrLo
-00013bc0: 675f 6e6f 6e65 2873 656c 6629 3a0d 0a20  g_none(self):.. 
-00013bd0: 2020 2020 2020 2023 2074 6573 7420 6e6f         # test no
-00013be0: 7468 696e 6720 6973 2072 6574 7572 6e65  thing is returne
-00013bf0: 6420 7768 656e 206f 6666 7365 7420 3c3d  d when offset <=
-00013c00: 206c 6f67 7369 7a65 0d0a 2020 2020 2020   logsize..      
-00013c10: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00013c20: 722e 636f 6d70 6174 2069 6d70 6f72 7420  r.compat import 
-00013c30: 6c65 7474 6572 730d 0a20 2020 2020 2020  letters..       
-00013c40: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
-00013c50: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
-00013c60: 2020 2070 636f 6e66 6967 203d 2044 756d     pconfig = Dum
-00013c70: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00013c80: 732c 2027 666f 6f27 2c20 272f 6269 6e2f  s, 'foo', '/bin/
-00013c90: 666f 6f27 2c0d 0a20 2020 2020 2020 2020  foo',..         
-00013ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013cb0: 2020 2020 2020 7374 6465 7272 5f6c 6f67        stderr_log
-00013cc0: 6669 6c65 3d54 656d 7046 696c 654f 7065  file=TempFileOpe
-00013cd0: 6e2e 6d61 6b65 5f70 6174 6828 2773 7464  n.make_path('std
-00013ce0: 6572 722d 6c6f 6766 696c 652d 312e 6c6f  err-logfile-1.lo
-00013cf0: 6727 2929 0d0a 2020 2020 2020 2020 7375  g'))..        su
-00013d00: 7065 7276 6973 6f72 6420 3d20 506f 7075  pervisord = Popu
-00013d10: 6c61 7465 6444 756d 6d79 5375 7065 7276  latedDummySuperv
-00013d20: 6973 6f72 286f 7074 696f 6e73 2c20 2766  isor(options, 'f
-00013d30: 6f6f 272c 2070 636f 6e66 6967 290d 0a20  oo', pconfig).. 
-00013d40: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00013d50: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00013d60: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-00013d70: 2020 2020 2020 2070 726f 6365 7373 203d         process =
-00013d80: 2073 7570 6572 7669 736f 7264 2e70 726f   supervisord.pro
-00013d90: 6365 7373 5f67 726f 7570 735b 2766 6f6f  cess_groups['foo
-00013da0: 275d 2e70 726f 6365 7373 6573 5b27 666f  '].processes['fo
-00013db0: 6f27 5d0d 0a20 2020 2020 2020 206c 6f67  o']..        log
-00013dc0: 6669 6c65 203d 2070 726f 6365 7373 2e63  file = process.c
-00013dd0: 6f6e 6669 672e 7374 6465 7272 5f6c 6f67  onfig.stderr_log
-00013de0: 6669 6c65 0d0a 2020 2020 2020 2020 7472  file..        tr
-00013df0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-00013e00: 7769 7468 206f 7065 6e28 6c6f 6766 696c  with open(logfil
-00013e10: 652c 2027 772b 2729 2061 7320 663a 0d0a  e, 'w+') as f:..
-00013e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013e30: 662e 7772 6974 6528 6c65 7474 6572 7329  f.write(letters)
-00013e40: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00013e50: 2320 6f66 6673 6574 3d3d 6c6f 6773 697a  # offset==logsiz
-00013e60: 650d 0a20 2020 2020 2020 2020 2020 2064  e..            d
-00013e70: 6174 612c 206f 6666 7365 742c 206f 7665  ata, offset, ove
-00013e80: 7266 6c6f 7720 3d20 696e 7465 7266 6163  rflow = interfac
-00013e90: 652e 7461 696c 5072 6f63 6573 7353 7464  e.tailProcessStd
-00013ea0: 6572 724c 6f67 2827 666f 6f27 2c0d 0a20  errLog('foo',.. 
-00013eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013ef0: 2020 206f 6666 7365 743d 6c65 6e28 6c65     offset=len(le
-00013f00: 7474 6572 7329 2c0d 0a20 2020 2020 2020  tters),..       
-00013f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013f40: 2020 2020 2020 2020 2020 2020 206c 656e               len
-00013f50: 6774 683d 3130 3029 0d0a 2020 2020 2020  gth=100)..      
-00013f60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00013f70: 7445 7175 616c 2869 6e74 6572 6661 6365  tEqual(interface
-00013f80: 2e75 7064 6174 655f 7465 7874 2c20 2774  .update_text, 't
-00013f90: 6169 6c50 726f 6365 7373 5374 6465 7272  ailProcessStderr
-00013fa0: 4c6f 6727 290d 0a20 2020 2020 2020 2020  Log')..         
-00013fb0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00013fc0: 7561 6c28 6f76 6572 666c 6f77 2c20 4661  ual(overflow, Fa
-00013fd0: 6c73 6529 0d0a 2020 2020 2020 2020 2020  lse)..          
-00013fe0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00013ff0: 616c 286f 6666 7365 742c 206c 656e 286c  al(offset, len(l
-00014000: 6574 7465 7273 2929 0d0a 2020 2020 2020  etters))..      
-00014010: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00014020: 7445 7175 616c 2864 6174 612c 2027 2729  tEqual(data, '')
-00014030: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00014040: 2320 6f66 6673 6574 203e 206c 6f67 7369  # offset > logsi
-00014050: 7a65 0d0a 2020 2020 2020 2020 2020 2020  ze..            
-00014060: 6461 7461 2c20 6f66 6673 6574 2c20 6f76  data, offset, ov
-00014070: 6572 666c 6f77 203d 2069 6e74 6572 6661  erflow = interfa
-00014080: 6365 2e74 6169 6c50 726f 6365 7373 5374  ce.tailProcessSt
-00014090: 6465 7272 4c6f 6728 2766 6f6f 272c 0d0a  derrLog('foo',..
-000140a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000140e0: 2020 2020 6f66 6673 6574 3d6c 656e 286c      offset=len(l
-000140f0: 6574 7465 7273 2920 2b20 352c 0d0a 2020  etters) + 5,..  
-00014100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014140: 2020 6c65 6e67 7468 3d31 3030 290d 0a20    length=100).. 
-00014150: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00014160: 6173 7365 7274 4571 7561 6c28 696e 7465  assertEqual(inte
-00014170: 7266 6163 652e 7570 6461 7465 5f74 6578  rface.update_tex
-00014180: 742c 2027 7461 696c 5072 6f63 6573 7353  t, 'tailProcessS
-00014190: 7464 6572 724c 6f67 2729 0d0a 2020 2020  tderrLog')..    
-000141a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000141b0: 6572 7445 7175 616c 286f 7665 7266 6c6f  ertEqual(overflo
-000141c0: 772c 2046 616c 7365 290d 0a20 2020 2020  w, False)..     
-000141d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000141e0: 7274 4571 7561 6c28 6f66 6673 6574 2c20  rtEqual(offset, 
-000141f0: 6c65 6e28 6c65 7474 6572 7329 290d 0a20  len(letters)).. 
-00014200: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00014210: 6173 7365 7274 4571 7561 6c28 6461 7461  assertEqual(data
-00014220: 2c20 2727 290d 0a20 2020 2020 2020 2066  , '')..        f
-00014230: 696e 616c 6c79 3a0d 0a20 2020 2020 2020  inally:..       
-00014240: 2020 2020 206f 732e 7265 6d6f 7665 286c       os.remove(l
-00014250: 6f67 6669 6c65 290d 0a0d 0a20 2020 2064  ogfile)....    d
-00014260: 6566 2074 6573 745f 7461 696c 5072 6f63  ef test_tailProc
-00014270: 6573 7353 7464 6572 724c 6f67 5f6f 7665  essStderrLog_ove
-00014280: 7266 6c6f 7728 7365 6c66 293a 0d0a 2020  rflow(self):..  
-00014290: 2020 2020 2020 2320 7465 7374 2062 7566        # test buf
-000142a0: 6665 7220 6f76 6572 666c 6f77 206f 6363  fer overflow occ
-000142b0: 7572 7320 7768 656e 206c 6f67 7369 7a65  urs when logsize
-000142c0: 203e 206f 6666 7365 742b 6c65 6e67 7468   > offset+length
-000142d0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-000142e0: 7570 6572 7669 736f 722e 636f 6d70 6174  upervisor.compat
-000142f0: 2069 6d70 6f72 7420 6c65 7474 6572 730d   import letters.
-00014300: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-00014310: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-00014320: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-00014330: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
-00014340: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
-00014350: 2c20 272f 6269 6e2f 666f 6f27 2c0d 0a20  , '/bin/foo',.. 
-00014360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014370: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00014380: 6465 7272 5f6c 6f67 6669 6c65 3d54 656d  derr_logfile=Tem
-00014390: 7046 696c 654f 7065 6e2e 6d61 6b65 5f70  pFileOpen.make_p
-000143a0: 6174 6828 2773 7464 6572 722d 6c6f 6766  ath('stderr-logf
-000143b0: 696c 652d 322e 6c6f 6727 2929 0d0a 2020  ile-2.log'))..  
-000143c0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
-000143d0: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
-000143e0: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-000143f0: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
-00014400: 6e66 6967 290d 0a20 2020 2020 2020 2069  nfig)..        i
-00014410: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00014420: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00014430: 736f 7264 290d 0a20 2020 2020 2020 2070  sord)..        p
-00014440: 726f 6365 7373 203d 2073 7570 6572 7669  rocess = supervi
-00014450: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
-00014460: 7570 735b 2766 6f6f 275d 2e70 726f 6365  ups['foo'].proce
-00014470: 7373 6573 5b27 666f 6f27 5d0d 0a20 2020  sses['foo']..   
-00014480: 2020 2020 206c 6f67 6669 6c65 203d 2070       logfile = p
-00014490: 726f 6365 7373 2e63 6f6e 6669 672e 7374  rocess.config.st
-000144a0: 6465 7272 5f6c 6f67 6669 6c65 0d0a 2020  derr_logfile..  
-000144b0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-000144c0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-000144d0: 6e28 6c6f 6766 696c 652c 2027 772b 2729  n(logfile, 'w+')
-000144e0: 2061 7320 663a 0d0a 2020 2020 2020 2020   as f:..        
-000144f0: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-00014500: 6c65 7474 6572 7329 0d0a 0d0a 2020 2020  letters)....    
-00014510: 2020 2020 2020 2020 6461 7461 2c20 6f66          data, of
-00014520: 6673 6574 2c20 6f76 6572 666c 6f77 203d  fset, overflow =
-00014530: 2069 6e74 6572 6661 6365 2e74 6169 6c50   interface.tailP
-00014540: 726f 6365 7373 5374 6465 7272 4c6f 6728  rocessStderrLog(
-00014550: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
-00014560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014590: 2020 2020 2020 2020 2020 2020 6f66 6673              offs
-000145a0: 6574 3d30 2c20 6c65 6e67 7468 3d35 290d  et=0, length=5).
+000136b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000136c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000136d0: 2020 2020 2020 2020 206f 6666 7365 743d           offset=
+000136e0: 302c 206c 656e 6774 683d 3130 3029 0d0a  0, length=100)..
+000136f0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00013700: 6572 7445 7175 616c 2869 6e74 6572 6661  ertEqual(interfa
+00013710: 6365 2e75 7064 6174 655f 7465 7874 2c20  ce.update_text, 
+00013720: 2774 6169 6c50 726f 6365 7373 5374 646f  'tailProcessStdo
+00013730: 7574 4c6f 6727 290d 0a20 2020 2020 2020  utLog')..       
+00013740: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00013750: 6c28 6f76 6572 666c 6f77 2c20 4661 6c73  l(overflow, Fals
+00013760: 6529 0d0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00013770: 2e61 7373 6572 7445 7175 616c 286f 6666  .assertEqual(off
+00013780: 7365 742c 2030 290d 0a20 2020 2020 2020  set, 0)..       
+00013790: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000137a0: 6c28 6461 7461 2c20 2727 290d 0a0d 0a20  l(data, '').... 
+000137b0: 2020 2064 6566 2074 6573 745f 7461 696c     def test_tail
+000137c0: 5072 6f63 6573 734c 6f67 416c 6961 7365  ProcessLogAliase
+000137d0: 6454 6f5f 7461 696c 5072 6f63 6573 7353  dTo_tailProcessS
+000137e0: 7464 6f75 744c 6f67 2873 656c 6629 3a0d  tdoutLog(self):.
+000137f0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00013800: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+00013810: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+00013820: 6967 203d 2044 756d 6d79 5043 6f6e 6669  ig = DummyPConfi
+00013830: 6728 6f70 7469 6f6e 732c 2027 666f 6f27  g(options, 'foo'
+00013840: 2c20 272f 6269 6e2f 666f 6f27 290d 0a20  , '/bin/foo').. 
+00013850: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00013860: 7264 203d 2050 6f70 756c 6174 6564 4475  rd = PopulatedDu
+00013870: 6d6d 7953 7570 6572 7669 736f 7228 6f70  mmySupervisor(op
+00013880: 7469 6f6e 732c 2027 666f 6f27 2c20 7063  tions, 'foo', pc
+00013890: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+000138a0: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+000138b0: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+000138c0: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+000138d0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000138e0: 2869 6e74 6572 6661 6365 2e74 6169 6c50  (interface.tailP
+000138f0: 726f 6365 7373 4c6f 672c 0d0a 2020 2020  rocessLog,..    
+00013900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013910: 2020 2020 2069 6e74 6572 6661 6365 2e74       interface.t
+00013920: 6169 6c50 726f 6365 7373 5374 646f 7574  ailProcessStdout
+00013930: 4c6f 6729 0d0a 0d0a 2020 2020 6465 6620  Log)....    def 
+00013940: 7465 7374 5f74 6169 6c50 726f 6365 7373  test_tailProcess
+00013950: 5374 6465 7272 4c6f 675f 6261 645f 6e61  StderrLog_bad_na
+00013960: 6d65 2873 656c 6629 3a0d 0a20 2020 2020  me(self):..     
+00013970: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
+00013980: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
+00013990: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+000139a0: 6973 6f72 6420 3d20 4475 6d6d 7953 7570  isord = DummySup
+000139b0: 6572 7669 736f 7228 290d 0a20 2020 2020  ervisor()..     
+000139c0: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+000139d0: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
+000139e0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
+000139f0: 2020 2073 656c 662e 5f61 7373 6572 7452     self._assertR
+00013a00: 5043 4572 726f 7228 786d 6c72 7063 2e46  PCError(xmlrpc.F
+00013a10: 6175 6c74 732e 4241 445f 4e41 4d45 2c0d  aults.BAD_NAME,.
+00013a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013a30: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00013a40: 7465 7266 6163 652e 7461 696c 5072 6f63  terface.tailProc
+00013a50: 6573 7353 7464 6572 724c 6f67 2c20 2742  essStderrLog, 'B
+00013a60: 4144 5f4e 414d 4527 2c20 302c 2031 3029  AD_NAME', 0, 10)
+00013a70: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00013a80: 5f74 6169 6c50 726f 6365 7373 5374 6465  _tailProcessStde
+00013a90: 7272 4c6f 675f 6261 645f 6e61 6d65 5f6e  rrLog_bad_name_n
+00013aa0: 6f5f 7072 6f63 6573 7328 7365 6c66 293a  o_process(self):
+00013ab0: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00013ac0: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
+00013ad0: 2078 6d6c 7270 630d 0a20 2020 2020 2020   xmlrpc..       
+00013ae0: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+00013af0: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
+00013b00: 2020 2070 636f 6e66 6967 203d 2044 756d     pconfig = Dum
+00013b10: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+00013b20: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
+00013b30: 2f62 696e 2f70 726f 6365 7373 3127 2c20  /bin/process1', 
+00013b40: 7072 696f 7269 7479 3d31 2c0d 0a20 2020  priority=1,..   
+00013b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b60: 2020 2020 2020 2020 2020 2020 7374 646f              stdo
+00013b70: 7574 5f6c 6f67 6669 6c65 3d27 2f74 6d70  ut_logfile='/tmp
+00013b80: 2f70 726f 6365 7373 312e 6c6f 6727 290d  /process1.log').
+00013b90: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00013ba0: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
+00013bb0: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
+00013bc0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+00013bd0: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
+00013be0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+00013bf0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+00013c00: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
+00013c10: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+00013c20: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
+00013c30: 756c 7473 2e42 4144 5f4e 414d 452c 0d0a  ults.BAD_NAME,..
+00013c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c50: 2020 2020 2020 2020 2020 2020 2069 6e74               int
+00013c60: 6572 6661 6365 2e74 6169 6c50 726f 6365  erface.tailProce
+00013c70: 7373 5374 6465 7272 4c6f 672c 2027 666f  ssStderrLog, 'fo
+00013c80: 6f3a 2a27 2c20 302c 2031 3029 0d0a 0d0a  o:*', 0, 10)....
+00013c90: 2020 2020 6465 6620 7465 7374 5f74 6169      def test_tai
+00013ca0: 6c50 726f 6365 7373 5374 6465 7272 4c6f  lProcessStderrLo
+00013cb0: 675f 616c 6c28 7365 6c66 293a 0d0a 2020  g_all(self):..  
+00013cc0: 2020 2020 2020 2320 7465 7374 2065 6e74        # test ent
+00013cd0: 6972 6520 6c6f 6720 6973 2072 6574 7572  ire log is retur
+00013ce0: 6e65 6420 7768 656e 206f 6666 7365 743d  ned when offset=
+00013cf0: 3d30 2061 6e64 206c 6f67 7369 7a65 203c  =0 and logsize <
+00013d00: 206c 656e 6774 680d 0a20 2020 2020 2020   length..       
+00013d10: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00013d20: 2e63 6f6d 7061 7420 696d 706f 7274 206c  .compat import l
+00013d30: 6574 7465 7273 0d0a 2020 2020 2020 2020  etters..        
+00013d40: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00013d50: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00013d60: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
+00013d70: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+00013d80: 2c20 2766 6f6f 272c 2027 2f62 696e 2f66  , 'foo', '/bin/f
+00013d90: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
+00013da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013db0: 2020 2020 2073 7464 6572 725f 6c6f 6766       stderr_logf
+00013dc0: 696c 653d 5465 6d70 4669 6c65 4f70 656e  ile=TempFileOpen
+00013dd0: 2e6d 616b 655f 7061 7468 2827 7374 6465  .make_path('stde
+00013de0: 7272 2d6c 6f67 6669 6c65 2e6c 6f67 2729  rr-logfile.log')
+00013df0: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+00013e00: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+00013e10: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+00013e20: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
+00013e30: 2c20 7063 6f6e 6669 6729 0d0a 2020 2020  , pconfig)..    
+00013e40: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
+00013e50: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
+00013e60: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
+00013e70: 2020 2020 7072 6f63 6573 7320 3d20 7375      process = su
+00013e80: 7065 7276 6973 6f72 642e 7072 6f63 6573  pervisord.proces
+00013e90: 735f 6772 6f75 7073 5b27 666f 6f27 5d2e  s_groups['foo'].
+00013ea0: 7072 6f63 6573 7365 735b 2766 6f6f 275d  processes['foo']
+00013eb0: 0d0a 2020 2020 2020 2020 6c6f 6766 696c  ..        logfil
+00013ec0: 6520 3d20 7072 6f63 6573 732e 636f 6e66  e = process.conf
+00013ed0: 6967 2e73 7464 6572 725f 6c6f 6766 696c  ig.stderr_logfil
+00013ee0: 650d 0a20 2020 2020 2020 2074 7279 3a0d  e..        try:.
+00013ef0: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
+00013f00: 6820 6f70 656e 286c 6f67 6669 6c65 2c20  h open(logfile, 
+00013f10: 2777 2b27 2920 6173 2066 3a0d 0a20 2020  'w+') as f:..   
+00013f20: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+00013f30: 7269 7465 286c 6574 7465 7273 290d 0a0d  rite(letters)...
+00013f40: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00013f50: 612c 206f 6666 7365 742c 206f 7665 7266  a, offset, overf
+00013f60: 6c6f 7720 3d20 696e 7465 7266 6163 652e  low = interface.
+00013f70: 7461 696c 5072 6f63 6573 7353 7464 6572  tailProcessStder
+00013f80: 724c 6f67 2827 666f 6f27 2c0d 0a20 2020  rLog('foo',..   
+00013f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013fd0: 206f 6666 7365 743d 302c 0d0a 2020 2020   offset=0,..    
+00013fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014020: 6c65 6e67 7468 3d6c 656e 286c 6574 7465  length=len(lette
+00014030: 7273 2929 0d0a 2020 2020 2020 2020 2020  rs))..          
+00014040: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00014050: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
+00014060: 6174 655f 7465 7874 2c20 2774 6169 6c50  ate_text, 'tailP
+00014070: 726f 6365 7373 5374 6465 7272 4c6f 6727  rocessStderrLog'
+00014080: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00014090: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000140a0: 6f76 6572 666c 6f77 2c20 4661 6c73 6529  overflow, False)
+000140b0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+000140c0: 6c66 2e61 7373 6572 7445 7175 616c 286f  lf.assertEqual(o
+000140d0: 6666 7365 742c 206c 656e 286c 6574 7465  ffset, len(lette
+000140e0: 7273 2929 0d0a 2020 2020 2020 2020 2020  rs))..          
+000140f0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00014100: 616c 2864 6174 612c 206c 6574 7465 7273  al(data, letters
+00014110: 290d 0a20 2020 2020 2020 2066 696e 616c  )..        final
+00014120: 6c79 3a0d 0a20 2020 2020 2020 2020 2020  ly:..           
+00014130: 206f 732e 7265 6d6f 7665 286c 6f67 6669   os.remove(logfi
+00014140: 6c65 290d 0a0d 0a20 2020 2064 6566 2074  le)....    def t
+00014150: 6573 745f 7461 696c 5072 6f63 6573 7353  est_tailProcessS
+00014160: 7464 6572 724c 6f67 5f6e 6f6e 6528 7365  tderrLog_none(se
+00014170: 6c66 293a 0d0a 2020 2020 2020 2020 2320  lf):..        # 
+00014180: 7465 7374 206e 6f74 6869 6e67 2069 7320  test nothing is 
+00014190: 7265 7475 726e 6564 2077 6865 6e20 6f66  returned when of
+000141a0: 6673 6574 203c 3d20 6c6f 6773 697a 650d  fset <= logsize.
+000141b0: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+000141c0: 7065 7276 6973 6f72 2e63 6f6d 7061 7420  pervisor.compat 
+000141d0: 696d 706f 7274 206c 6574 7465 7273 0d0a  import letters..
+000141e0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
+000141f0: 3d20 4475 6d6d 794f 7074 696f 6e73 2829  = DummyOptions()
+00014200: 0d0a 2020 2020 2020 2020 7063 6f6e 6669  ..        pconfi
+00014210: 6720 3d20 4475 6d6d 7950 436f 6e66 6967  g = DummyPConfig
+00014220: 286f 7074 696f 6e73 2c20 2766 6f6f 272c  (options, 'foo',
+00014230: 2027 2f62 696e 2f66 6f6f 272c 0d0a 2020   '/bin/foo',..  
+00014240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014250: 2020 2020 2020 2020 2020 2020 2073 7464               std
+00014260: 6572 725f 6c6f 6766 696c 653d 5465 6d70  err_logfile=Temp
+00014270: 4669 6c65 4f70 656e 2e6d 616b 655f 7061  FileOpen.make_pa
+00014280: 7468 2827 7374 6465 7272 2d6c 6f67 6669  th('stderr-logfi
+00014290: 6c65 2d31 2e6c 6f67 2729 290d 0a20 2020  le-1.log'))..   
+000142a0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+000142b0: 203d 2050 6f70 756c 6174 6564 4475 6d6d   = PopulatedDumm
+000142c0: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+000142d0: 6f6e 732c 2027 666f 6f27 2c20 7063 6f6e  ons, 'foo', pcon
+000142e0: 6669 6729 0d0a 2020 2020 2020 2020 696e  fig)..        in
+000142f0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00014300: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00014310: 6f72 6429 0d0a 2020 2020 2020 2020 7072  ord)..        pr
+00014320: 6f63 6573 7320 3d20 7375 7065 7276 6973  ocess = supervis
+00014330: 6f72 642e 7072 6f63 6573 735f 6772 6f75  ord.process_grou
+00014340: 7073 5b27 666f 6f27 5d2e 7072 6f63 6573  ps['foo'].proces
+00014350: 7365 735b 2766 6f6f 275d 0d0a 2020 2020  ses['foo']..    
+00014360: 2020 2020 6c6f 6766 696c 6520 3d20 7072      logfile = pr
+00014370: 6f63 6573 732e 636f 6e66 6967 2e73 7464  ocess.config.std
+00014380: 6572 725f 6c6f 6766 696c 650d 0a20 2020  err_logfile..   
+00014390: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+000143a0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+000143b0: 286c 6f67 6669 6c65 2c20 2777 2b27 2920  (logfile, 'w+') 
+000143c0: 6173 2066 3a0d 0a20 2020 2020 2020 2020  as f:..         
+000143d0: 2020 2020 2020 2066 2e77 7269 7465 286c         f.write(l
+000143e0: 6574 7465 7273 290d 0a0d 0a20 2020 2020  etters)....     
+000143f0: 2020 2020 2020 2023 206f 6666 7365 743d         # offset=
+00014400: 3d6c 6f67 7369 7a65 0d0a 2020 2020 2020  =logsize..      
+00014410: 2020 2020 2020 6461 7461 2c20 6f66 6673        data, offs
+00014420: 6574 2c20 6f76 6572 666c 6f77 203d 2069  et, overflow = i
+00014430: 6e74 6572 6661 6365 2e74 6169 6c50 726f  nterface.tailPro
+00014440: 6365 7373 5374 6465 7272 4c6f 6728 2766  cessStderrLog('f
+00014450: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
+00014460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014490: 2020 2020 2020 2020 2020 6f66 6673 6574            offset
+000144a0: 3d6c 656e 286c 6574 7465 7273 292c 0d0a  =len(letters),..
+000144b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000144f0: 2020 2020 6c65 6e67 7468 3d31 3030 290d      length=100).
+00014500: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00014510: 662e 6173 7365 7274 4571 7561 6c28 696e  f.assertEqual(in
+00014520: 7465 7266 6163 652e 7570 6461 7465 5f74  terface.update_t
+00014530: 6578 742c 2027 7461 696c 5072 6f63 6573  ext, 'tailProces
+00014540: 7353 7464 6572 724c 6f67 2729 0d0a 2020  sStderrLog')..  
+00014550: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00014560: 7373 6572 7445 7175 616c 286f 7665 7266  ssertEqual(overf
+00014570: 6c6f 772c 2046 616c 7365 290d 0a20 2020  low, False)..   
+00014580: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00014590: 7365 7274 4571 7561 6c28 6f66 6673 6574  sertEqual(offset
+000145a0: 2c20 6c65 6e28 6c65 7474 6572 7329 290d  , len(letters)).
 000145b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000145c0: 662e 6173 7365 7274 4571 7561 6c28 696e  f.assertEqual(in
-000145d0: 7465 7266 6163 652e 7570 6461 7465 5f74  terface.update_t
-000145e0: 6578 742c 2027 7461 696c 5072 6f63 6573  ext, 'tailProces
-000145f0: 7353 7464 6572 724c 6f67 2729 0d0a 2020  sStderrLog')..  
-00014600: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00014610: 7373 6572 7445 7175 616c 286f 7665 7266  ssertEqual(overf
-00014620: 6c6f 772c 2054 7275 6529 0d0a 2020 2020  low, True)..    
-00014630: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00014640: 6572 7445 7175 616c 286f 6666 7365 742c  ertEqual(offset,
-00014650: 206c 656e 286c 6574 7465 7273 2929 0d0a   len(letters))..
-00014660: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00014670: 2e61 7373 6572 7445 7175 616c 2864 6174  .assertEqual(dat
-00014680: 612c 206c 6574 7465 7273 5b2d 353a 5d29  a, letters[-5:])
-00014690: 0d0a 2020 2020 2020 2020 6669 6e61 6c6c  ..        finall
-000146a0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-000146b0: 6f73 2e72 656d 6f76 6528 6c6f 6766 696c  os.remove(logfil
-000146c0: 6529 0d0a 0d0a 2020 2020 6465 6620 7465  e)....    def te
-000146d0: 7374 5f74 6169 6c50 726f 6365 7373 5374  st_tailProcessSt
-000146e0: 6465 7272 4c6f 675f 756e 7265 6164 6162  derrLog_unreadab
-000146f0: 6c65 2873 656c 6629 3a0d 0a20 2020 2020  le(self):..     
-00014700: 2020 2023 2074 6573 7420 6e6f 7468 696e     # test nothin
-00014710: 6720 6973 2072 6574 7572 6e65 6420 6966  g is returned if
-00014720: 2074 6865 206c 6f67 2064 6f65 736e 2774   the log doesn't
-00014730: 2065 7869 7374 2079 6574 0d0a 2020 2020   exist yet..    
-00014740: 2020 2020 6f70 7469 6f6e 7320 3d20 4475      options = Du
-00014750: 6d6d 794f 7074 696f 6e73 2829 0d0a 2020  mmyOptions()..  
-00014760: 2020 2020 2020 7063 6f6e 6669 6720 3d20        pconfig = 
-00014770: 4475 6d6d 7950 436f 6e66 6967 286f 7074  DummyPConfig(opt
-00014780: 696f 6e73 2c20 2766 6f6f 272c 2027 2f62  ions, 'foo', '/b
-00014790: 696e 2f66 6f6f 272c 0d0a 2020 2020 2020  in/foo',..      
-000147a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000147b0: 2020 2020 2020 2020 2073 7464 6572 725f           stderr_
-000147c0: 6c6f 6766 696c 653d 272f 746d 702f 666f  logfile='/tmp/fo
-000147d0: 6f6f 6f6f 6f6f 2729 0d0a 2020 2020 2020  oooooo')..      
-000147e0: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
-000147f0: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
-00014800: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
-00014810: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
-00014820: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00014830: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00014840: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00014850: 290d 0a0d 0a20 2020 2020 2020 2064 6174  )....        dat
-00014860: 612c 206f 6666 7365 742c 206f 7665 7266  a, offset, overf
-00014870: 6c6f 7720 3d20 696e 7465 7266 6163 652e  low = interface.
-00014880: 7461 696c 5072 6f63 6573 7353 7464 6572  tailProcessStder
-00014890: 724c 6f67 2827 666f 6f27 2c0d 0a20 2020  rLog('foo',..   
-000148a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000148b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000148c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000148d0: 2020 2020 2020 2020 2020 2020 206f 6666               off
-000148e0: 7365 743d 302c 206c 656e 6774 683d 3130  set=0, length=10
-000148f0: 3029 0d0a 2020 2020 2020 2020 7365 6c66  0)..        self
-00014900: 2e61 7373 6572 7445 7175 616c 2869 6e74  .assertEqual(int
-00014910: 6572 6661 6365 2e75 7064 6174 655f 7465  erface.update_te
-00014920: 7874 2c20 2774 6169 6c50 726f 6365 7373  xt, 'tailProcess
-00014930: 5374 6465 7272 4c6f 6727 290d 0a20 2020  StderrLog')..   
-00014940: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00014950: 4571 7561 6c28 6f76 6572 666c 6f77 2c20  Equal(overflow, 
-00014960: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
-00014970: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00014980: 286f 6666 7365 742c 2030 290d 0a20 2020  (offset, 0)..   
-00014990: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000149a0: 4571 7561 6c28 6461 7461 2c20 2727 290d  Equal(data, '').
-000149b0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-000149c0: 636c 6561 7250 726f 6365 7373 4c6f 6773  clearProcessLogs
-000149d0: 5f62 6164 5f6e 616d 655f 6e6f 5f67 726f  _bad_name_no_gro
-000149e0: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
-000149f0: 2020 2066 726f 6d20 7375 7065 7276 6973     from supervis
-00014a00: 6f72 2069 6d70 6f72 7420 786d 6c72 7063  or import xmlrpc
-00014a10: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-00014a20: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-00014a30: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
-00014a40: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
-00014a50: 6967 286f 7074 696f 6e73 2c20 2766 6f6f  ig(options, 'foo
-00014a60: 272c 2027 666f 6f27 290d 0a20 2020 2020  ', 'foo')..     
-00014a70: 2020 2070 726f 6365 7373 203d 2044 756d     process = Dum
-00014a80: 6d79 5072 6f63 6573 7328 7063 6f6e 6669  myProcess(pconfi
-00014a90: 6729 0d0a 2020 2020 2020 2020 7067 726f  g)..        pgro
-00014aa0: 7570 203d 2044 756d 6d79 5072 6f63 6573  up = DummyProces
-00014ab0: 7347 726f 7570 284e 6f6e 6529 0d0a 2020  sGroup(None)..  
-00014ac0: 2020 2020 2020 7067 726f 7570 2e70 726f        pgroup.pro
-00014ad0: 6365 7373 6573 203d 207b 2766 6f6f 273a  cesses = {'foo':
-00014ae0: 2070 726f 6365 7373 7d0d 0a20 2020 2020   process}..     
-00014af0: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
-00014b00: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
-00014b10: 2870 726f 6365 7373 5f67 726f 7570 733d  (process_groups=
-00014b20: 7b27 666f 6f27 3a20 7067 726f 7570 7d29  {'foo': pgroup})
-00014b30: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00014b40: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00014b50: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00014b60: 0d0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00014b70: 6173 7365 7274 5250 4345 7272 6f72 2878  assertRPCError(x
-00014b80: 6d6c 7270 632e 4661 756c 7473 2e42 4144  mlrpc.Faults.BAD
-00014b90: 5f4e 414d 452c 0d0a 2020 2020 2020 2020  _NAME,..        
-00014ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014bb0: 2020 2020 2069 6e74 6572 6661 6365 2e63       interface.c
-00014bc0: 6c65 6172 5072 6f63 6573 734c 6f67 732c  learProcessLogs,
-00014bd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014be0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00014bf0: 6261 6467 726f 7570 2729 0d0a 0d0a 2020  badgroup')....  
-00014c00: 2020 6465 6620 7465 7374 5f63 6c65 6172    def test_clear
-00014c10: 5072 6f63 6573 734c 6f67 735f 6261 645f  ProcessLogs_bad_
-00014c20: 6e61 6d65 5f6e 6f5f 7072 6f63 6573 7328  name_no_process(
-00014c30: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00014c40: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
-00014c50: 696d 706f 7274 2078 6d6c 7270 630d 0a20  import xmlrpc.. 
-00014c60: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-00014c70: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-00014c80: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00014c90: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
-00014ca0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
-00014cb0: 2766 6f6f 2729 0d0a 2020 2020 2020 2020  'foo')..        
-00014cc0: 7072 6f63 6573 7320 3d20 4475 6d6d 7950  process = DummyP
-00014cd0: 726f 6365 7373 2870 636f 6e66 6967 290d  rocess(pconfig).
-00014ce0: 0a20 2020 2020 2020 2070 6772 6f75 7020  .        pgroup 
-00014cf0: 3d20 4475 6d6d 7950 726f 6365 7373 4772  = DummyProcessGr
-00014d00: 6f75 7028 4e6f 6e65 290d 0a20 2020 2020  oup(None)..     
-00014d10: 2020 2070 6772 6f75 702e 7072 6f63 6573     pgroup.proces
-00014d20: 7365 7320 3d20 7b27 666f 6f27 3a20 7072  ses = {'foo': pr
-00014d30: 6f63 6573 737d 0d0a 2020 2020 2020 2020  ocess}..        
-00014d40: 7375 7065 7276 6973 6f72 6420 3d20 4475  supervisord = Du
-00014d50: 6d6d 7953 7570 6572 7669 736f 7228 7072  mmySupervisor(pr
-00014d60: 6f63 6573 735f 6772 6f75 7073 3d7b 2766  ocess_groups={'f
-00014d70: 6f6f 273a 2070 6772 6f75 707d 290d 0a20  oo': pgroup}).. 
-00014d80: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00014d90: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00014da0: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-00014db0: 2020 2020 2020 2073 656c 662e 5f61 7373         self._ass
-00014dc0: 6572 7452 5043 4572 726f 7228 786d 6c72  ertRPCError(xmlr
-00014dd0: 7063 2e46 6175 6c74 732e 4241 445f 4e41  pc.Faults.BAD_NA
-00014de0: 4d45 2c0d 0a20 2020 2020 2020 2020 2020  ME,..           
-00014df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014e00: 2020 696e 7465 7266 6163 652e 636c 6561    interface.clea
-00014e10: 7250 726f 6365 7373 4c6f 6773 2c0d 0a20  rProcessLogs,.. 
-00014e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014e30: 2020 2020 2020 2020 2020 2020 2766 6f6f              'foo
-00014e40: 3a2a 2729 0d0a 0d0a 2020 2020 6465 6620  :*')....    def 
-00014e50: 7465 7374 5f63 6c65 6172 5072 6f63 6573  test_clearProces
-00014e60: 734c 6f67 7328 7365 6c66 293a 0d0a 2020  sLogs(self):..  
-00014e70: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-00014e80: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-00014e90: 2020 2020 2020 2020 7063 6f6e 6669 6720          pconfig 
-00014ea0: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
-00014eb0: 7074 696f 6e73 2c20 2766 6f6f 272c 2027  ptions, 'foo', '
-00014ec0: 666f 6f27 290d 0a20 2020 2020 2020 2070  foo')..        p
-00014ed0: 726f 6365 7373 203d 2044 756d 6d79 5072  rocess = DummyPr
-00014ee0: 6f63 6573 7328 7063 6f6e 6669 6729 0d0a  ocess(pconfig)..
-00014ef0: 2020 2020 2020 2020 7067 726f 7570 203d          pgroup =
-00014f00: 2044 756d 6d79 5072 6f63 6573 7347 726f   DummyProcessGro
-00014f10: 7570 284e 6f6e 6529 0d0a 2020 2020 2020  up(None)..      
-00014f20: 2020 7067 726f 7570 2e70 726f 6365 7373    pgroup.process
-00014f30: 6573 203d 207b 2766 6f6f 273a 2070 726f  es = {'foo': pro
-00014f40: 6365 7373 7d0d 0a20 2020 2020 2020 2073  cess}..        s
-00014f50: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-00014f60: 6d79 5375 7065 7276 6973 6f72 2870 726f  mySupervisor(pro
-00014f70: 6365 7373 5f67 726f 7570 733d 7b27 666f  cess_groups={'fo
-00014f80: 6f27 3a20 7067 726f 7570 7d29 0d0a 2020  o': pgroup})..  
-00014f90: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-00014fa0: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-00014fb0: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
-00014fc0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-00014fd0: 636c 6561 7250 726f 6365 7373 4c6f 6773  clearProcessLogs
-00014fe0: 2827 666f 6f27 290d 0a20 2020 2020 2020  ('foo')..       
-00014ff0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00015000: 6c28 7072 6f63 6573 732e 6c6f 6773 7265  l(process.logsre
-00015010: 6d6f 7665 642c 2054 7275 6529 0d0a 0d0a  moved, True)....
-00015020: 2020 2020 6465 6620 7465 7374 5f63 6c65      def test_cle
-00015030: 6172 5072 6f63 6573 734c 6f67 735f 6661  arProcessLogs_fa
-00015040: 696c 6564 2873 656c 6629 3a0d 0a20 2020  iled(self):..   
-00015050: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
-00015060: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
-00015070: 7063 0d0a 2020 2020 2020 2020 6f70 7469  pc..        opti
-00015080: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-00015090: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-000150a0: 6f6e 6669 6720 3d20 4475 6d6d 7950 436f  onfig = DummyPCo
-000150b0: 6e66 6967 286f 7074 696f 6e73 2c20 2766  nfig(options, 'f
-000150c0: 6f6f 272c 2027 666f 6f27 290d 0a20 2020  oo', 'foo')..   
-000150d0: 2020 2020 2070 726f 6365 7373 203d 2044       process = D
-000150e0: 756d 6d79 5072 6f63 6573 7328 7063 6f6e  ummyProcess(pcon
-000150f0: 6669 6729 0d0a 2020 2020 2020 2020 7067  fig)..        pg
-00015100: 726f 7570 203d 2044 756d 6d79 5072 6f63  roup = DummyProc
-00015110: 6573 7347 726f 7570 284e 6f6e 6529 0d0a  essGroup(None)..
-00015120: 2020 2020 2020 2020 7067 726f 7570 2e70          pgroup.p
-00015130: 726f 6365 7373 6573 203d 207b 2766 6f6f  rocesses = {'foo
-00015140: 273a 2070 726f 6365 7373 7d0d 0a20 2020  ': process}..   
-00015150: 2020 2020 2070 726f 6365 7373 2e65 7272       process.err
-00015160: 6f72 5f61 745f 636c 6561 7220 3d20 5472  or_at_clear = Tr
-00015170: 7565 0d0a 2020 2020 2020 2020 7375 7065  ue..        supe
-00015180: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
-00015190: 7570 6572 7669 736f 7228 7072 6f63 6573  upervisor(proces
-000151a0: 735f 6772 6f75 7073 3d7b 2766 6f6f 273a  s_groups={'foo':
-000151b0: 2070 6772 6f75 707d 290d 0a20 2020 2020   pgroup})..     
-000151c0: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
-000151d0: 656c 662e 5f6d 616b 654f 6e65 2873 7570  elf._makeOne(sup
-000151e0: 6572 7669 736f 7264 290d 0a20 2020 2020  ervisord)..     
-000151f0: 2020 2073 656c 662e 6173 7365 7274 5261     self.assertRa
-00015200: 6973 6573 2878 6d6c 7270 632e 5250 4345  ises(xmlrpc.RPCE
-00015210: 7272 6f72 2c20 696e 7465 7266 6163 652e  rror, interface.
-00015220: 636c 6561 7250 726f 6365 7373 4c6f 6773  clearProcessLogs
-00015230: 2c20 2766 6f6f 2729 0d0a 0d0a 2020 2020  , 'foo')....    
-00015240: 6465 6620 7465 7374 5f63 6c65 6172 5072  def test_clearPr
-00015250: 6f63 6573 734c 6f67 416c 6961 7365 6454  ocessLogAliasedT
-00015260: 6f5f 636c 6561 7250 726f 6365 7373 4c6f  o_clearProcessLo
-00015270: 6773 2873 656c 6629 3a0d 0a20 2020 2020  gs(self):..     
-00015280: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
-00015290: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
-000152a0: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
-000152b0: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
-000152c0: 6f6e 732c 2027 666f 6f27 2c20 272f 6269  ons, 'foo', '/bi
-000152d0: 6e2f 666f 6f27 290d 0a20 2020 2020 2020  n/foo')..       
-000152e0: 2073 7570 6572 7669 736f 7264 203d 2050   supervisord = P
-000152f0: 6f70 756c 6174 6564 4475 6d6d 7953 7570  opulatedDummySup
-00015300: 6572 7669 736f 7228 6f70 7469 6f6e 732c  ervisor(options,
-00015310: 2027 666f 6f27 2c20 7063 6f6e 6669 6729   'foo', pconfig)
-00015320: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
-00015330: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
-00015340: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
-00015350: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00015360: 7373 6572 7445 7175 616c 2869 6e74 6572  ssertEqual(inter
-00015370: 6661 6365 2e63 6c65 6172 5072 6f63 6573  face.clearProces
-00015380: 734c 6f67 2c0d 0a20 2020 2020 2020 2020  sLog,..         
+000145c0: 662e 6173 7365 7274 4571 7561 6c28 6461  f.assertEqual(da
+000145d0: 7461 2c20 2727 290d 0a0d 0a20 2020 2020  ta, '')....     
+000145e0: 2020 2020 2020 2023 206f 6666 7365 7420         # offset 
+000145f0: 3e20 6c6f 6773 697a 650d 0a20 2020 2020  > logsize..     
+00014600: 2020 2020 2020 2064 6174 612c 206f 6666         data, off
+00014610: 7365 742c 206f 7665 7266 6c6f 7720 3d20  set, overflow = 
+00014620: 696e 7465 7266 6163 652e 7461 696c 5072  interface.tailPr
+00014630: 6f63 6573 7353 7464 6572 724c 6f67 2827  ocessStderrLog('
+00014640: 666f 6f27 2c0d 0a20 2020 2020 2020 2020  foo',..         
+00014650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014680: 2020 2020 2020 2020 2020 206f 6666 7365             offse
+00014690: 743d 6c65 6e28 6c65 7474 6572 7329 202b  t=len(letters) +
+000146a0: 2035 2c0d 0a20 2020 2020 2020 2020 2020   5,..           
+000146b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000146c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000146d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000146e0: 2020 2020 2020 2020 206c 656e 6774 683d           length=
+000146f0: 3130 3029 0d0a 2020 2020 2020 2020 2020  100)..          
+00014700: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00014710: 616c 2869 6e74 6572 6661 6365 2e75 7064  al(interface.upd
+00014720: 6174 655f 7465 7874 2c20 2774 6169 6c50  ate_text, 'tailP
+00014730: 726f 6365 7373 5374 6465 7272 4c6f 6727  rocessStderrLog'
+00014740: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00014750: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00014760: 6f76 6572 666c 6f77 2c20 4661 6c73 6529  overflow, False)
+00014770: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00014780: 6c66 2e61 7373 6572 7445 7175 616c 286f  lf.assertEqual(o
+00014790: 6666 7365 742c 206c 656e 286c 6574 7465  ffset, len(lette
+000147a0: 7273 2929 0d0a 2020 2020 2020 2020 2020  rs))..          
+000147b0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+000147c0: 616c 2864 6174 612c 2027 2729 0d0a 2020  al(data, '')..  
+000147d0: 2020 2020 2020 6669 6e61 6c6c 793a 0d0a        finally:..
+000147e0: 2020 2020 2020 2020 2020 2020 6f73 2e72              os.r
+000147f0: 656d 6f76 6528 6c6f 6766 696c 6529 0d0a  emove(logfile)..
+00014800: 0d0a 2020 2020 6465 6620 7465 7374 5f74  ..    def test_t
+00014810: 6169 6c50 726f 6365 7373 5374 6465 7272  ailProcessStderr
+00014820: 4c6f 675f 6f76 6572 666c 6f77 2873 656c  Log_overflow(sel
+00014830: 6629 3a0d 0a20 2020 2020 2020 2023 2074  f):..        # t
+00014840: 6573 7420 6275 6666 6572 206f 7665 7266  est buffer overf
+00014850: 6c6f 7720 6f63 6375 7273 2077 6865 6e20  low occurs when 
+00014860: 6c6f 6773 697a 6520 3e20 6f66 6673 6574  logsize > offset
+00014870: 2b6c 656e 6774 680d 0a20 2020 2020 2020  +length..       
+00014880: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00014890: 2e63 6f6d 7061 7420 696d 706f 7274 206c  .compat import l
+000148a0: 6574 7465 7273 0d0a 2020 2020 2020 2020  etters..        
+000148b0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+000148c0: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+000148d0: 2020 7063 6f6e 6669 6720 3d20 4475 6d6d    pconfig = Dumm
+000148e0: 7950 436f 6e66 6967 286f 7074 696f 6e73  yPConfig(options
+000148f0: 2c20 2766 6f6f 272c 2027 2f62 696e 2f66  , 'foo', '/bin/f
+00014900: 6f6f 272c 0d0a 2020 2020 2020 2020 2020  oo',..          
+00014910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014920: 2020 2020 2073 7464 6572 725f 6c6f 6766       stderr_logf
+00014930: 696c 653d 5465 6d70 4669 6c65 4f70 656e  ile=TempFileOpen
+00014940: 2e6d 616b 655f 7061 7468 2827 7374 6465  .make_path('stde
+00014950: 7272 2d6c 6f67 6669 6c65 2d32 2e6c 6f67  rr-logfile-2.log
+00014960: 2729 290d 0a20 2020 2020 2020 2073 7570  '))..        sup
+00014970: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
+00014980: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
+00014990: 736f 7228 6f70 7469 6f6e 732c 2027 666f  sor(options, 'fo
+000149a0: 6f27 2c20 7063 6f6e 6669 6729 0d0a 2020  o', pconfig)..  
+000149b0: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+000149c0: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+000149d0: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+000149e0: 2020 2020 2020 7072 6f63 6573 7320 3d20        process = 
+000149f0: 7375 7065 7276 6973 6f72 642e 7072 6f63  supervisord.proc
+00014a00: 6573 735f 6772 6f75 7073 5b27 666f 6f27  ess_groups['foo'
+00014a10: 5d2e 7072 6f63 6573 7365 735b 2766 6f6f  ].processes['foo
+00014a20: 275d 0d0a 2020 2020 2020 2020 6c6f 6766  ']..        logf
+00014a30: 696c 6520 3d20 7072 6f63 6573 732e 636f  ile = process.co
+00014a40: 6e66 6967 2e73 7464 6572 725f 6c6f 6766  nfig.stderr_logf
+00014a50: 696c 650d 0a20 2020 2020 2020 2074 7279  ile..        try
+00014a60: 3a0d 0a20 2020 2020 2020 2020 2020 2077  :..            w
+00014a70: 6974 6820 6f70 656e 286c 6f67 6669 6c65  ith open(logfile
+00014a80: 2c20 2777 2b27 2920 6173 2066 3a0d 0a20  , 'w+') as f:.. 
+00014a90: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00014aa0: 2e77 7269 7465 286c 6574 7465 7273 290d  .write(letters).
+00014ab0: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+00014ac0: 6174 612c 206f 6666 7365 742c 206f 7665  ata, offset, ove
+00014ad0: 7266 6c6f 7720 3d20 696e 7465 7266 6163  rflow = interfac
+00014ae0: 652e 7461 696c 5072 6f63 6573 7353 7464  e.tailProcessStd
+00014af0: 6572 724c 6f67 2827 666f 6f27 2c0d 0a20  errLog('foo',.. 
+00014b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b40: 2020 206f 6666 7365 743d 302c 206c 656e     offset=0, len
+00014b50: 6774 683d 3529 0d0a 2020 2020 2020 2020  gth=5)..        
+00014b60: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00014b70: 7175 616c 2869 6e74 6572 6661 6365 2e75  qual(interface.u
+00014b80: 7064 6174 655f 7465 7874 2c20 2774 6169  pdate_text, 'tai
+00014b90: 6c50 726f 6365 7373 5374 6465 7272 4c6f  lProcessStderrLo
+00014ba0: 6727 290d 0a20 2020 2020 2020 2020 2020  g')..           
+00014bb0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00014bc0: 6c28 6f76 6572 666c 6f77 2c20 5472 7565  l(overflow, True
+00014bd0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00014be0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00014bf0: 6f66 6673 6574 2c20 6c65 6e28 6c65 7474  offset, len(lett
+00014c00: 6572 7329 290d 0a20 2020 2020 2020 2020  ers))..         
+00014c10: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00014c20: 7561 6c28 6461 7461 2c20 6c65 7474 6572  ual(data, letter
+00014c30: 735b 2d35 3a5d 290d 0a20 2020 2020 2020  s[-5:])..       
+00014c40: 2066 696e 616c 6c79 3a0d 0a20 2020 2020   finally:..     
+00014c50: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
+00014c60: 286c 6f67 6669 6c65 290d 0a0d 0a20 2020  (logfile)....   
+00014c70: 2064 6566 2074 6573 745f 7461 696c 5072   def test_tailPr
+00014c80: 6f63 6573 7353 7464 6572 724c 6f67 5f75  ocessStderrLog_u
+00014c90: 6e72 6561 6461 626c 6528 7365 6c66 293a  nreadable(self):
+00014ca0: 0d0a 2020 2020 2020 2020 2320 7465 7374  ..        # test
+00014cb0: 206e 6f74 6869 6e67 2069 7320 7265 7475   nothing is retu
+00014cc0: 726e 6564 2069 6620 7468 6520 6c6f 6720  rned if the log 
+00014cd0: 646f 6573 6e27 7420 6578 6973 7420 7965  doesn't exist ye
+00014ce0: 740d 0a20 2020 2020 2020 206f 7074 696f  t..        optio
+00014cf0: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+00014d00: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+00014d10: 6e66 6967 203d 2044 756d 6d79 5043 6f6e  nfig = DummyPCon
+00014d20: 6669 6728 6f70 7469 6f6e 732c 2027 666f  fig(options, 'fo
+00014d30: 6f27 2c20 272f 6269 6e2f 666f 6f27 2c0d  o', '/bin/foo',.
+00014d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014d60: 7374 6465 7272 5f6c 6f67 6669 6c65 3d27  stderr_logfile='
+00014d70: 2f74 6d70 2f66 6f6f 6f6f 6f6f 6f27 290d  /tmp/fooooooo').
+00014d80: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00014d90: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
+00014da0: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
+00014db0: 6f70 7469 6f6e 732c 2027 666f 6f27 2c20  options, 'foo', 
+00014dc0: 7063 6f6e 6669 6729 0d0a 2020 2020 2020  pconfig)..      
+00014dd0: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
+00014de0: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
+00014df0: 7276 6973 6f72 6429 0d0a 0d0a 2020 2020  rvisord)....    
+00014e00: 2020 2020 6461 7461 2c20 6f66 6673 6574      data, offset
+00014e10: 2c20 6f76 6572 666c 6f77 203d 2069 6e74  , overflow = int
+00014e20: 6572 6661 6365 2e74 6169 6c50 726f 6365  erface.tailProce
+00014e30: 7373 5374 6465 7272 4c6f 6728 2766 6f6f  ssStderrLog('foo
+00014e40: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00014e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014e80: 2020 2020 6f66 6673 6574 3d30 2c20 6c65      offset=0, le
+00014e90: 6e67 7468 3d31 3030 290d 0a20 2020 2020  ngth=100)..     
+00014ea0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00014eb0: 7561 6c28 696e 7465 7266 6163 652e 7570  ual(interface.up
+00014ec0: 6461 7465 5f74 6578 742c 2027 7461 696c  date_text, 'tail
+00014ed0: 5072 6f63 6573 7353 7464 6572 724c 6f67  ProcessStderrLog
+00014ee0: 2729 0d0a 2020 2020 2020 2020 7365 6c66  ')..        self
+00014ef0: 2e61 7373 6572 7445 7175 616c 286f 7665  .assertEqual(ove
+00014f00: 7266 6c6f 772c 2046 616c 7365 290d 0a20  rflow, False).. 
+00014f10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00014f20: 7274 4571 7561 6c28 6f66 6673 6574 2c20  rtEqual(offset, 
+00014f30: 3029 0d0a 2020 2020 2020 2020 7365 6c66  0)..        self
+00014f40: 2e61 7373 6572 7445 7175 616c 2864 6174  .assertEqual(dat
+00014f50: 612c 2027 2729 0d0a 0d0a 2020 2020 6465  a, '')....    de
+00014f60: 6620 7465 7374 5f63 6c65 6172 5072 6f63  f test_clearProc
+00014f70: 6573 734c 6f67 735f 6261 645f 6e61 6d65  essLogs_bad_name
+00014f80: 5f6e 6f5f 6772 6f75 7028 7365 6c66 293a  _no_group(self):
+00014f90: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00014fa0: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
+00014fb0: 2078 6d6c 7270 630d 0a20 2020 2020 2020   xmlrpc..       
+00014fc0: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+00014fd0: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
+00014fe0: 2020 2070 636f 6e66 6967 203d 2044 756d     pconfig = Dum
+00014ff0: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+00015000: 732c 2027 666f 6f27 2c20 2766 6f6f 2729  s, 'foo', 'foo')
+00015010: 0d0a 2020 2020 2020 2020 7072 6f63 6573  ..        proces
+00015020: 7320 3d20 4475 6d6d 7950 726f 6365 7373  s = DummyProcess
+00015030: 2870 636f 6e66 6967 290d 0a20 2020 2020  (pconfig)..     
+00015040: 2020 2070 6772 6f75 7020 3d20 4475 6d6d     pgroup = Dumm
+00015050: 7950 726f 6365 7373 4772 6f75 7028 4e6f  yProcessGroup(No
+00015060: 6e65 290d 0a20 2020 2020 2020 2070 6772  ne)..        pgr
+00015070: 6f75 702e 7072 6f63 6573 7365 7320 3d20  oup.processes = 
+00015080: 7b27 666f 6f27 3a20 7072 6f63 6573 737d  {'foo': process}
+00015090: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
+000150a0: 6973 6f72 6420 3d20 4475 6d6d 7953 7570  isord = DummySup
+000150b0: 6572 7669 736f 7228 7072 6f63 6573 735f  ervisor(process_
+000150c0: 6772 6f75 7073 3d7b 2766 6f6f 273a 2070  groups={'foo': p
+000150d0: 6772 6f75 707d 290d 0a20 2020 2020 2020  group})..       
+000150e0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+000150f0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+00015100: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00015110: 2073 656c 662e 5f61 7373 6572 7452 5043   self._assertRPC
+00015120: 4572 726f 7228 786d 6c72 7063 2e46 6175  Error(xmlrpc.Fau
+00015130: 6c74 732e 4241 445f 4e41 4d45 2c0d 0a20  lts.BAD_NAME,.. 
+00015140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015150: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00015160: 7266 6163 652e 636c 6561 7250 726f 6365  rface.clearProce
+00015170: 7373 4c6f 6773 2c0d 0a20 2020 2020 2020  ssLogs,..       
+00015180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015190: 2020 2020 2020 2762 6164 6772 6f75 7027        'badgroup'
+000151a0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+000151b0: 745f 636c 6561 7250 726f 6365 7373 4c6f  t_clearProcessLo
+000151c0: 6773 5f62 6164 5f6e 616d 655f 6e6f 5f70  gs_bad_name_no_p
+000151d0: 726f 6365 7373 2873 656c 6629 3a0d 0a20  rocess(self):.. 
+000151e0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
+000151f0: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
+00015200: 6c72 7063 0d0a 2020 2020 2020 2020 6f70  lrpc..        op
+00015210: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+00015220: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
+00015230: 7063 6f6e 6669 6720 3d20 4475 6d6d 7950  pconfig = DummyP
+00015240: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
+00015250: 2766 6f6f 272c 2027 666f 6f27 290d 0a20  'foo', 'foo').. 
+00015260: 2020 2020 2020 2070 726f 6365 7373 203d         process =
+00015270: 2044 756d 6d79 5072 6f63 6573 7328 7063   DummyProcess(pc
+00015280: 6f6e 6669 6729 0d0a 2020 2020 2020 2020  onfig)..        
+00015290: 7067 726f 7570 203d 2044 756d 6d79 5072  pgroup = DummyPr
+000152a0: 6f63 6573 7347 726f 7570 284e 6f6e 6529  ocessGroup(None)
+000152b0: 0d0a 2020 2020 2020 2020 7067 726f 7570  ..        pgroup
+000152c0: 2e70 726f 6365 7373 6573 203d 207b 2766  .processes = {'f
+000152d0: 6f6f 273a 2070 726f 6365 7373 7d0d 0a20  oo': process}.. 
+000152e0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+000152f0: 7264 203d 2044 756d 6d79 5375 7065 7276  rd = DummySuperv
+00015300: 6973 6f72 2870 726f 6365 7373 5f67 726f  isor(process_gro
+00015310: 7570 733d 7b27 666f 6f27 3a20 7067 726f  ups={'foo': pgro
+00015320: 7570 7d29 0d0a 2020 2020 2020 2020 696e  up})..        in
+00015330: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00015340: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00015350: 6f72 6429 0d0a 2020 2020 2020 2020 7365  ord)..        se
+00015360: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
+00015370: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
+00015380: 2e42 4144 5f4e 414d 452c 0d0a 2020 2020  .BAD_NAME,..    
 00015390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153a0: 696e 7465 7266 6163 652e 636c 6561 7250  interface.clearP
-000153b0: 726f 6365 7373 4c6f 6773 290d 0a0d 0a20  rocessLogs).... 
-000153c0: 2020 2064 6566 2074 6573 745f 636c 6561     def test_clea
-000153d0: 7241 6c6c 5072 6f63 6573 734c 6f67 7328  rAllProcessLogs(
-000153e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000153f0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00015400: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00015410: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
-00015420: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00015430: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
-00015440: 666f 6f27 2c20 7072 696f 7269 7479 3d31  foo', priority=1
-00015450: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-00015460: 6967 3220 3d20 4475 6d6d 7950 436f 6e66  ig2 = DummyPConf
-00015470: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-00015480: 6365 7373 3227 2c20 2762 6172 272c 2070  cess2', 'bar', p
-00015490: 7269 6f72 6974 793d 3229 0d0a 2020 2020  riority=2)..    
-000154a0: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
-000154b0: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
-000154c0: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
-000154d0: 6e73 2c20 2766 6f6f 272c 2070 636f 6e66  ns, 'foo', pconf
-000154e0: 6967 312c 0d0a 2020 2020 2020 2020 2020  ig1,..          
-000154f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015510: 2020 2020 2070 636f 6e66 6967 3229 0d0a       pconfig2)..
-00015520: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00015530: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00015540: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00015550: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-00015560: 203d 2069 6e74 6572 6661 6365 2e63 6c65   = interface.cle
-00015570: 6172 416c 6c50 726f 6365 7373 4c6f 6773  arAllProcessLogs
-00015580: 2829 0d0a 2020 2020 2020 2020 6361 6c6c  ()..        call
-00015590: 6261 636b 2829 0d0a 2020 2020 2020 2020  back()..        
-000155a0: 7265 7375 6c74 7320 3d20 6361 6c6c 6261  results = callba
-000155b0: 636b 2829 0d0a 2020 2020 2020 2020 6672  ck()..        fr
-000155c0: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
-000155d0: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
-000155e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000155f0: 4571 7561 6c28 7265 7375 6c74 735b 305d  Equal(results[0]
-00015600: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00015610: 2020 2020 2020 2020 2020 2020 7b27 6e61              {'na
-00015620: 6d65 273a 2027 7072 6f63 6573 7331 272c  me': 'process1',
-00015630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015640: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
-00015650: 7570 273a 2027 666f 6f27 2c0d 0a20 2020  up': 'foo',..   
-00015660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015670: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-00015680: 2078 6d6c 7270 632e 4661 756c 7473 2e53   xmlrpc.Faults.S
-00015690: 5543 4345 5353 2c0d 0a20 2020 2020 2020  UCCESS,..       
-000156a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156b0: 2020 2027 6465 7363 7269 7074 696f 6e27     'description'
-000156c0: 3a20 274f 4b27 7d29 0d0a 2020 2020 2020  : 'OK'})..      
-000156d0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000156e0: 616c 2872 6573 756c 7473 5b31 5d2c 0d0a  al(results[1],..
-000156f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015700: 2020 2020 2020 2020 207b 276e 616d 6527           {'name'
-00015710: 3a20 2770 726f 6365 7373 3227 2c0d 0a20  : 'process2',.. 
-00015720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015730: 2020 2020 2020 2020 2027 6772 6f75 7027           'group'
-00015740: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-00015750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015760: 2020 2020 2773 7461 7475 7327 3a20 786d      'status': xm
-00015770: 6c72 7063 2e46 6175 6c74 732e 5355 4343  lrpc.Faults.SUCC
-00015780: 4553 532c 0d0a 2020 2020 2020 2020 2020  ESS,..          
-00015790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157a0: 2764 6573 6372 6970 7469 6f6e 273a 2027  'description': '
-000157b0: 4f4b 277d 290d 0a20 2020 2020 2020 2070  OK'})..        p
-000157c0: 726f 6365 7373 3120 3d20 7375 7065 7276  rocess1 = superv
-000157d0: 6973 6f72 642e 7072 6f63 6573 735f 6772  isord.process_gr
-000157e0: 6f75 7073 5b27 666f 6f27 5d2e 7072 6f63  oups['foo'].proc
-000157f0: 6573 7365 735b 2770 726f 6365 7373 3127  esses['process1'
-00015800: 5d0d 0a20 2020 2020 2020 2073 656c 662e  ]..        self.
-00015810: 6173 7365 7274 4571 7561 6c28 7072 6f63  assertEqual(proc
-00015820: 6573 7331 2e6c 6f67 7372 656d 6f76 6564  ess1.logsremoved
-00015830: 2c20 5472 7565 290d 0a20 2020 2020 2020  , True)..       
-00015840: 2070 726f 6365 7373 3220 3d20 7375 7065   process2 = supe
-00015850: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
-00015860: 6772 6f75 7073 5b27 666f 6f27 5d2e 7072  groups['foo'].pr
-00015870: 6f63 6573 7365 735b 2770 726f 6365 7373  ocesses['process
-00015880: 3227 5d0d 0a20 2020 2020 2020 2073 656c  2']..        sel
-00015890: 662e 6173 7365 7274 4571 7561 6c28 7072  f.assertEqual(pr
-000158a0: 6f63 6573 7332 2e6c 6f67 7372 656d 6f76  ocess2.logsremov
-000158b0: 6564 2c20 5472 7565 290d 0a0d 0a20 2020  ed, True)....   
-000158c0: 2064 6566 2074 6573 745f 636c 6561 7241   def test_clearA
-000158d0: 6c6c 5072 6f63 6573 734c 6f67 735f 6f6e  llProcessLogs_on
-000158e0: 6566 6169 6c73 2873 656c 6629 3a0d 0a20  efails(self):.. 
-000158f0: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-00015900: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-00015910: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00015920: 3120 3d20 4475 6d6d 7950 436f 6e66 6967  1 = DummyPConfig
-00015930: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00015940: 7373 3127 2c20 2766 6f6f 272c 2070 7269  ss1', 'foo', pri
-00015950: 6f72 6974 793d 3129 0d0a 2020 2020 2020  ority=1)..      
-00015960: 2020 7063 6f6e 6669 6732 203d 2044 756d    pconfig2 = Dum
-00015970: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00015980: 732c 2027 7072 6f63 6573 7332 272c 2027  s, 'process2', '
-00015990: 6261 7227 2c20 7072 696f 7269 7479 3d32  bar', priority=2
-000159a0: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
-000159b0: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
-000159c0: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
-000159d0: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
-000159e0: 2c20 7063 6f6e 6669 6731 2c0d 0a20 2020  , pconfig1,..   
-000159f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015a10: 2020 2020 2020 2020 2020 2020 7063 6f6e              pcon
-00015a20: 6669 6732 290d 0a20 2020 2020 2020 2073  fig2)..        s
-00015a30: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
-00015a40: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
-00015a50: 3127 2c20 2765 7272 6f72 5f61 745f 636c  1', 'error_at_cl
-00015a60: 6561 7227 2c20 5472 7565 290d 0a20 2020  ear', True)..   
-00015a70: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
-00015a80: 2073 656c 662e 5f6d 616b 654f 6e65 2873   self._makeOne(s
-00015a90: 7570 6572 7669 736f 7264 290d 0a20 2020  upervisord)..   
-00015aa0: 2020 2020 2063 616c 6c62 6163 6b20 3d20       callback = 
-00015ab0: 696e 7465 7266 6163 652e 636c 6561 7241  interface.clearA
-00015ac0: 6c6c 5072 6f63 6573 734c 6f67 7328 290d  llProcessLogs().
-00015ad0: 0a20 2020 2020 2020 2063 616c 6c62 6163  .        callbac
-00015ae0: 6b28 290d 0a20 2020 2020 2020 2072 6573  k()..        res
-00015af0: 756c 7473 203d 2063 616c 6c62 6163 6b28  ults = callback(
-00015b00: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
-00015b10: 7373 3120 3d20 7375 7065 7276 6973 6f72  ss1 = supervisor
-00015b20: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
-00015b30: 5b27 666f 6f27 5d2e 7072 6f63 6573 7365  ['foo'].processe
-00015b40: 735b 2770 726f 6365 7373 3127 5d0d 0a20  s['process1'].. 
-00015b50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00015b60: 7274 4571 7561 6c28 7072 6f63 6573 7331  rtEqual(process1
-00015b70: 2e6c 6f67 7372 656d 6f76 6564 2c20 4661  .logsremoved, Fa
-00015b80: 6c73 6529 0d0a 2020 2020 2020 2020 7072  lse)..        pr
-00015b90: 6f63 6573 7332 203d 2073 7570 6572 7669  ocess2 = supervi
-00015ba0: 736f 7264 2e70 726f 6365 7373 5f67 726f  sord.process_gro
-00015bb0: 7570 735b 2766 6f6f 275d 2e70 726f 6365  ups['foo'].proce
-00015bc0: 7373 6573 5b27 7072 6f63 6573 7332 275d  sses['process2']
-00015bd0: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00015be0: 7373 6572 7445 7175 616c 2870 726f 6365  ssertEqual(proce
-00015bf0: 7373 322e 6c6f 6773 7265 6d6f 7665 642c  ss2.logsremoved,
-00015c00: 2054 7275 6529 0d0a 2020 2020 2020 2020   True)..        
-00015c10: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00015c20: 286c 656e 2872 6573 756c 7473 292c 2032  (len(results), 2
-00015c30: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00015c40: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00015c50: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-00015c60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00015c70: 616c 2872 6573 756c 7473 5b30 5d2c 0d0a  al(results[0],..
-00015c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015c90: 2020 2020 2020 2020 207b 276e 616d 6527           {'name'
-00015ca0: 3a20 2770 726f 6365 7373 3127 2c0d 0a20  : 'process1',.. 
-00015cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015cc0: 2020 2020 2020 2020 2027 6772 6f75 7027           'group'
-00015cd0: 3a20 2766 6f6f 272c 0d0a 2020 2020 2020  : 'foo',..      
-00015ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015cf0: 2020 2020 2773 7461 7475 7327 3a20 786d      'status': xm
-00015d00: 6c72 7063 2e46 6175 6c74 732e 4641 494c  lrpc.Faults.FAIL
-00015d10: 4544 2c0d 0a20 2020 2020 2020 2020 2020  ED,..           
-00015d20: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00015d30: 6465 7363 7269 7074 696f 6e27 3a20 2746  description': 'F
-00015d40: 4149 4c45 443a 2066 6f6f 3a70 726f 6365  AILED: foo:proce
-00015d50: 7373 3127 7d29 0d0a 2020 2020 2020 2020  ss1'})..        
-00015d60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00015d70: 2872 6573 756c 7473 5b31 5d2c 0d0a 2020  (results[1],..  
-00015d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d90: 2020 2020 2020 207b 276e 616d 6527 3a20         {'name': 
-00015da0: 2770 726f 6365 7373 3227 2c0d 0a20 2020  'process2',..   
-00015db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015dc0: 2020 2020 2020 2027 6772 6f75 7027 3a20         'group': 
-00015dd0: 2766 6f6f 272c 0d0a 2020 2020 2020 2020  'foo',..        
-00015de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015df0: 2020 2773 7461 7475 7327 3a20 786d 6c72    'status': xmlr
-00015e00: 7063 2e46 6175 6c74 732e 5355 4343 4553  pc.Faults.SUCCES
-00015e10: 532c 0d0a 2020 2020 2020 2020 2020 2020  S,..            
-00015e20: 2020 2020 2020 2020 2020 2020 2020 2764                'd
-00015e30: 6573 6372 6970 7469 6f6e 273a 2027 4f4b  escription': 'OK
-00015e40: 277d 290d 0a0d 0a20 2020 2064 6566 2074  '})....    def t
-00015e50: 6573 745f 636c 6561 7241 6c6c 5072 6f63  est_clearAllProc
-00015e60: 6573 734c 6f67 735f 6e6f 5f70 726f 6365  essLogs_no_proce
-00015e70: 7373 6573 2873 656c 6629 3a0d 0a20 2020  sses(self):..   
-00015e80: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00015e90: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
-00015ea0: 6f72 2829 0d0a 2020 2020 2020 2020 7365  or()..        se
-00015eb0: 6c66 2e61 7373 6572 7445 7175 616c 2873  lf.assertEqual(s
-00015ec0: 7570 6572 7669 736f 7264 2e70 726f 6365  upervisord.proce
-00015ed0: 7373 5f67 726f 7570 732c 207b 7d29 0d0a  ss_groups, {})..
-00015ee0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-00015ef0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-00015f00: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00015f10: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-00015f20: 203d 2069 6e74 6572 6661 6365 2e63 6c65   = interface.cle
-00015f30: 6172 416c 6c50 726f 6365 7373 4c6f 6773  arAllProcessLogs
-00015f40: 2829 0d0a 2020 2020 2020 2020 7265 7375  ()..        resu
-00015f50: 6c74 7320 3d20 6361 6c6c 6261 636b 2829  lts = callback()
-00015f60: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00015f70: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
-00015f80: 7473 2c20 5b5d 290d 0a0d 0a20 2020 2064  ts, [])....    d
-00015f90: 6566 2074 6573 745f 7365 6e64 5072 6f63  ef test_sendProc
-00015fa0: 6573 7353 7464 696e 5f72 6169 7365 735f  essStdin_raises_
-00015fb0: 696e 636f 7272 6563 745f 7061 7261 6d73  incorrect_params
-00015fc0: 5f77 6865 6e5f 6e6f 745f 6368 6172 7328  _when_not_chars(
-00015fd0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00015fe0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
-00015ff0: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
-00016000: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
-00016010: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
-00016020: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
-00016030: 666f 6f27 290d 0a20 2020 2020 2020 2073  foo')..        s
-00016040: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
-00016050: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
-00016060: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
-00016070: 666f 6f27 2c20 7063 6f6e 6669 6731 290d  foo', pconfig1).
-00016080: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00016090: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-000160a0: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-000160b0: 0a20 2020 2020 2020 2074 6869 6e67 5f6e  .        thing_n
-000160c0: 6f74 5f63 6861 7273 203d 2034 320d 0a20  ot_chars = 42.. 
-000160d0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-000160e0: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
-000160f0: 6c72 7063 0d0a 2020 2020 2020 2020 7365  lrpc..        se
-00016100: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00016110: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-00016120: 2e49 4e43 4f52 5245 4354 5f50 4152 414d  .INCORRECT_PARAM
-00016130: 4554 4552 532c 0d0a 2020 2020 2020 2020  ETERS,..        
-00016140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016150: 2020 2020 2069 6e74 6572 6661 6365 2e73       interface.s
-00016160: 656e 6450 726f 6365 7373 5374 6469 6e2c  endProcessStdin,
-00016170: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016180: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00016190: 7072 6f63 6573 7331 272c 2074 6869 6e67  process1', thing
-000161a0: 5f6e 6f74 5f63 6861 7273 290d 0a0d 0a20  _not_chars).... 
-000161b0: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
-000161c0: 5072 6f63 6573 7353 7464 696e 5f72 6169  ProcessStdin_rai
-000161d0: 7365 735f 6261 645f 6e61 6d65 5f77 6865  ses_bad_name_whe
-000161e0: 6e5f 6261 645f 7072 6f63 6573 7328 7365  n_bad_process(se
-000161f0: 6c66 293a 0d0a 2020 2020 2020 2020 7375  lf):..        su
-00016200: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
-00016210: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
-00016220: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00016230: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00016240: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
-00016250: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00016260: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
-00016270: 6c72 7063 0d0a 2020 2020 2020 2020 7365  lrpc..        se
-00016280: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00016290: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-000162a0: 2e42 4144 5f4e 414d 452c 0d0a 2020 2020  .BAD_NAME,..    
-000162b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000162c0: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
-000162d0: 6365 2e73 656e 6450 726f 6365 7373 5374  ce.sendProcessSt
-000162e0: 6469 6e2c 0d0a 2020 2020 2020 2020 2020  din,..          
-000162f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016300: 2020 2027 6e6f 6e65 7869 7374 656e 7427     'nonexistent'
-00016310: 2c20 2763 6861 7273 2066 6f72 2073 7464  , 'chars for std
-00016320: 696e 2729 0d0a 0d0a 2020 2020 6465 6620  in')....    def 
-00016330: 7465 7374 5f73 656e 6450 726f 6365 7373  test_sendProcess
-00016340: 5374 6469 6e5f 7261 6973 6573 5f62 6164  Stdin_raises_bad
-00016350: 5f6e 616d 655f 7768 656e 5f6e 6f5f 7072  _name_when_no_pr
-00016360: 6f63 6573 7328 7365 6c66 293a 0d0a 2020  ocess(self):..  
-00016370: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
-00016380: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
-00016390: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-000163a0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
-000163b0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
-000163c0: 7074 696f 6e73 2c20 2766 6f6f 2729 0d0a  ptions, 'foo')..
-000163d0: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
-000163e0: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
-000163f0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00016400: 2020 2020 2020 2020 6672 6f6d 2073 7570          from sup
-00016410: 6572 7669 736f 7220 696d 706f 7274 2078  ervisor import x
-00016420: 6d6c 7270 630d 0a20 2020 2020 2020 2073  mlrpc..        s
-00016430: 656c 662e 5f61 7373 6572 7452 5043 4572  elf._assertRPCEr
-00016440: 726f 7228 786d 6c72 7063 2e46 6175 6c74  ror(xmlrpc.Fault
-00016450: 732e 4241 445f 4e41 4d45 2c0d 0a20 2020  s.BAD_NAME,..   
-00016460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016470: 2020 2020 2020 2020 2020 696e 7465 7266            interf
-00016480: 6163 652e 7365 6e64 5072 6f63 6573 7353  ace.sendProcessS
-00016490: 7464 696e 2c0d 0a20 2020 2020 2020 2020  tdin,..         
-000164a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000164b0: 2020 2020 2766 6f6f 3a2a 272c 2027 6368      'foo:*', 'ch
-000164c0: 6172 7320 666f 7220 7374 6469 6e27 290d  ars for stdin').
-000164d0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-000164e0: 7365 6e64 5072 6f63 6573 7353 7464 696e  sendProcessStdin
-000164f0: 5f72 6169 7365 735f 6e6f 745f 7275 6e6e  _raises_not_runn
-00016500: 696e 675f 7768 656e 5f6e 6f74 5f70 726f  ing_when_not_pro
-00016510: 6365 7373 5f70 6964 2873 656c 6629 3a0d  cess_pid(self):.
-00016520: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-00016530: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
-00016540: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
-00016550: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
-00016560: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
-00016570: 6365 7373 3127 2c20 2766 6f6f 2729 0d0a  cess1', 'foo')..
-00016580: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00016590: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
-000165a0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
-000165b0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
-000165c0: 3127 2c20 7063 6f6e 6669 6731 290d 0a20  1', pconfig1).. 
-000165d0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
-000165e0: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
-000165f0: 2770 726f 6365 7373 3127 2c20 2770 6964  'process1', 'pid
-00016600: 272c 2030 290d 0a20 2020 2020 2020 2069  ', 0)..        i
-00016610: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00016620: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00016630: 736f 7264 290d 0a20 2020 2020 2020 2066  sord)..        f
-00016640: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
-00016650: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
-00016660: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
-00016670: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
-00016680: 632e 4661 756c 7473 2e4e 4f54 5f52 554e  c.Faults.NOT_RUN
-00016690: 4e49 4e47 2c0d 0a20 2020 2020 2020 2020  NING,..         
-000166a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000166b0: 2020 2020 696e 7465 7266 6163 652e 7365      interface.se
-000166c0: 6e64 5072 6f63 6573 7353 7464 696e 2c0d  ndProcessStdin,.
-000166d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000166e0: 2020 2020 2020 2020 2020 2020 2020 2770                'p
-000166f0: 726f 6365 7373 3127 2c20 2763 6861 7273  rocess1', 'chars
-00016700: 2066 6f72 2073 7464 696e 2729 0d0a 0d0a   for stdin')....
-00016710: 2020 2020 6465 6620 7465 7374 5f73 656e      def test_sen
-00016720: 6450 726f 6365 7373 5374 6469 6e5f 7261  dProcessStdin_ra
-00016730: 6973 6573 5f6e 6f74 5f72 756e 6e69 6e67  ises_not_running
-00016740: 5f77 6865 6e5f 6b69 6c6c 696e 6728 7365  _when_killing(se
-00016750: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
-00016760: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-00016770: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-00016780: 7063 6f6e 6669 6731 203d 2044 756d 6d79  pconfig1 = Dummy
-00016790: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-000167a0: 2027 7072 6f63 6573 7331 272c 2027 666f   'process1', 'fo
-000167b0: 6f27 290d 0a20 2020 2020 2020 2073 7570  o')..        sup
-000167c0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
-000167d0: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
-000167e0: 736f 7228 6f70 7469 6f6e 732c 2027 7072  sor(options, 'pr
-000167f0: 6f63 6573 7331 272c 2070 636f 6e66 6967  ocess1', pconfig
-00016800: 3129 0d0a 2020 2020 2020 2020 7375 7065  1)..        supe
-00016810: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
-00016820: 6174 7472 2827 7072 6f63 6573 7331 272c  attr('process1',
-00016830: 2027 7069 6427 2c20 3432 290d 0a20 2020   'pid', 42)..   
-00016840: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00016850: 2e73 6574 5f70 726f 6361 7474 7228 2770  .set_procattr('p
-00016860: 726f 6365 7373 3127 2c20 276b 696c 6c69  rocess1', 'killi
-00016870: 6e67 272c 2054 7275 6529 0d0a 2020 2020  ng', True)..    
-00016880: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00016890: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 7375  self._makeOne(su
-000168a0: 7065 7276 6973 6f72 6429 0d0a 2020 2020  pervisord)..    
-000168b0: 2020 2020 6672 6f6d 2073 7570 6572 7669      from supervi
-000168c0: 736f 7220 696d 706f 7274 2078 6d6c 7270  sor import xmlrp
-000168d0: 630d 0a20 2020 2020 2020 2073 656c 662e  c..        self.
-000168e0: 5f61 7373 6572 7452 5043 4572 726f 7228  _assertRPCError(
-000168f0: 786d 6c72 7063 2e46 6175 6c74 732e 4e4f  xmlrpc.Faults.NO
-00016900: 545f 5255 4e4e 494e 472c 0d0a 2020 2020  T_RUNNING,..    
-00016910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016920: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
-00016930: 6365 2e73 656e 6450 726f 6365 7373 5374  ce.sendProcessSt
-00016940: 6469 6e2c 0d0a 2020 2020 2020 2020 2020  din,..          
-00016950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016960: 2020 2027 7072 6f63 6573 7331 272c 2027     'process1', '
-00016970: 6368 6172 7320 666f 7220 7374 6469 6e27  chars for stdin'
-00016980: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00016990: 745f 7365 6e64 5072 6f63 6573 7353 7464  t_sendProcessStd
-000169a0: 696e 5f72 6169 7365 735f 6e6f 5f66 696c  in_raises_no_fil
-000169b0: 655f 7768 656e 5f77 7269 7465 5f72 6169  e_when_write_rai
-000169c0: 7365 735f 6570 6970 6528 7365 6c66 293a  ses_epipe(self):
-000169d0: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-000169e0: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-000169f0: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
-00016a00: 6669 6731 203d 2044 756d 6d79 5043 6f6e  fig1 = DummyPCon
-00016a10: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
-00016a20: 6f63 6573 7331 272c 2027 666f 6f27 290d  ocess1', 'foo').
-00016a30: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00016a40: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-00016a50: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00016a60: 6f70 7469 6f6e 732c 2027 7072 6f63 6573  options, 'proces
-00016a70: 7331 272c 2070 636f 6e66 6967 3129 0d0a  s1', pconfig1)..
-00016a80: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00016a90: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-00016aa0: 2827 7072 6f63 6573 7331 272c 2027 7069  ('process1', 'pi
-00016ab0: 6427 2c20 3432 290d 0a20 2020 2020 2020  d', 42)..       
-00016ac0: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-00016ad0: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-00016ae0: 7373 3127 2c20 276b 696c 6c69 6e67 272c  ss1', 'killing',
-00016af0: 2046 616c 7365 290d 0a20 2020 2020 2020   False)..       
-00016b00: 2073 7570 6572 7669 736f 7264 2e73 6574   supervisord.set
-00016b10: 5f70 726f 6361 7474 7228 2770 726f 6365  _procattr('proce
-00016b20: 7373 3127 2c20 2777 7269 7465 5f65 7272  ss1', 'write_err
-00016b30: 6f72 272c 2065 7272 6e6f 2e45 5049 5045  or', errno.EPIPE
-00016b40: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
-00016b50: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
-00016b60: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
-00016b70: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
-00016b80: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00016b90: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
-00016ba0: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
-00016bb0: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
-00016bc0: 756c 7473 2e4e 4f5f 4649 4c45 2c0d 0a20  ults.NO_FILE,.. 
-00016bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016be0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
-00016bf0: 7266 6163 652e 7365 6e64 5072 6f63 6573  rface.sendProces
-00016c00: 7353 7464 696e 2c0d 0a20 2020 2020 2020  sStdin,..       
-00016c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c20: 2020 2020 2020 2770 726f 6365 7373 3127        'process1'
-00016c30: 2c20 2763 6861 7273 2066 6f72 2073 7464  , 'chars for std
-00016c40: 696e 2729 0d0a 0d0a 2020 2020 6465 6620  in')....    def 
-00016c50: 7465 7374 5f73 656e 6450 726f 6365 7373  test_sendProcess
-00016c60: 5374 6469 6e5f 7265 7261 6973 6573 5f6f  Stdin_reraises_o
-00016c70: 7468 6572 5f6f 7365 7272 6f72 7328 7365  ther_oserrors(se
-00016c80: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
-00016c90: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
-00016ca0: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
-00016cb0: 7063 6f6e 6669 6731 203d 2044 756d 6d79  pconfig1 = Dummy
-00016cc0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
-00016cd0: 2027 7072 6f63 6573 7331 272c 2027 666f   'process1', 'fo
-00016ce0: 6f27 290d 0a20 2020 2020 2020 2073 7570  o')..        sup
-00016cf0: 6572 7669 736f 7264 203d 2050 6f70 756c  ervisord = Popul
-00016d00: 6174 6564 4475 6d6d 7953 7570 6572 7669  atedDummySupervi
-00016d10: 736f 7228 6f70 7469 6f6e 732c 2027 7072  sor(options, 'pr
-00016d20: 6f63 6573 7331 272c 2070 636f 6e66 6967  ocess1', pconfig
-00016d30: 3129 0d0a 2020 2020 2020 2020 7375 7065  1)..        supe
-00016d40: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
-00016d50: 6174 7472 2827 7072 6f63 6573 7331 272c  attr('process1',
-00016d60: 2027 7069 6427 2c20 3432 290d 0a20 2020   'pid', 42)..   
-00016d70: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00016d80: 2e73 6574 5f70 726f 6361 7474 7228 2770  .set_procattr('p
-00016d90: 726f 6365 7373 3127 2c20 276b 696c 6c69  rocess1', 'killi
-00016da0: 6e67 272c 2046 616c 7365 290d 0a20 2020  ng', False)..   
-00016db0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
-00016dc0: 2e73 6574 5f70 726f 6361 7474 7228 2770  .set_procattr('p
-00016dd0: 726f 6365 7373 3127 2c20 2777 7269 7465  rocess1', 'write
-00016de0: 5f65 7272 6f72 272c 2065 7272 6e6f 2e45  _error', errno.E
-00016df0: 494e 5452 290d 0a20 2020 2020 2020 2069  INTR)..        i
-00016e00: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00016e10: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00016e20: 736f 7264 290d 0a20 2020 2020 2020 2073  sord)..        s
-00016e30: 656c 662e 6173 7365 7274 5261 6973 6573  elf.assertRaises
-00016e40: 284f 5345 7272 6f72 2c0d 0a20 2020 2020  (OSError,..     
-00016e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016e60: 2020 2020 2069 6e74 6572 6661 6365 2e73       interface.s
-00016e70: 656e 6450 726f 6365 7373 5374 6469 6e2c  endProcessStdin,
-00016e80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016e90: 2020 2020 2020 2020 2020 2020 2770 726f              'pro
-00016ea0: 6365 7373 3127 2c20 2763 6861 7273 2066  cess1', 'chars f
-00016eb0: 6f72 2073 7464 696e 2729 0d0a 0d0a 2020  or stdin')....  
-00016ec0: 2020 6465 6620 7465 7374 5f73 656e 6450    def test_sendP
-00016ed0: 726f 6365 7373 5374 6469 6e5f 7772 6974  rocessStdin_writ
-00016ee0: 6573 5f63 6861 7273 5f61 6e64 5f72 6574  es_chars_and_ret
-00016ef0: 7572 6e73 5f74 7275 6528 7365 6c66 293a  urns_true(self):
-00016f00: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
-00016f10: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
-00016f20: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
-00016f30: 6669 6731 203d 2044 756d 6d79 5043 6f6e  fig1 = DummyPCon
-00016f40: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
-00016f50: 6f63 6573 7331 272c 2027 666f 6f27 290d  ocess1', 'foo').
-00016f60: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00016f70: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
-00016f80: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
-00016f90: 6f70 7469 6f6e 732c 2027 7072 6f63 6573  options, 'proces
-00016fa0: 7331 272c 2070 636f 6e66 6967 3129 0d0a  s1', pconfig1)..
-00016fb0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00016fc0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
-00016fd0: 2827 7072 6f63 6573 7331 272c 2027 7069  ('process1', 'pi
-00016fe0: 6427 2c20 3432 290d 0a20 2020 2020 2020  d', 42)..       
-00016ff0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00017000: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
-00017010: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
-00017020: 2063 6861 7273 203d 2062 2763 6861 7273   chars = b'chars
-00017030: 2066 6f72 2073 7464 696e 270d 0a20 2020   for stdin'..   
-00017040: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00017050: 5472 7565 2869 6e74 6572 6661 6365 2e73  True(interface.s
-00017060: 656e 6450 726f 6365 7373 5374 6469 6e28  endProcessStdin(
-00017070: 2770 726f 6365 7373 3127 2c20 6368 6172  'process1', char
-00017080: 7329 290d 0a20 2020 2020 2020 2073 656c  s))..        sel
-00017090: 662e 6173 7365 7274 4571 7561 6c28 2773  f.assertEqual('s
-000170a0: 656e 6450 726f 6365 7373 5374 6469 6e27  endProcessStdin'
-000170b0: 2c20 696e 7465 7266 6163 652e 7570 6461  , interface.upda
-000170c0: 7465 5f74 6578 7429 0d0a 2020 2020 2020  te_text)..      
-000170d0: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
-000170e0: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
-000170f0: 5f67 726f 7570 735b 2770 726f 6365 7373  _groups['process
-00017100: 3127 5d2e 7072 6f63 6573 7365 735b 2770  1'].processes['p
-00017110: 726f 6365 7373 3127 5d0d 0a20 2020 2020  rocess1']..     
-00017120: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00017130: 7561 6c28 7072 6f63 6573 7331 2e73 7464  ual(process1.std
-00017140: 696e 5f62 7566 6665 722c 2063 6861 7273  in_buffer, chars
-00017150: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00017160: 745f 7365 6e64 5072 6f63 6573 7353 7464  t_sendProcessStd
-00017170: 696e 5f75 6e69 636f 6465 5f65 6e63 6f64  in_unicode_encod
-00017180: 6564 5f74 6f5f 7574 6638 2873 656c 6629  ed_to_utf8(self)
-00017190: 3a0d 0a20 2020 2020 2020 206f 7074 696f  :..        optio
-000171a0: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
-000171b0: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
-000171c0: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
-000171d0: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
-000171e0: 726f 6365 7373 3127 2c20 2766 6f6f 2729  rocess1', 'foo')
-000171f0: 0d0a 2020 2020 2020 2020 7375 7065 7276  ..        superv
-00017200: 6973 6f72 6420 3d20 506f 7075 6c61 7465  isord = Populate
-00017210: 6444 756d 6d79 5375 7065 7276 6973 6f72  dDummySupervisor
-00017220: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-00017230: 7373 3127 2c20 7063 6f6e 6669 6731 290d  ss1', pconfig1).
-00017240: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-00017250: 736f 7264 2e73 6574 5f70 726f 6361 7474  sord.set_procatt
-00017260: 7228 2770 726f 6365 7373 3127 2c20 2770  r('process1', 'p
-00017270: 6964 272c 2034 3229 0d0a 2020 2020 2020  id', 42)..      
-00017280: 2020 696e 7465 7266 6163 6520 3d20 7365    interface = se
-00017290: 6c66 2e5f 6d61 6b65 4f6e 6528 7375 7065  lf._makeOne(supe
-000172a0: 7276 6973 6f72 6429 0d0a 2020 2020 2020  rvisord)..      
-000172b0: 2020 696e 7465 7266 6163 652e 7365 6e64    interface.send
-000172c0: 5072 6f63 6573 7353 7464 696e 2827 7072  ProcessStdin('pr
-000172d0: 6f63 6573 7331 272c 2061 735f 7374 7269  ocess1', as_stri
-000172e0: 6e67 2862 2766 695c 7863 335c 7861 6427  ng(b'fi\xc3\xad'
-000172f0: 2929 0d0a 2020 2020 2020 2020 7072 6f63  ))..        proc
-00017300: 6573 7331 203d 2073 7570 6572 7669 736f  ess1 = superviso
-00017310: 7264 2e70 726f 6365 7373 5f67 726f 7570  rd.process_group
-00017320: 735b 2770 726f 6365 7373 3127 5d2e 7072  s['process1'].pr
-00017330: 6f63 6573 7365 735b 2770 726f 6365 7373  ocesses['process
-00017340: 3127 5d0d 0a20 2020 2020 2020 2073 656c  1']..        sel
-00017350: 662e 6173 7365 7274 4571 7561 6c28 7072  f.assertEqual(pr
-00017360: 6f63 6573 7331 2e73 7464 696e 5f62 7566  ocess1.stdin_buf
-00017370: 6665 722c 2062 2766 695c 7863 335c 7861  fer, b'fi\xc3\xa
-00017380: 6427 290d 0a0d 0a20 2020 2064 6566 2074  d')....    def t
-00017390: 6573 745f 7365 6e64 5265 6d6f 7465 436f  est_sendRemoteCo
-000173a0: 6d6d 4576 656e 745f 6e6f 7469 6669 6573  mmEvent_notifies
-000173b0: 5f73 7562 7363 7269 6265 7273 2873 656c  _subscribers(sel
-000173c0: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
-000173d0: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-000173e0: 6f6e 7328 290d 0a20 2020 2020 2020 2073  ons()..        s
-000173f0: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-00017400: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
-00017410: 696f 6e73 290d 0a20 2020 2020 2020 2069  ions)..        i
-00017420: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00017430: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
-00017440: 736f 7264 290d 0a0d 0a20 2020 2020 2020  sord)....       
-00017450: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-00017460: 2069 6d70 6f72 7420 6576 656e 7473 0d0a   import events..
-00017470: 2020 2020 2020 2020 4c20 3d20 5b5d 0d0a          L = []..
-00017480: 0d0a 2020 2020 2020 2020 6465 6620 6361  ..        def ca
-00017490: 6c6c 6261 636b 2865 7665 6e74 293a 0d0a  llback(event):..
-000174a0: 2020 2020 2020 2020 2020 2020 4c2e 6170              L.ap
-000174b0: 7065 6e64 2865 7665 6e74 290d 0a0d 0a20  pend(event).... 
-000174c0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-000174d0: 2020 2020 2020 2020 2065 7665 6e74 732e           events.
-000174e0: 6361 6c6c 6261 636b 735b 3a5d 203d 205b  callbacks[:] = [
-000174f0: 2865 7665 6e74 732e 5265 6d6f 7465 436f  (events.RemoteCo
-00017500: 6d6d 756e 6963 6174 696f 6e45 7665 6e74  mmunicationEvent
-00017510: 2c20 6361 6c6c 6261 636b 295d 0d0a 2020  , callback)]..  
-00017520: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00017530: 203d 2069 6e74 6572 6661 6365 2e73 656e   = interface.sen
-00017540: 6452 656d 6f74 6543 6f6d 6d45 7665 6e74  dRemoteCommEvent
-00017550: 2827 666f 6f27 2c20 2762 6172 2729 0d0a  ('foo', 'bar')..
-00017560: 2020 2020 2020 2020 6669 6e61 6c6c 793a          finally:
-00017570: 0d0a 2020 2020 2020 2020 2020 2020 6576  ..            ev
-00017580: 656e 7473 2e63 616c 6c62 6163 6b73 5b3a  ents.callbacks[:
-00017590: 5d20 3d20 5b5d 0d0a 2020 2020 2020 2020  ] = []..        
-000175a0: 2020 2020 6576 656e 7473 2e63 6c65 6172      events.clear
-000175b0: 2829 0d0a 0d0a 2020 2020 2020 2020 7365  ()....        se
-000175c0: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
-000175d0: 7375 6c74 290d 0a20 2020 2020 2020 2073  sult)..        s
-000175e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000175f0: 6c65 6e28 4c29 2c20 3129 0d0a 2020 2020  len(L), 1)..    
-00017600: 2020 2020 6576 656e 7420 3d20 4c5b 305d      event = L[0]
-00017610: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00017620: 7373 6572 7445 7175 616c 2865 7665 6e74  ssertEqual(event
-00017630: 2e74 7970 652c 2027 666f 6f27 290d 0a20  .type, 'foo').. 
-00017640: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00017650: 7274 4571 7561 6c28 6576 656e 742e 6461  rtEqual(event.da
-00017660: 7461 2c20 2762 6172 2729 0d0a 0d0a 2020  ta, 'bar')....  
-00017670: 2020 6465 6620 7465 7374 5f73 656e 6452    def test_sendR
-00017680: 656d 6f74 6543 6f6d 6d45 7665 6e74 5f75  emoteCommEvent_u
-00017690: 6e69 636f 6465 5f65 6e63 6f64 6564 5f74  nicode_encoded_t
-000176a0: 6f5f 7574 6638 2873 656c 6629 3a0d 0a20  o_utf8(self):.. 
-000176b0: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-000176c0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-000176d0: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
-000176e0: 736f 7264 203d 2044 756d 6d79 5375 7065  sord = DummySupe
-000176f0: 7276 6973 6f72 286f 7074 696f 6e73 290d  rvisor(options).
-00017700: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00017710: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-00017720: 6e65 2873 7570 6572 7669 736f 7264 290d  ne(supervisord).
-00017730: 0a0d 0a20 2020 2020 2020 2066 726f 6d20  ...        from 
-00017740: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
-00017750: 7420 6576 656e 7473 0d0a 2020 2020 2020  t events..      
-00017760: 2020 4c20 3d20 5b5d 0d0a 0d0a 2020 2020    L = []....    
-00017770: 2020 2020 6465 6620 6361 6c6c 6261 636b      def callback
-00017780: 2865 7665 6e74 293a 0d0a 2020 2020 2020  (event):..      
-00017790: 2020 2020 2020 4c2e 6170 7065 6e64 2865        L.append(e
-000177a0: 7665 6e74 290d 0a0d 0a20 2020 2020 2020  vent)....       
-000177b0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-000177c0: 2020 2065 7665 6e74 732e 6361 6c6c 6261     events.callba
-000177d0: 636b 735b 3a5d 203d 205b 2865 7665 6e74  cks[:] = [(event
-000177e0: 732e 5265 6d6f 7465 436f 6d6d 756e 6963  s.RemoteCommunic
-000177f0: 6174 696f 6e45 7665 6e74 2c20 6361 6c6c  ationEvent, call
-00017800: 6261 636b 295d 0d0a 2020 2020 2020 2020  back)]..        
-00017810: 2020 2020 7265 7375 6c74 203d 2069 6e74      result = int
-00017820: 6572 6661 6365 2e73 656e 6452 656d 6f74  erface.sendRemot
-00017830: 6543 6f6d 6d45 7665 6e74 280d 0a20 2020  eCommEvent(..   
-00017840: 2020 2020 2020 2020 2020 2020 2061 735f               as_
-00017850: 7374 7269 6e67 2827 6669 c3ad 206f 6e63  string('fi.. onc
-00017860: 6527 292c 0d0a 2020 2020 2020 2020 2020  e'),..          
-00017870: 2020 2020 2020 6173 5f73 7472 696e 6728        as_string(
-00017880: 2766 69c3 ad20 7477 6963 6527 292c 0d0a  'fi.. twice'),..
-00017890: 2020 2020 2020 2020 2020 2020 290d 0a20              ).. 
-000178a0: 2020 2020 2020 2066 696e 616c 6c79 3a0d         finally:.
-000178b0: 0a20 2020 2020 2020 2020 2020 2065 7665  .            eve
-000178c0: 6e74 732e 6361 6c6c 6261 636b 735b 3a5d  nts.callbacks[:]
-000178d0: 203d 205b 5d0d 0a20 2020 2020 2020 2020   = []..         
-000178e0: 2020 2065 7665 6e74 732e 636c 6561 7228     events.clear(
-000178f0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
-00017900: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
-00017910: 756c 7429 0d0a 2020 2020 2020 2020 7365  ult)..        se
-00017920: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
-00017930: 656e 284c 292c 2031 290d 0a20 2020 2020  en(L), 1)..     
-00017940: 2020 2065 7665 6e74 203d 204c 5b30 5d0d     event = L[0].
-00017950: 0a20 2020 2020 2020 2069 6620 5059 323a  .        if PY2:
-00017960: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00017970: 6c66 2e61 7373 6572 7445 7175 616c 2865  lf.assertEqual(e
-00017980: 7665 6e74 2e74 7970 652c 2027 6669 5c78  vent.type, 'fi\x
-00017990: 6333 5c78 6164 206f 6e63 6527 290d 0a20  c3\xad once').. 
-000179a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000179b0: 6173 7365 7274 4571 7561 6c28 6576 656e  assertEqual(even
-000179c0: 742e 6461 7461 2c20 2766 695c 7863 335c  t.data, 'fi\xc3\
-000179d0: 7861 6420 7477 6963 6527 290d 0a20 2020  xad twice')..   
-000179e0: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-000179f0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00017a00: 6572 7445 7175 616c 2865 7665 6e74 2e74  ertEqual(event.t
-00017a10: 7970 652c 2027 6669 c3ad 206f 6e63 6527  ype, 'fi.. once'
-00017a20: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-00017a30: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00017a40: 6576 656e 742e 6461 7461 2c20 2766 69c3  event.data, 'fi.
-00017a50: ad20 7477 6963 6527 290d 0a0d 0a0d 0a63  . twice')......c
-00017a60: 6c61 7373 2053 7973 7465 6d4e 616d 6573  lass SystemNames
-00017a70: 7061 6365 584d 4c52 5043 496e 7465 7266  paceXMLRPCInterf
-00017a80: 6163 6554 6573 7473 2854 6573 7442 6173  aceTests(TestBas
-00017a90: 6529 3a0d 0a20 2020 2064 6566 205f 6765  e):..    def _ge
-00017aa0: 7454 6172 6765 7443 6c61 7373 2873 656c  tTargetClass(sel
-00017ab0: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
-00017ac0: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
-00017ad0: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
-00017ae0: 2020 2020 7265 7475 726e 2078 6d6c 7270      return xmlrp
-00017af0: 632e 5379 7374 656d 4e61 6d65 7370 6163  c.SystemNamespac
-00017b00: 6552 5043 496e 7465 7266 6163 650d 0a0d  eRPCInterface...
-00017b10: 0a20 2020 2064 6566 205f 6d61 6b65 4f6e  .    def _makeOn
-00017b20: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-00017b30: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00017b40: 7220 696d 706f 7274 2072 7063 696e 7465  r import rpcinte
-00017b50: 7266 6163 650d 0a20 2020 2020 2020 2073  rface..        s
-00017b60: 7570 6572 7669 736f 7264 203d 2044 756d  upervisord = Dum
-00017b70: 6d79 5375 7065 7276 6973 6f72 2829 0d0a  mySupervisor()..
-00017b80: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
-00017b90: 6f72 203d 2072 7063 696e 7465 7266 6163  or = rpcinterfac
-00017ba0: 652e 5375 7065 7276 6973 6f72 4e61 6d65  e.SupervisorName
-00017bb0: 7370 6163 6552 5043 496e 7465 7266 6163  spaceRPCInterfac
-00017bc0: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
-00017bd0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00017be0: 656c 662e 5f67 6574 5461 7267 6574 436c  elf._getTargetCl
-00017bf0: 6173 7328 2928 0d0a 2020 2020 2020 2020  ass()(..        
-00017c00: 2020 2020 5b28 2773 7570 6572 7669 736f      [('superviso
-00017c10: 7227 2c20 7375 7065 7276 6973 6f72 292c  r', supervisor),
-00017c20: 0d0a 2020 2020 2020 2020 2020 2020 205d  ..             ]
-00017c30: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
-00017c40: 2020 2064 6566 2074 6573 745f 6374 6f72     def test_ctor
-00017c50: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00017c60: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
-00017c70: 662e 5f6d 616b 654f 6e65 2829 0d0a 2020  f._makeOne()..  
-00017c80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00017c90: 7454 7275 6528 696e 7465 7266 6163 652e  tTrue(interface.
-00017ca0: 6e61 6d65 7370 6163 6573 5b27 7375 7065  namespaces['supe
-00017cb0: 7276 6973 6f72 275d 290d 0a20 2020 2020  rvisor'])..     
-00017cc0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00017cd0: 7565 2869 6e74 6572 6661 6365 2e6e 616d  ue(interface.nam
-00017ce0: 6573 7061 6365 735b 2773 7973 7465 6d27  espaces['system'
-00017cf0: 5d29 0d0a 0d0a 2020 2020 6465 6620 7465  ])....    def te
-00017d00: 7374 5f6c 6973 744d 6574 686f 6473 2873  st_listMethods(s
-00017d10: 656c 6629 3a0d 0a20 2020 2020 2020 2069  elf):..        i
-00017d20: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
-00017d30: 5f6d 616b 654f 6e65 2829 0d0a 2020 2020  _makeOne()..    
-00017d40: 2020 2020 6d65 7468 6f64 7320 3d20 696e      methods = in
-00017d50: 7465 7266 6163 652e 6c69 7374 4d65 7468  terface.listMeth
-00017d60: 6f64 7328 290d 0a20 2020 2020 2020 206d  ods()..        m
-00017d70: 6574 686f 6473 2e73 6f72 7428 290d 0a20  ethods.sort().. 
-00017d80: 2020 2020 2020 206b 6579 7320 3d20 6c69         keys = li
-00017d90: 7374 2869 6e74 6572 6661 6365 2e5f 6c69  st(interface._li
-00017da0: 7374 4d65 7468 6f64 7328 292e 6b65 7973  stMethods().keys
-00017db0: 2829 290d 0a20 2020 2020 2020 206b 6579  ())..        key
-00017dc0: 732e 736f 7274 2829 0d0a 2020 2020 2020  s.sort()..      
-00017dd0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00017de0: 616c 286d 6574 686f 6473 2c20 6b65 7973  al(methods, keys
-00017df0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00017e00: 745f 6d65 7468 6f64 5369 676e 6174 7572  t_methodSignatur
-00017e10: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-00017e20: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00017e30: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-00017e40: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00017e50: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-00017e60: 6e65 2829 0d0a 2020 2020 2020 2020 7365  ne()..        se
-00017e70: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00017e80: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-00017e90: 2e53 4947 4e41 5455 5245 5f55 4e53 5550  .SIGNATURE_UNSUP
-00017ea0: 504f 5254 4544 2c0d 0a20 2020 2020 2020  PORTED,..       
-00017eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ec0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-00017ed0: 6d65 7468 6f64 5369 676e 6174 7572 652c  methodSignature,
-00017ee0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017ef0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00017f00: 2766 6f6f 2e62 6172 275d 290d 0a20 2020  'foo.bar'])..   
-00017f10: 2020 2020 2072 6573 756c 7420 3d20 696e       result = in
-00017f20: 7465 7266 6163 652e 6d65 7468 6f64 5369  terface.methodSi
-00017f30: 676e 6174 7572 6528 2773 7973 7465 6d2e  gnature('system.
-00017f40: 6d65 7468 6f64 5369 676e 6174 7572 6527  methodSignature'
-00017f50: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00017f60: 6173 7365 7274 4571 7561 6c28 7265 7375  assertEqual(resu
-00017f70: 6c74 2c20 5b27 6172 7261 7927 2c20 2773  lt, ['array', 's
-00017f80: 7472 696e 6727 5d29 0d0a 0d0a 2020 2020  tring'])....    
-00017f90: 6465 6620 7465 7374 5f61 6c6c 4d65 7468  def test_allMeth
-00017fa0: 6f64 446f 6373 2873 656c 6629 3a0d 0a20  odDocs(self):.. 
-00017fb0: 2020 2020 2020 2066 726f 6d20 7375 7065         from supe
-00017fc0: 7276 6973 6f72 2069 6d70 6f72 7420 786d  rvisor import xm
-00017fd0: 6c72 7063 0d0a 2020 2020 2020 2020 2320  lrpc..        # 
-00017fe0: 6265 6c74 2d61 6e64 2d73 7573 7065 6e64  belt-and-suspend
-00017ff0: 6572 7320 7465 7374 2066 6f72 2064 6f63  ers test for doc
-00018000: 7374 7269 6e67 2d61 732d 7479 7069 6e67  string-as-typing
-00018010: 2070 6172 7369 6e67 2063 6f72 7265 6374   parsing correct
-00018020: 6e65 7373 0d0a 2020 2020 2020 2020 2320  ness..        # 
-00018030: 616e 6420 646f 6375 6d65 6e74 6174 696f  and documentatio
-00018040: 6e20 7661 6c69 6469 7479 2076 732e 2069  n validity vs. i
-00018050: 6d70 6c65 6d65 6e74 6174 696f 6e0d 0a20  mplementation.. 
-00018060: 2020 2020 2020 205f 5250 4354 5950 4553         _RPCTYPES
-00018070: 203d 205b 2769 6e74 272c 2027 646f 7562   = ['int', 'doub
-00018080: 6c65 272c 2027 7374 7269 6e67 272c 2027  le', 'string', '
-00018090: 626f 6f6c 6561 6e27 2c20 2764 6174 6554  boolean', 'dateT
-000180a0: 696d 652e 6973 6f38 3630 3127 2c0d 0a20  ime.iso8601',.. 
-000180b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000180c0: 2020 2020 2762 6173 6536 3427 2c20 2762      'base64', 'b
-000180d0: 696e 6172 7927 2c20 2761 7272 6179 272c  inary', 'array',
-000180e0: 2027 7374 7275 6374 275d 0d0a 2020 2020   'struct']..    
-000180f0: 2020 2020 696e 7465 7266 6163 6520 3d20      interface = 
-00018100: 7365 6c66 2e5f 6d61 6b65 4f6e 6528 290d  self._makeOne().
-00018110: 0a20 2020 2020 2020 206d 6574 686f 6473  .        methods
-00018120: 203d 2069 6e74 6572 6661 6365 2e5f 6c69   = interface._li
-00018130: 7374 4d65 7468 6f64 7328 290d 0a20 2020  stMethods()..   
-00018140: 2020 2020 2066 6f72 206b 2069 6e20 6d65       for k in me
-00018150: 7468 6f64 732e 6b65 7973 2829 3a0d 0a20  thods.keys():.. 
-00018160: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-00018170: 6120 6d65 7468 6f64 2064 6f65 736e 2774  a method doesn't
-00018180: 2068 6176 6520 6120 4072 6574 7572 6e20   have a @return 
-00018190: 7661 6c75 652c 2061 6e20 5250 4345 7272  value, an RPCErr
-000181a0: 6f72 2069 7320 7261 6973 6564 2e0d 0a20  or is raised... 
-000181b0: 2020 2020 2020 2020 2020 2023 2044 6574             # Det
-000181c0: 6563 7420 7468 6174 2068 6572 652e 0d0a  ect that here...
-000181d0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-000181e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000181f0: 2020 696e 7465 7266 6163 652e 6d65 7468    interface.meth
-00018200: 6f64 5369 676e 6174 7572 6528 6b29 0d0a  odSignature(k)..
-00018210: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00018220: 7074 2078 6d6c 7270 632e 5250 4345 7272  pt xmlrpc.RPCErr
-00018230: 6f72 3a0d 0a20 2020 2020 2020 2020 2020  or:..           
-00018240: 2020 2020 2072 6169 7365 2041 7373 6572       raise Asser
-00018250: 7469 6f6e 4572 726f 7228 276d 6574 686f  tionError('metho
-00018260: 6453 6967 6e61 7475 7265 2066 6f72 2025  dSignature for %
-00018270: 7320 7261 6973 6573 2027 0d0a 2020 2020  s raises '..    
-00018280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000182a0: 2027 5250 4345 7272 6f72 2028 6d69 7373   'RPCError (miss
-000182b0: 696e 6720 4072 6574 7572 6e20 646f 633f  ing @return doc?
-000182c0: 2927 2025 206b 290d 0a0d 0a20 2020 2020  )' % k)....     
-000182d0: 2020 2020 2020 2023 2077 6520 7761 6e74         # we want
-000182e0: 2074 6f20 7465 7374 2074 6861 7420 7468   to test that th
-000182f0: 6520 6e75 6d62 6572 206f 6620 6172 6775  e number of argu
-00018300: 6d65 6e74 7320 696d 706c 656d 656e 7465  ments implemente
-00018310: 6420 696e 0d0a 2020 2020 2020 2020 2020  d in..          
-00018320: 2020 2320 7468 6520 6675 6e63 7469 6f6e    # the function
-00018330: 2069 7320 7468 6520 7361 6d65 2061 7320   is the same as 
-00018340: 7468 6520 6e75 6d62 6572 206f 6620 6172  the number of ar
-00018350: 6775 6d65 6e74 7320 696d 706c 6965 6420  guments implied 
-00018360: 6279 0d0a 2020 2020 2020 2020 2020 2020  by..            
-00018370: 2320 7468 6520 646f 6320 4070 6172 616d  # the doc @param
-00018380: 732c 2061 6e64 2074 6861 7420 7468 6579  s, and that they
-00018390: 2073 686f 7720 7570 2069 6e20 7468 6520   show up in the 
-000183a0: 7361 6d65 206f 7264 6572 2e0d 0a20 2020  same order...   
-000183b0: 2020 2020 2020 2020 206e 735f 6e61 6d65           ns_name
-000183c0: 2c20 6d65 7468 6f64 5f6e 616d 6520 3d20  , method_name = 
-000183d0: 6b2e 7370 6c69 7428 272e 272c 2031 290d  k.split('.', 1).
-000183e0: 0a20 2020 2020 2020 2020 2020 206e 616d  .            nam
-000183f0: 6573 7061 6365 203d 2069 6e74 6572 6661  espace = interfa
-00018400: 6365 2e6e 616d 6573 7061 6365 735b 6e73  ce.namespaces[ns
-00018410: 5f6e 616d 655d 0d0a 2020 2020 2020 2020  _name]..        
-00018420: 2020 2020 6d65 7468 203d 2067 6574 6174      meth = getat
-00018430: 7472 286e 616d 6573 7061 6365 2c20 6d65  tr(namespace, me
-00018440: 7468 6f64 5f6e 616d 6529 0d0a 2020 2020  thod_name)..    
-00018450: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
-00018460: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00018470: 6465 203d 206d 6574 682e 6675 6e63 5f63  de = meth.func_c
-00018480: 6f64 650d 0a20 2020 2020 2020 2020 2020  ode..           
-00018490: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-000184a0: 6e3a 0d0a 2020 2020 2020 2020 2020 2020  n:..            
-000184b0: 2020 2020 636f 6465 203d 206d 6574 682e      code = meth.
-000184c0: 5f5f 636f 6465 5f5f 0d0a 2020 2020 2020  __code__..      
-000184d0: 2020 2020 2020 6172 676e 616d 6573 203d        argnames =
-000184e0: 2063 6f64 652e 636f 5f76 6172 6e61 6d65   code.co_varname
-000184f0: 735b 313a 636f 6465 2e63 6f5f 6172 6763  s[1:code.co_argc
-00018500: 6f75 6e74 5d0d 0a20 2020 2020 2020 2020  ount]..         
-00018510: 2020 2070 6172 7365 6420 3d20 786d 6c72     parsed = xmlr
-00018520: 7063 2e67 6574 7461 6773 2873 7472 286d  pc.gettags(str(m
-00018530: 6574 682e 5f5f 646f 635f 5f29 290d 0a0d  eth.__doc__))...
-00018540: 0a20 2020 2020 2020 2020 2020 2070 6c69  .            pli
-00018550: 6e65 7320 3d20 5b5d 0d0a 2020 2020 2020  nes = []..      
-00018560: 2020 2020 2020 7074 7970 6573 203d 205b        ptypes = [
-00018570: 5d0d 0a20 2020 2020 2020 2020 2020 2070  ]..            p
-00018580: 6e61 6d65 7320 3d20 5b5d 0d0a 2020 2020  names = []..    
-00018590: 2020 2020 2020 2020 7074 6578 7473 203d          ptexts =
-000185a0: 205b 5d0d 0a0d 0a20 2020 2020 2020 2020   []....         
-000185b0: 2020 2072 6c69 6e65 7320 3d20 5b5d 0d0a     rlines = []..
-000185c0: 2020 2020 2020 2020 2020 2020 7274 7970              rtyp
-000185d0: 6573 203d 205b 5d0d 0a20 2020 2020 2020  es = []..       
-000185e0: 2020 2020 2072 6e61 6d65 7320 3d20 5b5d       rnames = []
-000185f0: 0d0a 2020 2020 2020 2020 2020 2020 7274  ..            rt
-00018600: 6578 7473 203d 205b 5d0d 0a0d 0a20 2020  exts = []....   
-00018610: 2020 2020 2020 2020 2066 6f72 2074 6869           for thi
-00018620: 6e67 2069 6e20 7061 7273 6564 3a0d 0a20  ng in parsed:.. 
-00018630: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00018640: 6620 7468 696e 675b 315d 203d 3d20 2770  f thing[1] == 'p
-00018650: 6172 616d 273a 2020 2320 7461 6720 6e61  aram':  # tag na
-00018660: 6d65 0d0a 2020 2020 2020 2020 2020 2020  me..            
-00018670: 2020 2020 2020 2020 706c 696e 6573 2e61          plines.a
-00018680: 7070 656e 6428 7468 696e 675b 305d 2920  ppend(thing[0]) 
-00018690: 2023 2064 6f63 206c 696e 6520 6e75 6d62   # doc line numb
-000186a0: 6572 0d0a 2020 2020 2020 2020 2020 2020  er..            
-000186b0: 2020 2020 2020 2020 7074 7970 6573 2e61          ptypes.a
-000186c0: 7070 656e 6428 7468 696e 675b 325d 2920  ppend(thing[2]) 
-000186d0: 2023 2064 6174 6120 7479 7065 0d0a 2020   # data type..  
-000186e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000186f0: 2020 706e 616d 6573 2e61 7070 656e 6428    pnames.append(
-00018700: 7468 696e 675b 335d 2920 2023 2066 756e  thing[3])  # fun
-00018710: 6374 696f 6e20 6e61 6d65 0d0a 2020 2020  ction name..    
-00018720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018730: 7074 6578 7473 2e61 7070 656e 6428 7468  ptexts.append(th
-00018740: 696e 675b 345d 2920 2023 2064 6573 6372  ing[4])  # descr
-00018750: 6970 7469 6f6e 0d0a 2020 2020 2020 2020  iption..        
-00018760: 2020 2020 2020 2020 656c 6966 2074 6869          elif thi
-00018770: 6e67 5b31 5d20 3d3d 2027 7265 7475 726e  ng[1] == 'return
-00018780: 273a 2020 2320 7461 6720 6e61 6d65 0d0a  ':  # tag name..
-00018790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000187a0: 2020 2020 726c 696e 6573 2e61 7070 656e      rlines.appen
-000187b0: 6428 7468 696e 675b 305d 2920 2023 2064  d(thing[0])  # d
-000187c0: 6f63 206c 696e 6520 6e75 6d62 6572 0d0a  oc line number..
-000187d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000187e0: 2020 2020 7274 7970 6573 2e61 7070 656e      rtypes.appen
-000187f0: 6428 7468 696e 675b 325d 2920 2023 2064  d(thing[2])  # d
-00018800: 6174 6120 7479 7065 0d0a 2020 2020 2020  ata type..      
-00018810: 2020 2020 2020 2020 2020 2020 2020 726e                rn
-00018820: 616d 6573 2e61 7070 656e 6428 7468 696e  ames.append(thin
-00018830: 675b 335d 2920 2023 2066 756e 6374 696f  g[3])  # functio
-00018840: 6e20 6e61 6d65 0d0a 2020 2020 2020 2020  n name..        
-00018850: 2020 2020 2020 2020 2020 2020 7274 6578              rtex
-00018860: 7473 2e61 7070 656e 6428 7468 696e 675b  ts.append(thing[
-00018870: 345d 2920 2023 2064 6573 6372 6970 7469  4])  # descripti
-00018880: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
-00018890: 2020 2020 656c 6966 2074 6869 6e67 5b31      elif thing[1
-000188a0: 5d20 6973 206e 6f74 204e 6f6e 653a 0d0a  ] is not None:..
-000188b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000188c0: 2020 2020 7261 6973 6520 4173 7365 7274      raise Assert
-000188d0: 696f 6e45 7272 6f72 280d 0a20 2020 2020  ionError(..     
-000188e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000188f0: 2020 2027 756e 6b6e 6f77 6e20 7461 6720     'unknown tag 
-00018900: 7479 7065 2025 7320 666f 7220 2573 2c20  type %s for %s, 
-00018910: 7061 7273 6564 2025 7327 2025 2028 7468  parsed %s' % (th
-00018920: 696e 675b 315d 2c0d 0a20 2020 2020 2020  ing[1],..       
-00018930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018960: 2020 2020 2020 2020 2020 2020 6b2c 0d0a              k,..
-00018970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000189a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000189b0: 2020 2070 6172 7365 6429 290d 0a20 2020     parsed))..   
-000189c0: 2020 2020 2020 2020 2023 2070 6172 616d           # param
-000189d0: 2074 6f6b 656e 730d 0a0d 0a20 2020 2020   tokens....     
-000189e0: 2020 2020 2020 2069 6620 6c65 6e28 6172         if len(ar
-000189f0: 676e 616d 6573 2920 213d 206c 656e 2870  gnames) != len(p
-00018a00: 6e61 6d65 7329 3a0d 0a20 2020 2020 2020  names):..       
-00018a10: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
-00018a20: 7373 6572 7469 6f6e 4572 726f 7228 2749  ssertionError('I
-00018a30: 6e63 6f72 7265 6374 2064 6f63 756d 656e  ncorrect documen
-00018a40: 7461 7469 6f6e 2027 0d0a 2020 2020 2020  tation '..      
-00018a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a60: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00018a70: 2825 7320 6172 6773 2c20 2573 2064 6f63  (%s args, %s doc
-00018a80: 2070 6172 616d 7329 2069 6e20 2573 270d   params) in %s'.
-00018a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ab0: 2020 2020 2020 2520 286c 656e 2861 7267        % (len(arg
-00018ac0: 6e61 6d65 7329 2c20 6c65 6e28 706e 616d  names), len(pnam
-00018ad0: 6573 292c 206b 2929 0d0a 2020 2020 2020  es), k))..      
-00018ae0: 2020 2020 2020 666f 7220 646f 636c 696e        for doclin
-00018af0: 6520 696e 2070 6c69 6e65 733a 0d0a 2020  e in plines:..  
-00018b00: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00018b10: 6c66 2e61 7373 6572 7454 7275 6528 7479  lf.assertTrue(ty
-00018b20: 7065 2864 6f63 6c69 6e65 2920 3d3d 2069  pe(docline) == i
-00018b30: 6e74 2c20 2864 6f63 6c69 6e65 2c0d 0a20  nt, (docline,.. 
-00018b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b70: 2020 2020 2020 7479 7065 2864 6f63 6c69        type(docli
-00018b80: 6e65 292c 0d0a 2020 2020 2020 2020 2020  ne),..          
-00018b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018bb0: 2020 2020 2020 2020 2020 2020 206b 2c0d               k,.
-00018bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018bf0: 2020 2020 2020 2020 7061 7273 6564 2929          parsed))
-00018c00: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00018c10: 7220 646f 6374 7970 6520 696e 2070 7479  r doctype in pty
-00018c20: 7065 733a 0d0a 2020 2020 2020 2020 2020  pes:..          
-00018c30: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00018c40: 7454 7275 6528 646f 6374 7970 6520 696e  tTrue(doctype in
-00018c50: 205f 5250 4354 5950 4553 2c20 646f 6374   _RPCTYPES, doct
-00018c60: 7970 6529 0d0a 2020 2020 2020 2020 2020  ype)..          
-00018c70: 2020 666f 7220 7820 696e 2072 616e 6765    for x in range
-00018c80: 286c 656e 2870 6e61 6d65 7329 293a 0d0a  (len(pnames)):..
-00018c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ca0: 6966 2070 6e61 6d65 735b 785d 2021 3d20  if pnames[x] != 
-00018cb0: 6172 676e 616d 6573 5b78 5d3a 0d0a 2020  argnames[x]:..  
-00018cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018cd0: 2020 6d73 6720 3d20 274e 616d 6520 7772    msg = 'Name wr
-00018ce0: 6f6e 673a 2028 2573 2076 732e 2025 7320  ong: (%s vs. %s 
-00018cf0: 696e 2025 7329 5c6e 2573 2720 2520 2870  in %s)\n%s' % (p
-00018d00: 6e61 6d65 735b 785d 2c0d 0a20 2020 2020  names[x],..     
-00018d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d40: 2020 2020 2020 2020 2020 2020 6172 676e              argn
-00018d50: 616d 6573 5b78 5d2c 0d0a 2020 2020 2020  ames[x],..      
-00018d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d90: 2020 2020 2020 2020 2020 206b 2c0d 0a20             k,.. 
+000153a0: 2020 2020 2020 2020 2069 6e74 6572 6661           interfa
+000153b0: 6365 2e63 6c65 6172 5072 6f63 6573 734c  ce.clearProcessL
+000153c0: 6f67 732c 0d0a 2020 2020 2020 2020 2020  ogs,..          
+000153d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000153e0: 2020 2027 666f 6f3a 2a27 290d 0a0d 0a20     'foo:*').... 
+000153f0: 2020 2064 6566 2074 6573 745f 636c 6561     def test_clea
+00015400: 7250 726f 6365 7373 4c6f 6773 2873 656c  rProcessLogs(sel
+00015410: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
+00015420: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+00015430: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
+00015440: 636f 6e66 6967 203d 2044 756d 6d79 5043  config = DummyPC
+00015450: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+00015460: 666f 6f27 2c20 2766 6f6f 2729 0d0a 2020  foo', 'foo')..  
+00015470: 2020 2020 2020 7072 6f63 6573 7320 3d20        process = 
+00015480: 4475 6d6d 7950 726f 6365 7373 2870 636f  DummyProcess(pco
+00015490: 6e66 6967 290d 0a20 2020 2020 2020 2070  nfig)..        p
+000154a0: 6772 6f75 7020 3d20 4475 6d6d 7950 726f  group = DummyPro
+000154b0: 6365 7373 4772 6f75 7028 4e6f 6e65 290d  cessGroup(None).
+000154c0: 0a20 2020 2020 2020 2070 6772 6f75 702e  .        pgroup.
+000154d0: 7072 6f63 6573 7365 7320 3d20 7b27 666f  processes = {'fo
+000154e0: 6f27 3a20 7072 6f63 6573 737d 0d0a 2020  o': process}..  
+000154f0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00015500: 6420 3d20 4475 6d6d 7953 7570 6572 7669  d = DummySupervi
+00015510: 736f 7228 7072 6f63 6573 735f 6772 6f75  sor(process_grou
+00015520: 7073 3d7b 2766 6f6f 273a 2070 6772 6f75  ps={'foo': pgrou
+00015530: 707d 290d 0a20 2020 2020 2020 2069 6e74  p})..        int
+00015540: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
+00015550: 616b 654f 6e65 2873 7570 6572 7669 736f  akeOne(superviso
+00015560: 7264 290d 0a20 2020 2020 2020 2069 6e74  rd)..        int
+00015570: 6572 6661 6365 2e63 6c65 6172 5072 6f63  erface.clearProc
+00015580: 6573 734c 6f67 7328 2766 6f6f 2729 0d0a  essLogs('foo')..
+00015590: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000155a0: 6572 7445 7175 616c 2870 726f 6365 7373  ertEqual(process
+000155b0: 2e6c 6f67 7372 656d 6f76 6564 2c20 5472  .logsremoved, Tr
+000155c0: 7565 290d 0a0d 0a20 2020 2064 6566 2074  ue)....    def t
+000155d0: 6573 745f 636c 6561 7250 726f 6365 7373  est_clearProcess
+000155e0: 4c6f 6773 5f66 6169 6c65 6428 7365 6c66  Logs_failed(self
+000155f0: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
+00015600: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
+00015610: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
+00015620: 2020 206f 7074 696f 6e73 203d 2044 756d     options = Dum
+00015630: 6d79 4f70 7469 6f6e 7328 290d 0a20 2020  myOptions()..   
+00015640: 2020 2020 2070 636f 6e66 6967 203d 2044       pconfig = D
+00015650: 756d 6d79 5043 6f6e 6669 6728 6f70 7469  ummyPConfig(opti
+00015660: 6f6e 732c 2027 666f 6f27 2c20 2766 6f6f  ons, 'foo', 'foo
+00015670: 2729 0d0a 2020 2020 2020 2020 7072 6f63  ')..        proc
+00015680: 6573 7320 3d20 4475 6d6d 7950 726f 6365  ess = DummyProce
+00015690: 7373 2870 636f 6e66 6967 290d 0a20 2020  ss(pconfig)..   
+000156a0: 2020 2020 2070 6772 6f75 7020 3d20 4475       pgroup = Du
+000156b0: 6d6d 7950 726f 6365 7373 4772 6f75 7028  mmyProcessGroup(
+000156c0: 4e6f 6e65 290d 0a20 2020 2020 2020 2070  None)..        p
+000156d0: 6772 6f75 702e 7072 6f63 6573 7365 7320  group.processes 
+000156e0: 3d20 7b27 666f 6f27 3a20 7072 6f63 6573  = {'foo': proces
+000156f0: 737d 0d0a 2020 2020 2020 2020 7072 6f63  s}..        proc
+00015700: 6573 732e 6572 726f 725f 6174 5f63 6c65  ess.error_at_cle
+00015710: 6172 203d 2054 7275 650d 0a20 2020 2020  ar = True..     
+00015720: 2020 2073 7570 6572 7669 736f 7264 203d     supervisord =
+00015730: 2044 756d 6d79 5375 7065 7276 6973 6f72   DummySupervisor
+00015740: 2870 726f 6365 7373 5f67 726f 7570 733d  (process_groups=
+00015750: 7b27 666f 6f27 3a20 7067 726f 7570 7d29  {'foo': pgroup})
+00015760: 0d0a 2020 2020 2020 2020 696e 7465 7266  ..        interf
+00015770: 6163 6520 3d20 7365 6c66 2e5f 6d61 6b65  ace = self._make
+00015780: 4f6e 6528 7375 7065 7276 6973 6f72 6429  One(supervisord)
+00015790: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000157a0: 7373 6572 7452 6169 7365 7328 786d 6c72  ssertRaises(xmlr
+000157b0: 7063 2e52 5043 4572 726f 722c 2069 6e74  pc.RPCError, int
+000157c0: 6572 6661 6365 2e63 6c65 6172 5072 6f63  erface.clearProc
+000157d0: 6573 734c 6f67 732c 2027 666f 6f27 290d  essLogs, 'foo').
+000157e0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+000157f0: 636c 6561 7250 726f 6365 7373 4c6f 6741  clearProcessLogA
+00015800: 6c69 6173 6564 546f 5f63 6c65 6172 5072  liasedTo_clearPr
+00015810: 6f63 6573 734c 6f67 7328 7365 6c66 293a  ocessLogs(self):
+00015820: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+00015830: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+00015840: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
+00015850: 6669 6720 3d20 4475 6d6d 7950 436f 6e66  fig = DummyPConf
+00015860: 6967 286f 7074 696f 6e73 2c20 2766 6f6f  ig(options, 'foo
+00015870: 272c 2027 2f62 696e 2f66 6f6f 2729 0d0a  ', '/bin/foo')..
+00015880: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00015890: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+000158a0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+000158b0: 7074 696f 6e73 2c20 2766 6f6f 272c 2070  ptions, 'foo', p
+000158c0: 636f 6e66 6967 290d 0a20 2020 2020 2020  config)..       
+000158d0: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+000158e0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+000158f0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+00015900: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00015910: 6c28 696e 7465 7266 6163 652e 636c 6561  l(interface.clea
+00015920: 7250 726f 6365 7373 4c6f 672c 0d0a 2020  rProcessLog,..  
+00015930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015940: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+00015950: 2e63 6c65 6172 5072 6f63 6573 734c 6f67  .clearProcessLog
+00015960: 7329 0d0a 0d0a 2020 2020 6465 6620 7465  s)....    def te
+00015970: 7374 5f63 6c65 6172 416c 6c50 726f 6365  st_clearAllProce
+00015980: 7373 4c6f 6773 2873 656c 6629 3a0d 0a20  ssLogs(self):.. 
+00015990: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+000159a0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+000159b0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+000159c0: 3120 3d20 4475 6d6d 7950 436f 6e66 6967  1 = DummyPConfig
+000159d0: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+000159e0: 7373 3127 2c20 2766 6f6f 272c 2070 7269  ss1', 'foo', pri
+000159f0: 6f72 6974 793d 3129 0d0a 2020 2020 2020  ority=1)..      
+00015a00: 2020 7063 6f6e 6669 6732 203d 2044 756d    pconfig2 = Dum
+00015a10: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+00015a20: 732c 2027 7072 6f63 6573 7332 272c 2027  s, 'process2', '
+00015a30: 6261 7227 2c20 7072 696f 7269 7479 3d32  bar', priority=2
+00015a40: 290d 0a20 2020 2020 2020 2073 7570 6572  )..        super
+00015a50: 7669 736f 7264 203d 2050 6f70 756c 6174  visord = Populat
+00015a60: 6564 4475 6d6d 7953 7570 6572 7669 736f  edDummySuperviso
+00015a70: 7228 6f70 7469 6f6e 732c 2027 666f 6f27  r(options, 'foo'
+00015a80: 2c20 7063 6f6e 6669 6731 2c0d 0a20 2020  , pconfig1,..   
+00015a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ab0: 2020 2020 2020 2020 2020 2020 7063 6f6e              pcon
+00015ac0: 6669 6732 290d 0a20 2020 2020 2020 2069  fig2)..        i
+00015ad0: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00015ae0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+00015af0: 736f 7264 290d 0a20 2020 2020 2020 2063  sord)..        c
+00015b00: 616c 6c62 6163 6b20 3d20 696e 7465 7266  allback = interf
+00015b10: 6163 652e 636c 6561 7241 6c6c 5072 6f63  ace.clearAllProc
+00015b20: 6573 734c 6f67 7328 290d 0a20 2020 2020  essLogs()..     
+00015b30: 2020 2063 616c 6c62 6163 6b28 290d 0a20     callback().. 
+00015b40: 2020 2020 2020 2072 6573 756c 7473 203d         results =
+00015b50: 2063 616c 6c62 6163 6b28 290d 0a20 2020   callback()..   
+00015b60: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
+00015b70: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
+00015b80: 7063 0d0a 2020 2020 2020 2020 7365 6c66  pc..        self
+00015b90: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
+00015ba0: 756c 7473 5b30 5d2c 0d0a 2020 2020 2020  ults[0],..      
+00015bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bc0: 2020 207b 276e 616d 6527 3a20 2770 726f     {'name': 'pro
+00015bd0: 6365 7373 3127 2c0d 0a20 2020 2020 2020  cess1',..       
+00015be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015bf0: 2020 2027 6772 6f75 7027 3a20 2766 6f6f     'group': 'foo
+00015c00: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00015c10: 2020 2020 2020 2020 2020 2020 2020 2773                's
+00015c20: 7461 7475 7327 3a20 786d 6c72 7063 2e46  tatus': xmlrpc.F
+00015c30: 6175 6c74 732e 5355 4343 4553 532c 0d0a  aults.SUCCESS,..
+00015c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015c50: 2020 2020 2020 2020 2020 2764 6573 6372            'descr
+00015c60: 6970 7469 6f6e 273a 2027 4f4b 277d 290d  iption': 'OK'}).
+00015c70: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00015c80: 7365 7274 4571 7561 6c28 7265 7375 6c74  sertEqual(result
+00015c90: 735b 315d 2c0d 0a20 2020 2020 2020 2020  s[1],..         
+00015ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015cb0: 7b27 6e61 6d65 273a 2027 7072 6f63 6573  {'name': 'proces
+00015cc0: 7332 272c 0d0a 2020 2020 2020 2020 2020  s2',..          
+00015cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ce0: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+00015cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015d00: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+00015d10: 7573 273a 2078 6d6c 7270 632e 4661 756c  us': xmlrpc.Faul
+00015d20: 7473 2e53 5543 4345 5353 2c0d 0a20 2020  ts.SUCCESS,..   
+00015d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d40: 2020 2020 2020 2027 6465 7363 7269 7074         'descript
+00015d50: 696f 6e27 3a20 274f 4b27 7d29 0d0a 2020  ion': 'OK'})..  
+00015d60: 2020 2020 2020 7072 6f63 6573 7331 203d        process1 =
+00015d70: 2073 7570 6572 7669 736f 7264 2e70 726f   supervisord.pro
+00015d80: 6365 7373 5f67 726f 7570 735b 2766 6f6f  cess_groups['foo
+00015d90: 275d 2e70 726f 6365 7373 6573 5b27 7072  '].processes['pr
+00015da0: 6f63 6573 7331 275d 0d0a 2020 2020 2020  ocess1']..      
+00015db0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00015dc0: 616c 2870 726f 6365 7373 312e 6c6f 6773  al(process1.logs
+00015dd0: 7265 6d6f 7665 642c 2054 7275 6529 0d0a  removed, True)..
+00015de0: 2020 2020 2020 2020 7072 6f63 6573 7332          process2
+00015df0: 203d 2073 7570 6572 7669 736f 7264 2e70   = supervisord.p
+00015e00: 726f 6365 7373 5f67 726f 7570 735b 2766  rocess_groups['f
+00015e10: 6f6f 275d 2e70 726f 6365 7373 6573 5b27  oo'].processes['
+00015e20: 7072 6f63 6573 7332 275d 0d0a 2020 2020  process2']..    
+00015e30: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00015e40: 7175 616c 2870 726f 6365 7373 322e 6c6f  qual(process2.lo
+00015e50: 6773 7265 6d6f 7665 642c 2054 7275 6529  gsremoved, True)
+00015e60: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00015e70: 5f63 6c65 6172 416c 6c50 726f 6365 7373  _clearAllProcess
+00015e80: 4c6f 6773 5f6f 6e65 6661 696c 7328 7365  Logs_onefails(se
+00015e90: 6c66 293a 0d0a 2020 2020 2020 2020 6f70  lf):..        op
+00015ea0: 7469 6f6e 7320 3d20 4475 6d6d 794f 7074  tions = DummyOpt
+00015eb0: 696f 6e73 2829 0d0a 2020 2020 2020 2020  ions()..        
+00015ec0: 7063 6f6e 6669 6731 203d 2044 756d 6d79  pconfig1 = Dummy
+00015ed0: 5043 6f6e 6669 6728 6f70 7469 6f6e 732c  PConfig(options,
+00015ee0: 2027 7072 6f63 6573 7331 272c 2027 666f   'process1', 'fo
+00015ef0: 6f27 2c20 7072 696f 7269 7479 3d31 290d  o', priority=1).
+00015f00: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+00015f10: 3220 3d20 4475 6d6d 7950 436f 6e66 6967  2 = DummyPConfig
+00015f20: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+00015f30: 7373 3227 2c20 2762 6172 272c 2070 7269  ss2', 'bar', pri
+00015f40: 6f72 6974 793d 3229 0d0a 2020 2020 2020  ority=2)..      
+00015f50: 2020 7375 7065 7276 6973 6f72 6420 3d20    supervisord = 
+00015f60: 506f 7075 6c61 7465 6444 756d 6d79 5375  PopulatedDummySu
+00015f70: 7065 7276 6973 6f72 286f 7074 696f 6e73  pervisor(options
+00015f80: 2c20 2766 6f6f 272c 2070 636f 6e66 6967  , 'foo', pconfig
+00015f90: 312c 0d0a 2020 2020 2020 2020 2020 2020  1,..            
+00015fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015fc0: 2020 2070 636f 6e66 6967 3229 0d0a 2020     pconfig2)..  
+00015fd0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+00015fe0: 642e 7365 745f 7072 6f63 6174 7472 2827  d.set_procattr('
+00015ff0: 7072 6f63 6573 7331 272c 2027 6572 726f  process1', 'erro
+00016000: 725f 6174 5f63 6c65 6172 272c 2054 7275  r_at_clear', Tru
+00016010: 6529 0d0a 2020 2020 2020 2020 696e 7465  e)..        inte
+00016020: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
+00016030: 6b65 4f6e 6528 7375 7065 7276 6973 6f72  keOne(supervisor
+00016040: 6429 0d0a 2020 2020 2020 2020 6361 6c6c  d)..        call
+00016050: 6261 636b 203d 2069 6e74 6572 6661 6365  back = interface
+00016060: 2e63 6c65 6172 416c 6c50 726f 6365 7373  .clearAllProcess
+00016070: 4c6f 6773 2829 0d0a 2020 2020 2020 2020  Logs()..        
+00016080: 6361 6c6c 6261 636b 2829 0d0a 2020 2020  callback()..    
+00016090: 2020 2020 7265 7375 6c74 7320 3d20 6361      results = ca
+000160a0: 6c6c 6261 636b 2829 0d0a 2020 2020 2020  llback()..      
+000160b0: 2020 7072 6f63 6573 7331 203d 2073 7570    process1 = sup
+000160c0: 6572 7669 736f 7264 2e70 726f 6365 7373  ervisord.process
+000160d0: 5f67 726f 7570 735b 2766 6f6f 275d 2e70  _groups['foo'].p
+000160e0: 726f 6365 7373 6573 5b27 7072 6f63 6573  rocesses['proces
+000160f0: 7331 275d 0d0a 2020 2020 2020 2020 7365  s1']..        se
+00016100: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
+00016110: 726f 6365 7373 312e 6c6f 6773 7265 6d6f  rocess1.logsremo
+00016120: 7665 642c 2046 616c 7365 290d 0a20 2020  ved, False)..   
+00016130: 2020 2020 2070 726f 6365 7373 3220 3d20       process2 = 
+00016140: 7375 7065 7276 6973 6f72 642e 7072 6f63  supervisord.proc
+00016150: 6573 735f 6772 6f75 7073 5b27 666f 6f27  ess_groups['foo'
+00016160: 5d2e 7072 6f63 6573 7365 735b 2770 726f  ].processes['pro
+00016170: 6365 7373 3227 5d0d 0a20 2020 2020 2020  cess2']..       
+00016180: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00016190: 6c28 7072 6f63 6573 7332 2e6c 6f67 7372  l(process2.logsr
+000161a0: 656d 6f76 6564 2c20 5472 7565 290d 0a20  emoved, True).. 
+000161b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000161c0: 7274 4571 7561 6c28 6c65 6e28 7265 7375  rtEqual(len(resu
+000161d0: 6c74 7329 2c20 3229 0d0a 2020 2020 2020  lts), 2)..      
+000161e0: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
+000161f0: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
+00016200: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00016210: 7365 7274 4571 7561 6c28 7265 7375 6c74  sertEqual(result
+00016220: 735b 305d 2c0d 0a20 2020 2020 2020 2020  s[0],..         
+00016230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016240: 7b27 6e61 6d65 273a 2027 7072 6f63 6573  {'name': 'proces
+00016250: 7331 272c 0d0a 2020 2020 2020 2020 2020  s1',..          
+00016260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016270: 2767 726f 7570 273a 2027 666f 6f27 2c0d  'group': 'foo',.
+00016280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016290: 2020 2020 2020 2020 2020 2027 7374 6174             'stat
+000162a0: 7573 273a 2078 6d6c 7270 632e 4661 756c  us': xmlrpc.Faul
+000162b0: 7473 2e46 4149 4c45 442c 0d0a 2020 2020  ts.FAILED,..    
+000162c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000162d0: 2020 2020 2020 2764 6573 6372 6970 7469        'descripti
+000162e0: 6f6e 273a 2027 4641 494c 4544 3a20 666f  on': 'FAILED: fo
+000162f0: 6f3a 7072 6f63 6573 7331 277d 290d 0a20  o:process1'}).. 
+00016300: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00016310: 7274 4571 7561 6c28 7265 7375 6c74 735b  rtEqual(results[
+00016320: 315d 2c0d 0a20 2020 2020 2020 2020 2020  1],..           
+00016330: 2020 2020 2020 2020 2020 2020 2020 7b27                {'
+00016340: 6e61 6d65 273a 2027 7072 6f63 6573 7332  name': 'process2
+00016350: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
+00016360: 2020 2020 2020 2020 2020 2020 2020 2767                'g
+00016370: 726f 7570 273a 2027 666f 6f27 2c0d 0a20  roup': 'foo',.. 
+00016380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016390: 2020 2020 2020 2020 2027 7374 6174 7573           'status
+000163a0: 273a 2078 6d6c 7270 632e 4661 756c 7473  ': xmlrpc.Faults
+000163b0: 2e53 5543 4345 5353 2c0d 0a20 2020 2020  .SUCCESS,..     
+000163c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000163d0: 2020 2020 2027 6465 7363 7269 7074 696f       'descriptio
+000163e0: 6e27 3a20 274f 4b27 7d29 0d0a 0d0a 2020  n': 'OK'})....  
+000163f0: 2020 6465 6620 7465 7374 5f63 6c65 6172    def test_clear
+00016400: 416c 6c50 726f 6365 7373 4c6f 6773 5f6e  AllProcessLogs_n
+00016410: 6f5f 7072 6f63 6573 7365 7328 7365 6c66  o_processes(self
+00016420: 293a 0d0a 2020 2020 2020 2020 7375 7065  ):..        supe
+00016430: 7276 6973 6f72 6420 3d20 4475 6d6d 7953  rvisord = DummyS
+00016440: 7570 6572 7669 736f 7228 290d 0a20 2020  upervisor()..   
+00016450: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00016460: 4571 7561 6c28 7375 7065 7276 6973 6f72  Equal(supervisor
+00016470: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
+00016480: 2c20 7b7d 290d 0a20 2020 2020 2020 2069  , {})..        i
+00016490: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+000164a0: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+000164b0: 736f 7264 290d 0a20 2020 2020 2020 2063  sord)..        c
+000164c0: 616c 6c62 6163 6b20 3d20 696e 7465 7266  allback = interf
+000164d0: 6163 652e 636c 6561 7241 6c6c 5072 6f63  ace.clearAllProc
+000164e0: 6573 734c 6f67 7328 290d 0a20 2020 2020  essLogs()..     
+000164f0: 2020 2072 6573 756c 7473 203d 2063 616c     results = cal
+00016500: 6c62 6163 6b28 290d 0a20 2020 2020 2020  lback()..       
+00016510: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00016520: 6c28 7265 7375 6c74 732c 205b 5d29 0d0a  l(results, [])..
+00016530: 0d0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00016540: 656e 6450 726f 6365 7373 5374 6469 6e5f  endProcessStdin_
+00016550: 7261 6973 6573 5f69 6e63 6f72 7265 6374  raises_incorrect
+00016560: 5f70 6172 616d 735f 7768 656e 5f6e 6f74  _params_when_not
+00016570: 5f63 6861 7273 2873 656c 6629 3a0d 0a20  _chars(self):.. 
+00016580: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
+00016590: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
+000165a0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
+000165b0: 3120 3d20 4475 6d6d 7950 436f 6e66 6967  1 = DummyPConfig
+000165c0: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
+000165d0: 7373 3127 2c20 2766 6f6f 2729 0d0a 2020  ss1', 'foo')..  
+000165e0: 2020 2020 2020 7375 7065 7276 6973 6f72        supervisor
+000165f0: 6420 3d20 506f 7075 6c61 7465 6444 756d  d = PopulatedDum
+00016600: 6d79 5375 7065 7276 6973 6f72 286f 7074  mySupervisor(opt
+00016610: 696f 6e73 2c20 2766 6f6f 272c 2070 636f  ions, 'foo', pco
+00016620: 6e66 6967 3129 0d0a 2020 2020 2020 2020  nfig1)..        
+00016630: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00016640: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00016650: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00016660: 7468 696e 675f 6e6f 745f 6368 6172 7320  thing_not_chars 
+00016670: 3d20 3432 0d0a 2020 2020 2020 2020 6672  = 42..        fr
+00016680: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
+00016690: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
+000166a0: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
+000166b0: 7452 5043 4572 726f 7228 786d 6c72 7063  tRPCError(xmlrpc
+000166c0: 2e46 6175 6c74 732e 494e 434f 5252 4543  .Faults.INCORREC
+000166d0: 545f 5041 5241 4d45 5445 5253 2c0d 0a20  T_PARAMETERS,.. 
+000166e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166f0: 2020 2020 2020 2020 2020 2020 696e 7465              inte
+00016700: 7266 6163 652e 7365 6e64 5072 6f63 6573  rface.sendProces
+00016710: 7353 7464 696e 2c0d 0a20 2020 2020 2020  sStdin,..       
+00016720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016730: 2020 2020 2020 2770 726f 6365 7373 3127        'process1'
+00016740: 2c20 7468 696e 675f 6e6f 745f 6368 6172  , thing_not_char
+00016750: 7329 0d0a 0d0a 2020 2020 6465 6620 7465  s)....    def te
+00016760: 7374 5f73 656e 6450 726f 6365 7373 5374  st_sendProcessSt
+00016770: 6469 6e5f 7261 6973 6573 5f62 6164 5f6e  din_raises_bad_n
+00016780: 616d 655f 7768 656e 5f62 6164 5f70 726f  ame_when_bad_pro
+00016790: 6365 7373 2873 656c 6629 3a0d 0a20 2020  cess(self):..   
+000167a0: 2020 2020 2073 7570 6572 7669 736f 7264       supervisord
+000167b0: 203d 2044 756d 6d79 5375 7065 7276 6973   = DummySupervis
+000167c0: 6f72 2829 0d0a 2020 2020 2020 2020 696e  or()..        in
+000167d0: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+000167e0: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+000167f0: 6f72 6429 0d0a 2020 2020 2020 2020 6672  ord)..        fr
+00016800: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
+00016810: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
+00016820: 2020 2020 2073 656c 662e 5f61 7373 6572       self._asser
+00016830: 7452 5043 4572 726f 7228 786d 6c72 7063  tRPCError(xmlrpc
+00016840: 2e46 6175 6c74 732e 4241 445f 4e41 4d45  .Faults.BAD_NAME
+00016850: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00016860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016870: 696e 7465 7266 6163 652e 7365 6e64 5072  interface.sendPr
+00016880: 6f63 6573 7353 7464 696e 2c0d 0a20 2020  ocessStdin,..   
+00016890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168a0: 2020 2020 2020 2020 2020 276e 6f6e 6578            'nonex
+000168b0: 6973 7465 6e74 272c 2027 6368 6172 7320  istent', 'chars 
+000168c0: 666f 7220 7374 6469 6e27 290d 0a0d 0a20  for stdin').... 
+000168d0: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
+000168e0: 5072 6f63 6573 7353 7464 696e 5f72 6169  ProcessStdin_rai
+000168f0: 7365 735f 6261 645f 6e61 6d65 5f77 6865  ses_bad_name_whe
+00016900: 6e5f 6e6f 5f70 726f 6365 7373 2873 656c  n_no_process(sel
+00016910: 6629 3a0d 0a20 2020 2020 2020 206f 7074  f):..        opt
+00016920: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
+00016930: 6f6e 7328 290d 0a20 2020 2020 2020 2073  ons()..        s
+00016940: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
+00016950: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
+00016960: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
+00016970: 666f 6f27 290d 0a20 2020 2020 2020 2069  foo')..        i
+00016980: 6e74 6572 6661 6365 203d 2073 656c 662e  nterface = self.
+00016990: 5f6d 616b 654f 6e65 2873 7570 6572 7669  _makeOne(supervi
+000169a0: 736f 7264 290d 0a20 2020 2020 2020 2066  sord)..        f
+000169b0: 726f 6d20 7375 7065 7276 6973 6f72 2069  rom supervisor i
+000169c0: 6d70 6f72 7420 786d 6c72 7063 0d0a 2020  mport xmlrpc..  
+000169d0: 2020 2020 2020 7365 6c66 2e5f 6173 7365        self._asse
+000169e0: 7274 5250 4345 7272 6f72 2878 6d6c 7270  rtRPCError(xmlrp
+000169f0: 632e 4661 756c 7473 2e42 4144 5f4e 414d  c.Faults.BAD_NAM
+00016a00: 452c 0d0a 2020 2020 2020 2020 2020 2020  E,..            
+00016a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a20: 2069 6e74 6572 6661 6365 2e73 656e 6450   interface.sendP
+00016a30: 726f 6365 7373 5374 6469 6e2c 0d0a 2020  rocessStdin,..  
+00016a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a50: 2020 2020 2020 2020 2020 2027 666f 6f3a             'foo:
+00016a60: 2a27 2c20 2763 6861 7273 2066 6f72 2073  *', 'chars for s
+00016a70: 7464 696e 2729 0d0a 0d0a 2020 2020 6465  tdin')....    de
+00016a80: 6620 7465 7374 5f73 656e 6450 726f 6365  f test_sendProce
+00016a90: 7373 5374 6469 6e5f 7261 6973 6573 5f6e  ssStdin_raises_n
+00016aa0: 6f74 5f72 756e 6e69 6e67 5f77 6865 6e5f  ot_running_when_
+00016ab0: 6e6f 745f 7072 6f63 6573 735f 7069 6428  not_process_pid(
+00016ac0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00016ad0: 6f70 7469 6f6e 7320 3d20 4475 6d6d 794f  options = DummyO
+00016ae0: 7074 696f 6e73 2829 0d0a 2020 2020 2020  ptions()..      
+00016af0: 2020 7063 6f6e 6669 6731 203d 2044 756d    pconfig1 = Dum
+00016b00: 6d79 5043 6f6e 6669 6728 6f70 7469 6f6e  myPConfig(option
+00016b10: 732c 2027 7072 6f63 6573 7331 272c 2027  s, 'process1', '
+00016b20: 666f 6f27 290d 0a20 2020 2020 2020 2073  foo')..        s
+00016b30: 7570 6572 7669 736f 7264 203d 2050 6f70  upervisord = Pop
+00016b40: 756c 6174 6564 4475 6d6d 7953 7570 6572  ulatedDummySuper
+00016b50: 7669 736f 7228 6f70 7469 6f6e 732c 2027  visor(options, '
+00016b60: 7072 6f63 6573 7331 272c 2070 636f 6e66  process1', pconf
+00016b70: 6967 3129 0d0a 2020 2020 2020 2020 7375  ig1)..        su
+00016b80: 7065 7276 6973 6f72 642e 7365 745f 7072  pervisord.set_pr
+00016b90: 6f63 6174 7472 2827 7072 6f63 6573 7331  ocattr('process1
+00016ba0: 272c 2027 7069 6427 2c20 3029 0d0a 2020  ', 'pid', 0)..  
+00016bb0: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00016bc0: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00016bd0: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+00016be0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00016bf0: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
+00016c00: 7270 630d 0a20 2020 2020 2020 2073 656c  rpc..        sel
+00016c10: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00016c20: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+00016c30: 4e4f 545f 5255 4e4e 494e 472c 0d0a 2020  NOT_RUNNING,..  
+00016c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016c50: 2020 2020 2020 2020 2020 2069 6e74 6572             inter
+00016c60: 6661 6365 2e73 656e 6450 726f 6365 7373  face.sendProcess
+00016c70: 5374 6469 6e2c 0d0a 2020 2020 2020 2020  Stdin,..        
+00016c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016c90: 2020 2020 2027 7072 6f63 6573 7331 272c       'process1',
+00016ca0: 2027 6368 6172 7320 666f 7220 7374 6469   'chars for stdi
+00016cb0: 6e27 290d 0a0d 0a20 2020 2064 6566 2074  n')....    def t
+00016cc0: 6573 745f 7365 6e64 5072 6f63 6573 7353  est_sendProcessS
+00016cd0: 7464 696e 5f72 6169 7365 735f 6e6f 745f  tdin_raises_not_
+00016ce0: 7275 6e6e 696e 675f 7768 656e 5f6b 696c  running_when_kil
+00016cf0: 6c69 6e67 2873 656c 6629 3a0d 0a20 2020  ling(self):..   
+00016d00: 2020 2020 206f 7074 696f 6e73 203d 2044       options = D
+00016d10: 756d 6d79 4f70 7469 6f6e 7328 290d 0a20  ummyOptions().. 
+00016d20: 2020 2020 2020 2070 636f 6e66 6967 3120         pconfig1 
+00016d30: 3d20 4475 6d6d 7950 436f 6e66 6967 286f  = DummyPConfig(o
+00016d40: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+00016d50: 3127 2c20 2766 6f6f 2729 0d0a 2020 2020  1', 'foo')..    
+00016d60: 2020 2020 7375 7065 7276 6973 6f72 6420      supervisord 
+00016d70: 3d20 506f 7075 6c61 7465 6444 756d 6d79  = PopulatedDummy
+00016d80: 5375 7065 7276 6973 6f72 286f 7074 696f  Supervisor(optio
+00016d90: 6e73 2c20 2770 726f 6365 7373 3127 2c20  ns, 'process1', 
+00016da0: 7063 6f6e 6669 6731 290d 0a20 2020 2020  pconfig1)..     
+00016db0: 2020 2073 7570 6572 7669 736f 7264 2e73     supervisord.s
+00016dc0: 6574 5f70 726f 6361 7474 7228 2770 726f  et_procattr('pro
+00016dd0: 6365 7373 3127 2c20 2770 6964 272c 2034  cess1', 'pid', 4
+00016de0: 3229 0d0a 2020 2020 2020 2020 7375 7065  2)..        supe
+00016df0: 7276 6973 6f72 642e 7365 745f 7072 6f63  rvisord.set_proc
+00016e00: 6174 7472 2827 7072 6f63 6573 7331 272c  attr('process1',
+00016e10: 2027 6b69 6c6c 696e 6727 2c20 5472 7565   'killing', True
+00016e20: 290d 0a20 2020 2020 2020 2069 6e74 6572  )..        inter
+00016e30: 6661 6365 203d 2073 656c 662e 5f6d 616b  face = self._mak
+00016e40: 654f 6e65 2873 7570 6572 7669 736f 7264  eOne(supervisord
+00016e50: 290d 0a20 2020 2020 2020 2066 726f 6d20  )..        from 
+00016e60: 7375 7065 7276 6973 6f72 2069 6d70 6f72  supervisor impor
+00016e70: 7420 786d 6c72 7063 0d0a 2020 2020 2020  t xmlrpc..      
+00016e80: 2020 7365 6c66 2e5f 6173 7365 7274 5250    self._assertRP
+00016e90: 4345 7272 6f72 2878 6d6c 7270 632e 4661  CError(xmlrpc.Fa
+00016ea0: 756c 7473 2e4e 4f54 5f52 554e 4e49 4e47  ults.NOT_RUNNING
+00016eb0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00016ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ed0: 696e 7465 7266 6163 652e 7365 6e64 5072  interface.sendPr
+00016ee0: 6f63 6573 7353 7464 696e 2c0d 0a20 2020  ocessStdin,..   
+00016ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016f00: 2020 2020 2020 2020 2020 2770 726f 6365            'proce
+00016f10: 7373 3127 2c20 2763 6861 7273 2066 6f72  ss1', 'chars for
+00016f20: 2073 7464 696e 2729 0d0a 0d0a 2020 2020   stdin')....    
+00016f30: 6465 6620 7465 7374 5f73 656e 6450 726f  def test_sendPro
+00016f40: 6365 7373 5374 6469 6e5f 7261 6973 6573  cessStdin_raises
+00016f50: 5f6e 6f5f 6669 6c65 5f77 6865 6e5f 7772  _no_file_when_wr
+00016f60: 6974 655f 7261 6973 6573 5f65 7069 7065  ite_raises_epipe
+00016f70: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00016f80: 206f 7074 696f 6e73 203d 2044 756d 6d79   options = Dummy
+00016f90: 4f70 7469 6f6e 7328 290d 0a20 2020 2020  Options()..     
+00016fa0: 2020 2070 636f 6e66 6967 3120 3d20 4475     pconfig1 = Du
+00016fb0: 6d6d 7950 436f 6e66 6967 286f 7074 696f  mmyPConfig(optio
+00016fc0: 6e73 2c20 2770 726f 6365 7373 3127 2c20  ns, 'process1', 
+00016fd0: 2766 6f6f 2729 0d0a 2020 2020 2020 2020  'foo')..        
+00016fe0: 7375 7065 7276 6973 6f72 6420 3d20 506f  supervisord = Po
+00016ff0: 7075 6c61 7465 6444 756d 6d79 5375 7065  pulatedDummySupe
+00017000: 7276 6973 6f72 286f 7074 696f 6e73 2c20  rvisor(options, 
+00017010: 2770 726f 6365 7373 3127 2c20 7063 6f6e  'process1', pcon
+00017020: 6669 6731 290d 0a20 2020 2020 2020 2073  fig1)..        s
+00017030: 7570 6572 7669 736f 7264 2e73 6574 5f70  upervisord.set_p
+00017040: 726f 6361 7474 7228 2770 726f 6365 7373  rocattr('process
+00017050: 3127 2c20 2770 6964 272c 2034 3229 0d0a  1', 'pid', 42)..
+00017060: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00017070: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+00017080: 2827 7072 6f63 6573 7331 272c 2027 6b69  ('process1', 'ki
+00017090: 6c6c 696e 6727 2c20 4661 6c73 6529 0d0a  lling', False)..
+000170a0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000170b0: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+000170c0: 2827 7072 6f63 6573 7331 272c 2027 7772  ('process1', 'wr
+000170d0: 6974 655f 6578 6365 7074 696f 6e27 2c0d  ite_exception',.
+000170e0: 0a20 2020 2020 2020 2020 2020 204f 5345  .            OSE
+000170f0: 7272 6f72 2865 7272 6e6f 2e45 5049 5045  rror(errno.EPIPE
+00017100: 2c20 6f73 2e73 7472 6572 726f 7228 6572  , os.strerror(er
+00017110: 726e 6f2e 4550 4950 4529 2929 0d0a 2020  rno.EPIPE)))..  
+00017120: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00017130: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00017140: 7375 7065 7276 6973 6f72 6429 0d0a 2020  supervisord)..  
+00017150: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+00017160: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
+00017170: 7270 630d 0a20 2020 2020 2020 2073 656c  rpc..        sel
+00017180: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00017190: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+000171a0: 4e4f 5f46 494c 452c 0d0a 2020 2020 2020  NO_FILE,..      
+000171b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000171c0: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
+000171d0: 2e73 656e 6450 726f 6365 7373 5374 6469  .sendProcessStdi
+000171e0: 6e2c 0d0a 2020 2020 2020 2020 2020 2020  n,..            
+000171f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017200: 2027 7072 6f63 6573 7331 272c 2027 6368   'process1', 'ch
+00017210: 6172 7320 666f 7220 7374 6469 6e27 290d  ars for stdin').
+00017220: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
+00017230: 7365 6e64 5072 6f63 6573 7353 7464 696e  sendProcessStdin
+00017240: 5f72 6572 6169 7365 735f 6f74 6865 725f  _reraises_other_
+00017250: 6f73 6572 726f 7273 2873 656c 6629 3a0d  oserrors(self):.
+00017260: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00017270: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+00017280: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+00017290: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
+000172a0: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
+000172b0: 6365 7373 3127 2c20 2766 6f6f 2729 0d0a  cess1', 'foo')..
+000172c0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+000172d0: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+000172e0: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+000172f0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+00017300: 3127 2c20 7063 6f6e 6669 6731 290d 0a20  1', pconfig1).. 
+00017310: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+00017320: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
+00017330: 2770 726f 6365 7373 3127 2c20 2770 6964  'process1', 'pid
+00017340: 272c 2034 3229 0d0a 2020 2020 2020 2020  ', 42)..        
+00017350: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+00017360: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
+00017370: 7331 272c 2027 6b69 6c6c 696e 6727 2c20  s1', 'killing', 
+00017380: 4661 6c73 6529 0d0a 2020 2020 2020 2020  False)..        
+00017390: 7375 7065 7276 6973 6f72 642e 7365 745f  supervisord.set_
+000173a0: 7072 6f63 6174 7472 2827 7072 6f63 6573  procattr('proces
+000173b0: 7331 272c 2027 7772 6974 655f 6578 6365  s1', 'write_exce
+000173c0: 7074 696f 6e27 2c0d 0a20 2020 2020 2020  ption',..       
+000173d0: 2020 2020 204f 5345 7272 6f72 2865 7272       OSError(err
+000173e0: 6e6f 2e45 494e 5452 2c20 6f73 2e73 7472  no.EINTR, os.str
+000173f0: 6572 726f 7228 6572 726e 6f2e 4549 4e54  error(errno.EINT
+00017400: 5229 2929 0d0a 2020 2020 2020 2020 696e  R)))..        in
+00017410: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00017420: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00017430: 6f72 6429 0d0a 2020 2020 2020 2020 7365  ord)..        se
+00017440: 6c66 2e61 7373 6572 7452 6169 7365 7328  lf.assertRaises(
+00017450: 4f53 4572 726f 722c 0d0a 2020 2020 2020  OSError,..      
+00017460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017470: 2020 2020 696e 7465 7266 6163 652e 7365      interface.se
+00017480: 6e64 5072 6f63 6573 7353 7464 696e 2c0d  ndProcessStdin,.
+00017490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000174a0: 2020 2020 2020 2020 2020 2027 7072 6f63             'proc
+000174b0: 6573 7331 272c 2027 6368 6172 7320 666f  ess1', 'chars fo
+000174c0: 7220 7374 6469 6e27 290d 0a0d 0a20 2020  r stdin')....   
+000174d0: 2064 6566 2074 6573 745f 7365 6e64 5072   def test_sendPr
+000174e0: 6f63 6573 7353 7464 696e 5f77 7269 7465  ocessStdin_write
+000174f0: 735f 6368 6172 735f 616e 645f 7265 7475  s_chars_and_retu
+00017500: 726e 735f 7472 7565 2873 656c 6629 3a0d  rns_true(self):.
+00017510: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00017520: 203d 2044 756d 6d79 4f70 7469 6f6e 7328   = DummyOptions(
+00017530: 290d 0a20 2020 2020 2020 2070 636f 6e66  )..        pconf
+00017540: 6967 3120 3d20 4475 6d6d 7950 436f 6e66  ig1 = DummyPConf
+00017550: 6967 286f 7074 696f 6e73 2c20 2770 726f  ig(options, 'pro
+00017560: 6365 7373 3127 2c20 2766 6f6f 2729 0d0a  cess1', 'foo')..
+00017570: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00017580: 6f72 6420 3d20 506f 7075 6c61 7465 6444  ord = PopulatedD
+00017590: 756d 6d79 5375 7065 7276 6973 6f72 286f  ummySupervisor(o
+000175a0: 7074 696f 6e73 2c20 2770 726f 6365 7373  ptions, 'process
+000175b0: 3127 2c20 7063 6f6e 6669 6731 290d 0a20  1', pconfig1).. 
+000175c0: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+000175d0: 7264 2e73 6574 5f70 726f 6361 7474 7228  rd.set_procattr(
+000175e0: 2770 726f 6365 7373 3127 2c20 2770 6964  'process1', 'pid
+000175f0: 272c 2034 3229 0d0a 2020 2020 2020 2020  ', 42)..        
+00017600: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00017610: 2e5f 6d61 6b65 4f6e 6528 7375 7065 7276  ._makeOne(superv
+00017620: 6973 6f72 6429 0d0a 2020 2020 2020 2020  isord)..        
+00017630: 6368 6172 7320 3d20 6227 6368 6172 7320  chars = b'chars 
+00017640: 666f 7220 7374 6469 6e27 0d0a 2020 2020  for stdin'..    
+00017650: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00017660: 7275 6528 696e 7465 7266 6163 652e 7365  rue(interface.se
+00017670: 6e64 5072 6f63 6573 7353 7464 696e 2827  ndProcessStdin('
+00017680: 7072 6f63 6573 7331 272c 2063 6861 7273  process1', chars
+00017690: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
+000176a0: 2e61 7373 6572 7445 7175 616c 2827 7365  .assertEqual('se
+000176b0: 6e64 5072 6f63 6573 7353 7464 696e 272c  ndProcessStdin',
+000176c0: 2069 6e74 6572 6661 6365 2e75 7064 6174   interface.updat
+000176d0: 655f 7465 7874 290d 0a20 2020 2020 2020  e_text)..       
+000176e0: 2070 726f 6365 7373 3120 3d20 7375 7065   process1 = supe
+000176f0: 7276 6973 6f72 642e 7072 6f63 6573 735f  rvisord.process_
+00017700: 6772 6f75 7073 5b27 7072 6f63 6573 7331  groups['process1
+00017710: 275d 2e70 726f 6365 7373 6573 5b27 7072  '].processes['pr
+00017720: 6f63 6573 7331 275d 0d0a 2020 2020 2020  ocess1']..      
+00017730: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00017740: 616c 2870 726f 6365 7373 312e 7374 6469  al(process1.stdi
+00017750: 6e5f 6275 6666 6572 2c20 6368 6172 7329  n_buffer, chars)
+00017760: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00017770: 5f73 656e 6450 726f 6365 7373 5374 6469  _sendProcessStdi
+00017780: 6e5f 756e 6963 6f64 655f 656e 636f 6465  n_unicode_encode
+00017790: 645f 746f 5f75 7466 3828 7365 6c66 293a  d_to_utf8(self):
+000177a0: 0d0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+000177b0: 7320 3d20 4475 6d6d 794f 7074 696f 6e73  s = DummyOptions
+000177c0: 2829 0d0a 2020 2020 2020 2020 7063 6f6e  ()..        pcon
+000177d0: 6669 6731 203d 2044 756d 6d79 5043 6f6e  fig1 = DummyPCon
+000177e0: 6669 6728 6f70 7469 6f6e 732c 2027 7072  fig(options, 'pr
+000177f0: 6f63 6573 7331 272c 2027 666f 6f27 290d  ocess1', 'foo').
+00017800: 0a20 2020 2020 2020 2073 7570 6572 7669  .        supervi
+00017810: 736f 7264 203d 2050 6f70 756c 6174 6564  sord = Populated
+00017820: 4475 6d6d 7953 7570 6572 7669 736f 7228  DummySupervisor(
+00017830: 6f70 7469 6f6e 732c 2027 7072 6f63 6573  options, 'proces
+00017840: 7331 272c 2070 636f 6e66 6967 3129 0d0a  s1', pconfig1)..
+00017850: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00017860: 6f72 642e 7365 745f 7072 6f63 6174 7472  ord.set_procattr
+00017870: 2827 7072 6f63 6573 7331 272c 2027 7069  ('process1', 'pi
+00017880: 6427 2c20 3432 290d 0a20 2020 2020 2020  d', 42)..       
+00017890: 2069 6e74 6572 6661 6365 203d 2073 656c   interface = sel
+000178a0: 662e 5f6d 616b 654f 6e65 2873 7570 6572  f._makeOne(super
+000178b0: 7669 736f 7264 290d 0a20 2020 2020 2020  visord)..       
+000178c0: 2069 6e74 6572 6661 6365 2e73 656e 6450   interface.sendP
+000178d0: 726f 6365 7373 5374 6469 6e28 2770 726f  rocessStdin('pro
+000178e0: 6365 7373 3127 2c20 6173 5f73 7472 696e  cess1', as_strin
+000178f0: 6728 6227 6669 5c78 6333 5c78 6164 2729  g(b'fi\xc3\xad')
+00017900: 290d 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+00017910: 7373 3120 3d20 7375 7065 7276 6973 6f72  ss1 = supervisor
+00017920: 642e 7072 6f63 6573 735f 6772 6f75 7073  d.process_groups
+00017930: 5b27 7072 6f63 6573 7331 275d 2e70 726f  ['process1'].pro
+00017940: 6365 7373 6573 5b27 7072 6f63 6573 7331  cesses['process1
+00017950: 275d 0d0a 2020 2020 2020 2020 7365 6c66  ']..        self
+00017960: 2e61 7373 6572 7445 7175 616c 2870 726f  .assertEqual(pro
+00017970: 6365 7373 312e 7374 6469 6e5f 6275 6666  cess1.stdin_buff
+00017980: 6572 2c20 6227 6669 5c78 6333 5c78 6164  er, b'fi\xc3\xad
+00017990: 2729 0d0a 0d0a 2020 2020 6465 6620 7465  ')....    def te
+000179a0: 7374 5f73 656e 6452 656d 6f74 6543 6f6d  st_sendRemoteCom
+000179b0: 6d45 7665 6e74 5f6e 6f74 6966 6965 735f  mEvent_notifies_
+000179c0: 7375 6273 6372 6962 6572 7328 7365 6c66  subscribers(self
+000179d0: 293a 0d0a 2020 2020 2020 2020 6f70 7469  ):..        opti
+000179e0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+000179f0: 6e73 2829 0d0a 2020 2020 2020 2020 7375  ns()..        su
+00017a00: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+00017a10: 7953 7570 6572 7669 736f 7228 6f70 7469  ySupervisor(opti
+00017a20: 6f6e 7329 0d0a 2020 2020 2020 2020 696e  ons)..        in
+00017a30: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00017a40: 6d61 6b65 4f6e 6528 7375 7065 7276 6973  makeOne(supervis
+00017a50: 6f72 6429 0d0a 0d0a 2020 2020 2020 2020  ord)....        
+00017a60: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
+00017a70: 696d 706f 7274 2065 7665 6e74 730d 0a20  import events.. 
+00017a80: 2020 2020 2020 204c 203d 205b 5d0d 0a0d         L = []...
+00017a90: 0a20 2020 2020 2020 2064 6566 2063 616c  .        def cal
+00017aa0: 6c62 6163 6b28 6576 656e 7429 3a0d 0a20  lback(event):.. 
+00017ab0: 2020 2020 2020 2020 2020 204c 2e61 7070             L.app
+00017ac0: 656e 6428 6576 656e 7429 0d0a 0d0a 2020  end(event)....  
+00017ad0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00017ae0: 2020 2020 2020 2020 6576 656e 7473 2e63          events.c
+00017af0: 616c 6c62 6163 6b73 5b3a 5d20 3d20 5b28  allbacks[:] = [(
+00017b00: 6576 656e 7473 2e52 656d 6f74 6543 6f6d  events.RemoteCom
+00017b10: 6d75 6e69 6361 7469 6f6e 4576 656e 742c  municationEvent,
+00017b20: 2063 616c 6c62 6163 6b29 5d0d 0a20 2020   callback)]..   
+00017b30: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00017b40: 3d20 696e 7465 7266 6163 652e 7365 6e64  = interface.send
+00017b50: 5265 6d6f 7465 436f 6d6d 4576 656e 7428  RemoteCommEvent(
+00017b60: 2766 6f6f 272c 2027 6261 7227 290d 0a20  'foo', 'bar').. 
+00017b70: 2020 2020 2020 2066 696e 616c 6c79 3a0d         finally:.
+00017b80: 0a20 2020 2020 2020 2020 2020 2065 7665  .            eve
+00017b90: 6e74 732e 6361 6c6c 6261 636b 735b 3a5d  nts.callbacks[:]
+00017ba0: 203d 205b 5d0d 0a20 2020 2020 2020 2020   = []..         
+00017bb0: 2020 2065 7665 6e74 732e 636c 6561 7228     events.clear(
+00017bc0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00017bd0: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
+00017be0: 756c 7429 0d0a 2020 2020 2020 2020 7365  ult)..        se
+00017bf0: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+00017c00: 656e 284c 292c 2031 290d 0a20 2020 2020  en(L), 1)..     
+00017c10: 2020 2065 7665 6e74 203d 204c 5b30 5d0d     event = L[0].
+00017c20: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00017c30: 7365 7274 4571 7561 6c28 6576 656e 742e  sertEqual(event.
+00017c40: 7479 7065 2c20 2766 6f6f 2729 0d0a 2020  type, 'foo')..  
+00017c50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00017c60: 7445 7175 616c 2865 7665 6e74 2e64 6174  tEqual(event.dat
+00017c70: 612c 2027 6261 7227 290d 0a0d 0a20 2020  a, 'bar')....   
+00017c80: 2064 6566 2074 6573 745f 7365 6e64 5265   def test_sendRe
+00017c90: 6d6f 7465 436f 6d6d 4576 656e 745f 756e  moteCommEvent_un
+00017ca0: 6963 6f64 655f 656e 636f 6465 645f 746f  icode_encoded_to
+00017cb0: 5f75 7466 3828 7365 6c66 293a 0d0a 2020  _utf8(self):..  
+00017cc0: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
+00017cd0: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
+00017ce0: 2020 2020 2020 2020 7375 7065 7276 6973          supervis
+00017cf0: 6f72 6420 3d20 4475 6d6d 7953 7570 6572  ord = DummySuper
+00017d00: 7669 736f 7228 6f70 7469 6f6e 7329 0d0a  visor(options)..
+00017d10: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00017d20: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00017d30: 6528 7375 7065 7276 6973 6f72 6429 0d0a  e(supervisord)..
+00017d40: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
+00017d50: 7570 6572 7669 736f 7220 696d 706f 7274  upervisor import
+00017d60: 2065 7665 6e74 730d 0a20 2020 2020 2020   events..       
+00017d70: 204c 203d 205b 5d0d 0a0d 0a20 2020 2020   L = []....     
+00017d80: 2020 2064 6566 2063 616c 6c62 6163 6b28     def callback(
+00017d90: 6576 656e 7429 3a0d 0a20 2020 2020 2020  event):..       
+00017da0: 2020 2020 204c 2e61 7070 656e 6428 6576       L.append(ev
+00017db0: 656e 7429 0d0a 0d0a 2020 2020 2020 2020  ent)....        
+00017dc0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00017dd0: 2020 6576 656e 7473 2e63 616c 6c62 6163    events.callbac
+00017de0: 6b73 5b3a 5d20 3d20 5b28 6576 656e 7473  ks[:] = [(events
+00017df0: 2e52 656d 6f74 6543 6f6d 6d75 6e69 6361  .RemoteCommunica
+00017e00: 7469 6f6e 4576 656e 742c 2063 616c 6c62  tionEvent, callb
+00017e10: 6163 6b29 5d0d 0a20 2020 2020 2020 2020  ack)]..         
+00017e20: 2020 2072 6573 756c 7420 3d20 696e 7465     result = inte
+00017e30: 7266 6163 652e 7365 6e64 5265 6d6f 7465  rface.sendRemote
+00017e40: 436f 6d6d 4576 656e 7428 0d0a 2020 2020  CommEvent(..    
+00017e50: 2020 2020 2020 2020 2020 2020 6173 5f73              as_s
+00017e60: 7472 696e 6728 2766 69c3 ad20 6f6e 6365  tring('fi.. once
+00017e70: 2729 2c0d 0a20 2020 2020 2020 2020 2020  '),..           
+00017e80: 2020 2020 2061 735f 7374 7269 6e67 2827       as_string('
+00017e90: 6669 c3ad 2074 7769 6365 2729 2c0d 0a20  fi.. twice'),.. 
+00017ea0: 2020 2020 2020 2020 2020 2029 0d0a 2020             )..  
+00017eb0: 2020 2020 2020 6669 6e61 6c6c 793a 0d0a        finally:..
+00017ec0: 2020 2020 2020 2020 2020 2020 6576 656e              even
+00017ed0: 7473 2e63 616c 6c62 6163 6b73 5b3a 5d20  ts.callbacks[:] 
+00017ee0: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
+00017ef0: 2020 6576 656e 7473 2e63 6c65 6172 2829    events.clear()
+00017f00: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00017f10: 2e61 7373 6572 7454 7275 6528 7265 7375  .assertTrue(resu
+00017f20: 6c74 290d 0a20 2020 2020 2020 2073 656c  lt)..        sel
+00017f30: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
+00017f40: 6e28 4c29 2c20 3129 0d0a 2020 2020 2020  n(L), 1)..      
+00017f50: 2020 6576 656e 7420 3d20 4c5b 305d 0d0a    event = L[0]..
+00017f60: 2020 2020 2020 2020 6966 2050 5932 3a0d          if PY2:.
+00017f70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00017f80: 662e 6173 7365 7274 4571 7561 6c28 6576  f.assertEqual(ev
+00017f90: 656e 742e 7479 7065 2c20 2766 695c 7863  ent.type, 'fi\xc
+00017fa0: 335c 7861 6420 6f6e 6365 2729 0d0a 2020  3\xad once')..  
+00017fb0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00017fc0: 7373 6572 7445 7175 616c 2865 7665 6e74  ssertEqual(event
+00017fd0: 2e64 6174 612c 2027 6669 5c78 6333 5c78  .data, 'fi\xc3\x
+00017fe0: 6164 2074 7769 6365 2729 0d0a 2020 2020  ad twice')..    
+00017ff0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+00018000: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00018010: 7274 4571 7561 6c28 6576 656e 742e 7479  rtEqual(event.ty
+00018020: 7065 2c20 2766 69c3 ad20 6f6e 6365 2729  pe, 'fi.. once')
+00018030: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00018040: 6c66 2e61 7373 6572 7445 7175 616c 2865  lf.assertEqual(e
+00018050: 7665 6e74 2e64 6174 612c 2027 6669 c3ad  vent.data, 'fi..
+00018060: 2074 7769 6365 2729 0d0a 0d0a 0d0a 636c   twice')......cl
+00018070: 6173 7320 5379 7374 656d 4e61 6d65 7370  ass SystemNamesp
+00018080: 6163 6558 4d4c 5250 4349 6e74 6572 6661  aceXMLRPCInterfa
+00018090: 6365 5465 7374 7328 5465 7374 4261 7365  ceTests(TestBase
+000180a0: 293a 0d0a 2020 2020 6465 6620 5f67 6574  ):..    def _get
+000180b0: 5461 7267 6574 436c 6173 7328 7365 6c66  TargetClass(self
+000180c0: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
+000180d0: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
+000180e0: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
+000180f0: 2020 2072 6574 7572 6e20 786d 6c72 7063     return xmlrpc
+00018100: 2e53 7973 7465 6d4e 616d 6573 7061 6365  .SystemNamespace
+00018110: 5250 4349 6e74 6572 6661 6365 0d0a 0d0a  RPCInterface....
+00018120: 2020 2020 6465 6620 5f6d 616b 654f 6e65      def _makeOne
+00018130: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00018140: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00018150: 2069 6d70 6f72 7420 7270 6369 6e74 6572   import rpcinter
+00018160: 6661 6365 0d0a 2020 2020 2020 2020 7375  face..        su
+00018170: 7065 7276 6973 6f72 6420 3d20 4475 6d6d  pervisord = Dumm
+00018180: 7953 7570 6572 7669 736f 7228 290d 0a20  ySupervisor().. 
+00018190: 2020 2020 2020 2073 7570 6572 7669 736f         superviso
+000181a0: 7220 3d20 7270 6369 6e74 6572 6661 6365  r = rpcinterface
+000181b0: 2e53 7570 6572 7669 736f 724e 616d 6573  .SupervisorNames
+000181c0: 7061 6365 5250 4349 6e74 6572 6661 6365  paceRPCInterface
+000181d0: 2873 7570 6572 7669 736f 7264 290d 0a20  (supervisord).. 
+000181e0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000181f0: 6c66 2e5f 6765 7454 6172 6765 7443 6c61  lf._getTargetCla
+00018200: 7373 2829 280d 0a20 2020 2020 2020 2020  ss()(..         
+00018210: 2020 205b 2827 7375 7065 7276 6973 6f72     [('supervisor
+00018220: 272c 2073 7570 6572 7669 736f 7229 2c0d  ', supervisor),.
+00018230: 0a20 2020 2020 2020 2020 2020 2020 5d0d  .             ].
+00018240: 0a20 2020 2020 2020 2029 0d0a 0d0a 2020  .        )....  
+00018250: 2020 6465 6620 7465 7374 5f63 746f 7228    def test_ctor(
+00018260: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00018270: 696e 7465 7266 6163 6520 3d20 7365 6c66  interface = self
+00018280: 2e5f 6d61 6b65 4f6e 6528 290d 0a20 2020  ._makeOne()..   
+00018290: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000182a0: 5472 7565 2869 6e74 6572 6661 6365 2e6e  True(interface.n
+000182b0: 616d 6573 7061 6365 735b 2773 7570 6572  amespaces['super
+000182c0: 7669 736f 7227 5d29 0d0a 2020 2020 2020  visor'])..      
+000182d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000182e0: 6528 696e 7465 7266 6163 652e 6e61 6d65  e(interface.name
+000182f0: 7370 6163 6573 5b27 7379 7374 656d 275d  spaces['system']
+00018300: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
+00018310: 745f 6c69 7374 4d65 7468 6f64 7328 7365  t_listMethods(se
+00018320: 6c66 293a 0d0a 2020 2020 2020 2020 696e  lf):..        in
+00018330: 7465 7266 6163 6520 3d20 7365 6c66 2e5f  terface = self._
+00018340: 6d61 6b65 4f6e 6528 290d 0a20 2020 2020  makeOne()..     
+00018350: 2020 206d 6574 686f 6473 203d 2069 6e74     methods = int
+00018360: 6572 6661 6365 2e6c 6973 744d 6574 686f  erface.listMetho
+00018370: 6473 2829 0d0a 2020 2020 2020 2020 6d65  ds()..        me
+00018380: 7468 6f64 732e 736f 7274 2829 0d0a 2020  thods.sort()..  
+00018390: 2020 2020 2020 6b65 7973 203d 206c 6973        keys = lis
+000183a0: 7428 696e 7465 7266 6163 652e 5f6c 6973  t(interface._lis
+000183b0: 744d 6574 686f 6473 2829 2e6b 6579 7328  tMethods().keys(
+000183c0: 2929 0d0a 2020 2020 2020 2020 6b65 7973  ))..        keys
+000183d0: 2e73 6f72 7428 290d 0a20 2020 2020 2020  .sort()..       
+000183e0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000183f0: 6c28 6d65 7468 6f64 732c 206b 6579 7329  l(methods, keys)
+00018400: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00018410: 5f6d 6574 686f 6453 6967 6e61 7475 7265  _methodSignature
+00018420: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00018430: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00018440: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
+00018450: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00018460: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00018470: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00018480: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00018490: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+000184a0: 5349 474e 4154 5552 455f 554e 5355 5050  SIGNATURE_UNSUPP
+000184b0: 4f52 5445 442c 0d0a 2020 2020 2020 2020  ORTED,..        
+000184c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000184d0: 2020 2020 2069 6e74 6572 6661 6365 2e6d       interface.m
+000184e0: 6574 686f 6453 6967 6e61 7475 7265 2c0d  ethodSignature,.
+000184f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018500: 2020 2020 2020 2020 2020 2020 2020 5b27                ['
+00018510: 666f 6f2e 6261 7227 5d29 0d0a 2020 2020  foo.bar'])..    
+00018520: 2020 2020 7265 7375 6c74 203d 2069 6e74      result = int
+00018530: 6572 6661 6365 2e6d 6574 686f 6453 6967  erface.methodSig
+00018540: 6e61 7475 7265 2827 7379 7374 656d 2e6d  nature('system.m
+00018550: 6574 686f 6453 6967 6e61 7475 7265 2729  ethodSignature')
+00018560: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00018570: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
+00018580: 742c 205b 2761 7272 6179 272c 2027 7374  t, ['array', 'st
+00018590: 7269 6e67 275d 290d 0a0d 0a20 2020 2064  ring'])....    d
+000185a0: 6566 2074 6573 745f 616c 6c4d 6574 686f  ef test_allMetho
+000185b0: 6444 6f63 7328 7365 6c66 293a 0d0a 2020  dDocs(self):..  
+000185c0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
+000185d0: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
+000185e0: 7270 630d 0a20 2020 2020 2020 2023 2062  rpc..        # b
+000185f0: 656c 742d 616e 642d 7375 7370 656e 6465  elt-and-suspende
+00018600: 7273 2074 6573 7420 666f 7220 646f 6373  rs test for docs
+00018610: 7472 696e 672d 6173 2d74 7970 696e 6720  tring-as-typing 
+00018620: 7061 7273 696e 6720 636f 7272 6563 746e  parsing correctn
+00018630: 6573 730d 0a20 2020 2020 2020 2023 2061  ess..        # a
+00018640: 6e64 2064 6f63 756d 656e 7461 7469 6f6e  nd documentation
+00018650: 2076 616c 6964 6974 7920 7673 2e20 696d   validity vs. im
+00018660: 706c 656d 656e 7461 7469 6f6e 0d0a 2020  plementation..  
+00018670: 2020 2020 2020 5f52 5043 5459 5045 5320        _RPCTYPES 
+00018680: 3d20 5b27 696e 7427 2c20 2764 6f75 626c  = ['int', 'doubl
+00018690: 6527 2c20 2773 7472 696e 6727 2c20 2762  e', 'string', 'b
+000186a0: 6f6f 6c65 616e 272c 2027 6461 7465 5469  oolean', 'dateTi
+000186b0: 6d65 2e69 736f 3836 3031 272c 0d0a 2020  me.iso8601',..  
+000186c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000186d0: 2020 2027 6261 7365 3634 272c 2027 6269     'base64', 'bi
+000186e0: 6e61 7279 272c 2027 6172 7261 7927 2c20  nary', 'array', 
+000186f0: 2773 7472 7563 7427 5d0d 0a20 2020 2020  'struct']..     
+00018700: 2020 2069 6e74 6572 6661 6365 203d 2073     interface = s
+00018710: 656c 662e 5f6d 616b 654f 6e65 2829 0d0a  elf._makeOne()..
+00018720: 2020 2020 2020 2020 6d65 7468 6f64 7320          methods 
+00018730: 3d20 696e 7465 7266 6163 652e 5f6c 6973  = interface._lis
+00018740: 744d 6574 686f 6473 2829 0d0a 2020 2020  tMethods()..    
+00018750: 2020 2020 666f 7220 6b20 696e 206d 6574      for k in met
+00018760: 686f 6473 2e6b 6579 7328 293a 0d0a 2020  hods.keys():..  
+00018770: 2020 2020 2020 2020 2020 2320 6966 2061            # if a
+00018780: 206d 6574 686f 6420 646f 6573 6e27 7420   method doesn't 
+00018790: 6861 7665 2061 2040 7265 7475 726e 2076  have a @return v
+000187a0: 616c 7565 2c20 616e 2052 5043 4572 726f  alue, an RPCErro
+000187b0: 7220 6973 2072 6169 7365 642e 0d0a 2020  r is raised...  
+000187c0: 2020 2020 2020 2020 2020 2320 4465 7465            # Dete
+000187d0: 6374 2074 6861 7420 6865 7265 2e0d 0a20  ct that here... 
+000187e0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+000187f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018800: 2069 6e74 6572 6661 6365 2e6d 6574 686f   interface.metho
+00018810: 6453 6967 6e61 7475 7265 286b 290d 0a20  dSignature(k).. 
+00018820: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00018830: 7420 786d 6c72 7063 2e52 5043 4572 726f  t xmlrpc.RPCErro
+00018840: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+00018850: 2020 2020 7261 6973 6520 4173 7365 7274      raise Assert
+00018860: 696f 6e45 7272 6f72 2827 6d65 7468 6f64  ionError('method
+00018870: 5369 676e 6174 7572 6520 666f 7220 2573  Signature for %s
+00018880: 2072 6169 7365 7320 270d 0a20 2020 2020   raises '..     
+00018890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000188b0: 2752 5043 4572 726f 7220 286d 6973 7369  'RPCError (missi
+000188c0: 6e67 2040 7265 7475 726e 2064 6f63 3f29  ng @return doc?)
+000188d0: 2720 2520 6b29 0d0a 0d0a 2020 2020 2020  ' % k)....      
+000188e0: 2020 2020 2020 2320 7765 2077 616e 7420        # we want 
+000188f0: 746f 2074 6573 7420 7468 6174 2074 6865  to test that the
+00018900: 206e 756d 6265 7220 6f66 2061 7267 756d   number of argum
+00018910: 656e 7473 2069 6d70 6c65 6d65 6e74 6564  ents implemented
+00018920: 2069 6e0d 0a20 2020 2020 2020 2020 2020   in..           
+00018930: 2023 2074 6865 2066 756e 6374 696f 6e20   # the function 
+00018940: 6973 2074 6865 2073 616d 6520 6173 2074  is the same as t
+00018950: 6865 206e 756d 6265 7220 6f66 2061 7267  he number of arg
+00018960: 756d 656e 7473 2069 6d70 6c69 6564 2062  uments implied b
+00018970: 790d 0a20 2020 2020 2020 2020 2020 2023  y..            #
+00018980: 2074 6865 2064 6f63 2040 7061 7261 6d73   the doc @params
+00018990: 2c20 616e 6420 7468 6174 2074 6865 7920  , and that they 
+000189a0: 7368 6f77 2075 7020 696e 2074 6865 2073  show up in the s
+000189b0: 616d 6520 6f72 6465 722e 0d0a 2020 2020  ame order...    
+000189c0: 2020 2020 2020 2020 6e73 5f6e 616d 652c          ns_name,
+000189d0: 206d 6574 686f 645f 6e61 6d65 203d 206b   method_name = k
+000189e0: 2e73 706c 6974 2827 2e27 2c20 3129 0d0a  .split('.', 1)..
+000189f0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00018a00: 7370 6163 6520 3d20 696e 7465 7266 6163  space = interfac
+00018a10: 652e 6e61 6d65 7370 6163 6573 5b6e 735f  e.namespaces[ns_
+00018a20: 6e61 6d65 5d0d 0a20 2020 2020 2020 2020  name]..         
+00018a30: 2020 206d 6574 6820 3d20 6765 7461 7474     meth = getatt
+00018a40: 7228 6e61 6d65 7370 6163 652c 206d 6574  r(namespace, met
+00018a50: 686f 645f 6e61 6d65 290d 0a20 2020 2020  hod_name)..     
+00018a60: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00018a70: 2020 2020 2020 2020 2020 2020 2063 6f64               cod
+00018a80: 6520 3d20 6d65 7468 2e66 756e 635f 636f  e = meth.func_co
+00018a90: 6465 0d0a 2020 2020 2020 2020 2020 2020  de..            
+00018aa0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00018ab0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00018ac0: 2020 2063 6f64 6520 3d20 6d65 7468 2e5f     code = meth._
+00018ad0: 5f63 6f64 655f 5f0d 0a20 2020 2020 2020  _code__..       
+00018ae0: 2020 2020 2061 7267 6e61 6d65 7320 3d20       argnames = 
+00018af0: 636f 6465 2e63 6f5f 7661 726e 616d 6573  code.co_varnames
+00018b00: 5b31 3a63 6f64 652e 636f 5f61 7267 636f  [1:code.co_argco
+00018b10: 756e 745d 0d0a 2020 2020 2020 2020 2020  unt]..          
+00018b20: 2020 7061 7273 6564 203d 2078 6d6c 7270    parsed = xmlrp
+00018b30: 632e 6765 7474 6167 7328 7374 7228 6d65  c.gettags(str(me
+00018b40: 7468 2e5f 5f64 6f63 5f5f 2929 0d0a 0d0a  th.__doc__))....
+00018b50: 2020 2020 2020 2020 2020 2020 706c 696e              plin
+00018b60: 6573 203d 205b 5d0d 0a20 2020 2020 2020  es = []..       
+00018b70: 2020 2020 2070 7479 7065 7320 3d20 5b5d       ptypes = []
+00018b80: 0d0a 2020 2020 2020 2020 2020 2020 706e  ..            pn
+00018b90: 616d 6573 203d 205b 5d0d 0a20 2020 2020  ames = []..     
+00018ba0: 2020 2020 2020 2070 7465 7874 7320 3d20         ptexts = 
+00018bb0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
+00018bc0: 2020 726c 696e 6573 203d 205b 5d0d 0a20    rlines = [].. 
+00018bd0: 2020 2020 2020 2020 2020 2072 7479 7065             rtype
+00018be0: 7320 3d20 5b5d 0d0a 2020 2020 2020 2020  s = []..        
+00018bf0: 2020 2020 726e 616d 6573 203d 205b 5d0d      rnames = [].
+00018c00: 0a20 2020 2020 2020 2020 2020 2072 7465  .            rte
+00018c10: 7874 7320 3d20 5b5d 0d0a 0d0a 2020 2020  xts = []....    
+00018c20: 2020 2020 2020 2020 666f 7220 7468 696e          for thin
+00018c30: 6720 696e 2070 6172 7365 643a 0d0a 2020  g in parsed:..  
+00018c40: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00018c50: 2074 6869 6e67 5b31 5d20 3d3d 2027 7061   thing[1] == 'pa
+00018c60: 7261 6d27 3a20 2023 2074 6167 206e 616d  ram':  # tag nam
+00018c70: 650d 0a20 2020 2020 2020 2020 2020 2020  e..             
+00018c80: 2020 2020 2020 2070 6c69 6e65 732e 6170         plines.ap
+00018c90: 7065 6e64 2874 6869 6e67 5b30 5d29 2020  pend(thing[0])  
+00018ca0: 2320 646f 6320 6c69 6e65 206e 756d 6265  # doc line numbe
+00018cb0: 720d 0a20 2020 2020 2020 2020 2020 2020  r..             
+00018cc0: 2020 2020 2020 2070 7479 7065 732e 6170         ptypes.ap
+00018cd0: 7065 6e64 2874 6869 6e67 5b32 5d29 2020  pend(thing[2])  
+00018ce0: 2320 6461 7461 2074 7970 650d 0a20 2020  # data type..   
+00018cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d00: 2070 6e61 6d65 732e 6170 7065 6e64 2874   pnames.append(t
+00018d10: 6869 6e67 5b33 5d29 2020 2320 6675 6e63  hing[3])  # func
+00018d20: 7469 6f6e 206e 616d 650d 0a20 2020 2020  tion name..     
+00018d30: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00018d40: 7465 7874 732e 6170 7065 6e64 2874 6869  texts.append(thi
+00018d50: 6e67 5b34 5d29 2020 2320 6465 7363 7269  ng[4])  # descri
+00018d60: 7074 696f 6e0d 0a20 2020 2020 2020 2020  ption..         
+00018d70: 2020 2020 2020 2065 6c69 6620 7468 696e         elif thin
+00018d80: 675b 315d 203d 3d20 2772 6574 7572 6e27  g[1] == 'return'
+00018d90: 3a20 2023 2074 6167 206e 616d 650d 0a20  :  # tag name.. 
 00018da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018de0: 7061 7273 6564 290d 0a20 2020 2020 2020  parsed)..       
-00018df0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00018e00: 7365 2041 7373 6572 7469 6f6e 4572 726f  se AssertionErro
-00018e10: 7228 6d73 6729 0d0a 2020 2020 2020 2020  r(msg)..        
-00018e20: 2020 2020 666f 7220 646f 6374 6578 7420      for doctext 
-00018e30: 696e 2070 7465 7874 733a 0d0a 2020 2020  in ptexts:..    
-00018e40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00018e50: 2e61 7373 6572 7454 7275 6528 7479 7065  .assertTrue(type
-00018e60: 2864 6f63 7465 7874 2920 3d3d 2074 7970  (doctext) == typ
-00018e70: 6528 2727 292c 2064 6f63 7465 7874 290d  e(''), doctext).
-00018e80: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00018e90: 2072 6573 756c 7420 746f 6b65 6e73 0d0a   result tokens..
-00018ea0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00018eb0: 206c 656e 2872 6c69 6e65 7329 203e 2031   len(rlines) > 1
-00018ec0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00018db0: 2020 2072 6c69 6e65 732e 6170 7065 6e64     rlines.append
+00018dc0: 2874 6869 6e67 5b30 5d29 2020 2320 646f  (thing[0])  # do
+00018dd0: 6320 6c69 6e65 206e 756d 6265 720d 0a20  c line number.. 
+00018de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018df0: 2020 2072 7479 7065 732e 6170 7065 6e64     rtypes.append
+00018e00: 2874 6869 6e67 5b32 5d29 2020 2320 6461  (thing[2])  # da
+00018e10: 7461 2074 7970 650d 0a20 2020 2020 2020  ta type..       
+00018e20: 2020 2020 2020 2020 2020 2020 2072 6e61               rna
+00018e30: 6d65 732e 6170 7065 6e64 2874 6869 6e67  mes.append(thing
+00018e40: 5b33 5d29 2020 2320 6675 6e63 7469 6f6e  [3])  # function
+00018e50: 206e 616d 650d 0a20 2020 2020 2020 2020   name..         
+00018e60: 2020 2020 2020 2020 2020 2072 7465 7874             rtext
+00018e70: 732e 6170 7065 6e64 2874 6869 6e67 5b34  s.append(thing[4
+00018e80: 5d29 2020 2320 6465 7363 7269 7074 696f  ])  # descriptio
+00018e90: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
+00018ea0: 2020 2065 6c69 6620 7468 696e 675b 315d     elif thing[1]
+00018eb0: 2069 7320 6e6f 7420 4e6f 6e65 3a0d 0a20   is not None:.. 
+00018ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00018ed0: 2020 2072 6169 7365 2041 7373 6572 7469     raise Asserti
 00018ee0: 6f6e 4572 726f 7228 0d0a 2020 2020 2020  onError(..      
-00018ef0: 2020 2020 2020 2020 2020 2020 2020 2744                'D
-00018f00: 7570 6c69 6361 7465 2040 7265 7475 726e  uplicate @return
-00018f10: 2076 616c 7565 7320 696e 2064 6f63 7320   values in docs 
-00018f20: 666f 7220 2573 2720 2520 6b29 0d0a 2020  for %s' % k)..  
-00018f30: 2020 2020 2020 2020 2020 666f 7220 646f            for do
-00018f40: 636c 696e 6520 696e 2072 6c69 6e65 733a  cline in rlines:
-00018f50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018f60: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00018f70: 6528 7479 7065 2864 6f63 6c69 6e65 2920  e(type(docline) 
-00018f80: 3d3d 2069 6e74 2c20 2864 6f63 6c69 6e65  == int, (docline
-00018f90: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00018ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f00: 2020 2775 6e6b 6e6f 776e 2074 6167 2074    'unknown tag t
+00018f10: 7970 6520 2573 2066 6f72 2025 732c 2070  ype %s for %s, p
+00018f20: 6172 7365 6420 2573 2720 2520 2874 6869  arsed %s' % (thi
+00018f30: 6e67 5b31 5d2c 0d0a 2020 2020 2020 2020  ng[1],..        
+00018f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f70: 2020 2020 2020 2020 2020 206b 2c0d 0a20             k,.. 
+00018f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00018fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00018fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018fc0: 2020 2020 2020 2020 2020 7479 7065 2864            type(d
-00018fd0: 6f63 6c69 6e65 292c 206b 2929 0d0a 2020  ocline), k))..  
-00018fe0: 2020 2020 2020 2020 2020 666f 7220 646f            for do
-00018ff0: 6374 7970 6520 696e 2072 7479 7065 733a  ctype in rtypes:
-00019000: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019010: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00019020: 6528 646f 6374 7970 6520 696e 205f 5250  e(doctype in _RP
-00019030: 4354 5950 4553 2c20 646f 6374 7970 6529  CTYPES, doctype)
-00019040: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-00019050: 7220 646f 636e 616d 6520 696e 2072 6e61  r docname in rna
-00019060: 6d65 733a 0d0a 2020 2020 2020 2020 2020  mes:..          
-00019070: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00019080: 7454 7275 6528 7479 7065 2864 6f63 6e61  tTrue(type(docna
-00019090: 6d65 2920 3d3d 2074 7970 6528 2727 292c  me) == type(''),
-000190a0: 2028 646f 636e 616d 652c 0d0a 2020 2020   (docname,..    
+00018fc0: 2020 7061 7273 6564 2929 0d0a 2020 2020    parsed))..    
+00018fd0: 2020 2020 2020 2020 2320 7061 7261 6d20          # param 
+00018fe0: 746f 6b65 6e73 0d0a 0d0a 2020 2020 2020  tokens....      
+00018ff0: 2020 2020 2020 6966 206c 656e 2861 7267        if len(arg
+00019000: 6e61 6d65 7329 2021 3d20 6c65 6e28 706e  names) != len(pn
+00019010: 616d 6573 293a 0d0a 2020 2020 2020 2020  ames):..        
+00019020: 2020 2020 2020 2020 7261 6973 6520 4173          raise As
+00019030: 7365 7274 696f 6e45 7272 6f72 2827 496e  sertionError('In
+00019040: 636f 7272 6563 7420 646f 6375 6d65 6e74  correct document
+00019050: 6174 696f 6e20 270d 0a20 2020 2020 2020  ation '..       
+00019060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019070: 2020 2020 2020 2020 2020 2020 2020 2728                '(
+00019080: 2573 2061 7267 732c 2025 7320 646f 6320  %s args, %s doc 
+00019090: 7061 7261 6d73 2920 696e 2025 7327 0d0a  params) in %s'..
+000190a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000190b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000190c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000190d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000190e0: 2020 2020 2020 2020 7479 7065 2864 6f63          type(doc
-000190f0: 6e61 6d65 292c 0d0a 2020 2020 2020 2020  name),..        
-00019100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019130: 2020 2020 6b29 290d 0a20 2020 2020 2020      k))..       
-00019140: 2020 2020 2066 6f72 2064 6f63 7465 7874       for doctext
-00019150: 2069 6e20 7274 6578 7473 3a0d 0a20 2020   in rtexts:..   
-00019160: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00019170: 662e 6173 7365 7274 5472 7565 2874 7970  f.assertTrue(typ
-00019180: 6528 646f 6374 6578 7429 203d 3d20 7479  e(doctext) == ty
-00019190: 7065 2827 2729 2c20 2864 6f63 7465 7874  pe(''), (doctext
-000191a0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+000190c0: 2020 2020 2025 2028 6c65 6e28 6172 676e       % (len(argn
+000190d0: 616d 6573 292c 206c 656e 2870 6e61 6d65  ames), len(pname
+000190e0: 7329 2c20 6b29 290d 0a20 2020 2020 2020  s), k))..       
+000190f0: 2020 2020 2066 6f72 2064 6f63 6c69 6e65       for docline
+00019100: 2069 6e20 706c 696e 6573 3a0d 0a20 2020   in plines:..   
+00019110: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00019120: 662e 6173 7365 7274 5472 7565 2874 7970  f.assertTrue(typ
+00019130: 6528 646f 636c 696e 6529 203d 3d20 696e  e(docline) == in
+00019140: 742c 2028 646f 636c 696e 652c 0d0a 2020  t, (docline,..  
+00019150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019180: 2020 2020 2074 7970 6528 646f 636c 696e       type(doclin
+00019190: 6529 2c0d 0a20 2020 2020 2020 2020 2020  e),..           
+000191a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000191b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-000191e0: 7970 6528 646f 6374 6578 7429 2c20 6b29  ype(doctext), k)
-000191f0: 290d 0a0d 0a20 2020 2064 6566 2074 6573  )....    def tes
-00019200: 745f 6d75 6c74 6963 616c 6c5f 7369 6d70  t_multicall_simp
-00019210: 6c65 7661 6c73 2873 656c 6629 3a0d 0a20  levals(self):.. 
-00019220: 2020 2020 2020 2069 6e74 6572 6661 6365         interface
-00019230: 203d 2073 656c 662e 5f6d 616b 654f 6e65   = self._makeOne
-00019240: 2829 0d0a 2020 2020 2020 2020 7265 7375  ()..        resu
-00019250: 6c74 7320 3d20 696e 7465 7266 6163 652e  lts = interface.
-00019260: 6d75 6c74 6963 616c 6c28 5b0d 0a20 2020  multicall([..   
-00019270: 2020 2020 2020 2020 207b 276d 6574 686f           {'metho
-00019280: 644e 616d 6527 3a20 2773 7973 7465 6d2e  dName': 'system.
-00019290: 6d65 7468 6f64 4865 6c70 272c 2027 7061  methodHelp', 'pa
-000192a0: 7261 6d73 273a 205b 2773 7973 7465 6d2e  rams': ['system.
-000192b0: 6d65 7468 6f64 4865 6c70 275d 7d2c 0d0a  methodHelp']},..
-000192c0: 2020 2020 2020 2020 2020 2020 7b27 6d65              {'me
-000192d0: 7468 6f64 4e61 6d65 273a 2027 7379 7374  thodName': 'syst
-000192e0: 656d 2e6c 6973 744d 6574 686f 6473 272c  em.listMethods',
-000192f0: 2027 7061 7261 6d73 273a 205b 5d7d 2c0d   'params': []},.
-00019300: 0a20 2020 2020 2020 205d 290d 0a20 2020  .        ])..   
-00019310: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00019320: 4571 7561 6c28 7265 7375 6c74 735b 305d  Equal(results[0]
-00019330: 2c20 696e 7465 7266 6163 652e 6d65 7468  , interface.meth
-00019340: 6f64 4865 6c70 2827 7379 7374 656d 2e6d  odHelp('system.m
-00019350: 6574 686f 6448 656c 7027 2929 0d0a 2020  ethodHelp'))..  
-00019360: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00019370: 7445 7175 616c 2872 6573 756c 7473 5b31  tEqual(results[1
-00019380: 5d2c 2069 6e74 6572 6661 6365 2e6c 6973  ], interface.lis
-00019390: 744d 6574 686f 6473 2829 290d 0a0d 0a20  tMethods()).... 
-000193a0: 2020 2064 6566 2074 6573 745f 6d75 6c74     def test_mult
-000193b0: 6963 616c 6c5f 7265 6375 7273 696f 6e5f  icall_recursion_
-000193c0: 6775 6172 6428 7365 6c66 293a 0d0a 2020  guard(self):..  
-000193d0: 2020 2020 2020 6672 6f6d 2073 7570 6572        from super
-000193e0: 7669 736f 7220 696d 706f 7274 2078 6d6c  visor import xml
-000193f0: 7270 630d 0a20 2020 2020 2020 2069 6e74  rpc..        int
-00019400: 6572 6661 6365 203d 2073 656c 662e 5f6d  erface = self._m
-00019410: 616b 654f 6e65 2829 0d0a 2020 2020 2020  akeOne()..      
-00019420: 2020 7265 7375 6c74 7320 3d20 696e 7465    results = inte
-00019430: 7266 6163 652e 6d75 6c74 6963 616c 6c28  rface.multicall(
-00019440: 5b0d 0a20 2020 2020 2020 2020 2020 207b  [..            {
-00019450: 276d 6574 686f 644e 616d 6527 3a20 2773  'methodName': 's
-00019460: 7973 7465 6d2e 6d75 6c74 6963 616c 6c27  ystem.multicall'
-00019470: 2c20 2770 6172 616d 7327 3a20 5b5d 7d2c  , 'params': []},
-00019480: 0d0a 2020 2020 2020 2020 5d29 0d0a 0d0a  ..        ])....
-00019490: 2020 2020 2020 2020 6520 3d20 786d 6c72          e = xmlr
-000194a0: 7063 2e52 5043 4572 726f 7228 786d 6c72  pc.RPCError(xmlr
-000194b0: 7063 2e46 6175 6c74 732e 494e 434f 5252  pc.Faults.INCORR
-000194c0: 4543 545f 5041 5241 4d45 5445 5253 2c0d  ECT_PARAMETERS,.
-000194d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000194e0: 2027 5265 6375 7273 6976 6520 7379 7374   'Recursive syst
-000194f0: 656d 2e6d 756c 7469 6361 6c6c 2066 6f72  em.multicall for
-00019500: 6269 6464 656e 2729 0d0a 2020 2020 2020  bidden')..      
-00019510: 2020 7265 6375 7273 696f 6e5f 6661 756c    recursion_faul
-00019520: 7420 3d20 7b27 6661 756c 7443 6f64 6527  t = {'faultCode'
-00019530: 3a20 652e 636f 6465 2c20 2766 6175 6c74  : e.code, 'fault
-00019540: 5374 7269 6e67 273a 2065 2e74 6578 747d  String': e.text}
-00019550: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00019560: 7373 6572 7445 7175 616c 2872 6573 756c  ssertEqual(resul
-00019570: 7473 2c20 5b72 6563 7572 7369 6f6e 5f66  ts, [recursion_f
-00019580: 6175 6c74 5d29 0d0a 0d0a 2020 2020 6465  ault])....    de
-00019590: 6620 7465 7374 5f6d 756c 7469 6361 6c6c  f test_multicall
-000195a0: 5f6e 6573 7465 645f 6361 6c6c 6261 636b  _nested_callback
-000195b0: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-000195c0: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
-000195d0: 2069 6d70 6f72 7420 6874 7470 0d0a 2020   import http..  
-000195e0: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
-000195f0: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
-00019600: 290d 0a20 2020 2020 2020 2063 616c 6c62  )..        callb
-00019610: 6163 6b20 3d20 696e 7465 7266 6163 652e  ack = interface.
-00019620: 6d75 6c74 6963 616c 6c28 5b0d 0a20 2020  multicall([..   
-00019630: 2020 2020 2020 2020 207b 276d 6574 686f           {'metho
-00019640: 644e 616d 6527 3a20 2773 7570 6572 7669  dName': 'supervi
-00019650: 736f 722e 7374 6f70 416c 6c50 726f 6365  sor.stopAllProce
-00019660: 7373 6573 277d 5d29 0d0a 2020 2020 2020  sses'}])..      
-00019670: 2020 7265 7375 6c74 7320 3d20 6874 7470    results = http
-00019680: 2e4e 4f54 5f44 4f4e 455f 5945 540d 0a20  .NOT_DONE_YET.. 
-00019690: 2020 2020 2020 2077 6869 6c65 2072 6573         while res
-000196a0: 756c 7473 2069 7320 6874 7470 2e4e 4f54  ults is http.NOT
-000196b0: 5f44 4f4e 455f 5945 543a 0d0a 2020 2020  _DONE_YET:..    
-000196c0: 2020 2020 2020 2020 7265 7375 6c74 7320          results 
-000196d0: 3d20 6361 6c6c 6261 636b 2829 0d0a 2020  = callback()..  
-000196e0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000196f0: 7445 7175 616c 2872 6573 756c 7473 5b30  tEqual(results[0
-00019700: 5d2c 205b 5d29 0d0a 0d0a 2020 2020 6465  ], [])....    de
-00019710: 6620 7465 7374 5f6d 6574 686f 6448 656c  f test_methodHel
-00019720: 7028 7365 6c66 293a 0d0a 2020 2020 2020  p(self):..      
-00019730: 2020 6672 6f6d 2073 7570 6572 7669 736f    from superviso
-00019740: 7220 696d 706f 7274 2078 6d6c 7270 630d  r import xmlrpc.
-00019750: 0a20 2020 2020 2020 2069 6e74 6572 6661  .        interfa
-00019760: 6365 203d 2073 656c 662e 5f6d 616b 654f  ce = self._makeO
-00019770: 6e65 2829 0d0a 2020 2020 2020 2020 7365  ne()..        se
-00019780: 6c66 2e5f 6173 7365 7274 5250 4345 7272  lf._assertRPCErr
-00019790: 6f72 2878 6d6c 7270 632e 4661 756c 7473  or(xmlrpc.Faults
-000197a0: 2e53 4947 4e41 5455 5245 5f55 4e53 5550  .SIGNATURE_UNSUP
-000197b0: 504f 5254 4544 2c0d 0a20 2020 2020 2020  PORTED,..       
+000191c0: 2020 2020 2020 2020 2020 2020 6b2c 0d0a              k,..
+000191d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000191e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000191f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019200: 2020 2020 2020 2070 6172 7365 6429 290d         parsed)).
+00019210: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00019220: 2064 6f63 7479 7065 2069 6e20 7074 7970   doctype in ptyp
+00019230: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+00019240: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00019250: 5472 7565 2864 6f63 7479 7065 2069 6e20  True(doctype in 
+00019260: 5f52 5043 5459 5045 532c 2064 6f63 7479  _RPCTYPES, docty
+00019270: 7065 290d 0a20 2020 2020 2020 2020 2020  pe)..           
+00019280: 2066 6f72 2078 2069 6e20 7261 6e67 6528   for x in range(
+00019290: 6c65 6e28 706e 616d 6573 2929 3a0d 0a20  len(pnames)):.. 
+000192a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000192b0: 6620 706e 616d 6573 5b78 5d20 213d 2061  f pnames[x] != a
+000192c0: 7267 6e61 6d65 735b 785d 3a0d 0a20 2020  rgnames[x]:..   
+000192d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000192e0: 206d 7367 203d 2027 4e61 6d65 2077 726f   msg = 'Name wro
+000192f0: 6e67 3a20 2825 7320 7673 2e20 2573 2069  ng: (%s vs. %s i
+00019300: 6e20 2573 295c 6e25 7327 2025 2028 706e  n %s)\n%s' % (pn
+00019310: 616d 6573 5b78 5d2c 0d0a 2020 2020 2020  ames[x],..      
+00019320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019350: 2020 2020 2020 2020 2020 2061 7267 6e61             argna
+00019360: 6d65 735b 785d 2c0d 0a20 2020 2020 2020  mes[x],..       
+00019370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193a0: 2020 2020 2020 2020 2020 6b2c 0d0a 2020            k,..  
+000193b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193e0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000193f0: 6172 7365 6429 0d0a 2020 2020 2020 2020  arsed)..        
+00019400: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00019410: 6520 4173 7365 7274 696f 6e45 7272 6f72  e AssertionError
+00019420: 286d 7367 290d 0a20 2020 2020 2020 2020  (msg)..         
+00019430: 2020 2066 6f72 2064 6f63 7465 7874 2069     for doctext i
+00019440: 6e20 7074 6578 7473 3a0d 0a20 2020 2020  n ptexts:..     
+00019450: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00019460: 6173 7365 7274 5472 7565 2874 7970 6528  assertTrue(type(
+00019470: 646f 6374 6578 7429 203d 3d20 7479 7065  doctext) == type
+00019480: 2827 2729 2c20 646f 6374 6578 7429 0d0a  (''), doctext)..
+00019490: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000194a0: 7265 7375 6c74 2074 6f6b 656e 730d 0a0d  result tokens...
+000194b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000194c0: 6c65 6e28 726c 696e 6573 2920 3e20 313a  len(rlines) > 1:
+000194d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000194e0: 2020 7261 6973 6520 4173 7365 7274 696f    raise Assertio
+000194f0: 6e45 7272 6f72 280d 0a20 2020 2020 2020  nError(..       
+00019500: 2020 2020 2020 2020 2020 2020 2027 4475               'Du
+00019510: 706c 6963 6174 6520 4072 6574 7572 6e20  plicate @return 
+00019520: 7661 6c75 6573 2069 6e20 646f 6373 2066  values in docs f
+00019530: 6f72 2025 7327 2025 206b 290d 0a20 2020  or %s' % k)..   
+00019540: 2020 2020 2020 2020 2066 6f72 2064 6f63           for doc
+00019550: 6c69 6e65 2069 6e20 726c 696e 6573 3a0d  line in rlines:.
+00019560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019570: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00019580: 2874 7970 6528 646f 636c 696e 6529 203d  (type(docline) =
+00019590: 3d20 696e 742c 2028 646f 636c 696e 652c  = int, (docline,
+000195a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000195b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195d0: 2020 2020 2020 2020 2074 7970 6528 646f           type(do
+000195e0: 636c 696e 6529 2c20 6b29 290d 0a20 2020  cline), k))..   
+000195f0: 2020 2020 2020 2020 2066 6f72 2064 6f63           for doc
+00019600: 7479 7065 2069 6e20 7274 7970 6573 3a0d  type in rtypes:.
+00019610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019620: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00019630: 2864 6f63 7479 7065 2069 6e20 5f52 5043  (doctype in _RPC
+00019640: 5459 5045 532c 2064 6f63 7479 7065 290d  TYPES, doctype).
+00019650: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00019660: 2064 6f63 6e61 6d65 2069 6e20 726e 616d   docname in rnam
+00019670: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+00019680: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00019690: 5472 7565 2874 7970 6528 646f 636e 616d  True(type(docnam
+000196a0: 6529 203d 3d20 7479 7065 2827 2729 2c20  e) == type(''), 
+000196b0: 2864 6f63 6e61 6d65 2c0d 0a20 2020 2020  (docname,..     
+000196c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000196f0: 2020 2020 2020 2074 7970 6528 646f 636e         type(docn
+00019700: 616d 6529 2c0d 0a20 2020 2020 2020 2020  ame),..         
+00019710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019740: 2020 206b 2929 0d0a 2020 2020 2020 2020     k))..        
+00019750: 2020 2020 666f 7220 646f 6374 6578 7420      for doctext 
+00019760: 696e 2072 7465 7874 733a 0d0a 2020 2020  in rtexts:..    
+00019770: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00019780: 2e61 7373 6572 7454 7275 6528 7479 7065  .assertTrue(type
+00019790: 2864 6f63 7465 7874 2920 3d3d 2074 7970  (doctext) == typ
+000197a0: 6528 2727 292c 2028 646f 6374 6578 742c  e(''), (doctext,
+000197b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 000197c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197d0: 2020 2020 2020 696e 7465 7266 6163 652e        interface.
-000197e0: 6d65 7468 6f64 4865 6c70 2c0d 0a20 2020  methodHelp,..   
-000197f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019800: 2020 2020 2020 2020 2020 5b27 666f 6f2e            ['foo.
-00019810: 6261 7227 5d29 0d0a 2020 2020 2020 2020  bar'])..        
-00019820: 6865 6c70 203d 2069 6e74 6572 6661 6365  help = interface
-00019830: 2e6d 6574 686f 6448 656c 7028 2773 7973  .methodHelp('sys
-00019840: 7465 6d2e 6d65 7468 6f64 4865 6c70 2729  tem.methodHelp')
-00019850: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00019860: 7373 6572 7445 7175 616c 2868 656c 702c  ssertEqual(help,
-00019870: 2069 6e74 6572 6661 6365 2e6d 6574 686f   interface.metho
-00019880: 6448 656c 702e 5f5f 646f 635f 5f29 0d0a  dHelp.__doc__)..
-00019890: 0d0a 0d0a 636c 6173 7320 5465 7374 5f6d  ....class Test_m
-000198a0: 616b 655f 616c 6c66 756e 6328 756e 6974  ake_allfunc(unit
-000198b0: 7465 7374 2e54 6573 7443 6173 6529 3a0d  test.TestCase):.
-000198c0: 0a20 2020 2064 6566 205f 6361 6c6c 4655  .    def _callFU
-000198d0: 5428 7365 6c66 2c20 7072 6f63 6573 7365  T(self, processe
-000198e0: 732c 2070 7265 6469 6361 7465 2c20 6675  s, predicate, fu
-000198f0: 6e63 2c20 2a2a 6578 7472 615f 6b77 6172  nc, **extra_kwar
-00019900: 6773 293a 0d0a 2020 2020 2020 2020 6672  gs):..        fr
-00019910: 6f6d 2073 7570 6572 7669 736f 722e 7270  om supervisor.rp
-00019920: 6369 6e74 6572 6661 6365 2069 6d70 6f72  cinterface impor
-00019930: 7420 6d61 6b65 5f61 6c6c 6675 6e63 0d0a  t make_allfunc..
-00019940: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00019950: 616b 655f 616c 6c66 756e 6328 7072 6f63  ake_allfunc(proc
-00019960: 6573 7365 732c 2070 7265 6469 6361 7465  esses, predicate
-00019970: 2c20 6675 6e63 2c20 2a2a 6578 7472 615f  , func, **extra_
-00019980: 6b77 6172 6773 290d 0a0d 0a20 2020 2064  kwargs)....    d
-00019990: 6566 2074 6573 745f 7270 6365 7272 6f72  ef test_rpcerror
-000199a0: 5f6e 6f63 616c 6c62 6163 6b73 2873 656c  _nocallbacks(sel
-000199b0: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
-000199c0: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
-000199d0: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
-000199e0: 2020 2020 6465 6620 6362 286e 616d 652c      def cb(name,
-000199f0: 202a 2a6b 7729 3a0d 0a20 2020 2020 2020   **kw):..       
-00019a00: 2020 2020 2072 6169 7365 2078 6d6c 7270       raise xmlrp
-00019a10: 632e 5250 4345 7272 6f72 2878 6d6c 7270  c.RPCError(xmlrp
-00019a20: 632e 4661 756c 7473 2e46 4149 4c45 4429  c.Faults.FAILED)
-00019a30: 0d0a 0d0a 2020 2020 2020 2020 6f70 7469  ....        opti
-00019a40: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-00019a50: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-00019a60: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
-00019a70: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-00019a80: 7072 6f63 6573 7331 272c 2027 666f 6f27  process1', 'foo'
-00019a90: 290d 0a20 2020 2020 2020 2070 726f 6320  )..        proc 
-00019aa0: 3d20 4475 6d6d 7950 726f 6365 7373 2870  = DummyProcess(p
-00019ab0: 636f 6e66 6967 3129 0d0a 2020 2020 2020  config1)..      
-00019ac0: 2020 6772 6f75 7020 3d20 4475 6d6d 7950    group = DummyP
-00019ad0: 726f 6365 7373 4772 6f75 7028 7063 6f6e  rocessGroup(pcon
-00019ae0: 6669 6731 290d 0a0d 0a20 2020 2020 2020  fig1)....       
-00019af0: 2064 6566 2070 7265 6428 7072 6f63 293a   def pred(proc):
-00019b00: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00019b10: 7475 726e 2054 7275 650d 0a0d 0a20 2020  turn True....   
-00019b20: 2020 2020 2061 6620 3d20 7365 6c66 2e5f       af = self._
-00019b30: 6361 6c6c 4655 5428 5b28 6772 6f75 702c  callFUT([(group,
-00019b40: 2070 726f 6329 5d2c 2070 7265 642c 2063   proc)], pred, c
-00019b50: 6229 0d0a 2020 2020 2020 2020 7265 7375  b)..        resu
-00019b60: 6c74 203d 2061 6628 290d 0a20 2020 2020  lt = af()..     
-00019b70: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00019b80: 7561 6c28 7265 7375 6c74 2c0d 0a20 2020  ual(result,..   
-00019b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ba0: 2020 2020 2020 5b7b 2764 6573 6372 6970        [{'descrip
-00019bb0: 7469 6f6e 273a 2027 4641 494c 4544 272c  tion': 'FAILED',
-00019bc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019bd0: 2020 2020 2020 2020 2020 2020 2027 6772               'gr
-00019be0: 6f75 7027 3a20 2770 726f 6365 7373 3127  oup': 'process1'
-00019bf0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00019c00: 2020 2020 2020 2020 2020 2020 2020 276e                'n
-00019c10: 616d 6527 3a20 2770 726f 6365 7373 3127  ame': 'process1'
-00019c20: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00019c30: 2020 2020 2020 2020 2020 2020 2020 2773                's
-00019c40: 7461 7475 7327 3a20 786d 6c72 7063 2e46  tatus': xmlrpc.F
-00019c50: 6175 6c74 732e 4641 494c 4544 7d5d 290d  aults.FAILED}]).
-00019c60: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-00019c70: 6675 6e63 5f63 616c 6c62 6163 6b5f 6e6f  func_callback_no
-00019c80: 726d 616c 5f72 6574 7572 6e5f 7661 6c28  rmal_return_val(
-00019c90: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-00019ca0: 6465 6620 6362 286e 616d 652c 202a 2a6b  def cb(name, **k
-00019cb0: 7729 3a0d 0a20 2020 2020 2020 2020 2020  w):..           
-00019cc0: 2072 6574 7572 6e20 6c61 6d62 6461 3a20   return lambda: 
-00019cd0: 310d 0a0d 0a20 2020 2020 2020 206f 7074  1....        opt
-00019ce0: 696f 6e73 203d 2044 756d 6d79 4f70 7469  ions = DummyOpti
-00019cf0: 6f6e 7328 290d 0a20 2020 2020 2020 2070  ons()..        p
-00019d00: 636f 6e66 6967 3120 3d20 4475 6d6d 7950  config1 = DummyP
-00019d10: 436f 6e66 6967 286f 7074 696f 6e73 2c20  Config(options, 
-00019d20: 2770 726f 6365 7373 3127 2c20 2766 6f6f  'process1', 'foo
-00019d30: 2729 0d0a 2020 2020 2020 2020 7072 6f63  ')..        proc
-00019d40: 203d 2044 756d 6d79 5072 6f63 6573 7328   = DummyProcess(
-00019d50: 7063 6f6e 6669 6731 290d 0a20 2020 2020  pconfig1)..     
-00019d60: 2020 2067 726f 7570 203d 2044 756d 6d79     group = Dummy
-00019d70: 5072 6f63 6573 7347 726f 7570 2870 636f  ProcessGroup(pco
-00019d80: 6e66 6967 3129 0d0a 0d0a 2020 2020 2020  nfig1)....      
-00019d90: 2020 6465 6620 7072 6564 2870 726f 6329    def pred(proc)
-00019da0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00019db0: 6574 7572 6e20 5472 7565 0d0a 0d0a 2020  eturn True....  
-00019dc0: 2020 2020 2020 6166 203d 2073 656c 662e        af = self.
-00019dd0: 5f63 616c 6c46 5554 285b 2867 726f 7570  _callFUT([(group
-00019de0: 2c20 7072 6f63 295d 2c20 7072 6564 2c20  , proc)], pred, 
-00019df0: 6362 290d 0a20 2020 2020 2020 2072 6573  cb)..        res
-00019e00: 756c 7420 3d20 6166 2829 0d0a 2020 2020  ult = af()..    
-00019e10: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00019e20: 7175 616c 280d 0a20 2020 2020 2020 2020  qual(..         
-00019e30: 2020 2072 6573 756c 742c 0d0a 2020 2020     result,..    
-00019e40: 2020 2020 2020 2020 5b7b 2767 726f 7570          [{'group
-00019e50: 273a 2027 7072 6f63 6573 7331 272c 0d0a  ': 'process1',..
-00019e60: 2020 2020 2020 2020 2020 2020 2020 2764                'd
-00019e70: 6573 6372 6970 7469 6f6e 273a 2027 4f4b  escription': 'OK
-00019e80: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-00019e90: 2020 2773 7461 7475 7327 3a20 3830 2c20    'status': 80, 
-00019ea0: 276e 616d 6527 3a20 2770 726f 6365 7373  'name': 'process
-00019eb0: 3127 7d5d 0d0a 2020 2020 2020 2020 290d  1'}]..        ).
-00019ec0: 0a0d 0a20 2020 2064 6566 2074 6573 745f  ...    def test_
-00019ed0: 6675 6e63 5f63 616c 6c62 6163 6b5f 7261  func_callback_ra
-00019ee0: 6973 6573 5f52 5043 4572 726f 7228 7365  ises_RPCError(se
-00019ef0: 6c66 293a 0d0a 2020 2020 2020 2020 6672  lf):..        fr
-00019f00: 6f6d 2073 7570 6572 7669 736f 7220 696d  om supervisor im
-00019f10: 706f 7274 2078 6d6c 7270 630d 0a20 2020  port xmlrpc..   
-00019f20: 2020 2020 2064 6566 2063 6228 6e61 6d65       def cb(name
-00019f30: 2c20 2a2a 6b77 293a 0d0a 2020 2020 2020  , **kw):..      
-00019f40: 2020 2020 2020 6465 6620 696e 6e65 7228        def inner(
-00019f50: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00019f60: 2020 2020 7261 6973 6520 786d 6c72 7063      raise xmlrpc
-00019f70: 2e52 5043 4572 726f 7228 786d 6c72 7063  .RPCError(xmlrpc
-00019f80: 2e46 6175 6c74 732e 4641 494c 4544 290d  .Faults.FAILED).
-00019f90: 0a0d 0a20 2020 2020 2020 2020 2020 2072  ...            r
-00019fa0: 6574 7572 6e20 696e 6e65 720d 0a0d 0a20  eturn inner.... 
-00019fb0: 2020 2020 2020 206f 7074 696f 6e73 203d         options =
-00019fc0: 2044 756d 6d79 4f70 7469 6f6e 7328 290d   DummyOptions().
-00019fd0: 0a20 2020 2020 2020 2070 636f 6e66 6967  .        pconfig
-00019fe0: 3120 3d20 4475 6d6d 7950 436f 6e66 6967  1 = DummyPConfig
-00019ff0: 286f 7074 696f 6e73 2c20 2770 726f 6365  (options, 'proce
-0001a000: 7373 3127 2c20 2766 6f6f 2729 0d0a 2020  ss1', 'foo')..  
-0001a010: 2020 2020 2020 7072 6f63 203d 2044 756d        proc = Dum
-0001a020: 6d79 5072 6f63 6573 7328 7063 6f6e 6669  myProcess(pconfi
-0001a030: 6731 290d 0a20 2020 2020 2020 2067 726f  g1)..        gro
-0001a040: 7570 203d 2044 756d 6d79 5072 6f63 6573  up = DummyProces
-0001a050: 7347 726f 7570 2870 636f 6e66 6967 3129  sGroup(pconfig1)
-0001a060: 0d0a 0d0a 2020 2020 2020 2020 6465 6620  ....        def 
-0001a070: 7072 6564 2870 726f 6329 3a0d 0a20 2020  pred(proc):..   
-0001a080: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001a090: 5472 7565 0d0a 0d0a 2020 2020 2020 2020  True....        
-0001a0a0: 6166 203d 2073 656c 662e 5f63 616c 6c46  af = self._callF
-0001a0b0: 5554 285b 2867 726f 7570 2c20 7072 6f63  UT([(group, proc
-0001a0c0: 295d 2c20 7072 6564 2c20 6362 290d 0a20  )], pred, cb).. 
-0001a0d0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0001a0e0: 6166 2829 0d0a 2020 2020 2020 2020 7365  af()..        se
-0001a0f0: 6c66 2e61 7373 6572 7445 7175 616c 280d  lf.assertEqual(.
-0001a100: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-0001a110: 756c 742c 0d0a 2020 2020 2020 2020 2020  ult,..          
-0001a120: 2020 5b7b 2764 6573 6372 6970 7469 6f6e    [{'description
-0001a130: 273a 2027 4641 494c 4544 272c 0d0a 2020  ': 'FAILED',..  
-0001a140: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
-0001a150: 7570 273a 2027 7072 6f63 6573 7331 272c  up': 'process1',
-0001a160: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001a170: 2773 7461 7475 7327 3a20 3330 2c0d 0a20  'status': 30,.. 
-0001a180: 2020 2020 2020 2020 2020 2020 2027 6e61               'na
-0001a190: 6d65 273a 2027 7072 6f63 6573 7331 277d  me': 'process1'}
-0001a1a0: 5d0d 0a20 2020 2020 2020 2029 0d0a 0d0a  ]..        )....
-0001a1b0: 2020 2020 6465 6620 7465 7374 5f66 756e      def test_fun
-0001a1c0: 635f 6361 6c6c 6261 636b 5f72 6574 7572  c_callback_retur
-0001a1d0: 6e73 5f4e 4f54 5f44 4f4e 455f 5945 5428  ns_NOT_DONE_YET(
-0001a1e0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-0001a1f0: 6672 6f6d 2073 7570 6572 7669 736f 722e  from supervisor.
-0001a200: 6874 7470 2069 6d70 6f72 7420 4e4f 545f  http import NOT_
-0001a210: 444f 4e45 5f59 4554 0d0a 2020 2020 2020  DONE_YET..      
-0001a220: 2020 6465 6620 6362 286e 616d 652c 202a    def cb(name, *
-0001a230: 2a6b 7729 3a0d 0a20 2020 2020 2020 2020  *kw):..         
-0001a240: 2020 2064 6566 2069 6e6e 6572 2829 3a0d     def inner():.
-0001a250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a260: 2072 6574 7572 6e20 4e4f 545f 444f 4e45   return NOT_DONE
-0001a270: 5f59 4554 0d0a 0d0a 2020 2020 2020 2020  _YET....        
-0001a280: 2020 2020 7265 7475 726e 2069 6e6e 6572      return inner
-0001a290: 0d0a 0d0a 2020 2020 2020 2020 6f70 7469  ....        opti
-0001a2a0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
-0001a2b0: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
-0001a2c0: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
-0001a2d0: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
-0001a2e0: 7072 6f63 6573 7331 272c 2027 666f 6f27  process1', 'foo'
-0001a2f0: 290d 0a20 2020 2020 2020 2070 726f 6320  )..        proc 
-0001a300: 3d20 4475 6d6d 7950 726f 6365 7373 2870  = DummyProcess(p
-0001a310: 636f 6e66 6967 3129 0d0a 2020 2020 2020  config1)..      
-0001a320: 2020 6772 6f75 7020 3d20 4475 6d6d 7950    group = DummyP
-0001a330: 726f 6365 7373 4772 6f75 7028 7063 6f6e  rocessGroup(pcon
-0001a340: 6669 6731 290d 0a0d 0a20 2020 2020 2020  fig1)....       
-0001a350: 2064 6566 2070 7265 6428 7072 6f63 293a   def pred(proc):
-0001a360: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-0001a370: 7475 726e 2054 7275 650d 0a0d 0a20 2020  turn True....   
-0001a380: 2020 2020 2061 6620 3d20 7365 6c66 2e5f       af = self._
-0001a390: 6361 6c6c 4655 5428 5b28 6772 6f75 702c  callFUT([(group,
-0001a3a0: 2070 726f 6329 5d2c 2070 7265 642c 2063   proc)], pred, c
-0001a3b0: 6229 0d0a 2020 2020 2020 2020 7265 7375  b)..        resu
-0001a3c0: 6c74 203d 2061 6628 290d 0a20 2020 2020  lt = af()..     
-0001a3d0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0001a3e0: 7561 6c28 0d0a 2020 2020 2020 2020 2020  ual(..          
-0001a3f0: 2020 7265 7375 6c74 2c0d 0a20 2020 2020    result,..     
-0001a400: 2020 2020 2020 204e 4f54 5f44 4f4e 455f         NOT_DONE_
-0001a410: 5945 542c 0d0a 2020 2020 2020 2020 290d  YET,..        ).
-0001a420: 0a0d 0a0d 0a63 6c61 7373 2054 6573 745f  .....class Test_
-0001a430: 6d61 6b65 5f6d 6169 6e5f 7270 6369 6e74  make_main_rpcint
-0001a440: 6572 6661 6365 2875 6e69 7474 6573 742e  erface(unittest.
-0001a450: 5465 7374 4361 7365 293a 0d0a 2020 2020  TestCase):..    
-0001a460: 6465 6620 5f63 616c 6c46 5554 2873 656c  def _callFUT(sel
-0001a470: 662c 2073 7570 6572 7669 736f 7264 293a  f, supervisord):
-0001a480: 0d0a 2020 2020 2020 2020 6672 6f6d 2073  ..        from s
-0001a490: 7570 6572 7669 736f 722e 7270 6369 6e74  upervisor.rpcint
-0001a4a0: 6572 6661 6365 2069 6d70 6f72 7420 6d61  erface import ma
-0001a4b0: 6b65 5f6d 6169 6e5f 7270 6369 6e74 6572  ke_main_rpcinter
-0001a4c0: 6661 6365 0d0a 2020 2020 2020 2020 7265  face..        re
-0001a4d0: 7475 726e 206d 616b 655f 6d61 696e 5f72  turn make_main_r
-0001a4e0: 7063 696e 7465 7266 6163 6528 7375 7065  pcinterface(supe
-0001a4f0: 7276 6973 6f72 6429 0d0a 0d0a 2020 2020  rvisord)....    
-0001a500: 6465 6620 7465 7374 5f69 7428 7365 6c66  def test_it(self
-0001a510: 293a 0d0a 2020 2020 2020 2020 696e 7374  ):..        inst
-0001a520: 203d 2073 656c 662e 5f63 616c 6c46 5554   = self._callFUT
-0001a530: 284e 6f6e 6529 0d0a 2020 2020 2020 2020  (None)..        
-0001a540: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0001a550: 280d 0a20 2020 2020 2020 2020 2020 2069  (..            i
-0001a560: 6e73 742e 5f5f 636c 6173 735f 5f2e 5f5f  nst.__class__.__
-0001a570: 6e61 6d65 5f5f 2c0d 0a20 2020 2020 2020  name__,..       
-0001a580: 2020 2020 2027 5375 7065 7276 6973 6f72       'Supervisor
-0001a590: 4e61 6d65 7370 6163 6552 5043 496e 7465  NamespaceRPCInte
-0001a5a0: 7266 6163 6527 0d0a 2020 2020 2020 2020  rface'..        
-0001a5b0: 290d 0a0d 0a0d 0a63 6c61 7373 2044 756d  )......class Dum
-0001a5c0: 6d79 5250 4349 6e74 6572 6661 6365 3a0d  myRPCInterface:.
-0001a5d0: 0a20 2020 2064 6566 2068 656c 6c6f 2873  .    def hello(s
-0001a5e0: 656c 6629 3a0d 0a20 2020 2020 2020 2072  elf):..        r
-0001a5f0: 6574 7572 6e20 2748 656c 6c6f 2127 0d0a  eturn 'Hello!'..
-0001a600: 0d0a 0d0a 6465 6620 7465 7374 5f73 7569  ....def test_sui
-0001a610: 7465 2829 3a0d 0a20 2020 2072 6574 7572  te():..    retur
-0001a620: 6e20 756e 6974 7465 7374 2e66 696e 6454  n unittest.findT
-0001a630: 6573 7443 6173 6573 2873 7973 2e6d 6f64  estCases(sys.mod
-0001a640: 756c 6573 5b5f 5f6e 616d 655f 5f5d 290d  ules[__name__]).
-0001a650: 0a0d 0a0d 0a69 6620 5f5f 6e61 6d65 5f5f  .....if __name__
-0001a660: 203d 3d20 275f 5f6d 6169 6e5f 5f27 3a0d   == '__main__':.
-0001a670: 0a20 2020 2075 6e69 7474 6573 742e 6d61  .    unittest.ma
-0001a680: 696e 2864 6566 6175 6c74 5465 7374 3d27  in(defaultTest='
-0001a690: 7465 7374 5f73 7569 7465 2729 0d0a       test_suite')..
+000197d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000197e0: 2020 2020 2020 2020 2020 2020 2020 7479                ty
+000197f0: 7065 2864 6f63 7465 7874 292c 206b 2929  pe(doctext), k))
+00019800: 0d0a 0d0a 2020 2020 6465 6620 7465 7374  ....    def test
+00019810: 5f6d 756c 7469 6361 6c6c 5f73 696d 706c  _multicall_simpl
+00019820: 6576 616c 7328 7365 6c66 293a 0d0a 2020  evals(self):..  
+00019830: 2020 2020 2020 696e 7465 7266 6163 6520        interface 
+00019840: 3d20 7365 6c66 2e5f 6d61 6b65 4f6e 6528  = self._makeOne(
+00019850: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
+00019860: 7473 203d 2069 6e74 6572 6661 6365 2e6d  ts = interface.m
+00019870: 756c 7469 6361 6c6c 285b 0d0a 2020 2020  ulticall([..    
+00019880: 2020 2020 2020 2020 7b27 6d65 7468 6f64          {'method
+00019890: 4e61 6d65 273a 2027 7379 7374 656d 2e6d  Name': 'system.m
+000198a0: 6574 686f 6448 656c 7027 2c20 2770 6172  ethodHelp', 'par
+000198b0: 616d 7327 3a20 5b27 7379 7374 656d 2e6d  ams': ['system.m
+000198c0: 6574 686f 6448 656c 7027 5d7d 2c0d 0a20  ethodHelp']},.. 
+000198d0: 2020 2020 2020 2020 2020 207b 276d 6574             {'met
+000198e0: 686f 644e 616d 6527 3a20 2773 7973 7465  hodName': 'syste
+000198f0: 6d2e 6c69 7374 4d65 7468 6f64 7327 2c20  m.listMethods', 
+00019900: 2770 6172 616d 7327 3a20 5b5d 7d2c 0d0a  'params': []},..
+00019910: 2020 2020 2020 2020 5d29 0d0a 2020 2020          ])..    
+00019920: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00019930: 7175 616c 2872 6573 756c 7473 5b30 5d2c  qual(results[0],
+00019940: 2069 6e74 6572 6661 6365 2e6d 6574 686f   interface.metho
+00019950: 6448 656c 7028 2773 7973 7465 6d2e 6d65  dHelp('system.me
+00019960: 7468 6f64 4865 6c70 2729 290d 0a20 2020  thodHelp'))..   
+00019970: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00019980: 4571 7561 6c28 7265 7375 6c74 735b 315d  Equal(results[1]
+00019990: 2c20 696e 7465 7266 6163 652e 6c69 7374  , interface.list
+000199a0: 4d65 7468 6f64 7328 2929 0d0a 0d0a 2020  Methods())....  
+000199b0: 2020 6465 6620 7465 7374 5f6d 756c 7469    def test_multi
+000199c0: 6361 6c6c 5f72 6563 7572 7369 6f6e 5f67  call_recursion_g
+000199d0: 7561 7264 2873 656c 6629 3a0d 0a20 2020  uard(self):..   
+000199e0: 2020 2020 2066 726f 6d20 7375 7065 7276       from superv
+000199f0: 6973 6f72 2069 6d70 6f72 7420 786d 6c72  isor import xmlr
+00019a00: 7063 0d0a 2020 2020 2020 2020 696e 7465  pc..        inte
+00019a10: 7266 6163 6520 3d20 7365 6c66 2e5f 6d61  rface = self._ma
+00019a20: 6b65 4f6e 6528 290d 0a20 2020 2020 2020  keOne()..       
+00019a30: 2072 6573 756c 7473 203d 2069 6e74 6572   results = inter
+00019a40: 6661 6365 2e6d 756c 7469 6361 6c6c 285b  face.multicall([
+00019a50: 0d0a 2020 2020 2020 2020 2020 2020 7b27  ..            {'
+00019a60: 6d65 7468 6f64 4e61 6d65 273a 2027 7379  methodName': 'sy
+00019a70: 7374 656d 2e6d 756c 7469 6361 6c6c 272c  stem.multicall',
+00019a80: 2027 7061 7261 6d73 273a 205b 5d7d 2c0d   'params': []},.
+00019a90: 0a20 2020 2020 2020 205d 290d 0a0d 0a20  .        ]).... 
+00019aa0: 2020 2020 2020 2065 203d 2078 6d6c 7270         e = xmlrp
+00019ab0: 632e 5250 4345 7272 6f72 2878 6d6c 7270  c.RPCError(xmlrp
+00019ac0: 632e 4661 756c 7473 2e49 4e43 4f52 5245  c.Faults.INCORRE
+00019ad0: 4354 5f50 4152 414d 4554 4552 532c 0d0a  CT_PARAMETERS,..
+00019ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019af0: 2752 6563 7572 7369 7665 2073 7973 7465  'Recursive syste
+00019b00: 6d2e 6d75 6c74 6963 616c 6c20 666f 7262  m.multicall forb
+00019b10: 6964 6465 6e27 290d 0a20 2020 2020 2020  idden')..       
+00019b20: 2072 6563 7572 7369 6f6e 5f66 6175 6c74   recursion_fault
+00019b30: 203d 207b 2766 6175 6c74 436f 6465 273a   = {'faultCode':
+00019b40: 2065 2e63 6f64 652c 2027 6661 756c 7453   e.code, 'faultS
+00019b50: 7472 696e 6727 3a20 652e 7465 7874 7d0d  tring': e.text}.
+00019b60: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00019b70: 7365 7274 4571 7561 6c28 7265 7375 6c74  sertEqual(result
+00019b80: 732c 205b 7265 6375 7273 696f 6e5f 6661  s, [recursion_fa
+00019b90: 756c 745d 290d 0a0d 0a20 2020 2064 6566  ult])....    def
+00019ba0: 2074 6573 745f 6d75 6c74 6963 616c 6c5f   test_multicall_
+00019bb0: 6e65 7374 6564 5f63 616c 6c62 6163 6b28  nested_callback(
+00019bc0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+00019bd0: 6672 6f6d 2073 7570 6572 7669 736f 7220  from supervisor 
+00019be0: 696d 706f 7274 2068 7474 700d 0a20 2020  import http..   
+00019bf0: 2020 2020 2069 6e74 6572 6661 6365 203d       interface =
+00019c00: 2073 656c 662e 5f6d 616b 654f 6e65 2829   self._makeOne()
+00019c10: 0d0a 2020 2020 2020 2020 6361 6c6c 6261  ..        callba
+00019c20: 636b 203d 2069 6e74 6572 6661 6365 2e6d  ck = interface.m
+00019c30: 756c 7469 6361 6c6c 285b 0d0a 2020 2020  ulticall([..    
+00019c40: 2020 2020 2020 2020 7b27 6d65 7468 6f64          {'method
+00019c50: 4e61 6d65 273a 2027 7375 7065 7276 6973  Name': 'supervis
+00019c60: 6f72 2e73 746f 7041 6c6c 5072 6f63 6573  or.stopAllProces
+00019c70: 7365 7327 7d5d 290d 0a20 2020 2020 2020  ses'}])..       
+00019c80: 2072 6573 756c 7473 203d 2068 7474 702e   results = http.
+00019c90: 4e4f 545f 444f 4e45 5f59 4554 0d0a 2020  NOT_DONE_YET..  
+00019ca0: 2020 2020 2020 7768 696c 6520 7265 7375        while resu
+00019cb0: 6c74 7320 6973 2068 7474 702e 4e4f 545f  lts is http.NOT_
+00019cc0: 444f 4e45 5f59 4554 3a0d 0a20 2020 2020  DONE_YET:..     
+00019cd0: 2020 2020 2020 2072 6573 756c 7473 203d         results =
+00019ce0: 2063 616c 6c62 6163 6b28 290d 0a20 2020   callback()..   
+00019cf0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00019d00: 4571 7561 6c28 7265 7375 6c74 735b 305d  Equal(results[0]
+00019d10: 2c20 5b5d 290d 0a0d 0a20 2020 2064 6566  , [])....    def
+00019d20: 2074 6573 745f 6d65 7468 6f64 4865 6c70   test_methodHelp
+00019d30: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00019d40: 2066 726f 6d20 7375 7065 7276 6973 6f72   from supervisor
+00019d50: 2069 6d70 6f72 7420 786d 6c72 7063 0d0a   import xmlrpc..
+00019d60: 2020 2020 2020 2020 696e 7465 7266 6163          interfac
+00019d70: 6520 3d20 7365 6c66 2e5f 6d61 6b65 4f6e  e = self._makeOn
+00019d80: 6528 290d 0a20 2020 2020 2020 2073 656c  e()..        sel
+00019d90: 662e 5f61 7373 6572 7452 5043 4572 726f  f._assertRPCErro
+00019da0: 7228 786d 6c72 7063 2e46 6175 6c74 732e  r(xmlrpc.Faults.
+00019db0: 5349 474e 4154 5552 455f 554e 5355 5050  SIGNATURE_UNSUPP
+00019dc0: 4f52 5445 442c 0d0a 2020 2020 2020 2020  ORTED,..        
+00019dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019de0: 2020 2020 2069 6e74 6572 6661 6365 2e6d       interface.m
+00019df0: 6574 686f 6448 656c 702c 0d0a 2020 2020  ethodHelp,..    
+00019e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e10: 2020 2020 2020 2020 205b 2766 6f6f 2e62           ['foo.b
+00019e20: 6172 275d 290d 0a20 2020 2020 2020 2068  ar'])..        h
+00019e30: 656c 7020 3d20 696e 7465 7266 6163 652e  elp = interface.
+00019e40: 6d65 7468 6f64 4865 6c70 2827 7379 7374  methodHelp('syst
+00019e50: 656d 2e6d 6574 686f 6448 656c 7027 290d  em.methodHelp').
+00019e60: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00019e70: 7365 7274 4571 7561 6c28 6865 6c70 2c20  sertEqual(help, 
+00019e80: 696e 7465 7266 6163 652e 6d65 7468 6f64  interface.method
+00019e90: 4865 6c70 2e5f 5f64 6f63 5f5f 290d 0a0d  Help.__doc__)...
+00019ea0: 0a0d 0a63 6c61 7373 2054 6573 745f 6d61  ...class Test_ma
+00019eb0: 6b65 5f61 6c6c 6675 6e63 2875 6e69 7474  ke_allfunc(unitt
+00019ec0: 6573 742e 5465 7374 4361 7365 293a 0d0a  est.TestCase):..
+00019ed0: 2020 2020 6465 6620 5f63 616c 6c46 5554      def _callFUT
+00019ee0: 2873 656c 662c 2070 726f 6365 7373 6573  (self, processes
+00019ef0: 2c20 7072 6564 6963 6174 652c 2066 756e  , predicate, fun
+00019f00: 632c 202a 2a65 7874 7261 5f6b 7761 7267  c, **extra_kwarg
+00019f10: 7329 3a0d 0a20 2020 2020 2020 2066 726f  s):..        fro
+00019f20: 6d20 7375 7065 7276 6973 6f72 2e72 7063  m supervisor.rpc
+00019f30: 696e 7465 7266 6163 6520 696d 706f 7274  interface import
+00019f40: 206d 616b 655f 616c 6c66 756e 630d 0a20   make_allfunc.. 
+00019f50: 2020 2020 2020 2072 6574 7572 6e20 6d61         return ma
+00019f60: 6b65 5f61 6c6c 6675 6e63 2870 726f 6365  ke_allfunc(proce
+00019f70: 7373 6573 2c20 7072 6564 6963 6174 652c  sses, predicate,
+00019f80: 2066 756e 632c 202a 2a65 7874 7261 5f6b   func, **extra_k
+00019f90: 7761 7267 7329 0d0a 0d0a 2020 2020 6465  wargs)....    de
+00019fa0: 6620 7465 7374 5f72 7063 6572 726f 725f  f test_rpcerror_
+00019fb0: 6e6f 6361 6c6c 6261 636b 7328 7365 6c66  nocallbacks(self
+00019fc0: 293a 0d0a 2020 2020 2020 2020 6672 6f6d  ):..        from
+00019fd0: 2073 7570 6572 7669 736f 7220 696d 706f   supervisor impo
+00019fe0: 7274 2078 6d6c 7270 630d 0a20 2020 2020  rt xmlrpc..     
+00019ff0: 2020 2064 6566 2063 6228 6e61 6d65 2c20     def cb(name, 
+0001a000: 2a2a 6b77 293a 0d0a 2020 2020 2020 2020  **kw):..        
+0001a010: 2020 2020 7261 6973 6520 786d 6c72 7063      raise xmlrpc
+0001a020: 2e52 5043 4572 726f 7228 786d 6c72 7063  .RPCError(xmlrpc
+0001a030: 2e46 6175 6c74 732e 4641 494c 4544 290d  .Faults.FAILED).
+0001a040: 0a0d 0a20 2020 2020 2020 206f 7074 696f  ...        optio
+0001a050: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+0001a060: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+0001a070: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
+0001a080: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+0001a090: 726f 6365 7373 3127 2c20 2766 6f6f 2729  rocess1', 'foo')
+0001a0a0: 0d0a 2020 2020 2020 2020 7072 6f63 203d  ..        proc =
+0001a0b0: 2044 756d 6d79 5072 6f63 6573 7328 7063   DummyProcess(pc
+0001a0c0: 6f6e 6669 6731 290d 0a20 2020 2020 2020  onfig1)..       
+0001a0d0: 2067 726f 7570 203d 2044 756d 6d79 5072   group = DummyPr
+0001a0e0: 6f63 6573 7347 726f 7570 2870 636f 6e66  ocessGroup(pconf
+0001a0f0: 6967 3129 0d0a 0d0a 2020 2020 2020 2020  ig1)....        
+0001a100: 6465 6620 7072 6564 2870 726f 6329 3a0d  def pred(proc):.
+0001a110: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001a120: 7572 6e20 5472 7565 0d0a 0d0a 2020 2020  urn True....    
+0001a130: 2020 2020 6166 203d 2073 656c 662e 5f63      af = self._c
+0001a140: 616c 6c46 5554 285b 2867 726f 7570 2c20  allFUT([(group, 
+0001a150: 7072 6f63 295d 2c20 7072 6564 2c20 6362  proc)], pred, cb
+0001a160: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
+0001a170: 7420 3d20 6166 2829 0d0a 2020 2020 2020  t = af()..      
+0001a180: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0001a190: 616c 2872 6573 756c 742c 0d0a 2020 2020  al(result,..    
+0001a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1b0: 2020 2020 205b 7b27 6465 7363 7269 7074       [{'descript
+0001a1c0: 696f 6e27 3a20 2746 4149 4c45 4427 2c0d  ion': 'FAILED',.
+0001a1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a1e0: 2020 2020 2020 2020 2020 2020 2767 726f              'gro
+0001a1f0: 7570 273a 2027 7072 6f63 6573 7331 272c  up': 'process1',
+0001a200: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a210: 2020 2020 2020 2020 2020 2020 2027 6e61               'na
+0001a220: 6d65 273a 2027 7072 6f63 6573 7331 272c  me': 'process1',
+0001a230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a240: 2020 2020 2020 2020 2020 2020 2027 7374               'st
+0001a250: 6174 7573 273a 2078 6d6c 7270 632e 4661  atus': xmlrpc.Fa
+0001a260: 756c 7473 2e46 4149 4c45 447d 5d29 0d0a  ults.FAILED}])..
+0001a270: 0d0a 2020 2020 6465 6620 7465 7374 5f66  ..    def test_f
+0001a280: 756e 635f 6361 6c6c 6261 636b 5f6e 6f72  unc_callback_nor
+0001a290: 6d61 6c5f 7265 7475 726e 5f76 616c 2873  mal_return_val(s
+0001a2a0: 656c 6629 3a0d 0a20 2020 2020 2020 2064  elf):..        d
+0001a2b0: 6566 2063 6228 6e61 6d65 2c20 2a2a 6b77  ef cb(name, **kw
+0001a2c0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001a2d0: 7265 7475 726e 206c 616d 6264 613a 2031  return lambda: 1
+0001a2e0: 0d0a 0d0a 2020 2020 2020 2020 6f70 7469  ....        opti
+0001a2f0: 6f6e 7320 3d20 4475 6d6d 794f 7074 696f  ons = DummyOptio
+0001a300: 6e73 2829 0d0a 2020 2020 2020 2020 7063  ns()..        pc
+0001a310: 6f6e 6669 6731 203d 2044 756d 6d79 5043  onfig1 = DummyPC
+0001a320: 6f6e 6669 6728 6f70 7469 6f6e 732c 2027  onfig(options, '
+0001a330: 7072 6f63 6573 7331 272c 2027 666f 6f27  process1', 'foo'
+0001a340: 290d 0a20 2020 2020 2020 2070 726f 6320  )..        proc 
+0001a350: 3d20 4475 6d6d 7950 726f 6365 7373 2870  = DummyProcess(p
+0001a360: 636f 6e66 6967 3129 0d0a 2020 2020 2020  config1)..      
+0001a370: 2020 6772 6f75 7020 3d20 4475 6d6d 7950    group = DummyP
+0001a380: 726f 6365 7373 4772 6f75 7028 7063 6f6e  rocessGroup(pcon
+0001a390: 6669 6731 290d 0a0d 0a20 2020 2020 2020  fig1)....       
+0001a3a0: 2064 6566 2070 7265 6428 7072 6f63 293a   def pred(proc):
+0001a3b0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001a3c0: 7475 726e 2054 7275 650d 0a0d 0a20 2020  turn True....   
+0001a3d0: 2020 2020 2061 6620 3d20 7365 6c66 2e5f       af = self._
+0001a3e0: 6361 6c6c 4655 5428 5b28 6772 6f75 702c  callFUT([(group,
+0001a3f0: 2070 726f 6329 5d2c 2070 7265 642c 2063   proc)], pred, c
+0001a400: 6229 0d0a 2020 2020 2020 2020 7265 7375  b)..        resu
+0001a410: 6c74 203d 2061 6628 290d 0a20 2020 2020  lt = af()..     
+0001a420: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0001a430: 7561 6c28 0d0a 2020 2020 2020 2020 2020  ual(..          
+0001a440: 2020 7265 7375 6c74 2c0d 0a20 2020 2020    result,..     
+0001a450: 2020 2020 2020 205b 7b27 6772 6f75 7027         [{'group'
+0001a460: 3a20 2770 726f 6365 7373 3127 2c0d 0a20  : 'process1',.. 
+0001a470: 2020 2020 2020 2020 2020 2020 2027 6465               'de
+0001a480: 7363 7269 7074 696f 6e27 3a20 274f 4b27  scription': 'OK'
+0001a490: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001a4a0: 2027 7374 6174 7573 273a 2038 302c 2027   'status': 80, '
+0001a4b0: 6e61 6d65 273a 2027 7072 6f63 6573 7331  name': 'process1
+0001a4c0: 277d 5d0d 0a20 2020 2020 2020 2029 0d0a  '}]..        )..
+0001a4d0: 0d0a 2020 2020 6465 6620 7465 7374 5f66  ..    def test_f
+0001a4e0: 756e 635f 6361 6c6c 6261 636b 5f72 6169  unc_callback_rai
+0001a4f0: 7365 735f 5250 4345 7272 6f72 2873 656c  ses_RPCError(sel
+0001a500: 6629 3a0d 0a20 2020 2020 2020 2066 726f  f):..        fro
+0001a510: 6d20 7375 7065 7276 6973 6f72 2069 6d70  m supervisor imp
+0001a520: 6f72 7420 786d 6c72 7063 0d0a 2020 2020  ort xmlrpc..    
+0001a530: 2020 2020 6465 6620 6362 286e 616d 652c      def cb(name,
+0001a540: 202a 2a6b 7729 3a0d 0a20 2020 2020 2020   **kw):..       
+0001a550: 2020 2020 2064 6566 2069 6e6e 6572 2829       def inner()
+0001a560: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001a570: 2020 2072 6169 7365 2078 6d6c 7270 632e     raise xmlrpc.
+0001a580: 5250 4345 7272 6f72 2878 6d6c 7270 632e  RPCError(xmlrpc.
+0001a590: 4661 756c 7473 2e46 4149 4c45 4429 0d0a  Faults.FAILED)..
+0001a5a0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+0001a5b0: 7475 726e 2069 6e6e 6572 0d0a 0d0a 2020  turn inner....  
+0001a5c0: 2020 2020 2020 6f70 7469 6f6e 7320 3d20        options = 
+0001a5d0: 4475 6d6d 794f 7074 696f 6e73 2829 0d0a  DummyOptions()..
+0001a5e0: 2020 2020 2020 2020 7063 6f6e 6669 6731          pconfig1
+0001a5f0: 203d 2044 756d 6d79 5043 6f6e 6669 6728   = DummyPConfig(
+0001a600: 6f70 7469 6f6e 732c 2027 7072 6f63 6573  options, 'proces
+0001a610: 7331 272c 2027 666f 6f27 290d 0a20 2020  s1', 'foo')..   
+0001a620: 2020 2020 2070 726f 6320 3d20 4475 6d6d       proc = Dumm
+0001a630: 7950 726f 6365 7373 2870 636f 6e66 6967  yProcess(pconfig
+0001a640: 3129 0d0a 2020 2020 2020 2020 6772 6f75  1)..        grou
+0001a650: 7020 3d20 4475 6d6d 7950 726f 6365 7373  p = DummyProcess
+0001a660: 4772 6f75 7028 7063 6f6e 6669 6731 290d  Group(pconfig1).
+0001a670: 0a0d 0a20 2020 2020 2020 2064 6566 2070  ...        def p
+0001a680: 7265 6428 7072 6f63 293a 0d0a 2020 2020  red(proc):..    
+0001a690: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0001a6a0: 7275 650d 0a0d 0a20 2020 2020 2020 2061  rue....        a
+0001a6b0: 6620 3d20 7365 6c66 2e5f 6361 6c6c 4655  f = self._callFU
+0001a6c0: 5428 5b28 6772 6f75 702c 2070 726f 6329  T([(group, proc)
+0001a6d0: 5d2c 2070 7265 642c 2063 6229 0d0a 2020  ], pred, cb)..  
+0001a6e0: 2020 2020 2020 7265 7375 6c74 203d 2061        result = a
+0001a6f0: 6628 290d 0a20 2020 2020 2020 2073 656c  f()..        sel
+0001a700: 662e 6173 7365 7274 4571 7561 6c28 0d0a  f.assertEqual(..
+0001a710: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0001a720: 6c74 2c0d 0a20 2020 2020 2020 2020 2020  lt,..           
+0001a730: 205b 7b27 6465 7363 7269 7074 696f 6e27   [{'description'
+0001a740: 3a20 2746 4149 4c45 4427 2c0d 0a20 2020  : 'FAILED',..   
+0001a750: 2020 2020 2020 2020 2020 2027 6772 6f75             'grou
+0001a760: 7027 3a20 2770 726f 6365 7373 3127 2c0d  p': 'process1',.
+0001a770: 0a20 2020 2020 2020 2020 2020 2020 2027  .              '
+0001a780: 7374 6174 7573 273a 2033 302c 0d0a 2020  status': 30,..  
+0001a790: 2020 2020 2020 2020 2020 2020 276e 616d              'nam
+0001a7a0: 6527 3a20 2770 726f 6365 7373 3127 7d5d  e': 'process1'}]
+0001a7b0: 0d0a 2020 2020 2020 2020 290d 0a0d 0a20  ..        ).... 
+0001a7c0: 2020 2064 6566 2074 6573 745f 6675 6e63     def test_func
+0001a7d0: 5f63 616c 6c62 6163 6b5f 7265 7475 726e  _callback_return
+0001a7e0: 735f 4e4f 545f 444f 4e45 5f59 4554 2873  s_NOT_DONE_YET(s
+0001a7f0: 656c 6629 3a0d 0a20 2020 2020 2020 2066  elf):..        f
+0001a800: 726f 6d20 7375 7065 7276 6973 6f72 2e68  rom supervisor.h
+0001a810: 7474 7020 696d 706f 7274 204e 4f54 5f44  ttp import NOT_D
+0001a820: 4f4e 455f 5945 540d 0a20 2020 2020 2020  ONE_YET..       
+0001a830: 2064 6566 2063 6228 6e61 6d65 2c20 2a2a   def cb(name, **
+0001a840: 6b77 293a 0d0a 2020 2020 2020 2020 2020  kw):..          
+0001a850: 2020 6465 6620 696e 6e65 7228 293a 0d0a    def inner():..
+0001a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a870: 7265 7475 726e 204e 4f54 5f44 4f4e 455f  return NOT_DONE_
+0001a880: 5945 540d 0a0d 0a20 2020 2020 2020 2020  YET....         
+0001a890: 2020 2072 6574 7572 6e20 696e 6e65 720d     return inner.
+0001a8a0: 0a0d 0a20 2020 2020 2020 206f 7074 696f  ...        optio
+0001a8b0: 6e73 203d 2044 756d 6d79 4f70 7469 6f6e  ns = DummyOption
+0001a8c0: 7328 290d 0a20 2020 2020 2020 2070 636f  s()..        pco
+0001a8d0: 6e66 6967 3120 3d20 4475 6d6d 7950 436f  nfig1 = DummyPCo
+0001a8e0: 6e66 6967 286f 7074 696f 6e73 2c20 2770  nfig(options, 'p
+0001a8f0: 726f 6365 7373 3127 2c20 2766 6f6f 2729  rocess1', 'foo')
+0001a900: 0d0a 2020 2020 2020 2020 7072 6f63 203d  ..        proc =
+0001a910: 2044 756d 6d79 5072 6f63 6573 7328 7063   DummyProcess(pc
+0001a920: 6f6e 6669 6731 290d 0a20 2020 2020 2020  onfig1)..       
+0001a930: 2067 726f 7570 203d 2044 756d 6d79 5072   group = DummyPr
+0001a940: 6f63 6573 7347 726f 7570 2870 636f 6e66  ocessGroup(pconf
+0001a950: 6967 3129 0d0a 0d0a 2020 2020 2020 2020  ig1)....        
+0001a960: 6465 6620 7072 6564 2870 726f 6329 3a0d  def pred(proc):.
+0001a970: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001a980: 7572 6e20 5472 7565 0d0a 0d0a 2020 2020  urn True....    
+0001a990: 2020 2020 6166 203d 2073 656c 662e 5f63      af = self._c
+0001a9a0: 616c 6c46 5554 285b 2867 726f 7570 2c20  allFUT([(group, 
+0001a9b0: 7072 6f63 295d 2c20 7072 6564 2c20 6362  proc)], pred, cb
+0001a9c0: 290d 0a20 2020 2020 2020 2072 6573 756c  )..        resul
+0001a9d0: 7420 3d20 6166 2829 0d0a 2020 2020 2020  t = af()..      
+0001a9e0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0001a9f0: 616c 280d 0a20 2020 2020 2020 2020 2020  al(..           
+0001aa00: 2072 6573 756c 742c 0d0a 2020 2020 2020   result,..      
+0001aa10: 2020 2020 2020 4e4f 545f 444f 4e45 5f59        NOT_DONE_Y
+0001aa20: 4554 2c0d 0a20 2020 2020 2020 2029 0d0a  ET,..        )..
+0001aa30: 0d0a 0d0a 636c 6173 7320 5465 7374 5f6d  ....class Test_m
+0001aa40: 616b 655f 6d61 696e 5f72 7063 696e 7465  ake_main_rpcinte
+0001aa50: 7266 6163 6528 756e 6974 7465 7374 2e54  rface(unittest.T
+0001aa60: 6573 7443 6173 6529 3a0d 0a20 2020 2064  estCase):..    d
+0001aa70: 6566 205f 6361 6c6c 4655 5428 7365 6c66  ef _callFUT(self
+0001aa80: 2c20 7375 7065 7276 6973 6f72 6429 3a0d  , supervisord):.
+0001aa90: 0a20 2020 2020 2020 2066 726f 6d20 7375  .        from su
+0001aaa0: 7065 7276 6973 6f72 2e72 7063 696e 7465  pervisor.rpcinte
+0001aab0: 7266 6163 6520 696d 706f 7274 206d 616b  rface import mak
+0001aac0: 655f 6d61 696e 5f72 7063 696e 7465 7266  e_main_rpcinterf
+0001aad0: 6163 650d 0a20 2020 2020 2020 2072 6574  ace..        ret
+0001aae0: 7572 6e20 6d61 6b65 5f6d 6169 6e5f 7270  urn make_main_rp
+0001aaf0: 6369 6e74 6572 6661 6365 2873 7570 6572  cinterface(super
+0001ab00: 7669 736f 7264 290d 0a0d 0a20 2020 2064  visord)....    d
+0001ab10: 6566 2074 6573 745f 6974 2873 656c 6629  ef test_it(self)
+0001ab20: 3a0d 0a20 2020 2020 2020 2069 6e73 7420  :..        inst 
+0001ab30: 3d20 7365 6c66 2e5f 6361 6c6c 4655 5428  = self._callFUT(
+0001ab40: 4e6f 6e65 290d 0a20 2020 2020 2020 2073  None)..        s
+0001ab50: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001ab60: 0d0a 2020 2020 2020 2020 2020 2020 696e  ..            in
+0001ab70: 7374 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  st.__class__.__n
+0001ab80: 616d 655f 5f2c 0d0a 2020 2020 2020 2020  ame__,..        
+0001ab90: 2020 2020 2753 7570 6572 7669 736f 724e      'SupervisorN
+0001aba0: 616d 6573 7061 6365 5250 4349 6e74 6572  amespaceRPCInter
+0001abb0: 6661 6365 270d 0a20 2020 2020 2020 2029  face'..        )
+0001abc0: 0d0a 0d0a 0d0a 636c 6173 7320 4475 6d6d  ......class Dumm
+0001abd0: 7952 5043 496e 7465 7266 6163 653a 0d0a  yRPCInterface:..
+0001abe0: 2020 2020 6465 6620 6865 6c6c 6f28 7365      def hello(se
+0001abf0: 6c66 293a 0d0a 2020 2020 2020 2020 7265  lf):..        re
+0001ac00: 7475 726e 2027 4865 6c6c 6f21 270d 0a    turn 'Hello!'..
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_socket_manager.py` & `supervisor-win-4.7.0/supervisor/tests/test_socket_manager.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,13 +1,12 @@
 """Test suite for supervisor.socket_manager"""
 
-import gc
-import socket
-import sys
+import os
 import unittest
+import socket
 
 try:
     import __pypy__
 except ImportError:
     __pypy__ = None
 
 from supervisor.tests.base import DummySocketConfig
@@ -46,15 +45,14 @@
         proxy = self._makeOne(Subject())
         self.assertEqual(5, proxy.getValue())
 
     def test_on_delete(self):
         proxy = self._makeOne(Subject(), on_delete=self.setOnDeleteCalled)
         self.assertEqual(5, proxy.getValue())
         proxy = None
-        gc_collect()
         self.assertTrue(self.on_deleteCalled)
 
 
 class ReferenceCounterTest(unittest.TestCase):
 
     def setUp(self):
         self.running = False
@@ -91,17 +89,14 @@
     def test_decr_at_zero_raises_error(self):
         ctr = self._makeOne(on_zero=self.stop, on_non_zero=self.start)
         self.assertRaises(Exception, ctr.decrement)
 
 
 class SocketManagerTest(unittest.TestCase):
 
-    def tearDown(self):
-        gc_collect()
-
     def _getTargetClass(self):
         from supervisor.socket_manager import SocketManager
         return SocketManager
 
     def _makeOne(self, *args, **kw):
         return self._getTargetClass()(*args, **kw)
 
@@ -147,48 +142,44 @@
         # Assert that they are the same underlying socket
         self.assertEqual(sock_id, sock2_id)
         # Socket not actually closed yet b/c ref ct is 2
         self.assertEqual(2, sock_manager.get_socket_ref_count())
         self.assertTrue(sock_manager.is_prepared())
         self.assertFalse(sock_manager.socket.close_called)
         sock = None
-        gc_collect()
         # Socket not actually closed yet b/c ref ct is 1
         self.assertTrue(sock_manager.is_prepared())
         self.assertFalse(sock_manager.socket.close_called)
         sock2 = None
-        gc_collect()
         # Socket closed
         self.assertFalse(sock_manager.is_prepared())
         self.assertTrue(sock_manager.socket.close_called)
 
         # Get a new socket reference
         sock3 = sock_manager.get_socket()
         self.assertTrue(sock_manager.is_prepared())
         sock3_id = id(sock3._get())
         # Assert that it is not the same socket
         self.assertNotEqual(sock_id, sock3_id)
         # Drop ref ct to zero
         del sock3
-        gc_collect()
         # Now assert that socket is closed
         self.assertFalse(sock_manager.is_prepared())
         self.assertTrue(sock_manager.socket.close_called)
 
     def test_logging(self):
         conf = DummySocketConfig(1)
         logger = DummyLogger()
         sock_manager = self._makeOne(conf, logger=logger)
         # socket open
         sock = sock_manager.get_socket()
         self.assertEqual(len(logger.data), 1)
         self.assertEqual('Creating socket %s' % repr(conf), logger.data[0])
         # socket close
         del sock
-        gc_collect()
         self.assertEqual(len(logger.data), 2)
         self.assertEqual('Closing socket %s' % repr(conf), logger.data[1])
 
     def test_prepare_socket(self):
         conf = DummySocketConfig(1)
         sock_manager = self._makeOne(conf)
         sock = sock_manager.get_socket()
@@ -224,22 +215,7 @@
         sock_manager = self._makeOne(conf)
         self.assertFalse(sock_manager.is_prepared())
         try:
             sock_manager._close()
             self.fail()
         except Exception as e:
             self.assertEqual(e.args[0], 'Socket has not been prepared')
-
-
-def gc_collect():
-    if __pypy__ is not None:
-        gc.collect()
-        gc.collect()
-        gc.collect()
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_states.py` & `supervisor-win-4.7.0/supervisor/tests/test_states.py`

 * *Files 19% similar despite different names*

```diff
@@ -1,10 +1,9 @@
 """Test suite for supervisor.states"""
 
-import sys
 import unittest
 
 from supervisor import states
 
 
 class TopLevelProcessStateTests(unittest.TestCase):
     def test_module_has_process_states(self):
@@ -50,15 +49,7 @@
         state = states.EventListenerStates.ACKNOWLEDGED
         self.assertEqual(states.getEventListenerStateDescription(state),
                          'ACKNOWLEDGED')
 
     def test_getEventListenerStateDescription_returns_None_when_not_found(self):
         self.assertEqual(states.getEventListenerStateDescription(3.14159),
                          None)
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_supervisorctl.py` & `supervisor-win-4.7.0/supervisor/tests/test_supervisorctl.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,8 +1,7 @@
-import socket
 import sys
 import unittest
 from supervisor import xmlrpc
 from supervisor.compat import StringIO
 from supervisor.compat import xmlrpclib
 from supervisor.supervisorctl import LSBInitExitStatuses, LSBStatusExitStatuses
 from supervisor.tests.base import DummyRPCServer
@@ -1314,14 +1313,24 @@
 
     def test_shutdown_help(self):
         plugin = self._makeOne()
         plugin.help_shutdown()
         out = plugin.ctl.stdout.getvalue()
         self.assertTrue("Shut the remote supervisord down" in out)
 
+    def test_shutdown_with_arg_shows_error(self):
+        plugin = self._makeOne()
+        options = plugin.ctl.options
+        result = plugin.do_shutdown('bad')
+        self.assertEqual(result, None)
+        self.assertEqual(options._server.supervisor._shutdown, False)
+        val = plugin.ctl.stdout.getvalue()
+        self.assertTrue(val.startswith('Error: shutdown accepts no arguments'), val)
+        self.assertEqual(plugin.ctl.exitstatus, LSBInitExitStatuses.GENERIC)
+
     def test_shutdown(self):
         plugin = self._makeOne()
         options = plugin.ctl.options
         result = plugin.do_shutdown('')
         self.assertEqual(result, None)
         self.assertEqual(options._server.supervisor._shutdown, True)
 
@@ -2042,21 +2051,16 @@
         out = plugin.ctl.stdout.getvalue()
         self.assertTrue("Exit the supervisor shell" in out)
 
 
 class DummyListener:
     def __init__(self):
         self.errors = []
-
-    def expt(self, url, msg):
-        raise socket.error(' %s %s' % url, msg)
-
     def error(self, url, msg):
         self.errors.append((url, msg))
-
     def close(self, url):
         self.closed = url
 
 
 class DummyPluginFactory:
     def __init__(self, ctl, **kw):
         self.ctl = ctl
@@ -2120,15 +2124,7 @@
 
 class DummyPlugin:
     def __init__(self, controller=None):
         self.ctl = controller
 
     def do_help(self, arg):
         self.helped = True
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_supervisord.py` & `supervisor-win-4.7.0/supervisor/tests/test_supervisord.py`

 * *Files 2% similar despite different names*

```diff
@@ -122,68 +122,64 @@
         return Supervisor
 
     def _makeOne(self, options):
         return self._getTargetClass()(options)
 
     def test_main_first(self):
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfigs = [DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])]
         options.process_group_configs = gconfigs
         options.test = True
         options.first = True
         supervisord = self._makeOne(options)
         supervisord.main()
-        self.assertEqual(options.environment_processed, True)
         self.assertEqual(options.fds_cleaned_up, False)
         self.assertEqual(options.rlimits_set, True)
         self.assertEqual(options.parse_criticals, ['setuid_called'])
         self.assertEqual(options.parse_warnings, [])
         self.assertEqual(options.parse_infos, ['rlimits_set'])
         self.assertEqual(options.autochildlogdir_cleared, True)
         self.assertEqual(len(supervisord.process_groups), 1)
         self.assertEqual(supervisord.process_groups['foo'].config.options,
                          options)
-        self.assertEqual(options.environment_processed, True)
         self.assertEqual(options.httpservers_opened, True)
         self.assertEqual(options.signals_set, True)
         self.assertEqual(options.daemonized, True)
         self.assertEqual(options.pidfile_written, True)
         self.assertEqual(options.cleaned_up, True)
 
     def test_main_notfirst(self):
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfigs = [DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])]
         options.process_group_configs = gconfigs
         options.test = True
         options.first = False
         supervisord = self._makeOne(options)
         supervisord.main()
-        self.assertEqual(options.environment_processed, True)
         self.assertEqual(options.fds_cleaned_up, True)
         self.assertFalse(hasattr(options, 'rlimits_set'))
         self.assertEqual(options.parse_criticals, ['setuid_called'])
         self.assertEqual(options.parse_warnings, [])
         self.assertEqual(options.parse_infos, [])
         self.assertEqual(options.autochildlogdir_cleared, True)
         self.assertEqual(len(supervisord.process_groups), 1)
         self.assertEqual(supervisord.process_groups['foo'].config.options,
                          options)
-        self.assertEqual(options.environment_processed, True)
         self.assertEqual(options.httpservers_opened, True)
         self.assertEqual(options.signals_set, True)
         self.assertEqual(options.daemonized, False)
         self.assertEqual(options.pidfile_written, True)
         self.assertEqual(options.cleaned_up, True)
 
     def test_reap(self):
         options = DummyOptions()
         options.waitpid_return = (1, 1)
-        pconfig = DummyPConfig(options, 'process', 'process', '/bin/process1')
+        pconfig = DummyPConfig(options, 'process', '/bin/foo', '/tmp')
         process = DummyProcess(pconfig)
         process.drained = False
         process.killing = True
         process.laststop = None
         process.waitstatus = None, None
         options.pidhistory = {1: process}
         supervisord = self._makeOne(options)
@@ -196,30 +192,30 @@
         supervisord = self._makeOne(options)
         result = supervisord.reap(once=True, recursionguard=100)
         self.assertEqual(result, None)
 
     def test_reap_more_than_once(self):
         options = DummyOptions()
         options.waitpid_return = (1, 1)
-        pconfig = DummyPConfig(options, 'process', 'process', '/bin/process1')
+        pconfig = DummyPConfig(options, 'process', '/bin/foo', '/tmp')
         process = DummyProcess(pconfig)
         process.drained = False
         process.killing = True
         process.laststop = None
         process.waitstatus = None, None
         options.pidhistory = {1: process}
         supervisord = self._makeOne(options)
 
         supervisord.reap(recursionguard=99)
         self.assertEqual(process.finished, (1, 1))
 
     def test_reap_unknown_pid(self):
         options = DummyOptions()
         options.waitpid_return = (2, 0)  # pid, status
-        pconfig = DummyPConfig(options, 'process', 'process', '/bin/process1')
+        pconfig = DummyPConfig(options, 'process', '/bin/foo', '/tmp')
         process = DummyProcess(pconfig)
         process.drained = False
         process.killing = True
         process.laststop = None
         process.waitstatus = None, None
         options.pidhistory = {1: process}
         supervisord = self._makeOne(options)
@@ -278,20 +274,20 @@
     #     msgs = ('received SIGCHLD indicating a child quit',
     #             'received SIGCLD indicating a child quit')
     #     self.assertTrue(options.logger.data[0] in msgs)
     #
     # def test_handle_sigusr2(self):
     #     options = DummyOptions()
     #     options._signal = signal.SIGUSR2
-    #     pconfig1 = DummyPConfig(options, 'process1', 'process1', '/bin/process1')
+    #     pconfig1 = DummyPConfig(options, 'process1', '/bin/foo', '/tmp')
     #     from supervisor.process import ProcessStates
     #     process1 = DummyProcess(pconfig1, state=ProcessStates.STOPPING)
     #     process1.delay = time.time() - 1
     #     supervisord = self._makeOne(options)
-    #     pconfigs = [DummyPConfig(options, 'foo', 'foo', '/bin/foo')]
+    #     pconfigs = [DummyPConfig(options, 'foo', '/bin/foo', '/tmp')]
     #     options.process_group_configs = DummyPGroupConfig(
     #         options, 'foo',
     #         pconfigs=pconfigs)
     #     dummypgroup = DummyProcessGroup(options)
     #     supervisord.process_groups = {None: dummypgroup}
     #     supervisord.handle_signal()
     #     self.assertEqual(supervisord.options.mood, 1)
@@ -311,57 +307,52 @@
                          'received SIGSEGV indicating nothing')
 
     def test_get_state(self):
         options = DummyOptions()
         supervisord = self._makeOne(options)
         self.assertEqual(supervisord.get_state(), SupervisorStates.RUNNING)
 
-    def test_diff_add_remove(self):
+    def test_diff_to_active_finds_groups_added(self):
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
-        pconfig = DummyPConfig(options, 'process1', 'process1')
+        pconfig = DummyPConfig(options, 'process1', '/bin/foo', '/tmp')
         group1 = DummyPGroupConfig(options, 'group1', pconfigs=[pconfig])
 
-        pconfig = DummyPConfig(options, 'process2', 'process2')
-        group2 = DummyPGroupConfig(options, 'group2', pconfigs=[pconfig])
-
-        new = [group1, group2]
-
+        # the active configuration has no groups
+        # diffing should find that group1 has been added
+        supervisord.options.process_group_configs = [group1]
         added, changed, removed = supervisord.diff_to_active()
-        self.assertEqual(added, [])
+        self.assertEqual(added, [group1])
         self.assertEqual(changed, [])
         self.assertEqual(removed, [])
 
-        added, changed, removed = supervisord.diff_to_active(new)
-        self.assertEqual(added, new)
-        self.assertEqual(changed, [])
-        self.assertEqual(removed, [])
+    def test_diff_to_active_finds_groups_removed(self):
+        options = DummyOptions()
+        supervisord = self._makeOne(options)
 
-        supervisord.options.process_group_configs = new
-        added, changed, removed = supervisord.diff_to_active()
-        self.assertEqual(added, new)
+        pconfig = DummyPConfig(options, 'process1', '/bin/process1', '/tmp')
+        group1 = DummyPGroupConfig(options, 'group1', pconfigs=[pconfig])
 
+        pconfig = DummyPConfig(options, 'process2', '/bin/process2', '/tmp')
+        group2 = DummyPGroupConfig(options, 'group2', pconfigs=[pconfig])
+
+        # set up supervisord with an active configuration of group1 and group2
+        supervisord.options.process_group_configs = [group1, group2]
         supervisord.add_process_group(group1)
         supervisord.add_process_group(group2)
 
-        pconfig = DummyPConfig(options, 'process3', 'process3')
-        new_group1 = DummyPGroupConfig(options, pconfigs=[pconfig])
-
-        pconfig = DummyPConfig(options, 'process4', 'process4')
-        new_group2 = DummyPGroupConfig(options, pconfigs=[pconfig])
-
-        new = [group2, new_group1, new_group2]
-
-        added, changed, removed = supervisord.diff_to_active(new)
-        self.assertEqual(added, [new_group1, new_group2])
+        # diffing should find that group2 has been removed
+        supervisord.options.process_group_configs = [group1]
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
         self.assertEqual(changed, [])
-        self.assertEqual(removed, [group1])
+        self.assertEqual(removed, [group2])
 
-    def test_diff_changed(self):
+    def test_diff_to_active_changed(self):
         from supervisor.options import ProcessConfig, ProcessGroupConfig
 
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
         def make_pconfig(name, command, **params):
             result = {
@@ -399,34 +390,37 @@
         group3 = make_gconfig('group1', [pconfig])
 
         pconfig = make_pconfig('process2', 'process2')
         group4 = make_gconfig('group2', [pconfig])
         supervisord.add_process_group(group3)
         supervisord.add_process_group(group4)
 
-        added, changed, removed = supervisord.diff_to_active(new)
-
-        self.assertEqual([added, removed], [[], []])
+        supervisord.options.process_group_configs = new
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
+        self.assertEqual(removed, [])
         self.assertEqual(changed, [group1])
 
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
         pconfig1 = make_pconfig('process1', 'process1')
         pconfig2 = make_pconfig('process2', 'process2')
         group1 = make_gconfig('group1', [pconfig1, pconfig2])
         new = [group1]
 
         supervisord.add_process_group(make_gconfig('group1', [pconfig1]))
 
-        added, changed, removed = supervisord.diff_to_active(new)
-        self.assertEqual([added, removed], [[], []])
+        supervisord.options.process_group_configs = new
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
+        self.assertEqual(removed, [])
         self.assertEqual(changed, [group1])
 
-    def test_diff_changed_eventlistener(self):
+    def test_diff_to_active_changed_eventlistener(self):
         from supervisor.events import EventTypes
         from supervisor.options import EventListenerConfig, EventListenerPoolConfig
 
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
         def make_pconfig(name, command, **params):
@@ -456,15 +450,15 @@
             for pool_event_name in pool_event_names:
                 result.append(getattr(EventTypes, pool_event_name, None))
             return result
 
         def make_gconfig(name, pconfigs, pool_events, result_handler='supervisor.dispatchers:default_handler'):
             return EventListenerPoolConfig(options, name, 25, pconfigs, 10, pool_events, result_handler)
 
-	    # Test that changing an event listener command causes the diff_to_activate
+	    # Test that changing an eventlistener's command is detected by diff_to_active
         pconfig = make_pconfig('process1', 'process1-new')
         econfig = make_econfig("TICK_60")
         group1 = make_gconfig('group1', [pconfig], econfig)
 
         pconfig = make_pconfig('process2', 'process2')
         econfig = make_econfig("TICK_3600")
         group2 = make_gconfig('group2', [pconfig], econfig)
@@ -476,20 +470,21 @@
 
         pconfig = make_pconfig('process2', 'process2')
         econfig = make_econfig("TICK_3600")
         group4 = make_gconfig('group2', [pconfig], econfig)
         supervisord.add_process_group(group3)
         supervisord.add_process_group(group4)
 
-        added, changed, removed = supervisord.diff_to_active(new)
-
-        self.assertEqual([added, removed], [[], []])
+        supervisord.options.process_group_configs = new
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
+        self.assertEqual(removed, [])
         self.assertEqual(changed, [group1])
 
-        # Test that changing the event triggers diff_to_activate
+        # Test that changing an eventlistener's event is detected by diff_to_active
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
         pconfig = make_pconfig('process1', 'process1')
         econfig = make_econfig("TICK_60")
         group1 = make_gconfig('group1', [pconfig], econfig)
 
@@ -504,20 +499,21 @@
 
         pconfig = make_pconfig('process2', 'process2')
         econfig = make_econfig("TICK_3600")
         group4 = make_gconfig('group2', [pconfig], econfig)
         supervisord.add_process_group(group3)
         supervisord.add_process_group(group4)
 
-        added, changed, removed = supervisord.diff_to_active(new)
-
-        self.assertEqual([added, removed], [[], []])
+        supervisord.options.process_group_configs = new
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
+        self.assertEqual(removed, [])
         self.assertEqual(changed, [group1])
 
-        # Test that changing the result_handler triggers diff_to_activate
+        # Test that changing an eventlistener's result_handler is detected by diff_to_active
         options = DummyOptions()
         supervisord = self._makeOne(options)
 
         pconfig = make_pconfig('process1', 'process1')
         econfig = make_econfig("TICK_60")
         group1 = make_gconfig('group1', [pconfig], econfig, 'new-result-handler')
 
@@ -532,22 +528,23 @@
 
         pconfig = make_pconfig('process2', 'process2')
         econfig = make_econfig("TICK_3600")
         group4 = make_gconfig('group2', [pconfig], econfig)
         supervisord.add_process_group(group3)
         supervisord.add_process_group(group4)
 
-        added, changed, removed = supervisord.diff_to_active(new)
-
-        self.assertEqual([added, removed], [[], []])
+        supervisord.options.process_group_configs = new
+        added, changed, removed = supervisord.diff_to_active()
+        self.assertEqual(added, [])
+        self.assertEqual(removed, [])
         self.assertEqual(changed, [group1])
 
     def test_add_process_group(self):
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfig = DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])
         options.process_group_configs = [gconfig]
         supervisord = self._makeOne(options)
 
         self.assertEqual(supervisord.process_groups, {})
 
         result = supervisord.add_process_group(gconfig)
@@ -555,37 +552,37 @@
         self.assertTrue(result)
 
         group = supervisord.process_groups['foo']
         result = supervisord.add_process_group(gconfig)
         self.assertEqual(group, supervisord.process_groups['foo'])
         self.assertTrue(not result)
 
-    def test_add_process_group_event(self):
+    def test_add_process_group_emits_event(self):
         from supervisor import events
         L = []
 
         def callback(event):
             L.append(1)
 
         events.subscribe(events.ProcessGroupAddedEvent, callback)
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfig = DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])
         options.process_group_configs = [gconfig]
         supervisord = self._makeOne(options)
 
         supervisord.add_process_group(gconfig)
 
         options.test = True
         supervisord.runforever()
         self.assertEqual(L, [1])
 
     def test_remove_process_group(self):
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfig = DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])
         supervisord = self._makeOne(options)
 
         self.assertRaises(KeyError, supervisord.remove_process_group, 'asdf')
 
         supervisord.add_process_group(gconfig)
         group = supervisord.process_groups['foo']
@@ -605,15 +602,15 @@
         L = []
 
         def callback(event):
             L.append(1)
 
         events.subscribe(events.ProcessGroupRemovedEvent, callback)
         options = DummyOptions()
-        pconfig = DummyPConfig(options, 'foo', 'foo', '/bin/foo')
+        pconfig = DummyPConfig(options, 'foo', '/bin/foo', '/tmp')
         gconfig = DummyPGroupConfig(options, 'foo', pconfigs=[pconfig])
         options.process_group_configs = [gconfig]
         supervisord = self._makeOne(options)
 
         supervisord.add_process_group(gconfig)
         supervisord.process_groups['foo'].stopped_processes = [DummyProcess(None)]
         supervisord.remove_process_group('foo')
@@ -831,15 +828,7 @@
 
         supervisord.tick(now=3601)
         self.assertEqual(supervisord.ticks[5], 3600)
         self.assertEqual(supervisord.ticks[60], 3600)
         self.assertEqual(supervisord.ticks[3600], 3600)
         self.assertEqual(len(L), 6)
         self.assertEqual(L[-1].__class__, events.Tick3600Event)
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_templating.py` & `supervisor-win-4.7.0/supervisor/tests/test_templating.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,14 @@
 # (https://pypi.org/project/meld3/2.0.0/).  The meld3 package is not
 # called out separately in Supervisor's license or copyright files
 # because meld3 had the same authors, copyright, and license as
 # Supervisor at the time this file was bundled with Supervisor.
 
 import unittest
 import re
-import sys
 
 _SIMPLE_XML = r"""<?xml version="1.0"?>
 <root xmlns:meld="https://github.com/Supervisor/supervisor">
   <list meld:id="list">
     <item meld:id="item">
        <name meld:id="name">Name</name>
        <description meld:id="description">Description</description>
@@ -1781,16 +1780,7 @@
     return s
 
 def normalize_xml(s):
     s = re.sub(r"\s+", " ", s)
     s = re.sub(r"(?s)\s+<", "<", s)
     s = re.sub(r"(?s)>\s+", ">", s)
     return s
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-def main():
-    unittest.main(defaultTest='test_suite')
-
-if __name__ == '__main__':
-    main()
```

#### html2text {}

```diff
@@ -1,13 +1,13 @@
 # This file was originally based on the meld3 package version 2.0.0 # (https://
 pypi.org/project/meld3/2.0.0/). The meld3 package is not # called out
 separately in Supervisor's license or copyright files # because meld3 had the
 same authors, copyright, and license as # Supervisor at the time this file was
-bundled with Supervisor. import unittest import re import sys _SIMPLE_XML =
-r"""<?xml version="1.0"?>    Name Description   """ _SIMPLE_XHTML = r"""
+bundled with Supervisor. import unittest import re _SIMPLE_XML = r"""<?xml
+version="1.0"?>    Name Description   """ _SIMPLE_XHTML = r"""
 Hello!
 """ _EMPTYTAGS_HTML = """
 
 ===============================================================================
 [Image][                    ]
 
 """ _BOOLEANATTRS_XHTML= """
@@ -605,10 +605,8 @@
 _escape_attrib(a, None)) def test_escape_attrib_unicodeerror(self): from
 supervisor.templating import _escape_attrib from supervisor.compat import
 as_bytes from supervisor.compat import as_string a = as_string(as_bytes('\x80',
 encoding='latin1'), encoding='latin1') self.assertEqual(as_bytes('',
 encoding='latin1'), _escape_attrib(a, 'ascii')) def normalize_html(s): s =
 re.sub(r"[ \t]+", " ", s) s = re.sub(r"/>", ">", s) return s def normalize_xml
 (s): s = re.sub(r"\s+", " ", s) s = re.sub(r"(?s)\s+<", "<", s) s = re.sub(r"
-(?s)>\s+", ">", s) return s def test_suite(): return unittest.findTestCases
-(sys.modules[__name__]) def main(): unittest.main(defaultTest='test_suite') if
-__name__ == '__main__': main()
+(?s)>\s+", ">", s) return s
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_web.py` & `supervisor-win-4.7.0/supervisor/tests/test_web.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,7 @@
-import sys
 import unittest
 
 from supervisor.tests.base import DummyRequest
 from supervisor.tests.base import DummySupervisor
 
 
 class DeferredWebProducerTests(unittest.TestCase):
@@ -178,15 +177,7 @@
         data = view.render()
         from supervisor.http import NOT_DONE_YET
         self.assertTrue(data is NOT_DONE_YET, data)
 
 
 class DummyContext:
     pass
-
-
-def test_suite():
-    return unittest.findTestCases(sys.modules[__name__])
-
-
-if __name__ == '__main__':
-    unittest.main(defaultTest='test_suite')
```

### Comparing `supervisor-win-4.6.0/supervisor/tests/test_xmlrpc.py` & `supervisor-win-4.7.0/supervisor/tests/test_xmlrpc.py`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/icon.png` & `supervisor-win-4.7.0/supervisor/ui/images/icon.png`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/state0.gif` & `supervisor-win-4.7.0/supervisor/ui/images/state0.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/state1.gif` & `supervisor-win-4.7.0/supervisor/ui/images/state1.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/state2.gif` & `supervisor-win-4.7.0/supervisor/ui/images/state2.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/state3.gif` & `supervisor-win-4.7.0/supervisor/ui/images/state3.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/images/supervisor.gif` & `supervisor-win-4.7.0/supervisor/ui/images/supervisor.gif`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/status.html` & `supervisor-win-4.7.0/supervisor/ui/status.html`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/stylesheets/supervisor.css` & `supervisor-win-4.7.0/supervisor/ui/stylesheets/supervisor.css`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/ui/tail.html` & `supervisor-win-4.7.0/supervisor/ui/tail.html`

 * *Files identical despite different names*

### Comparing `supervisor-win-4.6.0/supervisor/web.py` & `supervisor-win-4.7.0/supervisor/web.py`

 * *Files 0% similar despite different names*

```diff
@@ -6,14 +6,15 @@
 import traceback
 import datetime
 
 from supervisor import templating
 
 from supervisor.compat import urllib
 from supervisor.compat import urlparse
+from supervisor.compat import as_bytes
 from supervisor.compat import as_string
 from supervisor.compat import as_bytes
 from supervisor.compat import PY2
 from supervisor.compat import unicode
 
 from supervisor.medusa import producers
 from supervisor.medusa.http_server import http_date
```

### Comparing `supervisor-win-4.6.0/supervisor/xmlrpc.py` & `supervisor-win-4.7.0/supervisor/xmlrpc.py`

 * *Files 5% similar despite different names*

```diff
@@ -5,15 +5,15 @@
 import time
 import traceback
 import types
 from xml.etree.ElementTree import iterparse
 
 from supervisor.compat import xmlrpclib
 from supervisor.compat import StringIO
-from supervisor.compat import urllib
+from supervisor.compat import urlparse
 from supervisor.compat import as_bytes
 from supervisor.compat import as_string
 from supervisor.compat import encodestring
 from supervisor.compat import decodestring
 from supervisor.compat import httplib
 from supervisor.compat import PY2
 
@@ -130,25 +130,25 @@
             self.request['Connection'] = 'close'
 
         # prepend the header
         self.request.outgoing.insert(0, outgoing_header)
         outgoing_producer = producers.composite_producer(self.request.outgoing)
 
         # apply a few final transformations to the output
-        self.request.channel.push_with_producer(
-            # globbing gives us large packets
-            producers.globbing_producer(
-                # hooking lets us log the number of bytes sent
-                producers.hooked_producer(
-                    outgoing_producer,
-                    self.request.log
+        if not getattr(self.request.channel, "closing", False):
+            self.request.channel.push_with_producer(
+                # globbing gives us large packets
+                producers.globbing_producer(
+                    # hooking lets us log the number of bytes sent
+                    producers.hooked_producer(
+                        outgoing_producer,
+                        self.request.log
+                    )
                 )
             )
-        )
-
         self.request.channel.current_request = None
 
         if close_it:
             self.request.channel.close_when_done()
 
 
 def xmlrpc_marshal(value):
@@ -497,22 +497,18 @@
     def __init__(self, username=None, password=None, serverurl=None, xmlrpc_timeout=None):
         xmlrpclib.Transport.__init__(self)
         self.username = username
         self.password = password
         self.verbose = False
         self.serverurl = serverurl
         if serverurl.startswith('http://'):
-            _type, uri = urllib.splittype(serverurl)
-            host, path = urllib.splithost(uri)
-            host, port = urllib.splitport(host)
+            parsed = urlparse.urlparse(serverurl)
+            host, port = parsed.hostname, parsed.port
             if port is None:
                 port = 80
-            else:
-                port = int(port)
-
             def get_connection(host=host, port=port):
                 return httplib.HTTPConnection(host, port, timeout=xmlrpc_timeout)
 
             self._get_connection = get_connection
         elif serverurl.startswith('unix://'):
             def get_connection(serverurl=serverurl):
                 # we use 'localhost' here because domain names must be
```

### Comparing `supervisor-win-4.6.0/supervisor_win.egg-info/SOURCES.txt` & `supervisor-win-4.7.0/supervisor_win.egg-info/SOURCES.txt`

 * *Files 8% similar despite different names*

```diff
@@ -30,15 +30,14 @@
 supervisor/__init__.py
 supervisor/childutils.py
 supervisor/compat.py
 supervisor/confecho.py
 supervisor/datatypes.py
 supervisor/dispatchers.py
 supervisor/events.py
-supervisor/helpers.py
 supervisor/http.py
 supervisor/http_client.py
 supervisor/loggers.py
 supervisor/options.py
 supervisor/pidproxy.py
 supervisor/poller.py
 supervisor/process.py
@@ -63,14 +62,16 @@
 supervisor/medusa/http_date.py
 supervisor/medusa/http_server.py
 supervisor/medusa/logger.py
 supervisor/medusa/producers.py
 supervisor/medusa/text_socket.py
 supervisor/medusa/util.py
 supervisor/medusa/xmlrpc_handler.py
+supervisor/psutil/__init__.py
+supervisor/psutil/subproc.py
 supervisor/scripts/loop_eventgen.py
 supervisor/scripts/loop_listener.py
 supervisor/scripts/sample_commevent.py
 supervisor/scripts/sample_eventlistener.py
 supervisor/scripts/sample_exiting_eventlistener.py
 supervisor/skel/sample.conf
 supervisor/tests/__init__.py
@@ -81,39 +82,51 @@
 supervisor/tests/test_dispatchers.py
 supervisor/tests/test_end_to_end.py
 supervisor/tests/test_events.py
 supervisor/tests/test_http.py
 supervisor/tests/test_http_client.py
 supervisor/tests/test_loggers.py
 supervisor/tests/test_options.py
+supervisor/tests/test_pidproxy.py
 supervisor/tests/test_poller.py
 supervisor/tests/test_process.py
 supervisor/tests/test_rpcinterfaces.py
 supervisor/tests/test_socket_manager.py
 supervisor/tests/test_states.py
 supervisor/tests/test_supervisorctl.py
 supervisor/tests/test_supervisord.py
 supervisor/tests/test_templating.py
 supervisor/tests/test_web.py
 supervisor/tests/test_xmlrpc.py
 supervisor/tests/fixtures/donothing.conf
 supervisor/tests/fixtures/include.conf
 supervisor/tests/fixtures/issue-1054.conf
+supervisor/tests/fixtures/issue-1170a.conf
+supervisor/tests/fixtures/issue-1170b.conf
+supervisor/tests/fixtures/issue-1170c.conf
 supervisor/tests/fixtures/issue-1224.conf
 supervisor/tests/fixtures/issue-1231a.conf
 supervisor/tests/fixtures/issue-1231b.conf
 supervisor/tests/fixtures/issue-1231c.conf
 supervisor/tests/fixtures/issue-1298.conf
+supervisor/tests/fixtures/issue-1483a.conf
+supervisor/tests/fixtures/issue-1483b.conf
+supervisor/tests/fixtures/issue-1483c.conf
+supervisor/tests/fixtures/issue-291a.conf
+supervisor/tests/fixtures/issue-550.conf
 supervisor/tests/fixtures/issue-565.conf
 supervisor/tests/fixtures/issue-638.conf
 supervisor/tests/fixtures/issue-663.conf
 supervisor/tests/fixtures/issue-664.conf
+supervisor/tests/fixtures/issue-733.conf
 supervisor/tests/fixtures/issue-835.conf
 supervisor/tests/fixtures/issue-836.conf
+supervisor/tests/fixtures/issue-986.conf
 supervisor/tests/fixtures/listener.py
+supervisor/tests/fixtures/print_env.py
 supervisor/tests/fixtures/spew.py
 supervisor/tests/fixtures/test_1231.py
 supervisor/tests/fixtures/unkillable_spew.py
 supervisor/tests/fixtures/example/included.conf
 supervisor/ui/status.html
 supervisor/ui/tail.html
 supervisor/ui/images/icon.png
```

### Comparing `supervisor-win-4.6.0/tox.ini` & `supervisor-win-4.7.0/tox.ini`

 * *Files 16% similar despite different names*

```diff
@@ -1,71 +1,78 @@
 00000000: 5b74 6f78 5d0d 0a65 6e76 6c69 7374 203d  [tox]..envlist =
 00000010: 0d0a 2020 2020 636f 7665 722c 636f 7665  ..    cover,cove
 00000020: 7233 2c64 6f63 732c 7079 3237 2c70 7933  r3,docs,py27,py3
 00000030: 342c 7079 3335 2c70 7933 362c 7079 3337  4,py35,py36,py37
-00000040: 2c70 7933 380d 0a0d 0a5b 7465 7374 656e  ,py38....[testen
-00000050: 765d 0d0a 6465 7073 203d 0d0a 2020 2020  v]..deps =..    
-00000060: 7079 7465 7374 0d0a 2020 2020 7065 7870  pytest..    pexp
-00000070: 6563 7420 3d3d 2034 2e37 2e30 2020 2320  ect == 4.7.0  # 
-00000080: 7365 6520 6874 7470 733a 2f2f 6769 7468  see https://gith
-00000090: 7562 2e63 6f6d 2f53 7570 6572 7669 736f  ub.com/Superviso
-000000a0: 722f 7375 7065 7276 6973 6f72 2f69 7373  r/supervisor/iss
-000000b0: 7565 732f 3133 3237 0d0a 2020 2020 6d6f  ues/1327..    mo
-000000c0: 636b 203e 3d20 302e 352e 300d 0a23 2050  ck >= 0.5.0..# P
-000000d0: 6173 7369 6e67 2077 696e 6469 7220 6661  assing windir fa
-000000e0: 696c 7320 6f6e 204c 696e 7578 2062 6563  ils on Linux bec
-000000f0: 6175 7365 2069 7420 6973 206e 6f74 2064  ause it is not d
-00000100: 6566 696e 6564 2e0d 0a70 6173 7365 6e76  efined...passenv
-00000110: 203d 2045 4e44 5f54 4f5f 454e 4420 7769   = END_TO_END wi
-00000120: 6e64 6972 0d0a 636f 6d6d 616e 6473 203d  ndir..commands =
-00000130: 0d0a 2020 2020 7079 2e74 6573 7420 7b70  ..    py.test {p
-00000140: 6f73 6172 6773 7d0d 0a0d 0a5b 7465 7374  osargs}....[test
-00000150: 656e 763a 7079 3237 2d63 6f6e 6669 6770  env:py27-configp
-00000160: 6172 7365 725d 0d0a 3b73 6565 2068 7474  arser]..;see htt
-00000170: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
-00000180: 5375 7065 7276 6973 6f72 2f73 7570 6572  Supervisor/super
-00000190: 7669 736f 722f 6973 7375 6573 2f31 3233  visor/issues/123
-000001a0: 300d 0a62 6173 6570 7974 686f 6e20 3d20  0..basepython = 
-000001b0: 7079 7468 6f6e 322e 370d 0a64 6570 7320  python2.7..deps 
-000001c0: 3d0d 0a20 2020 207b 5b74 6573 7465 6e76  =..    {[testenv
-000001d0: 5d64 6570 737d 0d0a 2020 2020 636f 6e66  ]deps}..    conf
-000001e0: 6967 7061 7273 6572 0d0a 7061 7373 656e  igparser..passen
-000001f0: 7620 3d20 7b5b 7465 7374 656e 765d 7061  v = {[testenv]pa
-00000200: 7373 656e 767d 0d0a 636f 6d6d 616e 6473  ssenv}..commands
-00000210: 203d 207b 5b74 6573 7465 6e76 5d63 6f6d   = {[testenv]com
-00000220: 6d61 6e64 737d 0d0a 0d0a 5b74 6573 7465  mands}....[teste
-00000230: 6e76 3a63 6f76 6572 5d0d 0a62 6173 6570  nv:cover]..basep
-00000240: 7974 686f 6e20 3d20 7079 7468 6f6e 322e  ython = python2.
-00000250: 370d 0a63 6f6d 6d61 6e64 7320 3d0d 0a20  7..commands =.. 
-00000260: 2020 2070 792e 7465 7374 202d 2d63 6f76     py.test --cov
-00000270: 3d73 7570 6572 7669 736f 7220 2d2d 636f  =supervisor --co
-00000280: 762d 7265 706f 7274 3d74 6572 6d2d 6d69  v-report=term-mi
-00000290: 7373 696e 6720 2d2d 636f 762d 7265 706f  ssing --cov-repo
-000002a0: 7274 3d78 6d6c 207b 706f 7361 7267 737d  rt=xml {posargs}
-000002b0: 0d0a 6465 7073 203d 0d0a 2020 2020 7b5b  ..deps =..    {[
-000002c0: 7465 7374 656e 765d 6465 7073 7d0d 0a20  testenv]deps}.. 
-000002d0: 2020 2070 7974 6573 742d 636f 760d 0a0d     pytest-cov...
-000002e0: 0a5b 7465 7374 656e 763a 636f 7665 7233  .[testenv:cover3
-000002f0: 5d0d 0a62 6173 6570 7974 686f 6e20 3d20  ]..basepython = 
-00000300: 7079 7468 6f6e 332e 370d 0a63 6f6d 6d61  python3.7..comma
-00000310: 6e64 7320 3d0d 0a20 2020 2070 792e 7465  nds =..    py.te
-00000320: 7374 202d 2d63 6f76 3d73 7570 6572 7669  st --cov=supervi
-00000330: 736f 7220 2d2d 636f 762d 7265 706f 7274  sor --cov-report
-00000340: 3d74 6572 6d2d 6d69 7373 696e 6720 2d2d  =term-missing --
-00000350: 636f 762d 7265 706f 7274 3d78 6d6c 207b  cov-report=xml {
-00000360: 706f 7361 7267 737d 0d0a 6465 7073 203d  posargs}..deps =
-00000370: 0d0a 2020 2020 7b5b 7465 7374 656e 763a  ..    {[testenv:
-00000380: 636f 7665 725d 6465 7073 7d0d 0a0d 0a5b  cover]deps}....[
-00000390: 7465 7374 656e 763a 646f 6373 5d0d 0a64  testenv:docs]..d
-000003a0: 6570 7320 3d0d 0a20 2020 2053 7068 696e  eps =..    Sphin
-000003b0: 780d 0a20 2020 2072 6561 646d 650d 0a20  x..    readme.. 
-000003c0: 2020 2073 6574 7570 746f 6f6c 7320 3e3d     setuptools >=
-000003d0: 2031 382e 350d 0a77 6869 7465 6c69 7374   18.5..whitelist
-000003e0: 5f65 7874 6572 6e61 6c73 203d 206d 616b  _externals = mak
-000003f0: 650d 0a63 6f6d 6d61 6e64 7320 3d0d 0a20  e..commands =.. 
-00000400: 2020 206d 616b 6520 2d43 2064 6f63 7320     make -C docs 
-00000410: 6874 6d6c 2042 5549 4c44 4449 523d 7b65  html BUILDDIR={e
-00000420: 6e76 746d 7064 6972 7d20 2253 5048 494e  nvtmpdir} "SPHIN
-00000430: 584f 5054 533d 2d57 202d 4522 0d0a 2020  XOPTS=-W -E"..  
-00000440: 2020 7079 7468 6f6e 2073 6574 7570 2e70    python setup.p
-00000450: 7920 6368 6563 6b20 2d6d 202d 7220 2d73  y check -m -r -s
-00000460: 0d0a                                     ..
+00000040: 2c70 7933 382c 7079 3339 2c70 7933 3130  ,py38,py39,py310
+00000050: 0d0a 0d0a 5b74 6573 7465 6e76 5d0d 0a64  ....[testenv]..d
+00000060: 6570 7320 3d0d 0a20 2020 2061 7474 7273  eps =..    attrs
+00000070: 203c 2032 312e 312e 3020 2023 2073 6565   < 21.1.0  # see
+00000080: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
+00000090: 636f 6d2f 7079 7468 6f6e 2d61 7474 7273  com/python-attrs
+000000a0: 2f61 7474 7273 2f70 756c 6c2f 3630 380d  /attrs/pull/608.
+000000b0: 0a20 2020 2070 7974 6573 740d 0a20 2020  .    pytest..   
+000000c0: 2070 6578 7065 6374 203d 3d20 342e 372e   pexpect == 4.7.
+000000d0: 3020 2023 2073 6565 2068 7474 7073 3a2f  0  # see https:/
+000000e0: 2f67 6974 6875 622e 636f 6d2f 5375 7065  /github.com/Supe
+000000f0: 7276 6973 6f72 2f73 7570 6572 7669 736f  rvisor/superviso
+00000100: 722f 6973 7375 6573 2f31 3332 370d 0a20  r/issues/1327.. 
+00000110: 2020 206d 6f63 6b20 3e3d 2030 2e35 2e30     mock >= 0.5.0
+00000120: 0d0a 2320 5061 7373 696e 6720 7769 6e64  ..# Passing wind
+00000130: 6972 2066 6169 6c73 206f 6e20 4c69 6e75  ir fails on Linu
+00000140: 7820 6265 6361 7573 6520 6974 2069 7320  x because it is 
+00000150: 6e6f 7420 6465 6669 6e65 642e 0d0a 7061  not defined...pa
+00000160: 7373 656e 7620 3d20 454e 445f 544f 5f45  ssenv = END_TO_E
+00000170: 4e44 2077 696e 6469 720d 0a63 6f6d 6d61  ND windir..comma
+00000180: 6e64 7320 3d0d 0a20 2020 2070 7974 6573  nds =..    pytes
+00000190: 7420 2d2d 6361 7074 7572 653d 6e6f 207b  t --capture=no {
+000001a0: 706f 7361 7267 737d 0d0a 0d0a 5b74 6573  posargs}....[tes
+000001b0: 7465 6e76 3a70 7932 372d 636f 6e66 6967  tenv:py27-config
+000001c0: 7061 7273 6572 5d0d 0a3b 7365 6520 6874  parser]..;see ht
+000001d0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+000001e0: 2f53 7570 6572 7669 736f 722f 7375 7065  /Supervisor/supe
+000001f0: 7276 6973 6f72 2f69 7373 7565 732f 3132  rvisor/issues/12
+00000200: 3330 0d0a 6261 7365 7079 7468 6f6e 203d  30..basepython =
+00000210: 2070 7974 686f 6e32 2e37 0d0a 6465 7073   python2.7..deps
+00000220: 203d 0d0a 2020 2020 7b5b 7465 7374 656e   =..    {[testen
+00000230: 765d 6465 7073 7d0d 0a20 2020 2063 6f6e  v]deps}..    con
+00000240: 6669 6770 6172 7365 720d 0a70 6173 7365  figparser..passe
+00000250: 6e76 203d 207b 5b74 6573 7465 6e76 5d70  nv = {[testenv]p
+00000260: 6173 7365 6e76 7d0d 0a63 6f6d 6d61 6e64  assenv}..command
+00000270: 7320 3d20 7b5b 7465 7374 656e 765d 636f  s = {[testenv]co
+00000280: 6d6d 616e 6473 7d0d 0a0d 0a5b 7465 7374  mmands}....[test
+00000290: 656e 763a 636f 7665 725d 0d0a 6261 7365  env:cover]..base
+000002a0: 7079 7468 6f6e 203d 2070 7974 686f 6e32  python = python2
+000002b0: 2e37 0d0a 636f 6d6d 616e 6473 203d 0d0a  .7..commands =..
+000002c0: 2020 2020 7079 7465 7374 202d 2d63 6170      pytest --cap
+000002d0: 7475 7265 3d6e 6f20 2d2d 636f 763d 7375  ture=no --cov=su
+000002e0: 7065 7276 6973 6f72 202d 2d63 6f76 2d72  pervisor --cov-r
+000002f0: 6570 6f72 743d 7465 726d 2d6d 6973 7369  eport=term-missi
+00000300: 6e67 202d 2d63 6f76 2d72 6570 6f72 743d  ng --cov-report=
+00000310: 786d 6c20 7b70 6f73 6172 6773 7d0d 0a64  xml {posargs}..d
+00000320: 6570 7320 3d0d 0a20 2020 207b 5b74 6573  eps =..    {[tes
+00000330: 7465 6e76 5d64 6570 737d 0d0a 2020 2020  tenv]deps}..    
+00000340: 7079 7465 7374 2d63 6f76 0d0a 0d0a 5b74  pytest-cov....[t
+00000350: 6573 7465 6e76 3a63 6f76 6572 335d 0d0a  estenv:cover3]..
+00000360: 6261 7365 7079 7468 6f6e 203d 2070 7974  basepython = pyt
+00000370: 686f 6e33 2e38 0d0a 636f 6d6d 616e 6473  hon3.8..commands
+00000380: 203d 0d0a 2020 2020 7079 7465 7374 202d   =..    pytest -
+00000390: 2d63 6170 7475 7265 3d6e 6f20 2d2d 636f  -capture=no --co
+000003a0: 763d 7375 7065 7276 6973 6f72 202d 2d63  v=supervisor --c
+000003b0: 6f76 2d72 6570 6f72 743d 7465 726d 2d6d  ov-report=term-m
+000003c0: 6973 7369 6e67 202d 2d63 6f76 2d72 6570  issing --cov-rep
+000003d0: 6f72 743d 786d 6c20 7b70 6f73 6172 6773  ort=xml {posargs
+000003e0: 7d0d 0a64 6570 7320 3d0d 0a20 2020 207b  }..deps =..    {
+000003f0: 5b74 6573 7465 6e76 3a63 6f76 6572 5d64  [testenv:cover]d
+00000400: 6570 737d 0d0a 0d0a 5b74 6573 7465 6e76  eps}....[testenv
+00000410: 3a64 6f63 735d 0d0a 6465 7073 203d 0d0a  :docs]..deps =..
+00000420: 2020 2020 5370 6869 6e78 0d0a 2020 2020      Sphinx..    
+00000430: 7265 6164 6d65 0d0a 2020 2020 7365 7475  readme..    setu
+00000440: 7074 6f6f 6c73 203e 3d20 3138 2e35 0d0a  ptools >= 18.5..
+00000450: 616c 6c6f 776c 6973 745f 6578 7465 726e  allowlist_extern
+00000460: 616c 7320 3d20 6d61 6b65 0d0a 636f 6d6d  als = make..comm
+00000470: 616e 6473 203d 0d0a 2020 2020 6d61 6b65  ands =..    make
+00000480: 202d 4320 646f 6373 2068 746d 6c20 4255   -C docs html BU
+00000490: 494c 4444 4952 3d7b 656e 7674 6d70 6469  ILDDIR={envtmpdi
+000004a0: 727d 2022 5350 4849 4e58 4f50 5453 3d2d  r} "SPHINXOPTS=-
+000004b0: 5720 2d45 220d 0a20 2020 2070 7974 686f  W -E"..    pytho
+000004c0: 6e20 7365 7475 702e 7079 2063 6865 636b  n setup.py check
+000004d0: 202d 6d20 2d72 202d 730d 0a               -m -r -s..
```

